(function(a,b){function c(){a.removeEventListener("load",c,!1);h=!0}function d(a){return m=m||new d.Class(a)}function f(a,b){for(var d in b)a[d]=b[d];return a}function e(){"#ath"==b.location.hash&&history.replaceState("",a.document.title,b.location.href.split("#")[0]);l.test(b.location.href)&&history.replaceState("",a.document.title,b.location.href.replace(l,"$1"));q.test(b.location.search)&&history.replaceState("",a.document.title,b.location.href.replace(q,"$2"))}var g="addEventListener"in a,h=!1;
"complete"===b.readyState?h=!0:g&&a.addEventListener("load",c,!1);var l=/\/ath(\/)?$/,q=/([\?&]ath=[^&]*$|&ath=[^&]*(&))/,m;d.intl={de_de:{ios:"Um diese Web-App zum Home-Bildschirm hinzuzuf\u00fcgen, tippen Sie auf %icon und dann <strong>Zum Home-Bildschirm</strong>.",android:"Um diese Web-App zum Home-Bildschirm hinzuzuf\u00fcgen, \u00f6ffnen Sie das Men\u00fc und tippen dann auf <strong>Zum Startbildschirm hinzuf\u00fcgen</strong>. <small>Wenn Ihr Ger\u00e4t eine Men\u00fctaste hat, l\u00e4sst sich das Browsermen\u00fc \u00fcber diese \u00f6ffnen. Ansonsten tippen Sie auf %icon.</small>"},
da_dk:{ios:"For at tilf\u00f8je denne web app til hjemmesk\u00e6rmen: Tryk %icon og derefter <strong>F\u00f8j til hjemmesk\u00e6rm</strong>.",android:"For at tilf\u00f8je denne web app til hjemmesk\u00e6rmen, \u00e5bn browser egenskaber menuen og tryk p\u00e5 <strong>F\u00f8j til hjemmesk\u00e6rm</strong>. <small>Denne menu kan tilg\u00e5s ved at trykke p\u00e5 menu knappen, hvis din enhed har en, eller ved at trykke p\u00e5 det \u00f8verste h\u00f8jre menu ikon %icon.</small>"},en_us:{ios:"To add this web app to the home screen: tap %icon and then <strong>Add to Home Screen</strong>.",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},es_es:{ios:"Para a\u00f1adir esta aplicaci\u00f3n web a la pantalla de inicio: pulsa %icon y selecciona <strong>A\u00f1adir a pantalla de inicio</strong>.",android:"Para a\u00f1adir esta aplicaci\u00f3n web a la pantalla de inicio, abre las opciones y pulsa <strong>A\u00f1adir a pantalla inicio</strong>. <small>El men\u00fa se puede acceder pulsando el bot\u00f3n t\u00e1ctil en caso de tenerlo, o bien el icono de la parte superior derecha de la pantalla %icon.</small>"},
fi_fi:{ios:"Liit\u00e4 t\u00e4m\u00e4 sovellus kotivalikkoon: klikkaa %icon ja t\u00e4m\u00e4n j\u00e4lkeen <strong>Lis\u00e4\u00e4 kotivalikkoon</strong>.",android:"Lis\u00e4t\u00e4ksesi t\u00e4m\u00e4n sovelluksen aloitusn\u00e4yt\u00f6lle, avaa selaimen valikko ja klikkaa t\u00e4hti -ikonia tai <strong>Lis\u00e4\u00e4 aloitusn\u00e4yt\u00f6lle teksti\u00e4</strong>. <small>Valikkoon p\u00e4\u00e4see my\u00f6s painamalla menuvalikkoa, jos laitteessasi on sellainen tai koskettamalla oikealla yl\u00e4kulmassa menu ikonia %icon.</small>"},
fr_fr:{ios:"Pour ajouter cette application web sur l'\u00e9cran d'accueil : Appuyez %icon et s\u00e9lectionnez <strong>Ajouter sur l'\u00e9cran d'accueil</strong>.",android:'Pour ajouter cette application web sur l\'\u00e9cran d\'accueil : Appuyez sur le bouton "menu", puis sur <strong>Ajouter sur l\'\u00e9cran d\'accueil</strong>. <small>Le menu peut-\u00eatre accessible en appyant sur le bouton "menu" du t\u00e9l\u00e9phone s\'il en poss\u00e8de un <i class="fa fa-bars"></i>. Sinon, il se trouve probablement dans la coin sup\u00e9rieur droit du navigateur %icon.</small>'},
he_il:{ios:'<span dir="rtl">\u05dc\u05d4\u05d5\u05e1\u05e4\u05ea \u05d4\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d4 \u05dc\u05de\u05e1\u05da \u05d4\u05d1\u05d9\u05ea: \u05dc\u05dc\u05d7\u05d5\u05e5 \u05e2\u05dc %icon \u05d5\u05d0\u05d6 <strong>\u05d4\u05d5\u05e1\u05e3 \u05dc\u05de\u05e1\u05da \u05d4\u05d1\u05d9\u05ea</strong>.</span>',android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},
hu_hu:{ios:"Ha hozz\u00e1 szeretn\u00e9 adni ezt az alkalmaz\u00e1st a kezd\u0151k\u00e9perny\u0151j\u00e9hez, \u00e9rintse meg a k\u00f6vetkez\u0151 ikont: %icon , majd a <strong>Hozz\u00e1ad\u00e1s a kezd\u0151k\u00e9perny\u0151h\u00f6z</strong> men\u00fcpontot.",android:"Ha hozz\u00e1 szeretn\u00e9 adni ezt az alkalmaz\u00e1st a kezd\u0151k\u00e9perny\u0151j\u00e9hez, a b\u00f6ng\u00e9sz\u0151 men\u00fcj\u00e9ben kattintson a <strong>Hozz\u00e1ad\u00e1s a kezd\u0151k\u00e9perny\u0151h\u00f6z</strong> men\u00fcpontra. <small>A b\u00f6ng\u00e9sz\u0151 men\u00fcj\u00e9t a k\u00f6vetkez\u0151 ikon meg\u00e9rint\u00e9s\u00e9vel tudja megnyitni: %icon.</small>"},
it_it:{ios:"Per aggiungere questa web app alla schermata iniziale: premi %icon e poi <strong>Aggiungi a Home</strong>.",android:"Per aggiungere questa web app alla schermata iniziale, apri il menu opzioni del browser e premi su <strong>Aggiungi alla homescreen</strong>. <small>Puoi accedere al menu premendo il pulsante hardware delle opzioni se la tua device ne ha uno, oppure premendo l'icona %icon in alto a destra.</small>"},ja_jp:{ios:"\u3053\u306e\u30a6\u30a7\u30d7\u30a2\u30d7\u30ea\u3092\u30db\u30fc\u30e0\u753b\u9762\u306b\u8ffd\u52a0\u3059\u308b\u305f\u3081\u306b%icon\u3092\u62bc\u3057\u3066<strong>\u30db\u30fc\u30e0\u753b\u9762\u306b\u8ffd\u52a0</strong>\u3002",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},ko_kr:{ios:"\ud648 \ud654\uba74\uc5d0 \ubc14\ub85c\uac00\uae30 \uc0dd\uc131: %icon \uc744 \ud074\ub9ad\ud55c \ud6c4 <strong>\ud648 \ud654\uba74\uc5d0 \ucd94\uac00</strong>.",android:"\ube0c\ub77c\uc6b0\uc800 \uc635\uc158 \uba54\ub274\uc758 <string>\ud648 \ud654\uba74\uc5d0 \ucd94\uac00</string>\ub97c \ud074\ub9ad\ud558\uc5ec \ud648\ud654\uba74\uc5d0 \ubc14\ub85c\uac00\uae30\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. <small>\uc635\uc158 \uba54\ub274\ub294 \uc7a5\uce58\uc758 \uba54\ub274 \ubc84\ud2bc\uc744 \ub204\ub974\uac70\ub098 \uc624\ub978\ucabd \uc0c1\ub2e8\uc758 \uba54\ub274 \uc544\uc774\ucf58 %icon\uc744 \ud074\ub9ad\ud558\uc5ec \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</small>"},
nb_no:{ios:"For \u00e5 installere denne appen p\u00e5 hjem-skjermen: trykk p\u00e5 %icon og deretter <strong>Legg til p\u00e5 Hjem-skjerm</strong>.",android:"For \u00e5 legge til denne webappen p\u00e5 startsiden \u00e5pner en nettlesermenyen og velger <strong>Legg til p\u00e5 startsiden</strong>. <small>Menyen \u00e5pnes ved \u00e5 trykke p\u00e5 den fysiske menyknappen hvis enheten har det, eller ved \u00e5 trykke p\u00e5 menyikonet \u00f8verst til h\u00f8yre %icon.</small>"},pt_br:{ios:"Para adicionar este app \u00e0 tela de in\u00edcio: clique %icon e ent\u00e3o <strong>Tela de in\u00edcio</strong>.",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},pt_pt:{ios:"Para adicionar esta app ao ecr\u00e3 principal: clique %icon e depois <strong>Ecr\u00e3 principal</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},
nl_nl:{ios:"Om deze webapp op je telefoon te installeren, klik op %icon en dan <strong>Zet in beginscherm</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},ru_ru:{ios:'\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u0441\u0430\u0439\u0442 \u043d\u0430 \u0441\u0432\u043e\u0439 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u044d\u043a\u0440\u0430\u043d, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0438\u043a\u043e\u043d\u043a\u0443 %icon \u0438 \u0437\u0430\u0442\u0435\u043c <strong>\u041d\u0430 \u044d\u043a\u0440\u0430\u043d "\u0414\u043e\u043c\u043e\u0439"</strong>.',
android:"\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0430\u0439\u0442 \u043d\u0430 \u0441\u0432\u043e\u0439 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u044d\u043a\u0440\u0430\u043d, \u043e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u043c\u0435\u043d\u044e \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 <strong>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u044b\u0439 \u044d\u043a\u0440\u0430\u043d</strong>. <small>\u041c\u0435\u043d\u044e \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c, \u043d\u0430\u0436\u0430\u0432 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \u043c\u0435\u043d\u044e \u0432\u0430\u0448\u0435\u0433\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430, \u0435\u0441\u043b\u0438 \u043e\u043d\u0430 \u0435\u0441\u0442\u044c. \u0418\u043b\u0438 \u043d\u0430\u0439\u0434\u0438\u0442\u0435 \u0438\u043a\u043e\u043d\u043a\u0443 \u0441\u0432\u0435\u0440\u0445\u0443 \u0441\u043f\u0440\u0430\u0432\u0430 %icon[\u0438\u043a\u043e\u043d\u043a\u0430].</small>"},
sv_se:{ios:"F\u00f6r att l\u00e4gga till denna webbapplikation p\u00e5 hemsk\u00e4rmen: tryck p\u00e5 %icon och d\u00e4refter <strong>L\u00e4gg till p\u00e5 hemsk\u00e4rmen</strong>.",android:"F\u00f6r att l\u00e4gga till den h\u00e4r webbappen p\u00e5 hemsk\u00e4rmen \u00f6ppnar du webbl\u00e4sarens alternativ-meny och v\u00e4ljer <strong>L\u00e4gg till p\u00e5 startsk\u00e4rmen</strong>. <small>Man hittar menyn genom att trycka p\u00e5 h\u00e5rdvaruknappen om din enhet har en s\u00e5dan, eller genom att trycka p\u00e5 menyikonen h\u00f6gst upp till h\u00f6ger %icon.</small>"},
zh_cn:{ios:"\u5982\u8981\u628a\u5e94\u7528\u7a0b\u5e8f\u52a0\u81f3\u4e3b\u5c4f\u5e55,\u8bf7\u70b9\u51fb%icon, \u7136\u540e<strong>\u6dfb\u52a0\u5230\u4e3b\u5c4f\u5e55</strong>",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},zh_tw:{ios:"\u5982\u8981\u628a\u61c9\u7528\u7a0b\u5f0f\u52a0\u81f3\u4e3b\u5c4f\u5e55, \u8acb\u9ede\u64ca%icon, \u7136\u5f8c<strong>\u52a0\u81f3\u4e3b\u5c4f\u5e55</strong>.",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"}};for(var p in d.intl)d.intl[p.substr(0,2)]=d.intl[p];d.defaults={appID:"org.cubiq.addtohome",fontSize:15,debug:!1,logging:!1,modal:!1,mandatory:!1,autostart:!0,skipFirstVisit:!1,startDelay:1,lifespan:15,displayPace:1440,maxDisplayCount:0,
icon:!0,message:"",validLocation:[],onInit:null,onShow:null,onRemove:null,onAdd:null,onPrivate:null,privateModeOverride:!1,detectHomescreen:!1};p=a.navigator.userAgent;var t=a.navigator;f(d,{hasToken:"#ath"==b.location.hash||l.test(b.location.href)||q.test(b.location.search),isRetina:a.devicePixelRatio&&1<a.devicePixelRatio,isIDevice:/iphone|ipod|ipad/i.test(p),isMobileChrome:-1<p.indexOf("Android")&&/Chrome\/[.0-9]*/.test(p)&&-1==p.indexOf("Version"),isMobileIE:-1<p.indexOf("Windows Phone"),language:t.language&&
t.language.toLowerCase().replace("-","_")||""});d.language=d.language&&d.language in d.intl?d.language:"en_us";d.isMobileSafari=d.isIDevice&&-1<p.indexOf("Safari")&&0>p.indexOf("CriOS");d.OS=d.isIDevice?"ios":d.isMobileChrome?"android":d.isMobileIE?"windows":"unsupported";d.OSVersion=p.match(/(OS|Android) (\d+[_\.]\d+)/);d.OSVersion=d.OSVersion&&d.OSVersion[2]?+d.OSVersion[2].replace("_","."):0;d.isStandalone="standalone"in a.navigator&&a.navigator.standalone;d.isTablet=d.isMobileSafari&&-1<p.indexOf("iPad")||
d.isMobileChrome&&0>p.indexOf("Mobile");d.isCompatible=d.isMobileSafari&&6<=d.OSVersion||d.isMobileChrome;var v={lastDisplayTime:0,returningVisitor:!1,displayCount:0,optedout:!1,added:!1};d.removeSession=function(a){try{if(!localStorage)throw Error("localStorage is not defined");localStorage.removeItem(a||d.defaults.appID)}catch(b){}};d.doLog=function(a){this.options.logging&&console.log(a)};d.Class=function(c){this.doLog=d.doLog;this.options=f({},d.defaults);f(this.options,c);c&&c.debug&&"undefined"===
typeof c.logging&&(this.options.logging=!0);if(g)if(this.options.mandatory=this.options.mandatory&&("standalone"in a.navigator||this.options.debug),this.options.modal=this.options.modal||this.options.mandatory,this.options.mandatory&&(this.options.startDelay=-.5),this.options.detectHomescreen=!0===this.options.detectHomescreen?"hash":this.options.detectHomescreen,this.options.debug&&(d.isCompatible=!0,d.OS="string"==typeof this.options.debug?this.options.debug:"unsupported"==d.OS?"android":d.OS,d.OSVersion=
"ios"==d.OS?"8":"4"),this.container=b.documentElement,this.session=(this.session=this.getItem(this.options.appID))?JSON.parse(this.session):void 0,!d.hasToken||d.isCompatible&&this.session||(d.hasToken=!1,e()),d.isCompatible){this.session=this.session||v;try{if(!localStorage)throw Error("localStorage is not defined");localStorage.setItem(this.options.appID,JSON.stringify(this.session));d.hasLocalStorage=!0}catch(h){d.hasLocalStorage=!1,this.options.onPrivate&&this.options.onPrivate.call(this)}c=!this.options.validLocation.length;
for(var q=this.options.validLocation.length;q--;)if(this.options.validLocation[q].test(b.location.href)){c=!0;break}this.getItem("addToHome")&&this.optOut();if(this.session.optedout)this.doLog("Add to homescreen: not displaying callout because user opted out");else if(this.session.added)this.doLog("Add to homescreen: not displaying callout because already added to the homescreen");else if(c)if(d.isStandalone)this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&d.hasLocalStorage&&
this.options.onAdd.call(this)),this.doLog("Add to homescreen: not displaying callout because in standalone mode");else{if(this.options.detectHomescreen){if(d.hasToken){e();this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&d.hasLocalStorage&&this.options.onAdd.call(this));this.doLog("Add to homescreen: not displaying callout because URL has token, so we are likely coming from homescreen");return}"hash"==this.options.detectHomescreen?history.replaceState("",a.document.title,
b.location.href+"#ath"):"smartURL"==this.options.detectHomescreen?history.replaceState("",a.document.title,b.location.href.replace(/(\/)?$/,"/ath$1")):history.replaceState("",a.document.title,b.location.href+(b.location.search?"&":"?")+"ath=")}if(!this.session.returningVisitor&&(this.session.returningVisitor=!0,this.updateSession(),this.options.skipFirstVisit)){this.doLog("Add to homescreen: not displaying callout because skipping first visit");return}this.options.privateModeOverride||d.hasLocalStorage?
(this.ready=!0,this.options.onInit&&this.options.onInit.call(this),this.options.autostart&&(this.doLog("Add to homescreen: autostart displaying callout"),this.show())):this.doLog("Add to homescreen: not displaying callout because browser is in private mode")}else this.doLog("Add to homescreen: not displaying callout because not a valid location")}else this.doLog("Add to homescreen: not displaying callout because device not supported")};d.Class.prototype={events:{load:"_delayedShow",error:"_delayedShow",
orientationchange:"resize",resize:"resize",scroll:"resize",click:"remove",touchmove:"_preventDefault",transitionend:"_removeElements",webkitTransitionEnd:"_removeElements",MSTransitionEnd:"_removeElements"},handleEvent:function(a){var b=this.events[a.type];if(b)this[b](a)},show:function(c){if(this.options.autostart&&!h)setTimeout(this.show.bind(this),50);else if(this.shown)this.doLog("Add to homescreen: not displaying callout because already shown on screen");else{var f=Date.now(),e=this.session.lastDisplayTime;
if(!0!==c){if(!this.ready){this.doLog("Add to homescreen: not displaying callout because not ready");return}if(f-e<6E4*this.options.displayPace){this.doLog("Add to homescreen: not displaying callout because displayed recently");return}if(this.options.maxDisplayCount&&this.session.displayCount>=this.options.maxDisplayCount){this.doLog("Add to homescreen: not displaying callout because displayed too many times already");return}}this.shown=!0;this.session.lastDisplayTime=f;this.session.displayCount++;
this.updateSession();this.applicationIcon||(this.applicationIcon="ios"==d.OS?b.querySelector('head link[rel^=apple-touch-icon][sizes="152x152"],head link[rel^=apple-touch-icon][sizes="144x144"],head link[rel^=apple-touch-icon][sizes="120x120"],head link[rel^=apple-touch-icon][sizes="114x114"],head link[rel^=apple-touch-icon]'):b.querySelector('head link[rel^="shortcut icon"][sizes="196x196"],head link[rel^=apple-touch-icon]'));c="";"object"==typeof this.options.message&&d.language in this.options.message?
c=this.options.message[d.language][d.OS]:"object"==typeof this.options.message&&d.OS in this.options.message?c=this.options.message[d.OS]:this.options.message in d.intl?c=d.intl[this.options.message][d.OS]:""!==this.options.message?c=this.options.message:d.OS in d.intl[d.language]&&(c=d.intl[d.language][d.OS]);c="<p>"+c.replace(/%icon(?:\[([^\]]+)\])?/gi,function(a,b){return'<span class="ath-action-icon">'+(b?b:"icon")+"</span>"});NaN;this.viewport=b.createElement("div");this.viewport.className="ath-viewport";
this.options.modal&&(this.viewport.className+=" ath-modal");this.options.mandatory&&(this.viewport.className+=" ath-mandatory");this.viewport.style.position="absolute";this.element=b.createElement("div");this.element.className="ath-container ath-"+d.OS+" ath-"+d.OS+(d.OSVersion+"").substr(0,1)+" ath-"+(d.isTablet?"tablet":"phone");this.element.style.cssText="-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0s;-webkit-transition-timing-function:ease-out;transition-property:transform,opacity;transition-duration:0s;transition-timing-function:ease-out;";
this.element.style.webkitTransform="translate3d(0,-"+a.innerHeight+"px,0)";this.element.style.transform="translate3d(0,-"+a.innerHeight+"px,0)";this.options.icon&&this.applicationIcon&&(this.element.className+=" ath-icon",this.img=b.createElement("img"),this.img.className="ath-application-icon",this.img.addEventListener("load",this,!1),this.img.addEventListener("error",this,!1),this.img.src=this.applicationIcon.href,this.element.appendChild(this.img));this.element.innerHTML+=c;this.viewport.style.left=
"-99999em";this.viewport.appendChild(this.element);this.container.appendChild(this.viewport);this.img?this.doLog("Add to homescreen: not displaying callout because waiting for img to load"):this._delayedShow()}},_delayedShow:function(a){setTimeout(this._show.bind(this),1E3*this.options.startDelay+500)},_show:function(){var d=this;this.updateViewport();a.addEventListener("resize",this,!1);a.addEventListener("scroll",this,!1);a.addEventListener("orientationchange",this,!1);this.options.modal&&b.addEventListener("touchmove",
this,!0);this.options.mandatory||setTimeout(function(){d.element.addEventListener("click",d,!0)},1E3);setTimeout(function(){d.element.style.webkitTransitionDuration="1.2s";d.element.style.transitionDuration="1.2s";d.element.style.webkitTransform="translate3d(0,0,0)";d.element.style.transform="translate3d(0,0,0)"},0);this.options.lifespan&&(this.removeTimer=setTimeout(this.remove.bind(this),1E3*this.options.lifespan));this.options.onShow&&this.options.onShow.call(this)},remove:function(){clearTimeout(this.removeTimer);
this.img&&(this.img.removeEventListener("load",this,!1),this.img.removeEventListener("error",this,!1));a.removeEventListener("resize",this,!1);a.removeEventListener("scroll",this,!1);a.removeEventListener("orientationchange",this,!1);b.removeEventListener("touchmove",this,!0);this.element.removeEventListener("click",this,!0);this.element.addEventListener("transitionend",this,!1);this.element.addEventListener("webkitTransitionEnd",this,!1);this.element.addEventListener("MSTransitionEnd",this,!1);this.element.style.webkitTransitionDuration=
"0.3s";this.element.style.opacity="0"},_removeElements:function(){this.element.removeEventListener("transitionend",this,!1);this.element.removeEventListener("webkitTransitionEnd",this,!1);this.element.removeEventListener("MSTransitionEnd",this,!1);this.container.removeChild(this.viewport);this.shown=!1;this.options.onRemove&&this.options.onRemove.call(this)},updateViewport:function(){if(this.shown){this.viewport.style.width=a.innerWidth+"px";this.viewport.style.height=a.innerHeight+"px";this.viewport.style.left=
a.scrollX+"px";this.viewport.style.top=a.scrollY+"px";var c=b.documentElement.clientWidth;this.orientation=c>b.documentElement.clientHeight?"landscape":"portrait";var f="ios"==d.OS?"portrait"==this.orientation?screen.width:screen.height:screen.width;this.scale=screen.width>c?1:f/a.innerWidth;this.element.style.fontSize=this.options.fontSize/this.scale+"px"}},resize:function(){clearTimeout(this.resizeTimer);this.resizeTimer=setTimeout(this.updateViewport.bind(this),100)},updateSession:function(){!1!==
d.hasLocalStorage&&localStorage&&localStorage.setItem(this.options.appID,JSON.stringify(this.session))},clearSession:function(){this.session=v;this.updateSession()},getItem:function(a){try{if(!localStorage)throw Error("localStorage is not defined");return localStorage.getItem(a)}catch(b){d.hasLocalStorage=!1}},optOut:function(){this.session.optedout=!0;this.updateSession()},optIn:function(){this.session.optedout=!1;this.updateSession()},clearDisplayCount:function(){this.session.displayCount=0;this.updateSession()},
_preventDefault:function(a){a.preventDefault();a.stopPropagation()}};a.addToHomescreen=d})(window,document);$(document).bind("mobileinit",function(){$.mobile.ajaxEnabled=!1;$.autoInitializePage=!0});
function showFooterMessage(a){"undefined"!=a.status?"success"==a.status?$("prefooter > .container").html('<p style="background: #128c44; color: #fff; padding: 20px;><span class="circle-ok"><span class="glyphicon glyphicon-ok" style="margin-right:10px;"></span></span>'+a.mess+"</p>"):"alert"==a.status&&$("prefooter > .container").html('<p style="background: #fcaa57; color: #fff; padding: 20px;"><span class="circle-alert" style="margin-right:10px;"><span>!</span></span>'+a.mess+"</p>"):($("prefooter > .container").html('<p style="">'+
a.mess+"</p>"),$("prefooter > .container p").css("background",a.clr),$("prefooter > .container p").css("color",a.clrT),$("prefooter > .container p").css("padding","20px"));$("prefooter").show();$("prefooter").delay(a.anim_a).fadeOut(a.anim_b,function(){$("prefooter").hide();a.onFinish&&eval(a.onFinish)})}
function appendFooterMessage(a){"undefined"!=a.status?"success"==a.status?$("prefooter > .container").append('<p style="background: #128c44; color: #fff; padding: 20px;><span class="circle-ok"><span class="glyphicon glyphicon-ok"></span></span>'+a.mess+"</p>"):"alert"==a.status&&$("prefooter > .container").append('<p style="background: #fcaa57; color: #fff; padding: 20px;><span class="circle-alert"><span>!</span></span>'+a.mess+"</p>"):($("prefooter > .container").append('<p style="">'+a.mess+"</p>"),
$("prefooter > .container p").css("background",a.clr),$("prefooter > .container p").css("color",a.clrT),$("prefooter > .container p").css("padding","20px"));$("prefooter").show().delay(1700);$("prefooter").delay(a.anim_a).fadeOut(a.anim_b,function(){$("prefooter").hide();a.onFinish&&eval(a.onFinish)})}
$(document).ready(function(){$("prefooter").hide();$(".int_less_publish").change(function(){var a=$("form#int_lesson_form").serialize();$.ajax({url:"/ajax/interactive_lessons_ajax/save_publish/",dataType:"json",type:"POST",data:a,success:function(a){}})});$("a.template_id").click(function(a){a.preventDefault();a=$(this).attr("id").replace("template_","");$("div.ui-controlgroup-controls").find("a.active_template").removeClass("active_template");$(this).addClass("active_template");$("input#tmpl_id").val(a)});
var a=$("input#tmpl_id").val();""!==a&&$("#template_"+a).addClass("active_template");$(".add_question a").on("click",function(a){a.preventDefault();var c=$(".hidden.question_box:first").clone(!0,!0);a=$("input.subject_id").val();var d=$("input.module_id").val(),f=$("input.lesson_id").val();$("input.int_les_id").val();var e=$("input.int_assessment_id").val();$("#questions_wrap").append(c);c=parseInt($("#questions_wrap .question_box").last().index());$("#questions_wrap .question_box").last().find("input.question_text").attr("name",
"questions["+c+"][question_text]");$("#questions_wrap .question_box").last().find("input.question_id").attr("name","questions[question]["+c+"][question_id]");$("#questions_wrap .question_box").last().find("input.resource_id").attr("name","questions["+c+"][question_resource_id]");$("#questions_wrap .question_box").last().find("a.add_q_ressource").attr("href","/c1/index/question/"+c+"/"+a+"/"+d+"/"+f+"/"+e);$(".question_box").last().removeClass("hidden")});$(".add_option").on("click",function(a){a.preventDefault();
var c=$(this).parent().parent().find("input.add_option_text");a=c.val();$(c).val("");c=$(this).parent().parent().parent().find(".q_options_list").children().length;if(10>=c){var d=$(this).parent().parent().parent().find(".hidden.q_option").clone();$.each(d.find("select"),function(a,b){var d=$(this);a=d.attr("id");a++;d.attr("id",a);d.slider();d.slider("refresh");d.parent().find(".ui-slider").last().remove()});var f=$(this).parent().parent().parent().find(".q_options_list");$(f).append(d);$(this).parent().parent().parent().find(".q_options_list .q_option:last input.option_text").val(a);
a=parseInt($(this).parent().parent().parent().parent(".question_box").index());$(this).parent().parent().parent().find(".q_options_list .q_option:last input.option_text").attr("name","questions["+a+"][answers]["+(parseInt(c)-1)+"][answer_text]");$(this).parent().parent().parent().find(".q_options_list .q_option:last select.answer").attr("name","questions["+a+"][answers]["+(parseInt(c)-1)+"][answer_true]");$(this).parent().parent().parent().find(".q_options_list .q_option:last").removeClass("hidden")}});
$(document).on("click",".delete_option",function(a){a.preventDefault();$(this).parent().parent(".q_option").remove()});$("a.add_q_ressource").click(function(a){a.preventDefault();a=$("form#int_assessment_form").serialize();var c=$(this).attr("href");$.ajax({url:"/ajax/int_assessment_ajax/save_temp_data/",dataType:"json",type:"POST",data:a,success:function(a){a.success&&(window.location.href=c)}})});$(".colorbox").colorbox({photo:!0,maxWidth:"100%",maxHeight:"100%",onCleanup:function(){$("a.cdownload").remove()},
onClosed:function(){$("a.cdownload").remove()}});"student"==user_type?intervalRes=setInterval(function(){checkRunningLesson()},3E3):"teacher"==user_type?(intervalRes=setInterval(function(){checkRunningLessonForTeacher()},5E3),setInterval(function(){checkOnlineStudents()},5E3)):-1!=window.location.href.indexOf("/e5_teacher")&&-1!=window.location.href.indexOf("/running")&&setInterval(function(){checkOnlineStudents()},5E3);$(".add_option_text").keypress(function(a){if(13==a.which)return a=$(this).parent().parent().parent().find(".add_option"),
$(a).click(),!1});$.each($("textarea[data-autoresize]"),function(){var a=this.offsetHeight-this.clientHeight;$(this).on("keyup input",function(){$(this).css("height","auto").css("height",this.scrollHeight+a);0==$(this).val().length&&$(this).css({height:"62px"})}).removeAttr("data-autoresize")});$("textarea").each(function(){$(this).outerHeight()}).on("keyup",function(){var a=this.scrollHeight,c=$(this).outerHeight();a+2>c&&$(this).scrollTop(0).css({height:a+2+"px"})});$(".keywords").each(function(){var a=
this,c=$(a),d=$("> input",a),f=d.val();ke=f.slice(1,-1);var f=ke.split(","),e=function(c,f){if(c){if(!f){var e=d.val(),e=e.split(",");e.push(c);e=e.join();e=e.toString();e=e.replace(/[\])}[{(]/g,"");d.val(e)}$(".input-container",a).before('<div class="keyword"><span>'+c+'</span><a class="remove"></a></div>');$(".list").html("")}};d.css({display:"none"});c.append('<div class="input-container"><input value="" type="text"><div><div class="list"></div>');f.length&&$.each(f,function(a,b){e(b,!0)});c.on("keyup",
".input-container input",function(){var a=$(this).val(),b=c.data("to");b&&clearTimeout(b);b=!1;a&&(b=setTimeout(function(){$.ajax({url:"/c2/suggestKeywords",data:{q:a},dataType:"json",success:function(a){var b="";$.each(a,function(a,d){b+="<li>"+d+"</li>"});$(".list").html("<ul>"+b+"</ul>")}})},200),c.data("to",b))}).on("keydown",".input-container input",function(a){var b=$(this).val();13==a.keyCode&&b&&($(this).val(""),e(b))}).on("click",".list li",function(){var d=$(this).text();d&&($(".input-container input",
a).val(""),e(d))}).on("click",".keyword .remove",function(){var a=d.val(),a=a.split(","),a=a.toString(),a=a.replace(/[\])}[{(]/g,""),a=a.split(","),b=$(this).parent().index()-2;a.splice(b,1);d.val(a);$(this).parent().remove();$(".list").html("")});$(document).click(function(a){var b=$(".input-container input").val();""!=b&&(e(b),$(".input-container input").val(""));void 0===$(a.target).closest("li")[0]&&$(".list").html("")})});$(".keystudents").each(function(){var a=this,c=$(a),d=$("> input#keystudents",
a),f=d.val();kest1=f.slice(1,-1);var f=kest1.split(","),e=function(c,f,e){c&&(e||(e=d.val(),d.val(e+","+f)),$(".input-container",a).before('<div class="keystudent"><span>'+c+'</span><a rel="'+f+'" class="remove"></a></div>'),$(".list").html(""))};c.append('<div class="input-container"><input value="" type="text"><div><div class="list"></div>');c.on("keyup",".input-container input",function(){var a=$(this).val(),b=c.data("to");b&&clearTimeout(b);b=!1;a&&(b=setTimeout(function(){$.ajax({url:"/f2c_teacher/suggestKeystudents",
data:{q:a},dataType:"json",success:function(a){var b="";$.each(a,function(a,d){b+='<li rel="'+a+'">'+d+"</li>"});$(".list").html("<ul>"+b+"</ul>");updateSlideHeight(".step.s3")}})},200),c.data("to",b))}).on("keydown",".input-container input",function(a){var b=$(this).val(),d=$(this).attr("rel");13==a.keyCode&&b&&($(this).val(""),e(b,d))}).on("click",".list li",function(){var d=$(this).text(),c=$(this).attr("rel");d&&($(".input-container input",a).val(""),e(d,c))}).on("click",".keystudent .remove",
function(){var a=d.val(),a=a.split(","),a=a.toString(),a=a.replace(/[\])}[{(]/g,""),a=a.split(","),b=$(this).parent().index()-2;a.splice(b,1);d.val(a);$(this).parent().remove();$(".list").html("")});$(document).click(function(a){var b=$(".input-container input").val();""!=b&&(e(b),$(".input-container input").val(""));void 0===$(a.target).closest("li")[0]&&$(".list").html("")})});$("select").each(function(){$(this).hasClass("customize")||($(this).addClass("customize"),$(this).after('<span class="select"><span class="v">'+
$("option:selected",this).text()+'</span><span class="a"></span></span>'),$(this).appendTo($(this).next()))});$("span.select select").on("change",function(){$(this).closest(".select").find(".v").text($("option:selected",this).text())})});$(window).load(function(){bg_fix()});$(window).resize(function(){bg_fix()});
function initPublishButton(a,b,c,d){$(a).each(function(){$("input[name="+b+"]").size()&&"1"==$("input[name="+b+"]").val()&&$(this).addClass("active").text(c);$(this).off("click");$(this).on("click",function(){0==disablepublishandsave&&$("input[name="+b+"]").size()&&("1"==$("input[name="+b+"]").val()?($("input[name="+b+"]").val("0"),$(this).removeClass("active").text(d)):($("input[name="+b+"]").val("1"),$(this).addClass("active").text(c)))})})}
function bg_fix(){$(".blue_gradient_bg").height()-parseInt($(".blue_gradient_bg").css("margin-top"))-$("footer").height()-parseInt($("footer").css("border-top-width"))<$(window).height()&&$(".blue_gradient_bg").css("min-height",parseInt($(window).height()-$("footer").height()-parseInt($("footer").css("border-top-width"))-parseInt($(".blue_gradient_bg").css("margin-top")))+"px");$(".red_gradient_bg").height()<$(window).height()&&$(".red_gradient_bg").css("min-height",parseInt($(window).height()-42-
$(".footer_menu").height())+"px");$(".rred_gradient_bg").height()<$(window).height()&&$(".rred_gradient_bg").css("min-height",parseInt($(window).height())+"px");$(".ui-header>.ui-btn-right").css("left",parseInt($(".ui-header").width()/2-$(".ui-header>.ui-btn-right").width()/2)+"px");768<$(window).width()?$(".left_menu_pic").css("height",$(".pic_e5").height()+"px"):$(".left_menu_pic").css("height","auto")}
function getPathnameParts(){var a=window.location.pathname;"/"==a.substr(0,1)&&(a=a.substr(1));return a.split("/")}
function checkRunningLesson(){set_logout();$.ajax({url:"/ajax/running_lesson/index/"+user_id,dataType:"json",success:function(a){if(void 0!==a.subject_id&&void 0!==a.module_id&&void 0!==a.lesson_id&&void 0!==a.secret)if(-1==window.location.href.indexOf("/running")){var b=function(){var b=((new Date).getTime()-c)/1E3;5>b?$("#dialog_title").html('Taking you to interactive lesson: <br /><span style="color:#004400;text-shadow:none;font-weight:bold;font-size:58px;font-style: italics;">'+a.lesson_title+
"</span><br /> with "+a.teacher_first_name+" "+a.teacher_last_name+" in "+Math.floor(5-b)+" seconds..."):(clearInterval(intervalRes),window.location.href="/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/")};clearInterval(intervalRes);$("#staticheader").css("background-color","#009900");$(".gray_top_field").css("background-color","#004400");$("#dialog_title").html("title");$("#dialog").show();var c=(new Date).getTime();b();intervalRes=setInterval(function(){b()},800)}else-1==
window.location.href.indexOf("/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/")&&(window.location.href="/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/");else-1!=window.location.href.indexOf("/running")&&void 0!==a.free_preview&&(window.location.href="/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1")},error:function(a){}})}
function checkRunningLessonForTeacher(){set_logout();$.ajax({url:"/ajax/running_lesson_t/index/"+user_id,dataType:"json",success:function(a){var b=a.running_page-1;if(void 0!==a.subject_id&&void 0!==a.module_id&&void 0!==a.lesson_id&&void 0!==a.running_page&&-1==window.location.href.indexOf("/running")){var c=function(){var c=((new Date).getTime()-d)/1E3;5>c?$("#dialog_title").html('Returning you to your open interactive lesson: <br /><span style="color:#004400;text-shadow:none;font-weight:bold;font-size:58px;font-style: italics;">'+
a.lesson_title+"</span><br /> in "+Math.floor(5-c)+" seconds..."):(clearInterval(intervalRes),window.location.href="/e5_teacher/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/"+b)};clearInterval(intervalRes);$("#staticheader").css("background-color","#009900");$(".gray_top_field").css("background-color","#004400");$("#dialog_title").html("title");$("#dialog").show();var d=(new Date).getTime();c();intervalRes=setInterval(function(){c()},800)}}})}
function checkOnlineStudents(){var a=getPathnameParts()[4];$.ajax({url:"/ajax/online_students/index/"+a,dataType:"json",success:function(a){$("#studentlist .student.online1").removeClass("online1").addClass("online0");for(index in a)$("#studentlist #student_"+a[index]).removeClass("online0").addClass("online1")}});var b=new Date,a=b.getHours();10>a&&(a="0"+a);b=b.getMinutes();10>b&&(b="0"+b);$("#student_list #clock").html(a+":"+b)}
function change_res(a){1==a?($("#all_resources").addClass("hidden"),$("#my_resources").removeClass("hidden"),$("#all_resources_button").removeClass("hidden"),$("#my_resources_button").addClass("hidden")):($("#my_resources").addClass("hidden"),$("#all_resources").removeClass("hidden"),$("#all_resources_button").addClass("hidden"),$("#my_resources_button").removeClass("hidden"))}
function loadTinymce(){tinymce.init({selector:"textarea.mce-toolbar-grp",theme:"modern",mode:"exact",plugins:"pagebreak table save charmap media contextmenu paste directionality noneditable visualchars nonbreaking spellchecker template",toolbar:" bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link | table |",menu:{},setup:function(a){a.on("init",function(){this.getDoc().body.style.fontSize="14px";this.getDoc().body.style.letterSpacing="0.8px";this.getDoc().body.style.lineHeight=
"24px"});a.on("change",function(){tinymce.triggerSave()});a.on("submit",function(b){a.getElement().value=a.getContent()})},contextmenu:"cut copy paste",menubar:!0,statusbar:!1,toolbar_item_size:"normal"})}
function loadTinymceStudent(){tinymce.init({selector:"textarea.mce-toolbar-grp",theme:"modern",readonly:1,mode:"exact",plugins:"",toolbar:"|",menu:{},setup:function(a){a.on("init",function(){this.getDoc().body.style.fontSize="14px";this.getDoc().body.style.letterSpacing="0.8px";this.getDoc().body.style.lineHeight="24px"});a.on("change",function(){tinymce.triggerSave()});a.on("submit",function(b){a.getElement().value=a.getContent()})},contextmenu:"cut copy paste",menubar:!0,statusbar:!1,toolbar_item_size:"normal"})}
function loadTinymceSlider(){tinymce.init({selector:"textarea.mce-toolbar-grp",theme:"modern",mode:"exact",plugins:"pagebreak table save charmap media contextmenu paste directionality noneditable visualchars nonbreaking spellchecker template",toolbar:" bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link | table |",menu:{},setup:function(a){a.on("init",function(){this.getDoc().body.style.fontSize="14px";this.getDoc().body.style.letterSpacing="0.8px";
this.getDoc().body.style.lineHeight="24px";updateSlideHeight(".step.s1")});a.on("change",function(){tinymce.triggerSave()})},contextmenu:"cut copy paste",menubar:!0,statusbar:!1,toolbar_item_size:"normal"})}
function validate(){var a=[];$("input, select, textarea").each(function(b,c){var d=$(this);if($(d).hasClass("required"))if(""==d.val().trim()||void 0===d.val()){d.css({border:"1px dashed red"});var f=d.attr("data-validation-required-message");d.prev("span").attr("id","scrolled");d.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"});$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300);d.prev("span").removeAttr("scrolled");a[0]=1}else void 0!==
d.attr("minlength")&&d.val().length<d.attr("minlength")&&(d.css({border:"1px dashed red"}),d.prev("span").attr("id","scrolled"),f="This must be at least "+d.attr("minlength")+" characters long",d.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"}),$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300),d.prev("span").removeAttr("scrolled"),a[0]=1);d.on("focus",function(){d.prev("span.tip2").fadeOut("3333");d.css({"border-color":"#c8c8c8",
"border-width":"1px","border-style":"solid"})})});0===a.length?($("input:text, textarea").each(function(){$(this).val(this.value)}),a=[],$(".hidden_submit").click()):a=[]}
function validate_slider(a){var b=[];1==a&&$("input, select").each(function(a,d){var f=$(this);if($(f).hasClass("required"))if(""==f.val().trim()||void 0===f.val()){f.css({border:"1px dashed red"});var e=f.attr("data-validation-required-message");f.prev("span").attr("id","scrolled");f.prev("span").html("").removeClass("tip2").addClass("tip2").append(e).css({display:"block"});f.prev("span").removeAttr("scrolled");b[a]=1}else void 0!==f.attr("minlength")&&f.val().length<f.attr("minlength")&&(f.css({border:"1px dashed red"}),
f.prev("span").attr("id","scrolled"),e="This must be at least "+f.attr("minlength")+" characters long",f.prev("span").html("").removeClass("tip2").addClass("tip2").append(e).css({display:"block"}),f.prev("span").removeAttr("scrolled"),b[a]=1);f.on("focus",function(){f.prev("span.tip2").fadeOut("3333");f.css({"border-color":"#c8c8c8","border-width":"1px","border-style":"solid"})})});if(0===b.length)return $("input:text, textarea").each(function(){$(this).val(this.value)}),b=[],0;b=[];return 1}
function validate_as_draft(a){var b=[],c=$("#assignment_title");if(1==a){if(""==c.val().trim()||void 0===c.val())c.css({border:"1px dashed red"}),a=c.attr("data-validation-required-message"),c.prev("span").attr("id","scrolled"),c.prev("span").html("").removeClass("tip2").addClass("tip2").append(a).css({display:"block"}),c.prev("span").removeAttr("scrolled"),b[0]=1;c.on("focus",function(){c.prev("span.tip2").fadeOut("3333");c.css({"border-color":"#c8c8c8","border-width":"1px","border-style":"solid"})})}if(0===
b.length)return b=[],0;b=[];return 1}
function validate_to_publish(a){var b=1;a=$(".pdatepicker").datepicker("getDate").getTime();864E5>$(".datepicker").datepicker("getDate").getTime()-a&&(opdate=$("#publish_date"),oddate=$("#deadline_date"),oddate.css({border:"1px dashed #fcaa57"}),a=oddate.attr("data-validation-required-message"),oddate.prev("span").attr("id","scrolled"),oddate.prev("span").html("").removeClass("tip3").addClass("tip3").append(a).css({display:"block"}),oddate.prev("span").removeAttr("scrolled"),b=1);"offline"!=$("#grade_type").val()&&
(0<$("#grade_categories_holder tr").length?(""!=$(".add_cat #catg").val().trim()?$(".add_cat #mark").addClass("required"):$(".add_cat #mark").removeClass("required"),$("#grade_categories_holder .catg").addClass("required"),$("#grade_categories_holder .mark").addClass("required")):""!=$(".add_cat #catg").val().trim()?$(".add_cat #mark").addClass("required"):$(".add_cat #mark").removeClass("required"));$("input, select").each(function(a,d){var f=$(this);if($(f).hasClass("required"))if(""==f.val().trim()||
void 0===f.val()){f.css({border:"1px dashed red"});var e=f.attr("data-validation-required-message");f.prev("span").attr("id","scrolled");f.prev("span").html("").removeClass("tip2").addClass("tip2").append(e).css({display:"block"});f.prev("span").removeAttr("scrolled");b=0}else void 0!==f.attr("minlength")&&f.val().length<f.attr("minlength")&&(f.css({border:"1px dashed red"}),f.prev("span").attr("id","scrolled"),e="This must be at least "+f.attr("minlength")+" characters long",f.prev("span").html("").removeClass("tip2").addClass("tip2").append(e).css({display:"block"}),
f.prev("span").removeAttr("scrolled"),b=0);f.on("focus",function(){f.prev("span.tip2").fadeOut("3333");f.prev("span.tip3").fadeOut("3333");f.css({"border-color":"#c8c8c8","border-width":"1px","border-style":"solid"})})});1>$(".classes:checked").length&&""==$("#keystudents").val()&&($(".table4").css({border:"1px dashed red"}),a="You must choose at least one class!",$(".table4").prev("span").attr("id","scrolled"),$(".table4").prev("span").html("").removeClass("tip2").addClass("tip2").append(a).css({display:"block"}),
$(".table4").prev("span").removeAttr("scrolled"),b=0,$(".classes").on("click",function(){$(".table4").prev("span.tip2").fadeOut("3333");$(".table4").css({"border-color":"#c8c8c8","border-width":"1px","border-style":"solid"})}));"offline"!=$("#grade_type").val()&&($("#catg").removeClass("required"),$("#mark").removeClass("required"));return b}
function validate_resource(){var a=[];$("input, select, textarea").each(function(b,c){var d=$(this);if($(d).hasClass("required"))if(""==d.val().trim()||void 0===d.val()){d.css({border:"1px dashed red"});var f=d.attr("data-validation-required-message");d.prev("span").attr("id","scrolled");d.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"});$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300);d.prev("span").removeAttr("scrolled");
a[b]=1}else void 0!==d.attr("minlength")&&d.val().length<d.attr("minlength")&&(d.css({border:"1px dashed red"}),d.prev("span").attr("id","scrolled"),f="This must be at least "+d.attr("minlength")+" characters long",d.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"}),$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300),d.prev("span").removeAttr("scrolled"),a[b]=1);d.on("focus",function(){d.prev("span.tip2").fadeOut("3333");d.css({"border-color":"#c8c8c8",
"border-width":"1px","border-style":"solid"})})});0===a.length&&($(".red_btn").fadeOut(100),$("#saveform").submit())}
$(function(){$(document).on("click",".up_down",function(a){a=$(this).next(".collapsed");if($(a).hasClass("hidden"))return!1;$(a).is(":visible")?($(this).next(".collapsed").slideUp(400),$(this).css({"background-position":"0 1px"}),$.session.set($(this).next().attr("id"),"none")):($(this).next(".collapsed").slideDown(400,function(){}),$(this).css({"background-position":"0 -36px"}),$.session.set($(this).next().attr("id"),"block"))});$(document).on("click",".acc_title",function(a){a=$(this).next().next(".collapsed");
if($(a).hasClass("hidden"))return!1;$(a).is(":visible")?($(this).next().next(".collapsed").slideUp(400),$(this).next(".up_down").css({"background-position":"0 1px"}),$.session.set($(this).next().next().attr("id"),"none")):($(this).next().next(".collapsed").slideDown(400,function(){}),$(this).next(".up_down").css({"background-position":"0 -36px"}),$.session.set($(this).next().next().attr("id"),"block"))});$(".up_down_homework").click(function(){var a=$(this).next(".collapsed");$(a).is(":visible")?
($(this).next(".collapsed").slideUp(400),$(this).css({"background-position":"0 1px"})):($(this).next(".collapsed").slideDown(400,function(){}),$(this).css({"background-position":"0 -30px"}))});$(".assignment").show()});var timer=0,timer1=0,set_timer=!1,logout_sec=10,activity=72E5;function set_logout(){0==set_timer&&(set_timer=!0,timer=setInterval("auto_logout()",activity),$(".dismiss-logout").on("click",function(){clearInterval(timer1);reset_logout()}))}
function reset_logout(){0!=timer&&(clearInterval(timer),timer=setInterval("auto_logout()",activity),logout_sec=10,$("#dialog_logout .logout_sec").text(logout_sec))}function auto_logout(){$("#dialog_logout").modal("show");timer1=setInterval("auto_logout2()",1E3)}function auto_logout2(){logout_sec--;$("#dialog_logout .logout_sec").text(logout_sec);1>logout_sec&&(window.location.href="/logout/")}
(function(a){a.session={_id:null,_cookieCache:void 0,_init:function(){window.name||(window.name=Math.random());this._id=window.name;this._initCache();var a=(new RegExp(this._generatePrefix()+"=([^;]+);")).exec(document.cookie);if(a&&document.location.protocol!==a[1]){this._clearSession();for(var c in this._cookieCache)try{window.sessionStorage.setItem(c,this._cookieCache[c])}catch(d){}}document.cookie=this._generatePrefix()+"="+document.location.protocol+";path=/;expires="+(new Date((new Date).getTime()+
12E4)).toUTCString()},_generatePrefix:function(){return"__session:"+this._id+":"},_initCache:function(){var a=document.cookie.split(";");this._cookieCache={};for(var c in a){var d=a[c].split("=");(new RegExp(this._generatePrefix()+".+")).test(d[0])&&d[1]&&(this._cookieCache[d[0].split(":",3)[2]]=d[1])}},_setFallback:function(a,c,d){var f=this._generatePrefix()+a+"="+c+"; path=/";d&&(f+="; expires="+(new Date(Date.now()+12E4)).toUTCString());document.cookie=f;this._cookieCache[a]=c;return this},_getFallback:function(a){this._cookieCache||
this._initCache();return this._cookieCache[a]},_clearFallback:function(){for(var a in this._cookieCache)document.cookie=this._generatePrefix()+a+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;";this._cookieCache={}},_deleteFallback:function(a){document.cookie=this._generatePrefix()+a+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;";delete this._cookieCache[a]},get:function(a){return window.sessionStorage.getItem(a)||this._getFallback(a)},set:function(a,c,d){try{window.sessionStorage.setItem(a,
c)}catch(f){}this._setFallback(a,c,d||!1);return this},"delete":function(a){return this.remove(a)},remove:function(a){try{window.sessionStorage.removeItem(a)}catch(c){}this._deleteFallback(a);return this},_clearSession:function(){try{window.sessionStorage.clear()}catch(a){for(var b in window.sessionStorage)window.sessionStorage.removeItem(b)}},clear:function(){this._clearSession();this._clearFallback();return this}};a.session._init()})(jQuery);
(function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()})(this,function(){function a(a,b){var d,c=document.createElement(a||"div");for(d in b)c[d]=b[d];return c}function b(a){for(var b=1,d=arguments.length;d>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,d,c){var f=["opacity",b,~~(100*a),d,c].join("-");d=.01+d/c*100;c=Math.max(1-(1-a)/b*(100-d),a);var e=q.substring(0,q.indexOf("Animation")).toLowerCase();return p[f]||(t.insertRule("@"+
(e&&"-"+e+"-"||"")+"keyframes "+f+"{0%{opacity:"+c+"}"+d+"%{opacity:"+a+"}"+(d+.01)+"%{opacity:1}"+(d+b)%100+"%{opacity:"+a+"}100%{opacity:"+c+"}}",t.cssRules.length),p[f]=1),f}function d(a,b){var d,c,f=a.style;b=b.charAt(0).toUpperCase()+b.slice(1);for(c=0;m.length>c;c++)if(d=m[c]+b,void 0!==f[d])return d;return void 0!==f[b]?b:void 0}function f(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function e(a){for(var b=1;arguments.length>b;b++){var d=arguments[b],c;for(c in d)void 0===a[c]&&(a[c]=
d[c])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=e(a||{},h.defaults,v)}function l(){function d(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}t.addRule(".spin-vml","behavior:url(#default#VML)");h.prototype.lines=function(a,c){function e(){return f(d("group",{coordsize:y+" "+y,coordorigin:-m+" "+-m}),{width:y,height:y})}function q(a,y,h){b(l,b(f(e(),{rotation:360/c.lines*a+"deg",left:~~y}),b(f(d("roundrect",{arcsize:c.corners}),
{width:m,height:c.width,left:c.radius,top:-c.width>>1,filter:h}),d("fill",{color:g(c.color,a),opacity:c.opacity}),d("stroke",{opacity:0}))))}var h,m=c.length+c.width,y=2*m;h=2*-(c.width+c.length)+"px";var l=f(e(),{position:"absolute",top:h,left:h});if(c.shadow)for(h=1;c.lines>=h;h++)q(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;c.lines>=h;h++)q(h);return b(a,l)};h.prototype.opacity=function(a,b,d,c){a=a.firstChild;c=c.shadow&&c.lines||0;a&&a.childNodes.length>
b+c&&(a=a.childNodes[b+c],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=d))}}var q,m=["webkit","Moz","ms","O"],p={},t=function(){var d=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],d),d.sheet||d.styleSheet}(),v={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2E9,className:"spinner",top:"50%",left:"50%",position:"absolute"};h.defaults={};e(h.prototype,{spin:function(b){this.stop();var d=
this,c=d.opts,e=d.el=f(a(0,{className:c.className}),{position:c.position,width:0,zIndex:c.zIndex});if(c.radius+c.length+c.width,f(e,{left:c.left,top:c.top}),b&&b.insertBefore(e,b.firstChild||null),e.setAttribute("role","progressbar"),d.lines(e,d.opts),!q){var g,h=0,m=(c.lines-1)*(1-c.direction)/2,y=c.fps,l=y/c.speed,w=(1-c.opacity)/(l*c.trail/100),p=l/c.lines;(function V(){h++;for(var a=0;c.lines>a;a++)g=Math.max(1-(h+(c.lines-a)*p)%l*w,c.opacity),d.opacity(e,a*c.direction+m,g,c);d.timeout=d.el&&
setTimeout(V,~~(1E3/y))})()}return d},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,e){function h(b,d){return f(a(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:b,boxShadow:d,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*l+e.rotate)+"deg) translate("+e.radius+"px,0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(var m,l=0,p=(e.lines-1)*(1-e.direction)/
2;e.lines>l;l++)m=f(a(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:q&&c(e.opacity,e.trail,p+l*e.direction,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&b(m,f(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(m,h(g(e.color,l),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,d){a.childNodes.length>b&&(a.childNodes[b].style.opacity=d)}});var J=f(a("group"),{behavior:"url(#default#VML)"});return!d(J,"transform")&&
J.adj?l():q=d(J,"animation"),h});
(function(a,b){"object"==typeof exports?module.exports=b(require("spin.js")):"function"==typeof define&&define.amd?define(["spin"],b):a.Ladda=b(a.Spinner)})(this,function(a){function b(b){if(void 0===b)return console.warn("Ladda button target must be defined."),void 0;b.querySelector(".ladda-label")||(b.innerHTML='<span class="ladda-label">'+b.innerHTML+"</span>");var c,g=b.querySelector(".ladda-spinner");g||(g=document.createElement("span"),g.className="ladda-spinner");b.appendChild(g);var h,l={start:function(){if(!c){var d,
m=b.offsetHeight;0===m&&(m=parseFloat(window.getComputedStyle(b).height));32<m&&(m*=.8);b.hasAttribute("data-spinner-size")&&(m=parseInt(b.getAttribute("data-spinner-size"),10));b.hasAttribute("data-spinner-color")&&(d=b.getAttribute("data-spinner-color"));m*=.2;c=new a({color:d||"#fff",lines:12,radius:m,length:.6*m,width:7>m?2:3,zIndex:"auto",top:"auto",left:"auto",className:""})}return b.setAttribute("disabled",""),b.setAttribute("data-loading",""),clearTimeout(h),c.spin(g),this.setProgress(0),
this},startAfter:function(a){return clearTimeout(h),h=setTimeout(function(){l.start()},a),this},stop:function(){return b.removeAttribute("disabled"),b.removeAttribute("data-loading"),clearTimeout(h),c&&(h=setTimeout(function(){c.stop()},1E3)),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(a){a=Math.max(Math.min(a,1),0);var d=b.querySelector(".ladda-progress");0===a&&d&&d.parentNode?d.parentNode.removeChild(d):(d||(d=document.createElement("div"),
d.className="ladda-progress",b.appendChild(d)),d.style.width=(a||0)*b.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),b.setAttribute("disabled",""),this},isLoading:function(){return b.hasAttribute("data-loading")},remove:function(){clearTimeout(h);b.removeAttribute("disabled","");b.removeAttribute("data-loading","");c&&(c.stop(),c=null);for(var a=0,g=d.length;g>a;a++)if(l===d[a]){d.splice(a,1);break}}};return d.push(l),l}function c(a){for(var b=
[],d=0;a.length>d;d++)b.push(a[d]);return b}var d=[];return{bind:function(a,d){d=d||{};var g=[];"string"==typeof a?g=c(document.querySelectorAll(a)):"object"==typeof a&&"string"==typeof a.nodeName&&(g=[a]);for(var h=0,l=g.length;l>h;h++)(function(){var a=g[h];if("function"==typeof a.addEventListener){var c=b(a),f=-1;a.addEventListener("click",function(){for(var b=!0,g,h=a;h.parentNode&&"FORM"!==h.tagName;)h=h.parentNode;g="FORM"===h.tagName?h:void 0;if(void 0!==g){for(var l=["input","textarea","select"],
h=[],u=0;l.length>u;u++)for(var r=g.getElementsByTagName(l[u]),x=0;r.length>x;x++)r[x].hasAttribute("required")&&h.push(r[x]);for(g=0;h.length>g;g++)""===h[g].value.replace(/^\s+|\s+$/g,"")&&(b=!1),"checkbox"!==h[g].type&&"radio"!==h[g].type||h[g].checked||(b=!1),"email"===h[g].type&&(b=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(h[g].value))}b&&(c.startAfter(1),"number"==typeof d.timeout&&(clearTimeout(f),f=setTimeout(c.stop,d.timeout)),"function"==typeof d.callback&&d.callback.apply(null,
[c]))},!1)}})()},create:b,stopAll:function(){for(var a=0,b=d.length;b>a;a++)d[a].stop()}}});
var qq=function(a){return{hide:function(){a.style.display="none";return this},attach:function(b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c);return function(){qq(a).detach(b,c)}},detach:function(b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.attachEvent&&a.detachEvent("on"+b,c);return this},contains:function(b){return a===b?!0:a.contains?a.contains(b):!!(b.compareDocumentPosition(a)&8)},insertBefore:function(b){b.parentNode.insertBefore(a,b);
return this},remove:function(){a.parentNode.removeChild(a);return this},css:function(b){null!==b.opacity&&"string"!==typeof a.style.opacity&&"undefined"!==typeof a.filters&&(b.filter="alpha(opacity="+Math.round(100*b.opacity)+")");qq.extend(a.style,b);return this},hasClass:function(b){return RegExp("(^| )"+b+"( |$)").test(a.className)},addClass:function(b){qq(a).hasClass(b)||(a.className+=" "+b);return this},removeClass:function(b){a.className=a.className.replace(RegExp("(^| )"+b+"( |$)")," ").replace(/^\s+|\s+$/g,
"");return this},getByClass:function(b){var c,d=[];if(a.querySelectorAll)return a.querySelectorAll("."+b);c=a.getElementsByTagName("*");qq.each(c,function(a,c){qq(c).hasClass(b)&&d.push(c)});return d},children:function(){for(var b=[],c=a.firstChild;c;)1===c.nodeType&&b.push(c),c=c.nextSibling;return b},setText:function(b){a.innerText=b;a.textContent=b;return this},clearText:function(){return qq(a).setText("")}}};
qq.log=function(a,b){if(window.console)if(b&&"info"!==b)if(window.console[b])window.console[b](a);else window.console.log("<"+b+"> "+a);else window.console.log(a)};qq.isObject=function(a){return null!==a&&a&&"object"===typeof a&&a.constructor===Object};qq.isFunction=function(a){return"function"===typeof a};qq.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)};qq.trimStr=function(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")};
qq.isFileOrInput=function(a){if(window.File&&a instanceof File)return!0;if(window.HTMLInputElement){if(a instanceof HTMLInputElement&&a.type&&"file"===a.type.toLowerCase())return!0}else if(a.tagName&&"input"===a.tagName.toLowerCase()&&a.type&&"file"===a.type.toLowerCase())return!0;return!1};qq.isBlob=function(a){return window.Blob&&"[object Blob]"===Object.prototype.toString.call(a)};
qq.isXhrUploadSupported=function(){var a=document.createElement("input");a.type="file";return void 0!==a.multiple&&"undefined"!==typeof File&&"undefined"!==typeof FormData&&"undefined"!==typeof(new XMLHttpRequest).upload};qq.isFolderDropSupported=function(a){return a.items&&a.items[0].webkitGetAsEntry};qq.isFileChunkingSupported=function(){return!qq.android()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)};
qq.extend=function(a,b,c){qq.each(b,function(b,f){c&&qq.isObject(f)?(void 0===a[b]&&(a[b]={}),qq.extend(a[b],f,!0)):a[b]=f})};qq.indexOf=function(a,b,c){if(a.indexOf)return a.indexOf(b,c);c=c||0;var d=a.length;for(0>c&&(c+=d);c<d;c+=1)if(a.hasOwnProperty(c)&&a[c]===b)return c;return-1};qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})};qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")};
qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")};qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")};qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")};qq.firefox=function(){return-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor};qq.windows=function(){return"Win32"===navigator.platform};qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")};
qq.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};qq.toElement=function(){var a=document.createElement("div");return function(b){a.innerHTML=b;b=a.firstChild;a.removeChild(b);return b}}();qq.each=function(a,b){var c,d;if(a)for(c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&(d=b(c,a[c]),!1===d))break};
qq.obj2url=function(a,b,c){var d,f=[],e="&",g=function(a,d){var c=b?/\[\]$/.test(b)?b:b+"["+d+"]":d;"undefined"!==c&&"undefined"!==d&&f.push("object"===typeof a?qq.obj2url(a,c,!0):"[object Function]"===Object.prototype.toString.call(a)?encodeURIComponent(c)+"="+encodeURIComponent(a()):encodeURIComponent(c)+"="+encodeURIComponent(a))};if(!c&&b)e=/\?/.test(b)?/\?$/.test(b)?"":"&":"?",f.push(b),f.push(qq.obj2url(a));else if("[object Array]"===Object.prototype.toString.call(a)&&"undefined"!==typeof a)for(d=
-1,c=a.length;d<c;d+=1)g(a[d],d);else if("undefined"!==typeof a&&null!==a&&"object"===typeof a)for(d in a)a.hasOwnProperty(d)&&g(a[d],d);else f.push(encodeURIComponent(b)+"="+encodeURIComponent(a));return b?f.join(e):f.join(e).replace(/^&/,"").replace(/%20/g,"+")};qq.obj2FormData=function(a,b,c){b||(b=new FormData);qq.each(a,function(a,f){a=c?c+"["+a+"]":a;qq.isObject(f)?qq.obj2FormData(f,b,a):qq.isFunction(f)?b.append(a,f()):b.append(a,f)});return b};
qq.obj2Inputs=function(a,b){var c;b||(b=document.createElement("form"));qq.obj2FormData(a,{append:function(a,f){c=document.createElement("input");c.setAttribute("name",a);c.setAttribute("value",f);b.appendChild(c)}});return b};qq.setCookie=function(a,b,c){var d=new Date,f="";c&&(d.setTime(d.getTime()+864E5*c),f="; expires="+d.toGMTString());document.cookie=a+"="+b+f+"; path=/"};
qq.getCookie=function(a){a+="=";for(var b=document.cookie.split(";"),c,d=0;d<b.length;d++){for(c=b[d];" "==c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(a))return c.substring(a.length,c.length)}};qq.getCookieNames=function(a){var b=document.cookie.split(";"),c=[];qq.each(b,function(b,f){f=qq.trimStr(f);var e=f.indexOf("=");f.match(a)&&c.push(f.substr(0,e))});return c};qq.deleteCookie=function(a){qq.setCookie(a,"",-1)};
qq.areCookiesEnabled=function(){var a="qqCookieTest:"+1E5*Math.random();qq.setCookie(a,1);return qq.getCookie(a)?(qq.deleteCookie(a),!0):!1};qq.parseJson=function(a){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(a):eval("("+a+")")};qq.DisposeSupport=function(){var a=[];return{dispose:function(){var b;do(b=a.shift())&&b();while(b)},attach:function(){this.addDisposer(qq(arguments[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(b){a.push(b)}}};
qq.supportedFeatures=function(){var a,b,c,d,f,e;a=!0;try{b=document.createElement("input"),b.type="file",qq(b).hide(),b.disabled&&(a=!1)}catch(g){a=!1}c=(b=a&&qq.isXhrUploadSupported())&&qq.chrome()&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/);d=b&&qq.isFileChunkingSupported();f=b&&d&&qq.areCookiesEnabled();e=b&&qq.chrome()&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/);return{uploading:a,ajaxUploading:b,fileDrop:b,folderDrop:c,chunking:d,
resume:f,uploadCustomHeaders:b,uploadNonMultipart:b,itemSizeValidation:b,uploadViaPaste:e,progressBar:b,uploadCors:a&&(void 0!==window.postMessage||b),deleteFileCors:b}}();qq.Promise=function(){var a,b,c,d,f,e=0;return{then:function(f,h){0===e?(c=f,d=h):-1===e&&h?h(b):f&&f(a);return this},done:function(a){0===e?f=a:a();return this},success:function(b){e=1;a=b;c&&c(b);f&&f();return this},failure:function(a){e=-1;b=a;d&&d(a);f&&f();return this}}};
qq.UploadButton=function(a){function b(){var a=document.createElement("input");f.multiple&&a.setAttribute("multiple","multiple");f.acceptFiles&&a.setAttribute("accept",f.acceptFiles);a.setAttribute("type","file");a.setAttribute("name",f.name);qq(a).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0});f.element.appendChild(a);d.attach(a,"change",function(){f.onChange(a)});d.attach(a,"mouseover",function(){qq(f.element).addClass(f.hoverClass)});
d.attach(a,"mouseout",function(){qq(f.element).removeClass(f.hoverClass)});d.attach(a,"focus",function(){qq(f.element).addClass(f.focusClass)});d.attach(a,"blur",function(){qq(f.element).removeClass(f.focusClass)});window.attachEvent&&a.setAttribute("tabIndex","-1");return a}var c,d=new qq.DisposeSupport,f={element:null,multiple:!1,acceptFiles:null,name:"file",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(f,a);qq(f.element).css({position:"relative",
overflow:"hidden",direction:"ltr"});c=b();return{getInput:function(){return c},reset:function(){c.parentNode&&qq(c).remove();qq(f.element).removeClass(f.focusClass);c=b()}}};
qq.PasteSupport=function(a){var b;b={targetElement:null,callbacks:{log:function(){},pasteReceived:function(){}}};qq.extend(b,a);(function(){qq(b.targetElement).attach("paste",function(a){(a=a.clipboardData)&&qq.each(a.items,function(a,c){if(c.type&&0===c.type.indexOf("image/")){var e=c.getAsFile();b.callbacks.pasteReceived(e)}})})})();return{reset:function(){}}};
qq.FineUploaderBasic=function(a){this._options={debug:!1,button:null,multiple:!0,maxConnections:1,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},paramsInBody:!0,customHeaders:{},forceMultipart:!0,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0},callbacks:{onSubmit:function(){},onSubmitted:function(){},onComplete:function(){},onCancel:function(){},
onUpload:function(){},onUploadChunk:function(){},onResume:function(){},onProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidateBatch:function(){},onValidate:function(){},onSubmitDelete:function(){},onDelete:function(){},onDeleteComplete:function(){},onPasteReceived:function(){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",
emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",
buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,partSize:2E6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(a){33<a.length&&(a=a.slice(0,19)+"..."+a.slice(-14));return a},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:"kB MB GB TB PB EB".split(" ")},
deleteFile:{enabled:!1,endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1},blobs:{defaultName:"misc_data",paramNames:{name:"qqblobname"}},paste:{targetElement:null,defaultName:"pasted_image"}};qq.extend(this._options,a,!0);this._wrapCallbacks();this._disposeSupport=new qq.DisposeSupport;this._filesInProgress=[];this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._netUploaded=this._netUploadedOrQueued=0;this._paramsStore=
this._createParamsStore("request");this._deleteFileParamsStore=this._createParamsStore("deleteFile");this._endpointStore=this._createEndpointStore("request");this._deleteFileEndpointStore=this._createEndpointStore("deleteFile");this._handler=this._createUploadHandler();this._deleteHandler=this._createDeleteHandler();this._options.button&&(this._button=this._createUploadButton(this._options.button));this._options.paste.targetElement&&(this._pasteHandler=this._createPasteHandler());this._preventLeaveInProgress()};
qq.FineUploaderBasic.prototype={log:function(a,b){!this._options.debug||b&&"info"!==b?b&&"info"!==b&&qq.log("[FineUploader] "+a,b):qq.log("[FineUploader] "+a)},setParams:function(a,b){null==b?this._options.request.params=a:this._paramsStore.setParams(a,b)},setDeleteFileParams:function(a,b){null==b?this._options.deleteFile.params=a:this._deleteFileParamsStore.setParams(a,b)},setEndpoint:function(a,b){null==b?this._options.request.endpoint=a:this._endpointStore.setEndpoint(a,b)},getInProgress:function(){return this._filesInProgress.length},
getNetUploads:function(){return this._netUploaded},uploadStoredFiles:function(){for(var a;this._storedIds.length;)a=this._storedIds.shift(),this._filesInProgress.push(a),this._handler.upload(a)},clearStoredFiles:function(){this._storedIds=[]},retry:function(a){return this._onBeforeManualRetry(a)?(this._netUploadedOrQueued++,this._handler.retry(a),!0):!1},cancel:function(a){this._handler.cancel(a)},cancelAll:function(){var a=[],b=this;qq.extend(a,this._storedIds);qq.each(a,function(a,d){b.cancel(d)});
this._handler.cancelAll()},reset:function(){this.log("Resetting uploader...");this._handler.reset();this._filesInProgress=[];this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._button.reset();this._paramsStore.reset();this._endpointStore.reset();this._netUploaded=this._netUploadedOrQueued=0;this._pasteHandler&&this._pasteHandler.reset()},addFiles:function(a,b,c){var d=[],f,e;if(a){window.FileList&&a instanceof FileList||(a=[].concat(a));for(f=0;f<a.length;f+=
1)e=a[f],qq.isFileOrInput(e)?d.push(e):this.log(e+" is not a File or INPUT element!  Ignoring!","warn");this.log("Processing "+d.length+" files or inputs...");this._uploadFileOrBlobDataList(d,b,c)}},addBlobs:function(a,b,c){if(a){a=[].concat(a);var d=[],f=this;qq.each(a,function(a,b){qq.isBlob(b)&&!qq.isFileOrInput(b)?d.push({blob:b,name:f._options.blobs.defaultName}):qq.isObject(b)&&b.blob&&b.name?d.push(b):f.log("addBlobs: entry at index "+a+" is not a Blob or a BlobData object","error")});this._uploadFileOrBlobDataList(d,
b,c)}else this.log("undefined or non-array parameter passed into addBlobs","error")},getUuid:function(a){return this._handler.getUuid(a)},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(a){return this._handler.getSize(a)},getName:function(a){return this._handler.getName(a)},getFile:function(a){return this._handler.getFile(a)},deleteFile:function(a){this._onSubmitDelete(a)},setDeleteFileEndpoint:function(a,b){null==b?this._options.deleteFile.endpoint=
a:this._deleteFileEndpointStore.setEndpoint(a,b)},_createUploadButton:function(a){var b=this,c=new qq.UploadButton({element:a,multiple:this._options.multiple&&qq.supportedFeatures.ajaxUploading,acceptFiles:this._options.validation.acceptFiles,onChange:function(a){b._onInputChange(a)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});this._disposeSupport.addDisposer(function(){c.dispose()});return c},_createUploadHandler:function(){var a=this;return new qq.UploadHandler({debug:this._options.debug,
forceMultipart:this._options.request.forceMultipart,maxConnections:this._options.maxConnections,customHeaders:this._options.request.customHeaders,inputName:this._options.request.inputName,uuidParamName:this._options.request.uuidName,totalFileSizeParamName:this._options.request.totalFileSizeName,cors:this._options.cors,demoMode:this._options.demoMode,paramsInBody:this._options.request.paramsInBody,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,
blobs:this._options.blobs,log:function(b,c){a.log(b,c)},onProgress:function(b,c,d,f){a._onProgress(b,c,d,f);a._options.callbacks.onProgress(b,c,d,f)},onComplete:function(b,c,d,f){a._onComplete(b,c,d,f);a._options.callbacks.onComplete(b,c,d,f)},onCancel:function(b,c){a._onCancel(b,c);a._options.callbacks.onCancel(b,c)},onUpload:function(b,c){a._onUpload(b,c);a._options.callbacks.onUpload(b,c)},onUploadChunk:function(b,c,d){a._options.callbacks.onUploadChunk(b,c,d)},onResume:function(b,c,d){return a._options.callbacks.onResume(b,
c,d)},onAutoRetry:function(b,c,d,f){a._preventRetries[b]=d[a._options.retry.preventRetryResponseProperty];return a._shouldAutoRetry(b,c,d)?(a._maybeParseAndSendUploadError(b,c,d,f),a._options.callbacks.onAutoRetry(b,c,a._autoRetries[b]+1),a._onBeforeAutoRetry(b,c),a._retryTimeouts[b]=setTimeout(function(){a._onAutoRetry(b,c,d)},1E3*a._options.retry.autoAttemptDelay),!0):!1}})},_createDeleteHandler:function(){var a=this;return new qq.DeleteFileAjaxRequestor({maxConnections:this._options.maxConnections,
customHeaders:this._options.deleteFile.customHeaders,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:function(b,c){a.log(b,c)},onDelete:function(b){a._onDelete(b);a._options.callbacks.onDelete(b)},onDeleteComplete:function(b,c,d){a._onDeleteComplete(b,c,d);a._options.callbacks.onDeleteComplete(b,c,d)}})},_createPasteHandler:function(){var a=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,
callbacks:{log:function(b,c){a.log(b,c)},pasteReceived:function(b){var c=a._options.callbacks.onPasteReceived;(c=c(b))&&c.then?c.then(function(d){a._handlePasteSuccess(b,d)},function(b){a.log("Ignoring pasted image per paste received callback.  Reason = '"+b+"'")}):a._handlePasteSuccess(b)}}})},_handlePasteSuccess:function(a,b){var c=a.type.split("/")[1],d=b;null==d&&(d=this._options.paste.defaultName);this.addBlobs({name:d+("."+c),blob:a})},_preventLeaveInProgress:function(){var a=this;this._disposeSupport.attach(window,
"beforeunload",function(b){if(a._filesInProgress.length)return b=b||window.event,b.returnValue=a._options.messages.onLeave})},_onSubmit:function(a){this._netUploadedOrQueued++;this._options.autoUpload&&this._filesInProgress.push(a)},_onProgress:function(){},_onComplete:function(a,b,c,d){c.success?this._netUploaded++:this._netUploadedOrQueued--;this._removeFromFilesInProgress(a);this._maybeParseAndSendUploadError(a,b,c,d)},_onCancel:function(a){this._netUploadedOrQueued--;this._removeFromFilesInProgress(a);
clearTimeout(this._retryTimeouts[a]);a=qq.indexOf(this._storedIds,a);!this._options.autoUpload&&0<=a&&this._storedIds.splice(a,1)},_isDeletePossible:function(){return this._options.deleteFile.enabled&&(!this._options.cors.expected||qq.supportedFeatures.deleteFileCors)},_onSubmitDelete:function(a){if(this._isDeletePossible())!1!==this._options.callbacks.onSubmitDelete(a)&&this._deleteHandler.sendDelete(a,this.getUuid(a));else return this.log("Delete request ignored for ID "+a+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.",
"warn"),!1},_onDelete:function(){},_onDeleteComplete:function(a,b,c){var d=this._handler.getName(a);c?(this.log("Delete request for '"+d+"' has failed.","error"),this._options.callbacks.onError(a,d,"Delete request failed with response code "+b.status,b)):(this._netUploadedOrQueued--,this._netUploaded--,this.log("Delete request for '"+d+"' has succeeded."))},_removeFromFilesInProgress:function(a){a=qq.indexOf(this._filesInProgress,a);0<=a&&this._filesInProgress.splice(a,1)},_onUpload:function(){},
_onInputChange:function(a){qq.supportedFeatures.ajaxUploading?this.addFiles(a.files):this.addFiles(a);this._button.reset()},_onBeforeAutoRetry:function(a,b){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+b+"...")},_onAutoRetry:function(a,b){this.log("Retrying "+b+"...");this._autoRetries[a]++;this._handler.retry(a)},_shouldAutoRetry:function(a){return!this._preventRetries[a]&&this._options.retry.enableAuto?(void 0===this._autoRetries[a]&&(this._autoRetries[a]=
0),this._autoRetries[a]<this._options.retry.maxAutoAttempts):!1},_onBeforeManualRetry:function(a){var b=this._options.validation.itemLimit;if(this._preventRetries[a])return this.log("Retries are forbidden for id "+a,"warn"),!1;if(this._handler.isValid(a)){var c=this._handler.getName(a);if(!1===this._options.callbacks.onManualRetry(a,c))return!1;if(0<b&&this._netUploadedOrQueued+1>b)return this._itemError("retryFailTooManyItems",""),!1;this.log("Retrying upload for '"+c+"' (id: "+a+")...");this._filesInProgress.push(a);
return!0}this.log("'"+a+"' is not a valid file ID","error");return!1},_maybeParseAndSendUploadError:function(a,b,c,d){if(!c.success)if(d&&200!==d.status&&!c.error)this._options.callbacks.onError(a,b,"XHR returned response code "+d.status,d);else this._options.callbacks.onError(a,b,c.error?c.error:this._options.text.defaultResponseError,d)},_uploadFileOrBlobDataList:function(a,b,c){var d;if(this._isBatchValid(this._getValidationDescriptors(a)))if(0<a.length)for(d=0;d<a.length;d++)if(this._validateFileOrBlobData(a[d]))this._upload(a[d],
b,c);else{if(this._options.validation.stopOnFirstInvalidFile)break}else this._itemError("noFilesError","")},_upload:function(a,b,c){a=this._handler.add(a);var d=this._handler.getName(a);b&&this.setParams(b,a);c&&this.setEndpoint(c,a);!1!==this._options.callbacks.onSubmit(a,d)&&(this._onSubmit(a,d),this._options.callbacks.onSubmitted(a,d),this._options.autoUpload?this._handler.upload(a):this._storeForLater(a))},_storeForLater:function(a){this._storedIds.push(a)},_isBatchValid:function(a){var b;b=this._options.validation.itemLimit;
var c=this._netUploadedOrQueued+a.length;if(a=!1!==this._options.callbacks.onValidateBatch(a))0===b||c<=b?a=!0:(a=!1,b=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,c).replace(/\{itemLimit\}/g,b),this._batchError(b));return a},_validateFileOrBlobData:function(a){var b,c,d;b=this._getValidationDescriptor(a);c=b.name;d=b.size;return!1===this._options.callbacks.onValidate(b)?!1:qq.isFileOrInput(a)&&!this._isAllowedExtension(c)?(this._itemError("typeError",c),!1):0===d?(this._itemError("emptyError",
c),!1):d&&this._options.validation.sizeLimit&&d>this._options.validation.sizeLimit?(this._itemError("sizeError",c),!1):d&&d<this._options.validation.minSizeLimit?(this._itemError("minSizeError",c),!1):!0},_itemError:function(a,b){function c(a,b){d=d.replace(a,b)}var d=this._options.messages[a],f=[],e=[].concat(b),g=e[0],h;qq.each(this._options.validation.allowedExtensions,function(a,b){qq.isString(b)&&f.push(b)});h=f.join(", ").toLowerCase();c("{file}",this._options.formatFileName(g));c("{extensions}",
h);c("{sizeLimit}",this._formatSize(this._options.validation.sizeLimit));c("{minSizeLimit}",this._formatSize(this._options.validation.minSizeLimit));h=d.match(/(\{\w+\})/g);null!==h&&qq.each(h,function(a,b){c(b,e[a])});this._options.callbacks.onError(null,g,d);return d},_batchError:function(a){this._options.callbacks.onError(null,null,a)},_isAllowedExtension:function(a){var b=this._options.validation.allowedExtensions,c=!1;if(!b.length)return!0;qq.each(b,function(b,f){if(qq.isString(f)&&null!=a.match(RegExp("\\."+
f+"$","i")))return c=!0,!1});return c},_formatSize:function(a){var b=-1;do a/=1024,b++;while(99<a);return Math.max(a,.1).toFixed(1)+this._options.text.sizeSymbols[b]},_wrapCallbacks:function(){var a,b;a=this;b=function(b,c,e){try{return c.apply(a,e)}catch(g){a.log("Caught exception in '"+b+"' callback - "+g.message,"error")}};for(var c in this._options.callbacks)(function(){var d,f;d=c;f=a._options.callbacks[d];a._options.callbacks[d]=function(){return b(d,f,arguments)}})()},_parseFileOrBlobDataName:function(a){return qq.isFileOrInput(a)?
a.value?a.value.replace(/.*(\/|\\)/,""):null!==a.fileName&&void 0!==a.fileName?a.fileName:a.name:a.name},_parseFileOrBlobDataSize:function(a){var b;qq.isFileOrInput(a)?a.value||(b=null!==a.fileSize&&void 0!==a.fileSize?a.fileSize:a.size):b=a.blob.size;return b},_getValidationDescriptor:function(a){var b,c;c={};b=this._parseFileOrBlobDataName(a);a=this._parseFileOrBlobDataSize(a);c.name=b;void 0!==a&&(c.size=a);return c},_getValidationDescriptors:function(a){var b=this,c=[];qq.each(a,function(a,f){c.push(b._getValidationDescriptor(f))});
return c},_createParamsStore:function(a){var b={},c=this;return{setParams:function(a,c){var e={};qq.extend(e,a);b[c]=e},getParams:function(d){var f={};null!=d&&b[d]?qq.extend(f,b[d]):qq.extend(f,c._options[a].params);return f},remove:function(a){return delete b[a]},reset:function(){b={}}}},_createEndpointStore:function(a){var b={},c=this;return{setEndpoint:function(a,c){b[c]=a},getEndpoint:function(d){return null!=d&&b[d]?b[d]:c._options[a].endpoint},remove:function(a){return delete b[a]},reset:function(){b=
{}}}}};
qq.DragAndDrop=function(a){function b(a){var d,c,f=new qq.Promise;a.isFile?a.file(function(a){h.push(a);f.success()},function(b){e.callbacks.dropLog("Problem parsing '"+a.fullPath+"'.  FileError code "+b.code+".","error");f.failure()}):a.isDirectory&&(d=a.createReader(),d.readEntries(function(a){var d=a.length;for(c=0;c<a.length;c+=1)b(a[c]).done(function(){--d;0===d&&f.success()});a.length||f.success()},function(b){e.callbacks.dropLog("Problem parsing '"+a.fullPath+"'.  FileError code "+b.code+".",
"error");f.failure()}));return f}function c(a){var d,c,f=[],l=new qq.Promise;e.callbacks.processingDroppedFiles();g.dropDisabled(!0);if(1<a.files.length&&!e.allowMultipleItems)e.callbacks.processingDroppedFilesComplete([]),e.callbacks.dropError("tooManyFilesError",""),g.dropDisabled(!1),l.failure();else{h=[];if(qq.isFolderDropSupported(a))for(d=a.items,a=0;a<d.length;a+=1)(c=d[a].webkitGetAsEntry())&&(c.isFile?h.push(d[a].getAsFile()):f.push(b(c).done(function(){f.pop();0===f.length&&l.success()})));
else h=a.files;0===f.length&&l.success()}return l}function d(a){g=new qq.UploadDropZone({element:a,onEnter:function(b){qq(a).addClass(e.classes.dropActive);b.stopPropagation()},onLeaveNotDescendants:function(){qq(a).removeClass(e.classes.dropActive)},onDrop:function(b){e.hideDropZonesBeforeEnter&&qq(a).hide();qq(a).removeClass(e.classes.dropActive);c(b.dataTransfer).done(function(){var a=h;e.callbacks.dropLog("Grabbed "+a.length+" dropped files.");g.dropDisabled(!1);e.callbacks.processingDroppedFilesComplete(a)})}});
l.addDisposer(function(){g.dispose()});e.hideDropZonesBeforeEnter&&qq(a).hide()}function f(a){var b;qq.each(a.dataTransfer.types,function(a,d){if("Files"===d)return b=!0,!1});return b}var e,g,h=[],l=new qq.DisposeSupport;e={dropZoneElements:[],hideDropZonesBeforeEnter:!1,allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks};qq.extend(e,a,!0);(function(){var a=e.dropZoneElements;qq.each(a,function(a,b){d(b)});a.length&&(!qq.ie()||qq.ie10())&&l.attach(document,"dragenter",
function(b){!g.dropDisabled()&&f(b)&&qq.each(a,function(a,b){qq(b).css({display:"block"})})});l.attach(document,"dragleave",function(b){e.hideDropZonesBeforeEnter&&qq.FineUploader.prototype._leaving_document_out(b)&&qq.each(a,function(a,b){qq(b).hide()})});l.attach(document,"drop",function(b){e.hideDropZonesBeforeEnter&&qq.each(a,function(a,b){qq(b).hide()});b.preventDefault()})})();return{setupExtraDropzone:function(a){e.dropZoneElements.push(a);d(a)},removeDropzone:function(a){var b,d=e.dropZoneElements;
for(b in d)if(d[b]===a)return d.splice(b,1)},dispose:function(){l.dispose();g.dispose()}}};qq.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(){},dropError:function(a,b){qq.log("Drag & drop error code '"+a+" with these specifics: '"+b+"'","error")},dropLog:function(a,b){qq.log(a,b)}}};
qq.UploadDropZone=function(a){function b(){return qq.safari()||qq.firefox()&&qq.windows()}function c(a){if(qq.ie()&&!qq.ie10())return!1;var b=a.dataTransfer,d=qq.safari();a=qq.ie10()?!0:"none"!==b.effectAllowed;return b&&a&&(b.files||!d&&b.types.contains&&b.types.contains("Files"))}function d(a){void 0!==a&&(g=a);return g}var f,e,g,h,l=new qq.DisposeSupport;f={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}};qq.extend(f,a);e=f.element;
(function(){h||(b?l.attach(document,"dragover",function(a){a.preventDefault()}):l.attach(document,"dragover",function(a){a.dataTransfer&&(a.dataTransfer.dropEffect="none",a.preventDefault())}),h=!0)})();(function(){l.attach(e,"dragover",function(a){if(c(a)){var b=qq.ie()?null:a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect="move"===b||"linkMove"===b?"move":"copy";a.stopPropagation();a.preventDefault()}});l.attach(e,"dragenter",function(a){if(!d()&&c(a))f.onEnter(a)});l.attach(e,"dragleave",
function(a){if(c(a)){f.onLeave(a);var b=document.elementFromPoint(a.clientX,a.clientY);if(!qq(this).contains(b))f.onLeaveNotDescendants(a)}});l.attach(e,"drop",function(a){!d()&&c(a)&&(a.preventDefault(),f.onDrop(a))})})();return{dropDisabled:function(a){return d(a)},dispose:function(){l.dispose()}}};
qq.FineUploader=function(a){qq.FineUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,dragAndDrop:{extraDropzones:[],hideDropzones:!0,disableDefaultDropzone:!1},text:{uploadButton:"Upload a file",cancelButton:"Cancel",retryButton:"Retry",deleteButton:"Delete",failUpload:"Upload failed",dragZone:"Drop files here to upload",dropProcessing:"Processing dropped files...",formatProgress:"{percent}% of {total_size}",waitingForResponse:"Processing..."},template:'<div class="qq-uploader">'+
(this._options.dragAndDrop&&this._options.dragAndDrop.disableDefaultDropzone?"":'<div class="qq-upload-drop-area"><span>{dragZoneText}</span></div>')+(this._options.button?"":'<div class="qq-upload-button"><div>{uploadButtonText}</div></div>')+'<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>'+(this._options.listElement?"":'<ul class="qq-upload-list"></ul>')+"</div>",fileTemplate:'<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span><span class="qq-upload-file"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">{cancelButtonText}</a><a class="qq-upload-retry" href="#">{retryButtonText}</a><a class="qq-upload-delete" href="#">{deleteButtonText}</a><span class="qq-upload-status-text">{statusText}</span></li>',
classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",size:"qq-upload-size",cancel:"qq-upload-cancel",deleteButton:"qq-upload-delete",retry:"qq-upload-retry",statusText:"qq-upload-status-text",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,
failIcon:null,dropProcessing:"qq-drop-processing",dropProcessingSpinner:"qq-drop-processing-spinner"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}...",showButton:!1},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",
deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},showMessage:function(a){setTimeout(function(){window.alert(a)},0)},showConfirm:function(a,c,d){setTimeout(function(){window.confirm(a)?c():d&&d()},0)},showPrompt:function(a,c){var d=new qq.Promise,f=window.prompt(a,c);null!=f&&0<qq.trimStr(f).length?d.success(f):d.failure("Undefined or invalid user-supplied value.");return d}},!0);qq.extend(this._options,
a,!0);!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors?this._options.element.innerHTML="<div>"+this._options.messages.unsupportedBrowser+"</div>":(this._wrapCallbacks(),this._options.template=this._options.template.replace(/\{dragZoneText\}/g,this._options.text.dragZone),this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.text.uploadButton),this._options.template=this._options.template.replace(/\{dropProcessingText\}/g,
this._options.text.dropProcessing),this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.text.cancelButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{retryButtonText\}/g,this._options.text.retryButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{deleteButtonText\}/g,this._options.text.deleteButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{statusText\}/g,""),this._element=this._options.element,
this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button||(this._button=this._createUploadButton(this._find(this._element,"button"))),this._bindCancelAndRetryEvents(),this._dnd=this._setupDragAndDrop(),this._options.paste.targetElement&&this._options.paste.promptForName&&this._setupPastePrompt())};qq.extend(qq.FineUploader.prototype,qq.FineUploaderBasic.prototype);
qq.extend(qq.FineUploader.prototype,{clearStoredFiles:function(){qq.FineUploaderBasic.prototype.clearStoredFiles.apply(this,arguments);this._listElement.innerHTML=""},addExtraDropzone:function(a){this._dnd.setupExtraDropzone(a)},removeExtraDropzone:function(a){return this._dnd.removeDropzone(a)},getItemByFileId:function(a){for(var b=this._listElement.firstChild;b;){if(b.qqFileId==a)return b;b=b.nextSibling}},reset:function(){qq.FineUploaderBasic.prototype.reset.apply(this,arguments);this._element.innerHTML=
this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._options.button||(this._button=this._createUploadButton(this._find(this._element,"button")));this._bindCancelAndRetryEvents();this._dnd.dispose();this._dnd=this._setupDragAndDrop()},_removeFileItem:function(a){a=this.getItemByFileId(a);qq(a).remove()},_setupDragAndDrop:function(){var a=this,b=this._find(this._element,"dropProcessing"),c=this._options.dragAndDrop.extraDropzones,d;d=function(a){a.preventDefault()};
this._options.dragAndDrop.disableDefaultDropzone||c.push(this._find(this._options.element,"drop"));return new qq.DragAndDrop({dropZoneElements:c,hideDropZonesBeforeEnter:this._options.dragAndDrop.hideDropzones,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){var c=a._button.getInput();qq(b).css({display:"block"});qq(c).attach("click",d)},processingDroppedFilesComplete:function(c){var e=a._button.getInput();
qq(b).hide();qq(e).detach("click",d);c&&a.addFiles(c)},dropError:function(b,d){a._itemError(b,d)},dropLog:function(b,d){a.log(b,d)}}})},_leaving_document_out:function(a){return(qq.chrome()||qq.safari()&&qq.windows())&&0==a.clientX&&0==a.clientY||qq.firefox()&&!a.relatedTarget},_storeForLater:function(a){qq.FineUploaderBasic.prototype._storeForLater.apply(this,arguments);var b=this.getItemByFileId(a);qq(this._find(b,"spinner")).hide()},_find:function(a,b){var c=qq(a).getByClass(this._options.classes[b])[0];
if(!c)throw Error("element not found "+b);return c},_onSubmit:function(a,b){qq.FineUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(a,b)},_onProgress:function(a,b,c,d){qq.FineUploaderBasic.prototype._onProgress.apply(this,arguments);var f,e,g,h;f=this.getItemByFileId(a);e=this._find(f,"progressBar");g=Math.round(c/d*100);c===d?(h=this._find(f,"cancel"),qq(h).hide(),qq(e).hide(),qq(this._find(f,"statusText")).setText(this._options.text.waitingForResponse),this._displayFileSize(a)):
(this._displayFileSize(a,c,d),qq(e).css({display:"block"}));qq(e).css({width:g+"%"})},_onComplete:function(a,b,c,d){qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments);var f=this.getItemByFileId(a);qq(this._find(f,"statusText")).clearText();qq(f).removeClass(this._classes.retrying);qq(this._find(f,"progressBar")).hide();this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading||qq(this._find(f,"cancel")).hide();qq(this._find(f,"spinner")).hide();c.success?(this._isDeletePossible()&&
this._showDeleteLink(a),qq(f).addClass(this._classes.success),this._classes.successIcon&&(this._find(f,"finished").style.display="inline-block",qq(f).addClass(this._classes.successIcon))):(qq(f).addClass(this._classes.fail),this._classes.failIcon&&(this._find(f,"finished").style.display="inline-block",qq(f).addClass(this._classes.failIcon)),this._options.retry.showButton&&!this._preventRetries[a]&&qq(f).addClass(this._classes.retryable),this._controlFailureTextDisplay(f,c))},_onUpload:function(a,
b){qq.FineUploaderBasic.prototype._onUpload.apply(this,arguments);this._showSpinner(a)},_onCancel:function(a,b){qq.FineUploaderBasic.prototype._onCancel.apply(this,arguments);this._removeFileItem(a)},_onBeforeAutoRetry:function(a){var b,c,d,f,e;qq.FineUploaderBasic.prototype._onBeforeAutoRetry.apply(this,arguments);b=this.getItemByFileId(a);c=this._find(b,"progressBar");this._showCancelLink(b);c.style.width=0;qq(c).hide();this._options.retry.showAutoRetryNote&&(c=this._find(b,"statusText"),d=this._autoRetries[a]+
1,f=this._options.retry.maxAutoAttempts,e=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,d),e=e.replace(/\{maxAuto\}/g,f),qq(c).setText(e),1===d&&qq(b).addClass(this._classes.retrying))},_onBeforeManualRetry:function(a){var b=this.getItemByFileId(a);if(qq.FineUploaderBasic.prototype._onBeforeManualRetry.apply(this,arguments))return this._find(b,"progressBar").style.width=0,qq(b).removeClass(this._classes.fail),qq(this._find(b,"statusText")).clearText(),this._showSpinner(a),this._showCancelLink(b),
!0;qq(b).addClass(this._classes.retryable);return!1},_onSubmitDelete:function(a){if(this._isDeletePossible())!1!==this._options.callbacks.onSubmitDelete(a)&&(this._options.deleteFile.forceConfirm?this._showDeleteConfirm(a):this._sendDeleteRequest(a));else return this.log("Delete request ignored for file ID "+a+", delete feature is disabled.","warn"),!1},_onDeleteComplete:function(a,b,c){qq.FineUploaderBasic.prototype._onDeleteComplete.apply(this,arguments);var d=this.getItemByFileId(a),f=this._find(d,
"spinner"),d=this._find(d,"statusText");qq(f).hide();c?(qq(d).setText(this._options.deleteFile.deletingFailedText),this._showDeleteLink(a)):this._removeFileItem(a)},_sendDeleteRequest:function(a){var b=this.getItemByFileId(a),c=this._find(b,"deleteButton"),b=this._find(b,"statusText");qq(c).hide();this._showSpinner(a);qq(b).setText(this._options.deleteFile.deletingStatusText);this._deleteHandler.sendDelete(a,this.getUuid(a))},_showDeleteConfirm:function(a){var b=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,
this._handler.getName(a));this.getUuid(a);var c=this;this._options.showConfirm(b,function(){c._sendDeleteRequest(a)})},_addToList:function(a,b){var c=qq.toElement(this._options.fileTemplate);if(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading){var d=this._find(c,"cancel");qq(d).remove()}c.qqFileId=a;d=this._find(c,"file");qq(d).setText(this._options.formatFileName(b));qq(this._find(c,"size")).hide();this._options.multiple||(this._handler.cancelAll(),this._clearList());
this._listElement.appendChild(c);this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading&&this._displayFileSize(a)},_clearList:function(){this._listElement.innerHTML="";this.clearStoredFiles()},_displayFileSize:function(a,b,c){var d=this.getItemByFileId(a);a=this._formatSize(this.getSize(a));d=this._find(d,"size");void 0!==b&&void 0!==c&&(a=this._formatProgress(b,c));qq(d).css({display:"inline"});qq(d).setText(a)},_bindCancelAndRetryEvents:function(){var a=this;this._disposeSupport.attach(this._listElement,
"click",function(b){b=b||window.event;var c=b.target||b.srcElement;if(qq(c).hasClass(a._classes.cancel)||qq(c).hasClass(a._classes.retry)||qq(c).hasClass(a._classes.deleteButton)){qq.preventDefault(b);for(b=c.parentNode;void 0===b.qqFileId;)b=b.parentNode;qq(c).hasClass(a._classes.deleteButton)?a.deleteFile(b.qqFileId):qq(c).hasClass(a._classes.cancel)?a.cancel(b.qqFileId):(qq(b).removeClass(a._classes.retryable),a.retry(b.qqFileId))}})},_formatProgress:function(a,b){var c=this._options.text.formatProgress,
d=Math.round(a/b*100),c=c.replace("{percent}",d),d=this._formatSize(b);return c.replace("{total_size}",d)},_controlFailureTextDisplay:function(a,b){var c,d,f,e;c=this._options.failedUploadTextDisplay.mode;d=this._options.failedUploadTextDisplay.maxChars;f=this._options.failedUploadTextDisplay.responseProperty;"custom"===c?((c=b[f])?c.length>d&&(e=c.substring(0,d)+"..."):(c=this._options.text.failUpload,this.log("'"+f+"' is not a valid property on the server response.","warn")),qq(this._find(a,"statusText")).setText(e||
c),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(a,c)):"default"===c?qq(this._find(a,"statusText")).setText(this._options.text.failUpload):"none"!==c&&this.log("failedUploadTextDisplay.mode value of '"+c+"' is not valid","warn")},_showTooltip:function(a,b){a.title=b},_showSpinner:function(a){this._find(this.getItemByFileId(a),"spinner").style.display="inline-block"},_showCancelLink:function(a){if(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)a=
this._find(a,"cancel"),qq(a).css({display:"inline"})},_showDeleteLink:function(a){a=this._find(this.getItemByFileId(a),"deleteButton");qq(a).css({display:"inline"})},_itemError:function(a,b){this._options.showMessage(qq.FineUploaderBasic.prototype._itemError.apply(this,arguments))},_batchError:function(a){qq.FineUploaderBasic.prototype._batchError.apply(this,arguments);this._options.showMessage(a)},_setupPastePrompt:function(){var a=this;this._options.callbacks.onPasteReceived=function(){return a._options.showPrompt(a._options.paste.namePromptMessage,
a._options.paste.defaultName)}}});
qq.AjaxRequestor=function(a){function b(a){var b=qq.indexOf(l,a),d=m.maxConnections;delete q[a];l.splice(b,1);l.length>=d&&b<d&&(a=l[d-1],c(a))}function c(a){var b=new XMLHttpRequest,c=e(),l={},D;m.onSend(a);m.paramsStore.getParams&&(l=m.paramsStore.getParams(a));D=l;var u=m.endpointStore.getEndpoint(a),r=q[a].addToPath;void 0!==r&&(u+="/"+r);D=h&&D?qq.obj2url(D,u):u;q[a].xhr=b;b.onreadystatechange=d(a);b.open(c,D,!0);m.cors.expected&&m.cors.sendCredentials&&(b.withCredentials=!0);f(a);g("Sending "+
c+" request for "+a);!h&&l?b.send(qq.obj2url(l,"")):b.send()}function d(a){var d=q[a].xhr;return function(){if(4===d.readyState){var c=q[a].xhr,f=e(),h=!1;b(a);0<=qq.indexOf(m.successfulResponseCodes,c.status)||(h=!0,g(f+" request for "+a+" has failed - response code "+c.status,"error"));m.onComplete(a,c,h)}}}function f(a){var b=q[a].xhr;a=m.customHeaders;b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Cache-Control","no-cache");qq.each(a,function(a,d){b.setRequestHeader(a,
d)})}function e(){return m.demoMode?"GET":m.method}var g,h,l=[],q=[],m={method:"POST",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},successfulResponseCodes:[200],demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onSend:function(){},onComplete:function(){},onCancel:function(){}};qq.extend(m,a);g=m.log;h="GET"===e()||"DELETE"===e();return{send:function(a,b){q[a]={addToPath:b};l.push(a)<=m.maxConnections&&c(a)},cancel:function(a){var d=q[a].xhr,c=e();d?(d.onreadystatechange=
null,d.abort(),b(a),g("Cancelled "+c+" for "+a),m.onCancel(a),a=!0):a=!1;return a}}};
qq.DeleteFileAjaxRequestor=function(a){var b,c={endpointStore:{},maxConnections:3,customHeaders:{},paramsStore:{},demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onDelete:function(){},onDeleteComplete:function(){}};qq.extend(c,a);b=new qq.AjaxRequestor({method:"DELETE",endpointStore:c.endpointStore,paramsStore:c.paramsStore,maxConnections:c.maxConnections,customHeaders:c.customHeaders,successfulResponseCodes:[200,202,204],demoMode:c.demoMode,log:c.log,onSend:c.onDelete,onComplete:c.onDeleteComplete});
return{sendDelete:function(a,f){b.send(a,f);c.log("Submitted delete file request for "+a)}}};qq.WindowReceiveMessage=function(a){var b={};qq.extend({log:function(){}},a);return{receiveMessage:function(a,d){var f=function(a){d(a.data)};window.postMessage?b[a]=qq(window).attach("message",f):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(a){window.postMessage&&(a=b[a])&&a()}}};
qq.UploadHandler=function(a){var b=[],c,d,f,e;c={debug:!1,forceMultipart:!0,paramsInBody:!1,paramsStore:{},endpointStore:{},cors:{expected:!1,sendCredentials:!1},maxConnections:3,uuidParamName:"qquuid",totalFileSizeParamName:"qqtotalfilesize",chunking:{enabled:!1,partSize:2E6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},blobs:{paramNames:{name:"qqblobname"}},
log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onAutoRetry:function(){},onResume:function(){}};qq.extend(c,a);d=c.log;f=function(a){a=qq.indexOf(b,a);var d=c.maxConnections;0<=a&&(b.splice(a,1),b.length>=d&&a<d&&(a=b[d-1],e.upload(a)))};e=qq.supportedFeatures.ajaxUploading?new qq.UploadHandlerXhr(c,f,d):new qq.UploadHandlerForm(c,f,d);return{add:function(a){return e.add(a)},upload:function(a){if(b.push(a)<=c.maxConnections)return e.upload(a)},
retry:function(a){return 0<=qq.indexOf(b,a)?e.upload(a,!0):this.upload(a)},cancel:function(a){d("Cancelling "+a);c.paramsStore.remove(a);e.cancel(a);f(a)},cancelAll:function(){var a=this,d=[];qq.extend(d,b);qq.each(d,function(b,d){a.cancel(d)});b=[]},getName:function(a){return e.getName(a)},getSize:function(a){if(e.getSize)return e.getSize(a)},getFile:function(a){if(e.getFile)return e.getFile(a)},getQueue:function(){return b},reset:function(){d("Resetting upload handler");b=[];e.reset()},getUuid:function(a){return e.getUuid(a)},
isValid:function(a){return e.isValid(a)},getResumableFilesData:function(){return e.getResumableFilesData?e.getResumableFilesData():[]}}};
qq.UploadHandlerForm=function(a,b,c){function d(a){void 0!==p[a]&&(p[a](),delete p[a])}function f(a,b){var c=a.id;D[m[c]]=b;p[c]=qq(a).attach("load",function(){q[c]&&(v("Received iframe load event for CORS upload request (file id "+c+")"),t[c]=setTimeout(function(){var a="No valid message received from loaded iframe for file id "+c;v(a,"error");b({error:a})},1E3))});J.receiveMessage(c,function(a){v("Received the following window message: '"+a+"'");var b=qq.parseJson(a),f=b.uuid;f&&D[f]?(clearTimeout(t[c]),
delete t[c],d(c),a=D[f],delete D[f],J.stopReceivingMessages(c),a(b)):f||v("'"+a+"' does not contain a UUID - ignoring.")})}function e(a,b){l.cors.expected?f(a,b):p[a.id]=qq(a).attach("load",function(){v("Received response for "+a.id);if(a.parentNode){try{if(a.contentDocument&&a.contentDocument.body&&"false"==a.contentDocument.body.innerHTML)return}catch(d){v("Error when attempting to access iframe during handling of upload response ("+d+")","error")}b()}})}function g(a){var b=qq.toElement('<iframe src="javascript:false;" name="'+
a+'" />');b.setAttribute("id",a);b.style.display="none";document.body.appendChild(b);return b}function h(a,b){var d=l.paramsStore.getParams(a),c=qq.toElement('<form method="'+(l.demoMode?"GET":"POST")+'" enctype="multipart/form-data"></form>'),f=l.endpointStore.getEndpoint(a),e=f;d[l.uuidParamName]=m[a];l.paramsInBody?qq.obj2Inputs(d,c):e=qq.obj2url(d,f);c.setAttribute("action",e);c.setAttribute("target",b.name);c.style.display="none";document.body.appendChild(c);return c}var l=a,q=[],m=[],p={},t=
{},v=c,J=new qq.WindowReceiveMessage({log:v}),D={},u;return u={add:function(a){a.setAttribute("name",l.inputName);var b=q.push(a)-1;m[b]=qq.getUniqueId();a.parentNode&&qq(a).remove();return b},getName:function(a){if(u.isValid(a))return q[a].value.replace(/.*(\/|\\)/,"");v(a+" is not a valid item ID.","error")},isValid:function(a){return void 0!==q[a]},reset:function(){q=[];m=[];p={}},getUuid:function(a){return m[a]},cancel:function(a){l.onCancel(a,this.getName(a));delete q[a];delete m[a];delete p[a];
l.cors.expected&&(clearTimeout(t[a]),delete t[a],J.stopReceivingMessages(a));if(a=document.getElementById(a))a.setAttribute("src","java"+String.fromCharCode(115)+"cript:false;"),qq(a).remove()},upload:function(a){var c=q[a],f=u.getName(a),m=g(a),p;if(!c)throw Error("file with passed id was not added, or already uploaded or cancelled");l.onUpload(a,this.getName(a));p=h(a,m);p.appendChild(c);e(m,function(c){v("iframe loaded");if(!c){var e;try{var g=m.contentDocument||m.contentWindow.document,h=g.body.innerHTML;
v("converting iframe's innerHTML to JSON");v("innerHTML = "+h);h&&h.match(/^<pre/i)&&(h=g.body.firstChild.firstChild.nodeValue);e=qq.parseJson(h)}catch(q){v("Error when attempting to parse form upload response ("+q+")","error"),e={success:!1}}c=e}d(a);l.cors.expected||qq(m).remove();if(c.success||!l.onAutoRetry(a,f,c))l.onComplete(a,f,c),b(a)});v("Sending upload request for "+a);p.submit();qq(p).remove();return a}}};
qq.UploadHandlerXhr=function(a,b,c){function d(a,b,d){var c=E.getSize(a);a=E.getName(a);b[r.chunking.paramNames.partIndex]=d.part;b[r.chunking.paramNames.partByteOffset]=d.start;b[r.chunking.paramNames.chunkSize]=d.size;b[r.chunking.paramNames.totalParts]=d.count;b[r.totalFileSizeParamName]=c;A&&(b[r.chunking.paramNames.filename]=a)}function f(a,b){var d=r.chunking.partSize,c=E.getSize(a),f=n[a].file||n[a].blobData.blob,g=d*b,d=g+d>=c?c:g+d,c=e(a),h;f.slice?h=f.slice(g,d):f.mozSlice?h=f.mozSlice(g,
d):f.webkitSlice&&(h=f.webkitSlice(g,d));return{part:b,start:g,end:d,count:c,blob:h,size:d-g}}function e(a){a=E.getSize(a);return Math.ceil(a/r.chunking.partSize)}function g(a,b,d,c){var f=new FormData,e=r.demoMode?"GET":"POST",g=r.endpointStore.getEndpoint(c),h=g,y=E.getName(c),l=E.getSize(c),w=n[c].blobData;a[r.uuidParamName]=n[c].uuid;A&&(a[r.totalFileSizeParamName]=l,w&&(a[r.blobs.paramNames.name]=w.name));r.paramsInBody||(A||(a[r.inputName]=y),h=qq.obj2url(a,g));b.open(e,h,!0);r.cors.expected&&
r.cors.sendCredentials&&(b.withCredentials=!0);return A?(r.paramsInBody&&qq.obj2FormData(a,f),f.append(r.inputName,d),f):d}function h(a,b){var d=r.customHeaders,c=n[a].file||n[a].blobData.blob;b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Cache-Control","no-cache");A||(b.setRequestHeader("Content-Type","application/octet-stream"),b.setRequestHeader("X-Mime-Type",c.type));qq.each(d,function(a,d){b.setRequestHeader(a,d)})}function l(a,b,d){var c=E.getName(a),f=E.getSize(a);
n[a].attemptingResume=!1;r.onProgress(a,c,f,f);r.onComplete(a,c,b,d);delete n[a].xhr;x(a)}function q(a){var b=n[a].remainingChunkIdxs[0],c=f(a,b),e=n[a].xhr=new XMLHttpRequest,y=E.getSize(a),l=E.getName(a),w;void 0===n[a].loaded&&(n[a].loaded=0);B&&n[a].file&&v(a,c);e.onreadystatechange=t(a,e);e.upload.onprogress=function(d){if(d.lengthComputable){var c=d.loaded+n[a].loaded;d=d.total;var e=f(a,b);d-=e.size;var g=E.getSize(a),e=e.count,h=d-n[a].initialRequestOverhead;n[a].lastRequestOverhead=d;0===
b?(n[a].lastChunkIdxProgress=0,n[a].initialRequestOverhead=d,n[a].estTotalRequestsSize=g+e*d):n[a].lastChunkIdxProgress!==b&&(n[a].lastChunkIdxProgress=b,n[a].estTotalRequestsSize+=h);r.onProgress(a,l,c,n[a].estTotalRequestsSize)}};r.onUploadChunk(a,l,p(c));w=r.paramsStore.getParams(a);d(a,w,c);n[a].attemptingResume&&(w[r.resume.paramNames.resuming]=!0);w=g(w,e,c.blob,a);h(a,e);I("Sending chunked upload request for item "+a+": bytes "+(c.start+1)+"-"+c.end+" of "+y);e.send(w)}function m(a){I("Server has ordered chunking effort to be restarted on next attempt for item ID "+
a,"error");B&&(J(a),n[a].attemptingResume=!1);n[a].remainingChunkIdxs=[];delete n[a].loaded;delete n[a].estTotalRequestsSize;delete n[a].initialRequestOverhead}function p(a){return{partIndex:a.part,startByte:a.start+1,endByte:a.end,totalParts:a.count}}function t(a,b){return function(){if(4===b.readyState){var d;if(n[a]){I("xhr - server response received for "+a);I("responseText = "+b.responseText);try{d=qq.parseJson(b.responseText)}catch(c){I("Error when attempting to parse xhr response text ("+c+
")","error"),d={}}if(200!==b.status||!d.success||d.reset)if(d.reset&&m(a),n[a].attemptingResume&&d.reset)n[a].attemptingResume=!1,I("Server has declared that it cannot handle resume for item ID "+a+" - starting from the first chunk","error"),m(a),E.upload(a,!0);else{var e=E.getName(a);r.onAutoRetry(a,e,d,b)||l(a,d,b)}else if(y){var e=n[a].remainingChunkIdxs.shift(),g=f(a,e);n[a].attemptingResume=!1;var e=n[a],h=e.loaded,g=g.size;e.loaded=h+(g+(A?n[a].lastRequestOverhead:0));0<n[a].remainingChunkIdxs.length?
q(a):(B&&J(a),l(a,d,b))}else l(a,d,b)}}}}function v(a,b){var d=E.getUuid(a),c=n[a].loaded,f=n[a].initialRequestOverhead,e=n[a].estTotalRequestsSize,g=D(a);qq.setCookie(g,d+z+b.part+z+c+z+f+z+e,r.resume.cookiesExpireIn)}function J(a){n[a].file&&(a=D(a),qq.deleteCookie(a))}function D(a){var b=E.getName(a);a=E.getSize(a);var d=r.chunking.partSize,b="qqfilechunk"+z+encodeURIComponent(b)+z+a+z+d;void 0!==w&&(b+=z+w);return b}function u(a){var b=n[a].file||n[a].blobData.blob,d=E.getName(a),c,f;n[a].loaded=
0;c=n[a].xhr=new XMLHttpRequest;c.upload.onprogress=function(b){b.lengthComputable&&(n[a].loaded=b.loaded,r.onProgress(a,d,b.loaded,b.total))};c.onreadystatechange=t(a,c);f=r.paramsStore.getParams(a);b=g(f,c,b,a);h(a,c);I("Sending upload request for "+a);c.send(b)}var r=a,x=b,I=c,n=[],z="|",y=r.chunking.enabled&&qq.supportedFeatures.chunking,B=r.resume.enabled&&y&&qq.supportedFeatures.resume,w;w=null===r.resume.id||void 0===r.resume.id||qq.isFunction(r.resume.id)||qq.isObject(r.resume.id)?void 0:
r.resume.id;var A=r.forceMultipart||r.paramsInBody,E;return E={add:function(a){if(a instanceof File)a=n.push({file:a})-1;else if(qq.isBlob(a.blob))a=n.push({blobData:a})-1;else throw Error("Passed obj in not a File or BlobData (in qq.UploadHandlerXhr)");n[a].uuid=qq.getUniqueId();return a},getName:function(a){if(E.isValid(a)){var b=n[a].file;a=n[a].blobData;return b?null!==b.fileName&&void 0!==b.fileName?b.fileName:b.name:a.name}I(a+" is not a valid item ID.","error")},getSize:function(a){a=n[a].file||
n[a].blobData.blob;return qq.isFileOrInput(a)?null!=a.fileSize?a.fileSize:a.size:a.size},getFile:function(a){if(n[a])return n[a].file||n[a].blobData.blob},getLoaded:function(a){return n[a].loaded||0},isValid:function(a){return void 0!==n[a]},reset:function(){n=[]},getUuid:function(a){return n[a].uuid},upload:function(a,b){var d=this.getName(a);r.onUpload(a,d);if(y){var c=E.getName(a),d=0,g,h;if(!n[a].remainingChunkIdxs||0===n[a].remainingChunkIdxs.length){n[a].remainingChunkIdxs=[];if(B&&!b&&n[a].file){a:{g=
qq.getCookie(D(a));h=E.getName(a);var l,w,k;if(g){g=g.split(z);if(5===g.length){h=g[0];l=parseInt(g[1],10);w=parseInt(g[2],10);k=parseInt(g[3],10);g=parseInt(g[4],10);g={uuid:h,part:l,lastByteSent:w,initialRequestOverhead:k,estTotalRequestsSize:g};break a}I("Ignoring previously stored resume/chunk cookie for "+h+" - old cookie format","warn")}g=void 0}g&&(h=f(a,g.part),!1!==r.onResume(a,c,p(h))&&(d=g.part,n[a].uuid=g.uuid,n[a].loaded=g.lastByteSent,n[a].estTotalRequestsSize=g.estTotalRequestsSize,
n[a].initialRequestOverhead=g.initialRequestOverhead,n[a].attemptingResume=!0,I("Resuming "+c+" at partition index "+d)))}for(c=e(a)-1;c>=d;--c)n[a].remainingChunkIdxs.unshift(c)}q(a)}else u(a)},cancel:function(a){var b=n[a].xhr;r.onCancel(a,this.getName(a));b&&(b.onreadystatechange=null,b.abort());B&&J(a);delete n[a]},getResumableFilesData:function(){var a=[],b=[];return y&&B?(a=void 0===w?qq.getCookieNames(RegExp("^qqfilechunk\\"+z+".+\\"+z+"\\d+\\"+z+r.chunking.partSize+"=")):qq.getCookieNames(RegExp("^qqfilechunk\\"+
z+".+\\"+z+"\\d+\\"+z+r.chunking.partSize+"\\"+z+w+"=")),qq.each(a,function(a,d){var c=d.split(z),f=qq.getCookie(d).split(z);b.push({name:decodeURIComponent(c[1]),size:c[2],uuid:f[0],partIdx:f[1]})}),b):[]}}};
(function(a){var b,c,d,f,e,g,h,l,q,m;g=["uploaderType"];d=function(a){a&&(a=l(a),h(a),"basic"===e("uploaderType")?b(new qq.FineUploaderBasic(a)):b(new qq.FineUploader(a)));return c};f=function(a,b){var d=c.data("fineuploader");if(b)void 0===d&&(d={}),d[a]=b,c.data("fineuploader",d);else return void 0===d?null:d[a]};b=function(a){return f("uploader",a)};e=function(a,b){return f(a,b)};h=function(b){var d=b.callbacks={};b=new qq.FineUploaderBasic;a.each(b._options.callbacks,function(a){var b,f;b=/^on(\w+)/.exec(a)[1];
b=b.substring(0,1).toLowerCase()+b.substring(1);f=c;d[a]=function(){var a=Array.prototype.slice.call(arguments);return f.triggerHandler(b,a)}})};l=function(b,d){var f,h;f=void 0===d?"basic"!==b.uploaderType?{element:c[0]}:{}:d;a.each(b,function(b,d){0<=a.inArray(b,g)?e(b,d):d instanceof a?f[b]=d[0]:a.isPlainObject(d)?(f[b]={},l(d,f[b])):a.isArray(d)?(h=[],a.each(d,function(b,d){d instanceof a?a.merge(h,d):h.push(d)}),f[b]=h):f[b]=d});if(void 0===d)return f};q=function(d){return"string"===a.type(d)&&
!d.match(/^_/)&&void 0!==b()[d]};m=function(a){var d=[],c=Array.prototype.slice.call(arguments,1);l(c,d);return b()[a].apply(b(),d)};a.fn.fineUploader=function(f){var e=this,g=arguments,h=[];this.each(function(l,u){c=a(u);if(b()&&q(f)){if(h.push(m.apply(e,g)),1===e.length)return!1}else"object"!==typeof f&&f?a.error("Method "+f+" does not exist on jQuery.fineUploader"):d.apply(e,g)});return 1===h.length?h[0]:1<h.length?h:this}})(jQuery);
(function(a){function b(a){a||(a={});a.dropZoneElements=[h];a=f(a);d(a);c(new qq.DragAndDrop(a));return h}function c(a){var b,d=h.data(g);a?(void 0===d&&(d={}),d.dndInstance=a,h.data(g,d)):b=void 0===d?null:d.dndInstance;return b}function d(b){var d=b.callbacks={};new qq.FineUploaderBasic;a.each(new qq.DragAndDrop.callbacks,function(a){var b;b=h;d[a]=function(){var d=Array.prototype.slice.call(arguments);return b.triggerHandler(a,d)}})}function f(b,d){var c,e;c=void 0===d?{}:d;a.each(b,function(b,
d){d instanceof a?c[b]=d[0]:a.isPlainObject(d)?(c[b]={},f(d,c[b])):a.isArray(d)?(e=[],a.each(d,function(b,d){d instanceof a?a.merge(e,d):e.push(d)}),c[b]=e):c[b]=d});if(void 0===d)return c}function e(a){var b=[],d=Array.prototype.slice.call(arguments,1);f(d,b);return c()[a].apply(c(),b)}var g="fineUploaderDnd",h;a.fn.fineUploaderDnd=function(d){var f=this,g=arguments,p=[];this.each(function(t,v){h=a(v);if(c()&&"string"===a.type(d)&&"dispose"===d&&void 0!==c()[d]){if(p.push(e.apply(f,g)),1===f.length)return!1}else"object"!==
typeof d&&d?a.error("Method "+d+" does not exist in Fine Uploader's DnD module."):b.apply(f,g)});return 1===p.length?p[0]:1<p.length?p:this}})(jQuery);
(function(a){function b(a,b){(c(a,b)?f:d)(a,b)}var c,d,f;"classList"in document.documentElement?(c=function(a,b){return a.classList.contains(b)},d=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(c=function(a,b){return(new RegExp("(^|\\s+)"+b+"(\\s+|$)")).test(a.className)},d=function(a,b){c(a,b)||(a.className=a.className+" "+b)},f=function(a,b){a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," ")});var e={hasClass:c,addClass:d,removeClass:f,toggleClass:b,
has:c,add:d,remove:f,toggle:b};"function"===typeof define&&define.amd?define(e):a.classie=e})(window);
$(function(a){var b=document.querySelector("#input"),c=document.querySelector("#search-label");c.addEventListener("click",function(d){classie.has(b,"focus")?(classie.remove(b,"focus"),classie.remove(c,"active"),a("#input input").animate({width:"0px",left:"-20px"},function(){})):a("#input input").animate({left:0,width:"100%"},function(){classie.add(b,"focus");classie.add(c,"active")})});document.addEventListener("click",function(d){d=d.target.id;"search-terms"!=d&&"search-label-target"!=d&&classie.has(b,
"focus")&&(classie.remove(b,"focus"),classie.remove(c,"active"),a("#input input").animate({width:"0px",left:"-20px"},function(){}))})});$(document).ready(function(){$(".not_so_cool_input").focus(function(){$(this).css("border","2px solid #cb9897")});$(".not_so_cool_input").blur(function(){$(this).css("border","2px solid #ccc")});$(".not_so_cool_textarea").focus(function(){$(this).css("border","2px solid #cb9897")});$(".not_so_cool_textarea").blur(function(){$(this).css("border","2px solid #ccc")})});
if(!jQuery)throw Error("Bootstrap requires jQuery");
+function(a){a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});return setTimeout(function(){c||a(d).trigger(a.support.transition.end)},b),this};a(function(){var b=a.support,c;a:{c=document.createElement("bootstrap");var d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},f;for(f in d)if(void 0!==c.style[f]){c={end:d[f]};break a}c=void 0}b.transition=
c})}(window.jQuery);
+function(a){var b=function(b){a(b).on("click",'[data-dismiss="alert"]',this.close)};b.prototype.close=function(b){function c(){h.trigger("closed.bs.alert").remove()}var e=a(this),g=e.attr("data-target");g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,""));var h=a(g);b&&b.preventDefault();h.length||(h=e.hasClass("alert")?e:e.parent());h.trigger(b=a.Event("close.bs.alert"));b.isDefaultPrevented()||(h.removeClass("in"),a.support.transition&&h.hasClass("fade")?h.one(a.support.transition.end,c).emulateTransitionEnd(150):
c())};var c=a.fn.alert;a.fn.alert=function(d){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new b(this));"string"==typeof d&&e[d].call(c)})};a.fn.alert.Constructor=b;a.fn.alert.noConflict=function(){return a.fn.alert=c,this};a(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',b.prototype.close)}(window.jQuery);
+function(a){var b=function(d,c){this.$element=a(d);this.options=a.extend({},b.DEFAULTS,c)};b.DEFAULTS={loadingText:"loading..."};b.prototype.setState=function(a){var b=this.$element,c=b.is("input")?"val":"html",g=b.data();a+="Text";g.resetText||b.data("resetText",b[c]());b[c](g[a]||this.options[a]);setTimeout(function(){"loadingText"==a?b.addClass("disabled").attr("disabled","disabled"):b.removeClass("disabled").removeAttr("disabled")},0)};b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons"]');
a.length&&"radio"===this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change").prop("type")&&a.find(".active").removeClass("active");this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(d){return this.each(function(){var c=a(this),e=c.data("bs.button"),g="object"==typeof d&&d;e||c.data("bs.button",e=new b(this,g));"toggle"==d?e.toggle():d&&e.setState(d)})};a.fn.button.Constructor=b;a.fn.button.noConflict=function(){return a.fn.button=c,this};
a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn"));c.button("toggle");b.preventDefault()})}(window.jQuery);
+function(a){var b=function(b,c){this.$element=a(b);this.$indicators=this.$element.find(".carousel-indicators");this.options=c;this.paused=this.sliding=this.interval=this.$active=this.$items=null;"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5E3,pause:"hover",wrap:!0};b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&
(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this};b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)};b.prototype.to=function(b){var c=this,e=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid",function(){c.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(this.$items[b]))};b.prototype.pause=
function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};b.prototype.next=function(){return this.sliding?void 0:this.slide("next")};b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")};b.prototype.slide=function(b,c){var e=this.$element.find(".item.active"),g=c||e[b](),h=this.interval,l="next"==b?"left":"right",q=
"next"==b?"first":"last",m=this;if(!g.length){if(!this.options.wrap)return;g=this.$element.find(".item")[q]()}this.sliding=!0;h&&this.pause();q=a.Event("slide.bs.carousel",{relatedTarget:g[0],direction:l});if(!g.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(m.$indicators.children()[m.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(q),
q.isDefaultPrevented())return;g.addClass(b);g[0].offsetWidth;e.addClass(l);g.addClass(l);e.one(a.support.transition.end,function(){g.removeClass([b,l].join(" ")).addClass("active");e.removeClass(["active",l].join(" "));m.sliding=!1;setTimeout(function(){m.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(q),q.isDefaultPrevented())return;e.removeClass("active");g.addClass("active");this.sliding=!1;this.$element.trigger("slid")}return h&&this.cycle(),this}};var c=
a.fn.carousel;a.fn.carousel=function(d){return this.each(function(){var c=a(this),e=c.data("bs.carousel"),g=a.extend({},b.DEFAULTS,c.data(),"object"==typeof d&&d),h="string"==typeof d?d:g.slide;e||c.data("bs.carousel",e=new b(this,g));"number"==typeof d?e.to(d):h?e[h]():g.interval&&e.pause().cycle()})};a.fn.carousel.Constructor=b;a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this};a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,e=a(this),
g=a(e.attr("data-target")||(c=e.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""));c=a.extend({},g.data(),e.data());var h=e.attr("data-slide-to");h&&(c.interval=!1);g.carousel(c);(h=e.attr("data-slide-to"))&&g.data("bs.carousel").to(h);b.preventDefault()});a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(window.jQuery);
+function(a){var b=function(d,c){this.$element=a(d);this.options=a.extend({},b.DEFAULTS,c);this.transitioning=null;this.options.parent&&(this.$parent=a(this.options.parent));this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0};b.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){if((b=this.$parent&&
this.$parent.find("> .panel > .in"))&&b.length){var c=b.data("bs.collapse");if(c&&c.transitioning)return;b.collapse("hide");c||b.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0);this.transitioning=1;b=function(){this.$element.removeClass("collapsing").addClass("in")[e]("auto");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return b.call(this);c=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,
a.proxy(b,this)).emulateTransitionEnd(350)[e](this.$element[0][c])}}};b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){b=this.dimension();this.$element[b](this.$element[b]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var c=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};
return a.support.transition?(this.$element[b](0).one(a.support.transition.end,a.proxy(c,this)).emulateTransitionEnd(350),void 0):c.call(this)}}};b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(d){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),g=a.extend({},b.DEFAULTS,c.data(),"object"==typeof d&&d);e||c.data("bs.collapse",e=new b(this,g));"string"==typeof d&&e[d]()})};a.fn.collapse.Constructor=b;a.fn.collapse.noConflict=
function(){return a.fn.collapse=c,this};a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,e=a(this);b=e.attr("data-target")||b.preventDefault()||(c=e.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");c=a(b);var g=(b=c.data("bs.collapse"))?"toggle":e.data(),h=e.attr("data-parent"),l=h&&a(h);b&&b.transitioning||(l&&l.find('[data-toggle=collapse][data-parent="'+h+'"]').not(e).addClass("collapsed"),e[c.hasClass("in")?"addClass":"removeClass"]("collapsed"));c.collapse(g)})}(window.jQuery);
+function(a){function b(){a(d).remove();a(f).each(function(b){var d=c(a(this));d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown")),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown"))})}function c(b){var d=b.attr("data-target");d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,""));return(d=d&&a(d))&&d.length?d:b.parent()}var d=".dropdown-backdrop",f="[data-toggle=dropdown]",e=function(b){a(b).on("click.bs.dropdown",this.toggle)};e.prototype.toggle=
function(d){var f=a(this);if(!f.is(".disabled, :disabled")){var e=c(f),g=e.hasClass("open");if(b(),!g){if("ontouchstart"in document.documentElement&&!e.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b),e.trigger(d=a.Event("show.bs.dropdown")),d.isDefaultPrevented())return;e.toggleClass("open").trigger("shown.bs.dropdown");f.focus()}return!1}};e.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),
!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(f).focus(),d.click();d=a("[role=menu] li:not(.divider):visible a",e);d.length&&(e=d.index(d.filter(":focus")),38==b.keyCode&&0<e&&e--,40==b.keyCode&&e<d.length-1&&e++,~e||(e=0),d.eq(e).focus())}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var d=a(this),c=d.data("dropdown");c||d.data("dropdown",c=new e(this));"string"==typeof b&&c[b].call(d)})};a.fn.dropdown.Constructor=
e;a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this};a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,e.prototype.toggle).on("keydown.bs.dropdown.data-api",f+", [role=menu]",e.prototype.keydown)}(window.jQuery);
+function(a){var b=function(b,c){this.options=c;this.$element=a(b);this.$backdrop=this.isShown=null;this.options.remote&&this.$element.load(this.options.remote)};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)};b.prototype.show=function(b){var c=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e);this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',
a.proxy(this.hide,this)),this.backdrop(function(){var e=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body);c.$element.show();e&&c.$element[0].offsetWidth;c.$element.addClass("in").attr("aria-hidden",!1);c.enforceFocus();var h=a.Event("shown.bs.modal",{relatedTarget:b});e?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(h)}).emulateTransitionEnd(300):c.$element.focus().trigger(h)}))};b.prototype.hide=
function(b){b&&b.preventDefault();b=a.Event("hide.bs.modal");this.$element.trigger(b);this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())};b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",
a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))};b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")};b.prototype.hideModal=function(){var a=this;this.$element.hide();this.backdrop(function(){a.removeBackdrop();a.$element.trigger("hidden.bs.modal")})};b.prototype.removeBackdrop=
function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),
e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),b)e?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(d,c){return this.each(function(){var e=a(this),g=e.data("bs.modal"),h=a.extend({},b.DEFAULTS,e.data(),"object"==typeof d&&
d);g||e.data("bs.modal",g=new b(this,h));"string"==typeof d?g[d](c):h.show&&g.show(c)})};a.fn.modal.Constructor=b;a.fn.modal.noConflict=function(){return a.fn.modal=c,this};a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),e=c.attr("href"),g=a(c.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),e=g.data("modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},g.data(),c.data());b.preventDefault();g.modal(e,this).one("hide",function(){c.is(":visible")&&c.focus()})});
a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(window.jQuery);
+function(a){var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};b.prototype.init=function(b,c,e){this.enabled=!0;this.type=b;this.$element=a(c);this.options=this.getOptions(e);b=this.options.trigger.split(" ");
for(c=b.length;c--;)if(e=b[c],"click"==e)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=e){var g="hover"==e?"mouseleave":"blur";this.$element.on(("hover"==e?"mouseenter":"focus")+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(g+"."+this.type,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};b.prototype.getDefaults=
function(){return b.DEFAULTS};b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b};b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,g){c[a]!=g&&(b[a]=g)}),b};b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()};b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),
void 0):c.hide()};b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled&&(this.$element.trigger(b),!b.isDefaultPrevented())){var c=this.tip();this.setContent();this.options.animation&&c.addClass("fade");var b="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,g=e.test(b);g&&(b=b.replace(e,"")||"top");c.detach().css({top:0,left:0,display:"block"}).addClass(b);this.options.container?
c.appendTo(this.options.container):c.insertAfter(this.$element);var e=this.getPosition(),h=c[0].offsetWidth,l=c[0].offsetHeight;if(g){var q=this.$element.parent(),g=b,m=document.documentElement.scrollTop||document.body.scrollTop,p="body"==this.options.container?window.innerWidth:q.outerWidth(),t="body"==this.options.container?window.innerHeight:q.outerHeight(),q="body"==this.options.container?0:q.offset().left,b="bottom"==b&&e.top+e.height+l-m>t?"top":"top"==b&&0>e.top-m-l?"bottom":"right"==b&&e.right+
h>p?"left":"left"==b&&e.left-h<q?"right":b;c.removeClass(g).addClass(b)}c=this.getCalculatedOffset(b,e,h,l);this.applyPlacement(c,b);this.$element.trigger("shown.bs."+this.type)}};b.prototype.applyPlacement=function(a,b){var c,g=this.tip(),h=g[0].offsetWidth,l=g[0].offsetHeight,q=parseInt(g.css("margin-top"),10),m=parseInt(g.css("margin-left"),10);isNaN(q)&&(q=0);isNaN(m)&&(m=0);a.top+=q;a.left+=m;g.offset(a).addClass("in");q=g[0].offsetWidth;m=g[0].offsetHeight;("top"==b&&m!=l&&(c=!0,a.top=a.top+
l-m),/bottom|top/.test(b))?(l=0,0>a.left&&(l=-2*a.left,a.left=0,g.offset(a),q=g[0].offsetWidth),this.replaceArrow(l-h+q,q,"left")):this.replaceArrow(m-l,m,"top");c&&g.offset(a)};b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")};b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b);a.removeClass("fade in top bottom left right")};b.prototype.hide=function(){function b(){"in"!=c.hoverState&&e.detach()}
var c=this,e=this.tip(),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(e.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?e.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.$element.trigger("hidden.bs."+this.type),this)};b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};b.prototype.hasContent=
function(){return this.getTitle()};b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())};b.prototype.getCalculatedOffset=function(a,b,c,g){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-g,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-g/2,left:b.left-c}:{top:b.top+b.height/2-g/2,left:b.left+
b.width}};b.prototype.getTitle=function(){var a=this.$element,b=this.options;return a.attr("data-original-title")||("function"==typeof b.title?b.title.call(a[0]):b.title)};b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)};b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)};b.prototype.enable=function(){this.enabled=
!0};b.prototype.disable=function(){this.enabled=!1};b.prototype.toggleEnabled=function(){this.enabled=!this.enabled};b.prototype.toggle=function(b){b=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;b.tip().hasClass("in")?b.leave(b):b.enter(b)};b.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var f=a(this),e=f.data("bs.tooltip"),g="object"==
typeof c&&c;e||f.data("bs.tooltip",e=new b(this,g));"string"==typeof c&&e[c]()})};a.fn.tooltip.Constructor=b;a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery);
+function(a){var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);b.prototype.constructor=b;b.prototype.getDefaults=function(){return b.DEFAULTS};b.prototype.setContent=
function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b);a.find(".popover-content")[this.options.html?"html":"text"](c);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};b.prototype.hasContent=function(){return this.getTitle()||this.getContent()};b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?
b.content.call(a[0]):b.content)};b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var f=a(this),e=f.data("bs.popover"),g="object"==typeof c&&c;e||f.data("bs.popover",e=new b(this,g));"string"==typeof c&&e[c]()})};a.fn.popover.Constructor=b;a.fn.popover.noConflict=function(){return a.fn.popover=c,
this}}(window.jQuery);
+function(a){function b(c,f){var e,g=a.proxy(this.process,this);this.$element=a(c).is("body")?a(window):a(c);this.$body=a("body");this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",g);this.options=a.extend({},b.DEFAULTS,f);this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.offsets=a([]);this.targets=a([]);this.activeTarget=null;this.refresh();this.process()}b.DEFAULTS={offset:10};b.prototype.refresh=function(){var b=
this.$element[0]==window?"offset":"position";this.offsets=a([]);this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var e=a(this),e=e.data("target")||e.attr("href"),g=/^#\w/.test(e)&&a(e);return g&&g.length&&[[g[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]);c.targets.push(this[1])})};b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+
this.options.offset,c=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),g=this.offsets,h=this.targets,l=this.activeTarget;if(b>=c)return l!=(a=h.last()[0])&&this.activate(a);for(a=g.length;a--;)l!=h[a]&&b>=g[a]&&(!g[a+1]||b<=g[a+1])&&this.activate(h[a])};b.prototype.activate=function(b){this.activeTarget=b;a(this.selector).parents(".active").removeClass("active");b=a(this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]').parents("li").addClass("active");
b.parent(".dropdown-menu").length&&(b=b.closest("li.dropdown").addClass("active"));b.trigger("activate")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var f=a(this),e=f.data("bs.scrollspy"),g="object"==typeof c&&c;e||f.data("bs.scrollspy",e=new b(this,g));"string"==typeof c&&e[c]()})};a.fn.scrollspy.Constructor=b;a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this};a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery);
+function(a){var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),e=b.attr("data-target");if(e||(e=b.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var g=c.find(".active:last a")[0],h=a.Event("show.bs.tab",{relatedTarget:g});(b.trigger(h),h.isDefaultPrevented())||(e=a(e),this.activate(b.parent("li"),c),this.activate(e,e.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:g})}))}};
b.prototype.activate=function(b,c,e){function g(){h.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");b.addClass("active");l?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active");e&&e()}var h=c.find("> .active"),l=e&&a.support.transition&&h.hasClass("fade");l?h.one(a.support.transition.end,g).emulateTransitionEnd(150):g();h.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var f=
a(this),e=f.data("bs.tab");e||f.data("bs.tab",e=new b(this));"string"==typeof c&&e[c]()})};a.fn.tab.Constructor=b;a.fn.tab.noConflict=function(){return a.fn.tab=c,this};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault();a(this).tab("show")})}(window.jQuery);
+function(a){var b=function(c,f){this.options=a.extend({},b.DEFAULTS,f);this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this));this.$element=a(c);this.affixed=this.unpin=null;this.checkPosition()};b.RESET="affix affix-top affix-bottom";b.DEFAULTS={offset:0};b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=
a(document).height(),f=this.$window.scrollTop(),e=this.$element.offset(),g=this.options.offset,h=g.top,l=g.bottom;"object"!=typeof g&&(l=h=g);"function"==typeof h&&(h=g.top());"function"==typeof l&&(l=g.bottom());c=null!=this.unpin&&f+this.unpin<=e.top?!1:null!=l&&e.top+this.$element.height()>=c-l?"bottom":null!=h&&h>=f?"top":!1;this.affixed!==c&&(this.unpin&&this.$element.css("top",""),this.affixed=c,this.unpin="bottom"==c?e.top-f:null,this.$element.removeClass(b.RESET).addClass("affix"+(c?"-"+c:
"")),"bottom"==c&&this.$element.offset({top:document.body.offsetHeight-l-this.$element.height()}))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var f=a(this),e=f.data("bs.affix"),g="object"==typeof c&&c;e||f.data("bs.affix",e=new b(this,g));"string"==typeof c&&e[c]()})};a.fn.affix.Constructor=b;a.fn.affix.noConflict=function(){return a.fn.affix=c,this};a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{};c.offsetBottom&&
(c.offset.bottom=c.offsetBottom);c.offsetTop&&(c.offset.top=c.offsetTop);b.affix(c)})})}(window.jQuery);
(function(a,b,c){function d(c,d,e){c=b.createElement(c);return d&&(c.id=H+d),e&&(c.style.cssText=e),a(c)}function f(){return c.innerHeight?c.innerHeight:a(c).height()}function e(a){var b=B.length;a=(L+a)%b;return 0>a?b+a:a}function g(a,b){return Math.round((/%/.test(a)?("x"===b?w.width():f())/100:1)*parseInt(a,10))}function h(a,b){return a.retinaUrl&&1<c.devicePixelRatio?b.replace(a.photoRegex,a.retinaSuffix):b}function l(a){"contains"in u[0]&&!u[0].contains(a.target)&&(a.stopPropagation(),u.focus())}
function q(){var b,c=a.data(M,Q);null==c?(k=a.extend({},ha),console&&console.log&&console.log("Error: cboxElement missing settings object")):k=a.extend({},c);for(b in k)a.isFunction(k[b])&&"on"!==b.slice(0,2)&&(k[b]=k[b].call(M));k.rel=k.rel||M.rel||a(M).data("rel")||"nofollow";k.href=k.href||a(M).attr("href");k.title=k.title||M.title;"string"==typeof k.href&&(k.href=a.trim(k.href))}function m(c,d){a(b).trigger(c);P.triggerHandler(c);a.isFunction(d)&&d.call(M)}function p(c){aa||(M=c,q(),B=a(M),L=
0,"nofollow"!==k.rel&&(B=a("."+X).filter(function(){var b,c=a.data(this,Q);return c&&(b=a(this).data("rel")||c.rel||this.rel),b===k.rel}),L=B.index(M),-1===L&&(B=B.add(M),L=B.length-1)),D.css({opacity:parseFloat(k.opacity),cursor:k.overlayClose?"pointer":"auto",visibility:"visible"}).show(),ia&&u.add(D).removeClass(ia),k.className&&u.add(D).addClass(k.className),ia=k.className,k.closeButton?U.html(k.close).appendTo(x):U.appendTo("<div/>"),R||(R=ba=!0,u.css({visibility:"hidden",display:"block"}),A=
d(F,"LoadedContent","width:0; height:0; overflow:hidden"),x.css({width:"",height:""}).append(A),K=I.height()+y.height()+x.outerHeight(!0)-x.height(),N=n.width()+z.width()+x.outerWidth(!0)-x.width(),S=A.outerHeight(!0),T=A.outerWidth(!0),k.w=g(k.initialWidth,"x"),k.h=g(k.initialHeight,"y"),A.css({width:"",height:k.h}),G.position(),m(pa,k.onOpen),O.add(fa).hide(),u.focus(),k.trapFocus&&b.addEventListener&&(b.addEventListener("focus",l,!0),P.one(ja,function(){b.removeEventListener("focus",l,!0)})),k.returnFocus&&
P.one(ja,function(){a(M).focus()})),J())}function t(){!u&&b.body&&(ka=!1,w=a(c),u=d(F).attr({id:Q,"class":!1===a.support.opacity?H+"IE":"",role:"dialog",tabindex:"-1"}).hide(),D=d(F,"Overlay").hide(),V=a([d(F,"LoadingOverlay")[0],d(F,"LoadingGraphic")[0]]),r=d(F,"Wrapper"),x=d(F,"Content").append(fa=d(F,"Title"),ga=d(F,"Current"),Z=a('<button type="button"/>').attr({id:H+"Previous"}),Y=a('<button type="button"/>').attr({id:H+"Next"}),W=d("button","Slideshow"),V),U=a('<button type="button"/>').attr({id:H+
"Close"}),r.append(d(F).append(d(F,"TopLeft"),I=d(F,"TopCenter"),d(F,"TopRight")),d(F,!1,"clear:left").append(n=d(F,"MiddleLeft"),x,z=d(F,"MiddleRight")),d(F,!1,"clear:left").append(d(F,"BottomLeft"),y=d(F,"BottomCenter"),d(F,"BottomRight"))).find("div div").css({"float":"left"}),E=d(F,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),O=Y.add(Z).add(ga).add(W),a(b.body).append(D,u.append(r,E)))}function v(){function c(a){1<a.which||a.shiftKey||a.altKey||a.metaKey||
a.ctrlKey||(a.preventDefault(),p(this))}return u?(ka||(ka=!0,Y.click(function(){G.next()}),Z.click(function(){G.prev()}),U.click(function(){G.close()}),D.click(function(){k.overlayClose&&G.close()}),a(b).bind("keydown."+H,function(a){var b=a.keyCode;R&&k.escKey&&27===b&&(a.preventDefault(),G.close());R&&k.arrowKey&&B[1]&&!a.altKey&&(37===b?(a.preventDefault(),Z.click()):39===b&&(a.preventDefault(),Y.click()))}),a.isFunction(a.fn.on)?a(b).on("click."+H,"."+X,c):a("."+X).live("click."+H,c)),!0):!1}
function J(){var e,f,y,w=G.prep,l=++la;ba=!0;C=!1;M=B[L];q();m(ca);m(da,k.onLoad);k.h=k.height?g(k.height,"y")-S-K:k.innerHeight&&g(k.innerHeight,"y");k.w=k.width?g(k.width,"x")-T-N:k.innerWidth&&g(k.innerWidth,"x");k.mw=k.w;k.mh=k.h;k.maxWidth&&(k.mw=g(k.maxWidth,"x")-T-N,k.mw=k.w&&k.w<k.mw?k.w:k.mw);k.maxHeight&&(k.mh=g(k.maxHeight,"y")-S-K,k.mh=k.h&&k.h<k.mh?k.h:k.mh);e=k.href;na=setTimeout(function(){V.show()},100);k.inline?(y=d(F).hide().insertBefore(a(e)[0]),P.one(ca,function(){y.replaceWith(A.children())}),
w(a(e))):k.iframe?w(" "):k.html?w(k.html):k.photo||k.photoRegex.test(e)?(e=h(k,e),C=b.createElement("img"),a(C).addClass(H+"Photo").bind("error",function(){k.title=!1;w(d(F,"Error").html(k.imgError))}).one("load",function(){var b;l===la&&(a.each(["alt","longdesc","aria-describedby"],function(b,c){var d=a(M).attr(c)||a(M).attr("data-"+c);d&&C.setAttribute(c,d)}),k.retinaImage&&1<c.devicePixelRatio&&(C.height/=c.devicePixelRatio,C.width/=c.devicePixelRatio),k.scalePhotos&&(f=function(){C.height-=C.height*
b;C.width-=C.width*b},k.mw&&C.width>k.mw&&(b=(C.width-k.mw)/C.width,f()),k.mh&&C.height>k.mh&&(b=(C.height-k.mh)/C.height,f())),k.h&&(C.style.marginTop=Math.max(k.mh-C.height,0)/2+"px"),B[1]&&(k.loop||B[L+1])&&(C.style.cursor="pointer",C.onclick=function(){G.next()}),C.style.width=C.width+"px",C.style.height=C.height+"px",setTimeout(function(){w(C)},1))}),setTimeout(function(){C.src=e},1)):e&&E.load(e,k.data,function(b,c){l===la&&w("error"===c?d(F,"Error").html(k.xhrError):a(this).contents())})}var D,
u,r,x,I,n,z,y,B,w,A,E,V,fa,ga,W,Y,Z,U,O,k,K,N,S,T,M,L,C,R,ba,aa,na,G,ia,ka,ha={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,
loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1},Q="colorbox",H="cbox",
X=H+"Element",pa=H+"_open",da=H+"_load",ea=H+"_complete",ma=H+"_cleanup",ja=H+"_closed",ca=H+"_purge",P=a("<a/>"),F="div",la=0,oa={},qa=function(){function a(){clearTimeout(g)}function b(){(k.loop||B[L+1])&&(a(),g=setTimeout(G.next,k.slideshowSpeed))}function c(){W.html(k.slideshowStop).unbind(y).one(y,d);P.bind(ea,b).bind(da,a);u.removeClass(h+"off").addClass(h+"on")}function d(){a();P.unbind(ea,b).unbind(da,a);W.html(k.slideshowStart).unbind(y).one(y,function(){G.next();c()});u.removeClass(h+"on").addClass(h+
"off")}function e(){f=!1;W.hide();a();P.unbind(ea,b).unbind(da,a);u.removeClass(h+"off "+h+"on")}var f,g,h=H+"Slideshow_",y="click."+H;return function(){f?k.slideshow||(P.unbind(ma,e),e()):k.slideshow&&B[1]&&(f=!0,P.one(ma,e),k.slideshowAuto?c():d(),W.show())}}();a.colorbox||(a(t),G=a.fn[Q]=a[Q]=function(b,c){var d=this;if(b=b||{},t(),v()){if(a.isFunction(d))d=a("<a/>"),b.open=!0;else if(!d[0])return d;c&&(b.onComplete=c);d.each(function(){a.data(this,Q,a.extend({},a.data(this,Q)||ha,b))}).addClass(X);
(a.isFunction(b.open)&&b.open.call(d)||b.open)&&p(d[0])}return d},G.position=function(b,c){function d(){I[0].style.width=y[0].style.width=x[0].style.width=parseInt(u[0].style.width,10)-N+"px";x[0].style.height=n[0].style.height=z[0].style.height=parseInt(u[0].style.height,10)-K+"px"}var e,h,B,l=0,A=0,m=u.offset();if(w.unbind("resize."+H),u.css({top:-9E4,left:-9E4}),h=w.scrollTop(),B=w.scrollLeft(),k.fixed?(m.top-=h,m.left-=B,u.css({position:"fixed"})):(l=h,A=B,u.css({position:"absolute"})),A+=!1!==
k.right?Math.max(w.width()-k.w-T-N-g(k.right,"x"),0):!1!==k.left?g(k.left,"x"):Math.round(Math.max(w.width()-k.w-T-N,0)/2),l+=!1!==k.bottom?Math.max(f()-k.h-S-K-g(k.bottom,"y"),0):!1!==k.top?g(k.top,"y"):Math.round(Math.max(f()-k.h-S-K,0)/2),u.css({top:m.top,left:m.left,visibility:"visible"}),r[0].style.width=r[0].style.height="9999px",e={width:k.w+T+N,height:k.h+S+K,top:l,left:A},b){var q=0;a.each(e,function(a){return e[a]!==oa[a]?(q=b,void 0):void 0});b=q}oa=e;b||u.css(e);u.dequeue().animate(e,
{duration:b||0,complete:function(){d();ba=!1;r[0].style.width=k.w+T+N+"px";r[0].style.height=k.h+S+K+"px";k.reposition&&setTimeout(function(){w.bind("resize."+H,G.position)},1);c&&c()},step:d})},G.resize=function(a){var b;R&&(a=a||{},a.width&&(k.w=g(a.width,"x")-T-N),a.innerWidth&&(k.w=g(a.innerWidth,"x")),A.css({width:k.w}),a.height&&(k.h=g(a.height,"y")-S-K),a.innerHeight&&(k.h=g(a.innerHeight,"y")),a.innerHeight||a.height||(b=A.scrollTop(),A.css({height:"auto"}),k.h=A.height()),A.css({height:k.h}),
b&&A.scrollTop(b),G.position("none"===k.transition?0:k.speed))},G.prep=function(c){if(R){var f,g="none"===k.transition?0:k.speed;A.empty().remove();A=d(F,"LoadedContent").append(c);A.hide().appendTo(E.show()).css({width:(k.w=k.w||A.width(),k.w=k.mw&&k.mw<k.w?k.mw:k.w,k.w),overflow:k.scrolling?"auto":"hidden"}).css({height:(k.h=k.h||A.height(),k.h=k.mh&&k.mh<k.h?k.mh:k.h,k.h)}).prependTo(x);E.hide();a(C).css({"float":"none"});f=function(){function c(){!1===a.support.opacity&&u[0].style.removeAttribute("filter")}
var f,y,w=B.length;R&&(y=function(){clearTimeout(na);V.hide();m(ea,k.onComplete)},fa.html(k.title).add(A).show(),1<w?("string"==typeof k.current&&ga.html(k.current.replace("{current}",L+1).replace("{total}",w)).show(),Y[k.loop||w-1>L?"show":"hide"]().html(k.next),Z[k.loop||L?"show":"hide"]().html(k.previous),qa(),k.preloading&&a.each([e(-1),e(1)],function(){var c,d,e=B[this],f=a.data(e,Q);f&&f.href?(c=f.href,a.isFunction(c)&&(c=c.call(e))):c=a(e).attr("href");c&&(f.photo||f.photoRegex.test(c))&&(c=
h(f,c),d=b.createElement("img"),d.src=c)})):O.hide(),k.iframe?(f=d("iframe")[0],"frameBorder"in f&&(f.frameBorder=0),"allowTransparency"in f&&(f.allowTransparency="true"),k.scrolling||(f.scrolling="no"),a(f).attr({src:k.href,name:(new Date).getTime(),"class":H+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",y).appendTo(A),P.one(ca,function(){f.src="//about:blank"}),k.fastIframe&&a(f).trigger("load")):y(),"fade"===k.transition?u.fadeTo(g,1,c):c())};"fade"===
k.transition?u.fadeTo(g,0,function(){G.position(0,f)}):G.position(g,f)}},G.next=function(){!ba&&B[1]&&(k.loop||B[L+1])&&(L=e(1),p(B[L]))},G.prev=function(){!ba&&B[1]&&(k.loop||L)&&(L=e(-1),p(B[L]))},G.close=function(){R&&!aa&&(aa=!0,R=!1,m(ma,k.onCleanup),w.unbind("."+H),D.fadeTo(k.fadeOut||0,0),u.stop().fadeTo(k.fadeOut||0,0,function(){u.add(D).css({opacity:1,cursor:"auto"}).hide();m(ca);A.empty().remove();setTimeout(function(){aa=!1;m(ja,k.onClosed)},1)}))},G.remove=function(){u&&(u.stop(),a.colorbox.close(),
u.stop().remove(),D.remove(),aa=!1,u=null,a("."+X).removeData(Q).removeClass(X),a(b).unbind("click."+H))},G.element=function(){return a(M)},G.settings=ha)})(jQuery,document,window);var bkExtend=function(){var a=arguments;1==a.length&&(a=[this,a[0]]);for(var b in a[1])a[0][b]=a[1][b];return a[0]};function bkClass(){}bkClass.prototype.construct=function(){};
bkClass.extend=function(a){var b=function(){if(arguments[0]!==bkClass)return this.construct.apply(this,arguments)},c=new this(bkClass);bkExtend(c,a);b.prototype=c;b.extend=this.extend;return b};
var bkElement=bkClass.extend({construct:function(a,b){"string"==typeof a&&(a=(b||document).createElement(a));return a=$BK(a)},appendTo:function(a){a.appendChild(this);return this},appendBefore:function(a){a.parentNode.insertBefore(this,a);return this},addEvent:function(a,b){bkLib.addEvent(this,a,b);return this},setContent:function(a){this.innerHTML=a;return this},pos:function(){var a=curtop=0;obj=this;if(obj.offsetParent){do a+=obj.offsetLeft,curtop+=obj.offsetTop;while(obj=obj.offsetParent)}var b=
window.opera?0:parseInt(this.getStyle("border-width")||this.style.border)||0;return[a+b,curtop+b+this.offsetHeight]},noSelect:function(){bkLib.noSelect(this);return this},parentTag:function(a){var b=this;do{if(b&&b.nodeName&&b.nodeName.toUpperCase()==a)return b;b=b.parentNode}while(b);return!1},hasClass:function(a){return this.className.match(new RegExp("(\\s|^)nicEdit-"+a+"(\\s|$)"))},addClass:function(a){this.hasClass(a)||(this.className+=" nicEdit-"+a);return this},removeClass:function(a){this.hasClass(a)&&
(this.className=this.className.replace(new RegExp("(\\s|^)nicEdit-"+a+"(\\s|$)")," "));return this},setStyle:function(a){var b=this.style,c;for(c in a)switch(c){case "float":b.cssFloat=b.styleFloat=a[c];break;case "opacity":b.opacity=a[c];b.filter="alpha(opacity="+Math.round(100*a[c])+")";break;case "className":this.className=a[c];break;default:b[c]=a[c]}return this},getStyle:function(a,b){var c=b?b:document.defaultView;if(1==this.nodeType)return c&&c.getComputedStyle?c.getComputedStyle(this,null).getPropertyValue(a):
this.currentStyle[bkLib.camelize(a)]},remove:function(){this.parentNode.removeChild(this);return this},setAttributes:function(a){for(var b in a)this[b]=a[b];return this}}),bkLib={isMSIE:-1!=navigator.appVersion.indexOf("MSIE"),addEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},toArray:function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c},noSelect:function(a){a.setAttribute&&"input"!=a.nodeName.toLowerCase()&&"textarea"!=a.nodeName.toLowerCase()&&
a.setAttribute("unselectable","on");for(var b=0;b<a.childNodes.length;b++)bkLib.noSelect(a.childNodes[b])},camelize:function(a){return a.replace(/\-(.)/g,function(a,c){return c.toUpperCase()})},inArray:function(a,b){return null!=bkLib.search(a,b)},search:function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return null},cancelEvent:function(a){a=a||window.event;a.preventDefault&&a.stopPropagation&&(a.preventDefault(),a.stopPropagation());return!1},domLoad:[],domLoaded:function(){if(!arguments.callee.done)for(arguments.callee.done=
!0,i=0;i<bkLib.domLoad.length;i++)bkLib.domLoad[i]()},onDomLoaded:function(a){this.domLoad.push(a);document.addEventListener?document.addEventListener("DOMContentLoaded",bkLib.domLoaded,null):bkLib.isMSIE&&(document.write("<style>.nicEdit-main p { margin: 0; }</style><script id=__ie_onload defer "+("https:"==location.protocol?"src='javascript:void(0)'":"src=//0")+">\x3c/script>"),$BK("__ie_onload").onreadystatechange=function(){"complete"==this.readyState&&bkLib.domLoaded()});window.onload=bkLib.domLoaded}};
function $BK(a){"string"==typeof a&&(a=document.getElementById(a));return a&&!a.appendTo?bkExtend(a,bkElement.prototype):a}var bkEvent={addEvent:function(a,b){b&&(this.eventList=this.eventList||{},this.eventList[a]=this.eventList[a]||[],this.eventList[a].push(b));return this},fireEvent:function(){var a=bkLib.toArray(arguments),b=a.shift();if(this.eventList&&this.eventList[b])for(var c=0;c<this.eventList[b].length;c++)this.eventList[b][c].apply(this,a)}};function __(a){return a}
Function.prototype.closure=function(){var a=this,b=bkLib.toArray(arguments),c=b.shift();return function(){if("undefined"!=typeof bkLib)return a.apply(c,b.concat(bkLib.toArray(arguments)))}};Function.prototype.closureListener=function(){var a=this,b=bkLib.toArray(arguments),c=b.shift();return function(d){d=d||window.event;return a.apply(c,[d,d.target?d.target:d.srcElement].concat(b))}};
var parseButtons=[],nicEditorConfig=bkClass.extend({buttons:{bold:{name:__("Click to Bold"),command:"Bold",tags:["B","STRONG"],css:{"font-weight":"bold"},key:"b"},italic:{name:__("Click to Italic"),command:"Italic",tags:["EM","I"],css:{"font-style":"italic"},key:"i"},underline:{name:__("Click to Underline"),command:"Underline",tags:["U"],css:{"text-decoration":"underline"},key:"u"},left:{name:__("Left Align"),command:"justifyleft",noActive:!0},center:{name:__("Center Align"),command:"justifycenter",
noActive:!0},right:{name:__("Right Align"),command:"justifyright",noActive:!0},justify:{name:__("Justify Align"),command:"justifyfull",noActive:!0},ol:{name:__("Insert Ordered List"),command:"insertorderedlist",tags:["OL"]},ul:{name:__("Insert Unordered List"),command:"insertunorderedlist",tags:["UL"]},subscript:{name:__("Click to Subscript"),command:"subscript",tags:["SUB"]},superscript:{name:__("Click to Superscript"),command:"superscript",tags:["SUP"]},strikethrough:{name:__("Click to Strike Through"),
command:"strikeThrough",css:{"text-decoration":"line-through"}},removeformat:{name:__("Remove Formatting"),command:"removeformat",noActive:!0},indent:{name:__("Indent Text"),command:"indent",noActive:!0},outdent:{name:__("Remove Indent"),command:"outdent",noActive:!0},hr:{name:__("Horizontal Rule"),command:"insertHorizontalRule",noActive:!0}},iconsPath:"../nicEditorIcons.gif",buttonList:"save bold italic underline left center align justify ol ul fontSize fontFamily fontFormat indent outdent image upload link unlink forecolor bgcolor".split(" "),
iconList:{xhtml:1,bgcolor:2,forecolor:3,bold:4,center:5,hr:6,indent:7,italic:8,justify:9,left:10,ol:11,outdent:12,removeformat:13,right:14,save:25,strikethrough:16,subscript:17,superscript:18,ul:19,underline:20,image:21,link:22,unlink:23,close:24,arrow:26,upload:27}}),nicEditors={nicPlugins:[],editors:[],registerPlugin:function(a,b){this.nicPlugins.push({p:a,o:b})},allTextAreas:function(a){for(var b=document.getElementsByTagName("textarea"),c=0;c<b.length;c++)nicEditors.editors.push((new nicEditor(a)).panelInstance(b[c]));
return nicEditors.editors},findEditor:function(a){for(var b=nicEditors.editors,c=0;c<b.length;c++)if(b[c].instanceById(a))return b[c].instanceById(a)}},nicEditor=bkClass.extend({construct:function(a){this.options=new nicEditorConfig;bkExtend(this.options,a);this.nicInstances=[];this.loadedPlugins=[];a=nicEditors.nicPlugins;for(var b=0;b<a.length;b++)this.loadedPlugins.push(new a[b].p(this,a[b].o));nicEditors.editors.push(this);bkLib.addEvent(document.body,"mousedown",this.selectCheck.closureListener(this))},
panelInstance:function(a,b){a=this.checkReplace($BK(a));var c=(new bkElement("DIV")).setStyle({width:(parseInt(a.getStyle("width"))||a.clientWidth)+"px"}).appendBefore(a);this.setPanel(c);return this.addInstance(a,b)},checkReplace:function(a){var b=nicEditors.findEditor(a);b&&(b.removeInstance(a),b.removePanel());return a},addInstance:function(a,b){a=this.checkReplace($BK(a));var c=a.contentEditable||window.opera?new nicEditorInstance(a,b,this):new nicEditorIFrameInstance(a,b,this);this.nicInstances.push(c);
return this},removeInstance:function(a){a=$BK(a);for(var b=this.nicInstances,c=0;c<b.length;c++)b[c].e==a&&(b[c].remove(),this.nicInstances.splice(c,1))},removePanel:function(a){this.nicPanel&&(this.nicPanel.remove(),this.nicPanel=null)},instanceById:function(a){a=$BK(a);for(var b=this.nicInstances,c=0;c<b.length;c++)if(b[c].e==a)return b[c]},setPanel:function(a){this.nicPanel=new nicEditorPanel($BK(a),this.options,this);this.fireEvent("panel",this.nicPanel);return this},nicCommand:function(a,b){this.selectedInstance&&
this.selectedInstance.nicCommand(a,b)},getIcon:function(a,b){var c=this.options.iconList[a],d=b.iconFiles?b.iconFiles[a]:"";return{backgroundImage:"url('"+(c?this.options.iconsPath:d)+"')",backgroundPosition:(c?-38*(c-1):0)+"px 0px"}},selectCheck:function(a,b){do if(b.className&&-1!=b.className.indexOf("nicEdit"))return!1;while(b=b.parentNode);this.fireEvent("blur",this.selectedInstance,b);this.lastSelectedInstance=this.selectedInstance;this.selectedInstance=null;return!1}}),nicEditor=nicEditor.extend(bkEvent),
nicEditorInstance=bkClass.extend({isSelected:!1,construct:function(a,b,c){this.ne=c;this.elm=this.e=a;this.options=b||{};newX=parseInt(a.getStyle("width"))||a.clientWidth;newY=parseInt(a.getStyle("height"))||a.clientHeight;this.initialHeight=newY-8;if((c="textarea"==a.nodeName.toLowerCase())||this.options.hasPanel){b=bkLib.isMSIE&&!("undefined"!=typeof document.body.style.maxHeight&&"CSS1Compat"==document.compatMode);var d={width:newX+"px",border:"1px solid #ccc",borderTop:0,overflowY:"auto",overflowX:"hidden"};
d[b?"height":"maxHeight"]=this.ne.options.maxHeight?this.ne.options.maxHeight+"px":null;this.editorContain=(new bkElement("DIV")).setStyle(d).appendBefore(a);d=(new bkElement("DIV")).setStyle({width:"100%",margin:"0px",padding:"4px",minHeight:newY+"px"}).addClass("main").appendTo(this.editorContain);a.setStyle({display:"none"});d.innerHTML=a.innerHTML;c&&(d.setContent(a.value),this.copyElm=a,(a=a.parentTag("FORM"))&&bkLib.addEvent(a,"submit",this.saveContent.closure(this)));d.setStyle(b?{height:newY+
"px"}:{overflow:"hidden"});this.elm=d}this.ne.addEvent("blur",this.blur.closure(this));this.init();this.blur()},init:function(){this.elm.setAttribute("contentEditable","true");""==this.getContent()&&this.setContent("<br />");this.instanceDoc=document.defaultView;this.elm.addEvent("mousedown",this.selected.closureListener(this)).addEvent("keypress",this.keyDown.closureListener(this)).addEvent("focus",this.selected.closure(this)).addEvent("blur",this.blur.closure(this)).addEvent("keyup",this.selected.closure(this));
this.ne.fireEvent("add",this)},remove:function(){this.saveContent();if(this.copyElm||this.options.hasPanel)this.editorContain.remove(),this.e.setStyle({display:"block"}),this.ne.removePanel();this.disable();this.ne.fireEvent("remove",this)},disable:function(){this.elm.setAttribute("contentEditable","false")},getSel:function(){return window.getSelection?window.getSelection():document.selection},getRng:function(){var a=this.getSel();if(a&&0!==a.rangeCount)return 0<a.rangeCount?a.getRangeAt(0):a.createRange()},
selRng:function(a,b){window.getSelection?(b.removeAllRanges(),b.addRange(a)):a.select()},selElm:function(){var a=this.getRng();if(a){if(a.startContainer){var b=a.startContainer;if(1==a.cloneContents().childNodes.length)for(var c=0;c<b.childNodes.length;c++){var d=b.childNodes[c].ownerDocument.createRange();d.selectNode(b.childNodes[c]);if(1!=a.compareBoundaryPoints(Range.START_TO_START,d)&&-1!=a.compareBoundaryPoints(Range.END_TO_END,d))return $BK(b.childNodes[c])}return $BK(b)}return $BK("Control"==
this.getSel().type?a.item(0):a.parentElement())}},saveRng:function(){this.savedRange=this.getRng();this.savedSel=this.getSel()},restoreRng:function(){this.savedRange&&this.selRng(this.savedRange,this.savedSel)},keyDown:function(a,b){a.ctrlKey&&this.ne.fireEvent("key",this,a)},selected:function(a,b){b||(b=this.selElm)||(b=this.selElm());if(!a.ctrlKey){var c=this.ne.selectedInstance;c!=this&&(c&&this.ne.fireEvent("blur",c,b),this.ne.selectedInstance=this,this.ne.fireEvent("focus",c,b));this.ne.fireEvent("selected",
c,b);this.isFocused=!0;this.elm.addClass("selected")}return!1},blur:function(){this.isFocused=!1;this.elm.removeClass("selected")},saveContent:function(){if(this.copyElm||this.options.hasPanel)this.ne.fireEvent("save",this),this.copyElm?this.copyElm.value=this.getContent():this.e.innerHTML=this.getContent()},getElm:function(){return this.elm},getContent:function(){this.content=this.getElm().innerHTML;this.ne.fireEvent("get",this);return this.content},setContent:function(a){this.content=a;this.ne.fireEvent("set",
this);this.elm.innerHTML=this.content},nicCommand:function(a,b){document.execCommand(a,!1,b)}}),nicEditorIFrameInstance=nicEditorInstance.extend({savedStyles:[],init:function(){var a=this.elm.innerHTML.replace(/^\s+|\s+$/g,"");this.elm.innerHTML="";a?a:a="<br />";this.initialContent=a;this.elmFrame=(new bkElement("iframe")).setAttributes({src:"javascript:;",frameBorder:0,allowTransparency:"true",scrolling:"no"}).setStyle({height:"100px",width:"100%"}).addClass("frame").appendTo(this.elm);this.copyElm&&
this.elmFrame.setStyle({width:this.elm.offsetWidth-8+"px"});a=["font-size","font-family","font-weight","color"];for(itm in a)this.savedStyles[bkLib.camelize(itm)]=this.elm.getStyle(itm);setTimeout(this.initFrame.closure(this),50)},disable:function(){this.elm.innerHTML=this.getContent()},initFrame:function(){var a=$BK(this.elmFrame.contentWindow.document);a.designMode="on";a.open();var b=this.ne.options.externalCSS;a.write("<html><head>"+(b?'<link href="'+b+'" rel="stylesheet" type="text/css" />':
"")+'</head><body id="nicEditContent" style="margin: 0 !important; background-color: transparent !important;">'+this.initialContent+"</body></html>");a.close();this.frameDoc=a;this.frameWin=$BK(this.elmFrame.contentWindow);this.frameContent=$BK(this.frameWin.document.body).setStyle(this.savedStyles);this.instanceDoc=this.frameWin.document.defaultView;this.heightUpdate();this.frameDoc.addEvent("mousedown",this.selected.closureListener(this)).addEvent("keyup",this.heightUpdate.closureListener(this)).addEvent("keydown",
this.keyDown.closureListener(this)).addEvent("keyup",this.selected.closure(this));this.ne.fireEvent("add",this)},getElm:function(){return this.frameContent},setContent:function(a){this.content=a;this.ne.fireEvent("set",this);this.frameContent.innerHTML=this.content;this.heightUpdate()},getSel:function(){return this.frameWin?this.frameWin.getSelection():this.frameDoc.selection},heightUpdate:function(){this.elmFrame.style.height=Math.max(this.frameContent.offsetHeight,this.initialHeight)+"px"},nicCommand:function(a,
b){this.frameDoc.execCommand(a,!1,b);setTimeout(this.heightUpdate.closure(this),100)}}),nicEditorPanel=bkClass.extend({construct:function(a,b,c){this.elm=a;this.options=b;this.ne=c;this.panelButtons=[];this.buttonList=bkExtend([],this.ne.options.buttonList);this.panelContain=(new bkElement("DIV")).setStyle({overflow:"hidden",width:"100%",border:"1px solid #cccccc",backgroundColor:"#efefef"}).addClass("panelContain");this.panelElm=(new bkElement("DIV")).setStyle({margin:"4px",marginTop:"0px",zoom:1,
overflow:"hidden"}).addClass("panel").appendTo(this.panelContain);this.panelContain.appendTo(a);b=this.ne.options;c=b.buttons;for(button in c)this.addButton(button,b,!0);this.reorder();a.noSelect()},addButton:function(a,b,c){c=b.buttons[a];c=c.type?eval("(typeof("+c.type+') == "undefined") ? null : '+c.type+";"):nicEditorButton;var d=bkLib.inArray(this.buttonList,a);c&&(d||this.ne.options.fullPanel)&&(this.panelButtons.push(new c(this.panelElm,a,b,this.ne)),d||this.buttonList.push(a))},findButton:function(a){for(var b=
0;b<this.panelButtons.length;b++)if(this.panelButtons[b].name==a)return this.panelButtons[b]},reorder:function(){for(var a=this.buttonList,b=0;b<a.length;b++){var c=this.findButton(a[b]);c&&this.panelElm.appendChild(c.margin)}},remove:function(){this.elm.remove()}}),nicEditorButton=bkClass.extend({construct:function(a,b,c,d){this.options=c.buttons[b];this.name=b;this.ne=d;this.elm=a;this.margin=(new bkElement("DIV")).setStyle({"float":"left",marginTop:"4px"}).appendTo(a);this.contain=(new bkElement("DIV")).setStyle({width:"32px",
height:"32px"}).addClass("buttonContain").appendTo(this.margin);this.border=(new bkElement("DIV")).setStyle({backgroundColor:"#efefef",border:"4px solid #efefef"}).appendTo(this.contain);this.button=(new bkElement("DIV")).setStyle({width:"30px",height:"30px",overflow:"hidden",zoom:1,cursor:"pointer",fontSize:"20px",textAlign:"center"}).addClass("button").appendTo(this.border);this.button.addEvent("mouseover",this.hoverOn.closure(this)).addEvent("mouseout",this.hoverOff.closure(this)).addEvent("mousedown",
this.mouseClick.closure(this)).noSelect();switch(b){case "left":btnName="align-left";break;case "center":btnName="align-center";break;case "right":btnName="align-right";break;case "justify":btnName="align-justify";break;case "ol":btnName="list-ol";break;case "ul":btnName="list-ul";break;case "removeformat":btnName="eraser";break;case "link":btnName="chain";break;case "unlink":btnName="chain-broken";break;case "forecolor":btnName="pencil";break;case "bgcolor":btnName="pencil-square";break;default:btnName=
b}a="";"pencil"==btnName&&(a='style="color: #e74c3c;"');$(this.button).html('<i class="fa fa-'+btnName+'" '+a+"></i>");window.opera||(this.button.onmousedown=this.button.onclick=bkLib.cancelEvent);d.addEvent("selected",this.enable.closure(this)).addEvent("blur",this.disable.closure(this)).addEvent("key",this.key.closure(this));this.disable();this.init()},init:function(){},hide:function(){this.contain.setStyle({display:"none"})},updateState:function(){this.isDisabled?this.setBg():this.isHover?this.setBg("hover"):
this.isActive?this.setBg("active"):this.setBg()},setBg:function(a){switch(a){case "hover":var b={border:"1px solid #666",backgroundColor:"#ddd"};break;case "active":b={border:"1px solid #666",backgroundColor:"#ccc"};break;default:b={border:"1px solid #efefef",backgroundColor:"#efefef"}}this.border.setStyle(b).addClass("button-"+a)},checkNodes:function(a){var b=a;do if(this.options.tags&&bkLib.inArray(this.options.tags,b.nodeName))return this.activate(),!0;while(b=b.parentNode&&"nicEdit"!=b.className);
for(b=$BK(a);3==b.nodeType;)b=$BK(b.parentNode);if(this.options.css)for(itm in this.options.css)if(b.getStyle(itm,this.ne.selectedInstance.instanceDoc)==this.options.css[itm])return this.activate(),!0;this.deactivate();return!1},activate:function(){this.isDisabled||(this.isActive=!0,this.updateState(),this.ne.fireEvent("buttonActivate",this))},deactivate:function(){this.isActive=!1;this.updateState();this.isDisabled||this.ne.fireEvent("buttonDeactivate",this)},enable:function(a,b){this.isDisabled=
!1;this.contain.setStyle({opacity:1}).addClass("buttonEnabled");this.updateState();this.checkNodes(b)},disable:function(a,b){this.isDisabled=!0;this.contain.setStyle({opacity:.6}).removeClass("buttonEnabled");this.updateState()},toggleActive:function(){this.isActive?this.deactivate():this.activate()},hoverOn:function(){this.isDisabled||(this.isHover=!0,this.updateState(),this.ne.fireEvent("buttonOver",this))},hoverOff:function(){this.isHover=!1;this.updateState();this.ne.fireEvent("buttonOut",this)},
mouseClick:function(){this.options.command&&(this.ne.nicCommand(this.options.command,this.options.commandArgs),this.options.noActive||this.toggleActive());this.ne.fireEvent("buttonClick",this)},key:function(a,b){this.options.key&&b.ctrlKey&&String.fromCharCode(b.keyCode||b.charCode).toLowerCase()==this.options.key&&(this.mouseClick(),b.preventDefault&&b.preventDefault())}}),nicPlugin=bkClass.extend({construct:function(a,b){this.options=b;this.ne=a;this.ne.addEvent("panel",this.loadPanel.closure(this));
this.init()},loadPanel:function(a){var b=this.options.buttons,c;for(c in b)a.addButton(c,this.options);a.reorder()},init:function(){}}),nicPaneOptions={},nicEditorPane=bkClass.extend({construct:function(a,b,c,d){this.ne=b;this.elm=a;this.pos=a.pos();this.contain=(new bkElement("div")).setStyle({zIndex:"99999",overflow:"hidden",position:"absolute",left:this.pos[0]+"px",top:this.pos[1]+"px"});this.pane=(new bkElement("div")).setStyle({fontSize:"15px",border:"1px solid #bbb",overflow:"hidden",padding:"8px",
textAlign:"left",backgroundColor:"#ccc"}).addClass("pane").setStyle(c).appendTo(this.contain);d&&!d.options.noClose&&(this.close=(new bkElement("div")).setStyle({"float":"right",height:"16px",width:"16px",cursor:"pointer"}).setStyle(this.ne.getIcon("close",nicPaneOptions)).addEvent("mousedown",d.removePane.closure(this)).appendTo(this.pane));this.contain.noSelect().appendTo(document.body);this.position();this.init()},init:function(){},position:function(){if(this.ne.nicPanel){var a=this.ne.nicPanel.elm,
a=a.pos()[0]+parseInt(a.getStyle("width"))-(parseInt(this.pane.getStyle("width"))+8);a<this.pos[0]&&this.contain.setStyle({left:a+"px"})}},toggle:function(){this.isVisible=!this.isVisible;this.contain.setStyle({display:this.isVisible?"block":"none"})},remove:function(){this.contain&&(this.contain.remove(),this.contain=null)},append:function(a){a.appendTo(this.pane)},setContent:function(a){this.pane.setContent(a)}}),nicEditorAdvancedButton=nicEditorButton.extend({init:function(){this.ne.addEvent("selected",
this.removePane.closure(this)).addEvent("blur",this.removePane.closure(this))},mouseClick:function(){this.isDisabled||(this.pane&&this.pane.pane?this.removePane():(this.pane=new nicEditorPane(this.contain,this.ne,{width:this.width||"270px",backgroundColor:"#fff"},this),this.addPane(),this.ne.selectedInstance.saveRng()))},addForm:function(a,b){this.form=(new bkElement("form")).addEvent("submit",this.submit.closureListener(this));this.pane.append(this.form);this.inputs={};for(itm in a){var c=a[itm],
d="";b&&(d=b.getAttribute(itm));d||(d=c.value||"");var f=a[itm].type;if("title"==f)(new bkElement("div")).setContent(c.txt).setStyle({fontSize:"14px",fontWeight:"bold",padding:"0px",margin:"8px 0"}).appendTo(this.form);else{var e=(new bkElement("div")).setStyle({overflow:"hidden",clear:"both"}).appendTo(this.form);c.txt&&(new bkElement("label")).setAttributes({"for":itm}).setContent(c.txt).setStyle({margin:"8px 8px",fontSize:"13px",width:"50px",lineHeight:"40px",textAlign:"right","float":"left"}).appendTo(e);
switch(f){case "text":this.inputs[itm]=(new bkElement("input")).setAttributes({id:itm,value:d,type:"text"}).setStyle({margin:"8px 0",fontSize:"13px","float":"left",height:"40px",border:"1px solid #ccc",overflow:"hidden"}).setStyle(c.style).appendTo(e);break;case "select":this.inputs[itm]=(new bkElement("select")).setAttributes({id:itm}).setStyle({border:"1px solid #ccc","float":"left",margin:"8px 0"}).appendTo(e);for(opt in c.options)(new bkElement("option")).setAttributes({value:opt,selected:opt==
d?"selected":""}).setContent(c.options[opt]).appendTo(this.inputs[itm]);break;case "content":this.inputs[itm]=(new bkElement("textarea")).setAttributes({id:itm}).setStyle({border:"1px solid #ccc","float":"left"}).setStyle(c.style).appendTo(e),this.inputs[itm].value=d}}}(new bkElement("input")).setAttributes({type:"submit"}).setStyle({backgroundColor:"#efefef",border:"1px solid #ccc",margin:"3px 0","float":"left",clear:"both"}).appendTo(this.form);this.form.onsubmit=bkLib.cancelEvent},submit:function(){},
findElm:function(a,b,c){a=this.ne.selectedInstance.getElm().getElementsByTagName(a);for(var d=0;d<a.length;d++)if(a[d].getAttribute(b)==c)return $BK(a[d])},removePane:function(){this.pane&&(this.pane.remove(),this.pane=null,this.ne.selectedInstance.restoreRng())}}),nicButtonTips=bkClass.extend({construct:function(a){this.ne=a;a.addEvent("buttonOver",this.show.closure(this)).addEvent("buttonOut",this.hide.closure(this))},show:function(a){this.timer=setTimeout(this.create.closure(this,a),400)},create:function(a){this.timer=
null;this.pane||(this.pane=new nicEditorPane(a.button,this.ne,{fontSize:"12px",marginTop:"5px"}),this.pane.setContent(a.options.name))},hide:function(a){this.timer&&clearTimeout(this.timer);this.pane&&(this.pane=this.pane.remove())}});nicEditors.registerPlugin(nicButtonTips);
var nicSelectOptions={buttons:{fontSize:{name:__("Select Font Size"),type:"nicEditorFontSizeSelect",command:"fontsize"},fontFamily:{name:__("Select Font Family"),type:"nicEditorFontFamilySelect",command:"fontname"},fontFormat:{name:__("Select Font Format"),type:"nicEditorFontFormatSelect",command:"formatBlock"}}},nicEditorSelect=bkClass.extend({construct:function(a,b,c,d){this.options=c.buttons[b];this.elm=a;this.ne=d;this.name=b;this.selOptions=[];this.margin=(new bkElement("div")).setStyle({"float":"left",
marginTop:"4px"}).appendTo(this.elm);this.contain=(new bkElement("div")).setStyle({width:"32px",height:"32px",cursor:"pointer",overflow:"hidden"}).addClass("selectContain").addEvent("click",this.toggle.closure(this)).appendTo(this.margin);this.items=(new bkElement("div")).setStyle({overflow:"hidden",zoom:1,paddingLeft:"3px"}).appendTo(this.contain);this.control=(new bkElement("div")).setStyle({overflow:"hidden","float":"right",height:"30px",width:"30px",fontSize:"20px",textAlign:"center"}).addClass("selectControl").appendTo(this.items);
this.txt=(new bkElement("div")).setStyle({overflow:"hidden","float":"left",width:"66px",height:"0px",marginTop:"0px",fontFamily:"sans-serif",textAlign:"center",fontSize:"12px"}).addClass("selectTxt").appendTo(this.items);this.control.addEvent("mouseover",this.hoverOn.closure(this)).addEvent("mouseout",this.hoverOff.closure(this));switch(b){case "fontSize":btnName="text-height";break;case "fontFamily":btnName="font";break;case "fontFormat":btnName="header";break;default:btnName=b}$(this.control).html('<i class="fa fa-'+
btnName+'"></i>');window.opera||(this.contain.onmousedown=this.control.onmousedown=this.txt.onmousedown=bkLib.cancelEvent);this.margin.noSelect();this.ne.addEvent("selected",this.enable.closure(this)).addEvent("blur",this.disable.closure(this));this.disable();this.init()},disable:function(){this.isDisabled=!0;this.close();this.contain.setStyle({opacity:.6})},enable:function(a){this.isDisabled=!1;this.close();this.contain.setStyle({opacity:1})},setDisplay:function(a){this.txt.setContent(a)},toggle:function(){this.isDisabled||
(this.pane?this.close():this.open())},open:function(){this.pane=new nicEditorPane(this.items,this.ne,{width:"120px",padding:"0px",borderTop:0,borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc",borderBottom:"0px",backgroundColor:"#e9e9e9"});for(var a=0;a<this.selOptions.length;a++){var b=this.selOptions[a],c=(new bkElement("div")).setStyle({overflow:"hidden",borderBottom:"1px solid #ccc",width:"120px",textAlign:"left",overflow:"hidden",cursor:"pointer"}),d=(new bkElement("div")).setStyle({padding:"0px 8px"}).setContent(b[1]).appendTo(c).noSelect();
d.addEvent("click",this.update.closure(this,b[0])).addEvent("mouseover",this.over.closure(this,d)).addEvent("mouseout",this.out.closure(this,d)).setAttributes("id",b[0]);this.pane.append(c);window.opera||(d.onmousedown=bkLib.cancelEvent)}},close:function(){this.pane&&(this.pane=this.pane.remove())},hoverOn:function(){this.isDisabled||(this.isHover=!0,this.updateState(),this.ne.fireEvent("buttonOver",this.pane))},hoverOff:function(){this.isHover=!1;this.updateState();this.ne.fireEvent("buttonOut",
this.pane)},updateState:function(){this.isDisabled?this.setBg():this.isHover?this.setBg("hover"):this.isActive?this.setBg("active"):this.setBg()},setBg:function(a){switch(a){case "hover":var b={border:"1px solid #666",backgroundColor:"#ddd"};break;case "active":b={border:"1px solid #666",backgroundColor:"#ccc"};break;default:b={border:"1px solid #efefef",backgroundColor:"#efefef"}}this.items.setStyle(b).addClass("pane-"+a)},over:function(a){a.setStyle({backgroundColor:"#aaa"})},out:function(a){a.setStyle({backgroundColor:"#e9e9e9"})},
add:function(a,b){this.selOptions.push([a,b])},update:function(a){this.ne.nicCommand(this.options.command,a);this.close()}}),nicEditorFontSizeSelect=nicEditorSelect.extend({sel:{1:"8px",2:"10px",3:"12px",4:"14px",5:"18px",6:"24px",7:"30px",8:"36px",9:"48px",10:"64px"},init:function(){this.setDisplay("Font&nbsp;Size...");for(itm in this.sel)this.add(itm,'<font style="font-size:'+this.sel[itm]+'" >'+this.sel[itm]+"</font>")}}),nicEditorFontFamilySelect=nicEditorSelect.extend({sel:{arial:"Arial","comic sans ms":"Comic Sans",
"courier new":"Courier New",georgia:"Georgia",helvetica:"Helvetica",impact:"Impact","times new roman":"Times","trebuchet ms":"Trebuchet",verdana:"Verdana"},init:function(){this.setDisplay("Font&nbsp;Family...");for(itm in this.sel)this.add(itm,'<font face="'+itm+'">'+this.sel[itm]+"</font>")}}),nicEditorFontFormatSelect=nicEditorSelect.extend({sel:{p:"Paragraph",pre:"Pre",h6:"Heading&nbsp;6",h5:"Heading&nbsp;5",h4:"Heading&nbsp;4",h3:"Heading&nbsp;3",h2:"Heading&nbsp;2",h1:"Heading&nbsp;1"},init:function(){this.setDisplay("Font&nbsp;Format...");
for(itm in this.sel){var a=itm.toUpperCase();this.add("<"+a+">","<"+itm+' style="padding: 0px; margin: 0px;">'+this.sel[itm]+"</"+a+">")}}});nicEditors.registerPlugin(nicPlugin,nicSelectOptions);
var nicLinkOptions={buttons:{link:{name:"Add Link",type:"nicLinkButton",tags:["A"]},unlink:{name:"Remove Link",command:"unlink",noActive:!0}}},nicLinkButton=nicEditorAdvancedButton.extend({addPane:function(){this.ln=this.ne.selectedInstance.selElm().parentTag("A");this.addForm({"":{type:"title",txt:"Add/Edit Link"},href:{type:"text",txt:"URL",value:"http://",style:{width:"150px"}},title:{type:"text",txt:"Title"},target:{type:"select",txt:"Open In",options:{"":"Current Window",_blank:"New Window"},
style:{width:"100px"}}},this.ln)},submit:function(a){a=this.inputs.href.value;if("http://"==a||""==a)return alert("You must enter a URL to Create a Link"),!1;this.removePane();this.ln||(this.ne.nicCommand("createlink","javascript:nicTemp();"),this.ln=this.findElm("A","href","javascript:nicTemp();"));this.ln&&this.ln.setAttributes({href:this.inputs.href.value,title:this.inputs.title.value,target:this.inputs.target.options[this.inputs.target.selectedIndex].value})}});
nicEditors.registerPlugin(nicPlugin,nicLinkOptions);
var nicColorOptions={buttons:{forecolor:{name:__("Change Text Color"),type:"nicEditorColorButton",noClose:!0},bgcolor:{name:__("Change Background Color"),type:"nicEditorBgColorButton",noClose:!0}}},nicEditorColorButton=nicEditorAdvancedButton.extend({addPane:function(){var a={0:"00",1:"33",2:"66",3:"99",4:"CC",5:"FF"},b=(new bkElement("DIV")).setStyle({width:"270px"}),c;for(c in a)for(var d in a)for(var f in a){var e="#"+a[c]+a[f]+a[d],g=(new bkElement("DIV")).setStyle({cursor:"pointer",height:"15px",
"float":"left"}).appendTo(b),h=(new bkElement("DIV")).setStyle({border:"2px solid "+e}).appendTo(g),e=(new bkElement("DIV")).setStyle({backgroundColor:e,overflow:"hidden",width:"11px",height:"11px"}).addEvent("click",this.colorSelect.closure(this,e)).addEvent("mouseover",this.on.closure(this,h)).addEvent("mouseout",this.off.closure(this,h,e)).appendTo(h);window.opera||(g.onmousedown=e.onmousedown=bkLib.cancelEvent)}this.pane.append(b.noSelect())},colorSelect:function(a){this.ne.nicCommand("foreColor",
a);this.removePane()},on:function(a){a.setStyle({border:"2px solid #000"})},off:function(a,b){a.setStyle({border:"2px solid "+b})}}),nicEditorBgColorButton=nicEditorColorButton.extend({colorSelect:function(a){this.ne.nicCommand("hiliteColor",a);this.removePane()}});nicEditors.registerPlugin(nicPlugin,nicColorOptions);
var nicImageOptions={buttons:{image:{name:"Add Image",type:"nicImageButton",tags:["IMG"]}}},nicImageButton=nicEditorAdvancedButton.extend({addPane:function(){this.im=this.ne.selectedInstance.selElm().parentTag("IMG");this.addForm({"":{type:"title",txt:"Add/Edit Image"},src:{type:"text",txt:"URL",value:"http://",style:{width:"150px"}},alt:{type:"text",txt:"Alt Text",style:{width:"100px"}},align:{type:"select",txt:"Align",options:{none:"Default",left:"Left",right:"Right"}}},this.im)},submit:function(a){a=
this.inputs.src.value;if(""==a||"http://"==a)return alert("You must enter a Image URL to insert"),!1;this.removePane();this.im||(this.ne.nicCommand("insertImage","javascript:nicImTemp();"),this.im=this.findElm("IMG","src","javascript:nicImTemp();"));this.im&&this.im.setAttributes({src:this.inputs.src.value,alt:this.inputs.alt.value,align:this.inputs.align.value})}});nicEditors.registerPlugin(nicPlugin,nicImageOptions);
var nicSaveOptions={buttons:{save:{name:__("Save this content"),type:"nicEditorSaveButton"}}},nicEditorSaveButton=nicEditorButton.extend({init:function(){this.ne.options.onSave||this.margin.setStyle({display:"none"})},mouseClick:function(){var a=this.ne.options.onSave,b=this.ne.selectedInstance;a(b.getContent(),b.elm.id,b)}});nicEditors.registerPlugin(nicPlugin,nicSaveOptions);
var nicUploadOptions={buttons:{upload:{name:"Upload Image",type:"nicUploadButton"}}},nicUploadButton=nicEditorAdvancedButton.extend({nicURI:"http://api.imgur.com/2/upload.json",errorText:"Failed to upload image",addPane:function(){if("undefined"===typeof window.FormData)return this.onError("Image uploads are not supported in this browser, use Chrome, Firefox, or Safari instead.");this.im=this.ne.selectedInstance.selElm().parentTag("IMG");var a=(new bkElement("div")).setStyle({padding:"10px"}).appendTo(this.pane.pane);
(new bkElement("div")).setStyle({fontSize:"14px",fontWeight:"bold",paddingBottom:"5px"}).setContent("Insert an Image").appendTo(a);this.fileInput=(new bkElement("input")).setAttributes({type:"file"}).appendTo(a);this.progress=(new bkElement("progress")).setStyle({width:"100%",display:"none"}).setAttributes("max",100).appendTo(a);this.fileInput.onchange=this.uploadFile.closure(this)},onError:function(a){this.removePane();alert(a||"Failed to upload image")},uploadFile:function(){var a=this.fileInput.files[0];
if(a&&a.type.match(/image.*/)){this.fileInput.setStyle({display:"none"});this.setProgress(0);var b=new FormData;b.append("image",a);b.append("key","b7ea18a4ecbda8e92203fa4968d10660");var c=new XMLHttpRequest;c.open("POST",this.ne.options.uploadURI||this.nicURI);c.onload=function(){try{var a=JSON.parse(c.responseText)}catch(b){return this.onError()}this.onUploaded(a.upload)}.closure(this);c.onerror=this.onError.closure(this);c.upload.onprogress=function(a){this.setProgress(a.loaded/a.total)}.closure(this);
c.send(b)}else this.onError("Only image files can be uploaded")},setProgress:function(a){this.progress.setStyle({display:"block"});.98>a?this.progress.value=a:this.progress.removeAttribute("value")},onUploaded:function(a){this.removePane();var b=a.links.original;this.im||(this.ne.selectedInstance.restoreRng(),this.ne.nicCommand("insertImage",b),this.im=this.findElm("IMG","src",b));var c=parseInt(this.ne.selectedInstance.elm.getStyle("width"));this.im&&this.im.setAttributes({src:b,width:c&&a.image.width?
Math.min(c,a.image.width):""})}});nicEditors.registerPlugin(nicPlugin,nicUploadOptions);
var nicXHTML=bkClass.extend({stripAttributes:["_moz_dirty","_moz_resizing","_extended"],noShort:["style","title","script","textarea","a"],cssReplace:{"font-weight:bold;":"strong","font-style:italic;":"em"},sizes:{1:"xx-small",2:"x-small",3:"small",4:"medium",5:"large",6:"x-large"},construct:function(a){this.ne=a;this.ne.options.xhtml&&a.addEvent("get",this.cleanup.closure(this))},cleanup:function(a){var b=a.getElm(),b=this.toXHTML(b);a.content=b},toXHTML:function(a,b,c){var d=c="",f="",e=a.nodeType,
g=a.nodeName.toLowerCase(),h=a.hasChildNodes&&a.hasChildNodes(),l=[];switch(e){case 1:var q=a.attributes;switch(g){case "b":g="strong";break;case "i":g="em";break;case "font":g="span"}if(b){for(e=0;e<q.length;e++){var m=q[e],p=m.nodeName.toLowerCase(),t=m.nodeValue;if(m.specified&&t&&!bkLib.inArray(this.stripAttributes,p)&&"function"!=typeof t){switch(p){case "style":m=t.replace(/ /g,"");for(itm in this.cssReplace)-1!=m.indexOf(itm)&&(l.push(this.cssReplace[itm]),m=m.replace(itm,""));f+=m;t="";break;
case "class":t=t.replace("Apple-style-span","");break;case "size":f+="font-size:"+this.sizes[t]+";",t=""}t&&(d+=" "+p+'="'+t+'"')}}f&&(d+=' style="'+f+'"');for(e=0;e<l.length;e++)c+="<"+l[e]+">";""==d&&"span"==g&&(b=!1);b&&(c+="<"+g,"br"!=g&&(c+=d))}if(h||bkLib.inArray(this.noShort,p))for(b&&(c+=">"),e=0;e<a.childNodes.length;e++)(p=this.toXHTML(a.childNodes[e],!0,!0))&&(c+=p);else b&&(c+=" />");b&&h&&(c+="</"+g+">");for(e=0;e<l.length;e++)c+="</"+l[e]+">";break;case 3:c+=a.nodeValue}return c}});
nicEditors.registerPlugin(nicXHTML);
var nicBBCode=bkClass.extend({construct:function(a){this.ne=a;if(this.ne.options.bbCode)for(itm in a.addEvent("get",this.bbGet.closure(this)),a.addEvent("set",this.bbSet.closure(this)),a=this.ne.loadedPlugins,a)a[itm].toXHTML&&(this.xhtml=a[itm])},bbGet:function(a){var b=this.xhtml.toXHTML(a.getElm());a.content=this.toBBCode(b)},bbSet:function(a){a.content=this.fromBBCode(a.content)},toBBCode:function(a){function b(b,d){a=a.replace(b,d)}b(/\n/gi,"");b(/<strong>(.*?)<\/strong>/gi,"[b]$1[/b]");b(/<em>(.*?)<\/em>/gi,
"[i]$1[/i]");b(/<span.*?style="text-decoration:underline;">(.*?)<\/span>/gi,"[u]$1[/u]");b(/<ul>(.*?)<\/ul>/gi,"[list]$1[/list]");b(/<li>(.*?)<\/li>/gi,"[*]$1[/*]");b(/<ol>(.*?)<\/ol>/gi,"[list=1]$1[/list]");b(/<img.*?src="(.*?)".*?>/gi,"[img]$1[/img]");b(/<a.*?href="(.*?)".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]");b(/<br.*?>/gi,"\n");b(/<.*?>.*?<\/.*?>/gi,"");return a},fromBBCode:function(a){function b(b,d){a=a.replace(b,d)}b(/\[b\](.*?)\[\/b\]/gi,"<strong>$1</strong>");b(/\[i\](.*?)\[\/i\]/gi,"<em>$1</em>");
b(/\[u\](.*?)\[\/u\]/gi,'<span style="text-decoration:underline;">$1</span>');b(/\[list\](.*?)\[\/list\]/gi,"<ul>$1</ul>");b(/\[list=1\](.*?)\[\/list\]/gi,"<ol>$1</ol>");b(/\[\*\](.*?)\[\/\*\]/gi,"<li>$1</li>");b(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />');b(/\[url=(.*?)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>');b(/\n/gi,"<br />");return a}});nicEditors.registerPlugin(nicBBCode);
var nicEditor=nicEditor.extend({floatingPanel:function(){this.floating=(new bkElement("DIV")).setStyle({position:"absolute",top:"-1000px"}).appendTo(document.body);this.addEvent("focus",this.reposition.closure(this)).addEvent("blur",this.hide.closure(this));this.setPanel(this.floating)},reposition:function(){var a=this.selectedInstance.e;this.floating.setStyle({width:(parseInt(a.getStyle("width"))||a.clientWidth)+"px"});var b=a.offsetTop-this.floating.offsetHeight;0>b&&(b=a.offsetTop+a.offsetHeight);
this.floating.setStyle({top:b+"px",left:a.offsetLeft+"px",display:"block"})},hide:function(){this.floating.setStyle({top:"-1000px"})}}),nicCodeOptions={buttons:{xhtml:{name:"Edit HTML",type:"nicCodeButton"}}},nicCodeButton=nicEditorAdvancedButton.extend({width:"350px",addPane:function(){this.addForm({"":{type:"title",txt:"Edit HTML"},code:{type:"content",value:this.ne.selectedInstance.getContent(),style:{width:"340px",height:"200px"}}})},submit:function(a){this.ne.selectedInstance.setContent(this.inputs.code.value);
this.removePane()}});nicEditors.registerPlugin(nicPlugin,nicCodeOptions);
"undefined"!=typeof jQuery&&function(a){a.fn.noosSlider=function(){var b={slide:function(b,c){a(this).data("s");var d=a(this),e,f,p=e="";c.index()>b.index()?(e="100%",p="-100%"):(e="-100%",p="100%");d.hasClass("animated");c.css("left");c.css({left:e});d.hasClass("animated");c.css("left");d.addClass("animated");e=c.css("transition-delay");f=c.css("transition-duration");e=/\d+\.*\d*[s|ms]/.exec(e);e=e[0];f=/\d+\.*\d*[s|ms]/.exec(f);f=f[0];b.css({left:p});c.css({left:0});e=/ms/.test(e)?10*parseInt(e):
/s/.test(e)?1E3*parseFloat(e):0;f=/ms/.test(f)?10*parseInt(f):/s/.test(f)?1E3*parseFloat(f):0;f+e?setTimeout(function(){d.removeClass("animated");b.removeClass("active");c.addClass("active")},f+e):(d.removeClass("animated"),b.removeClass("active"),c.addClass("active"));return f+e},fade:function(b,c){a(this).data("s");var d=a(this),e,f;c.css("opacity");c.css({"z-index":99,opacity:0});b.css({"z-index":1});b.css("opacity");c.css("opacity");d.addClass("animated");c.css({opacity:1});e=c.css("transition-delay");
f=c.css("transition-duration");e=/\d+\.*\d*[s|ms]/.exec(e);e=e[0];f=/\d+\.*\d*[s|ms]/.exec(f);f=f[0];e=/ms/.test(e)?10*parseInt(e):/s/.test(e)?1E3*parseFloat(e):0;f=/ms/.test(f)?10*parseInt(f):/s/.test(f)?1E3*parseFloat(f):0;f+e?setTimeout(function(){d.removeClass("animated");c.addClass("active");b.css("opacity");c.css("opacity");b.css({"z-index":1,opacity:0}).removeClass("active")},f+e):(d.removeClass("animated"),c.addClass("active"),b.css("opacity"),c.css("opacity"),b.css({"z-index":1,opacity:0}).removeClass("active"));
return f+e}},c={init:function(d){if(!a(this).hasClass("noos-slider")){var e=a(this),f=e.data();d=a.extend({},a.fn.noosSlider.defaults,d);d=a.extend({},d,f);var f=a("."+d.slides,this),q=a("."+d.slides+" > li",this),m=a("."+d.slides+" > li.active",this);a("."+d.pagination,this);var p=a("."+d.pagination+" > li",this),t=a("."+d.pagination+" > li.active",this),v="";d.animation=a.extend({},b,d.animation);e.data("s",d);e.addClass(d.animateType+" noos-slider");if(d.autopagination){v='<ul class="'+d.pagination+
'">';for(p=0;p<q.size();p++)v+="<li><span></span></li>";e.append(v+"</ul>");a("."+d.pagination,this);p=a("."+d.pagination+" > li",this)}t.size()||(t=p.eq(0).addClass("active"));m.size()||(m=q.eq(0).addClass("active"));"auto"==d.height?f.css({height:m.outerHeight()}):f.css({height:d.height});c.checkInWindow.call(this);d.onInit.call(this);e.on("mouseover",function(){var b=a(this).data("s");b.hover=!0;a(this).data("s",b);c.stop.call(this)}).on("mouseleave",function(){var b=a(this).data("s");b.hover=
!1;a(this).data("s",b);c.start.call(this)}).on("click","."+d.pagination+" li",function(){a(this).hasClass("active")||c.animate.call(a(this).closest(".noos-slider"),a(this).index())}).on("click"," .nav.next",function(b){b.preventDefault();c.animate.call(a(this).closest(".noos-slider").get(0),"next")}).on("click"," .nav.prev",function(b){b.preventDefault();c.animate.call(a(this).closest(".noos-slider").get(0),"prev")});a(window).on("scroll.noosSlider",function(){a(".noos-slider").noosSlider("checkInWindow")})}},
animate:function(b){if(null!=b&&"string"!=typeof b&&"number"!=typeof b)return!1;var d=this,e=a(d),f=e.data("s");f.timeout&&(clearTimeout(f.timeout),f.timeout=!1);if(!e.hasClass("animated")){var e=a("."+f.slides,d),m=a("."+f.slides+" > li",d),p=a("."+f.slides+" > li.active",d),t=!1;a("."+f.pagination,d);var v=a("."+f.pagination+" > li",d),J=a("."+f.pagination+" > li.active",d);"number"==typeof b?t=m.eq(b):("next"==b&&(t=p.next(),t.size()||(t=m.eq(0))),"prev"==b&&(t=p.prev(),t.size()||(t=m.eq(m.size()-
1))));if(t.length&&p.length&&f.animation[f.animateType]){"auto"==f.height&&e.css({height:t.outerHeight()});f.beforeAnimation.call(d);J.removeClass("active");v.eq(t.index()).addClass("active");if(t.index()>p.index())if(vs=validate_slider(1),0==vs&&1==t.index())a("#publish_btn").css("opacity","0.4"),a(".slide_ctrl_prev").css("opacity","1"),disableprev=0,disablepublishandsave=1,stepTwo();else if(0==vs&&2==t.index())a("#classes_year_select").addClass("required"),a("#classes_subject_select").addClass("required"),
a("#deadline_date").addClass("required"),a("#deadline_time").addClass("required"),a("#publish_btn").css("opacity","1"),a(".slide_ctrl_next").css("opacity","0.2"),disablenext=1,disablepublishandsave=0,stepThree();else{if(1==vs)return sid=1==t.index()?".s1":".s2",b=a(a(sid).parent()),a(".slides").css("height",b.outerHeight()+50),!1}else 0==t.index()?(a("#publish_btn").css("opacity","0.4"),a(".slide_ctrl_prev").css("opacity","0.2"),disablepublishandsave=disableprev=1,stepOne()):1==t.index()&&(a("#classes_year_select").removeClass("required"),
a("#classes_subject_select").removeClass("required"),a("#deadline_date").removeClass("required"),a("#deadline_time").removeClass("required"),a("#publish_btn").css("opacity","0.4"),a(".slide_ctrl_next").css("opacity","1"),disablenext=0,disablepublishandsave=1,stepTwo()),vs=validate_slider(0);(time=f.animation[f.animateType].call(d,p,t))?setTimeout(function(){f.afterAnimation.call(d);c.start.call(d)},time):(f.afterAnimation.call(d),c.start.call(d))}}},start:function(){var b=this,d=a(b),e=d.data("s");
e.autoAnimate&&e.inFocus&&!e.hover&&!e.timeout&&(e.timeout=setTimeout(function(){c.animate.call(b,"next")},e.autoAnimate),d.data("s",e))},stop:function(){var b=a(this),c=b.data("s");clearTimeout(c.timeout);c.timeout=!1;b.data("s",c)},checkInWindow:function(){var b=a(this),d=b.data("s"),e=a(window).height();b.outerHeight();var f=b.offset().top,m=a(window).scrollTop();f>m&&f<m+(e-e/4)?(d.inFocus=!0,c.start.call(this)):(d.inFocus=!1,c.stop.call(this));b.data("s",d)}};if(arguments&&1==arguments.length&&
"object"==typeof arguments[0]||!arguments.length){var d=a.extend({},a.fn.noosSlider.defaults,arguments[0]);return this.each(function(){a(this).hasClass("slider-init")||c.init.call(this,d)})}if(arguments&&"string"==typeof arguments[0]&&c[arguments[0]]){var f=arguments,e=arguments;1<arguments.lengtn&&e.shift();return this.each(function(){c[f[0]].apply(this,e)})}};a.fn.noosSlider.defaults={autoAnimate:5E3,slides:"slides",pagination:"pagination",autopagination:!1,prevButton:"prev",nextButton:"next",animateType:"slide",
width:"100%",height:"auto",afterAnimation:function(){SlideCompleted()},beforeAnimation:function(){},onInit:function(){},animation:{}}}(jQuery);
(function(a){"object"===typeof exports&&exports&&"object"===typeof module&&module&&module.exports===exports?a(require("jquery")):"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function b(a){a=a[0];return 0<a.offsetWidth&&0<a.offsetHeight}function c(b){b.minTime&&(b.minTime=x(b.minTime));b.maxTime&&(b.maxTime=x(b.maxTime));b.durationTime&&"function"!==typeof b.durationTime&&(b.durationTime=x(b.durationTime));if("now"==b.scrollDefault)b.scrollDefault=function(){return b.roundingFunction(x(new Date),
b)};else if(b.scrollDefault&&"function"!=typeof b.scrollDefault){var c=b.scrollDefault;b.scrollDefault=function(){return b.roundingFunction(x(c),b)}}else b.minTime&&(b.scrollDefault=function(){return b.roundingFunction(b.minTime,b)});"string"===a.type(b.timeFormat)&&b.timeFormat.match(/[gh]/)&&(b._twelveHourTime=!0);!1===b.showOnFocus&&"focus"==b.showOn&&(b.showOn=null);if(0<b.disableTimeRanges.length){for(var d in b.disableTimeRanges)b.disableTimeRanges[d]=[x(b.disableTimeRanges[d][0]),x(b.disableTimeRanges[d][1])];
b.disableTimeRanges=b.disableTimeRanges.sort(function(a,b){return a[0]-b[0]});for(d=b.disableTimeRanges.length-1;0<d;d--)b.disableTimeRanges[d][0]<=b.disableTimeRanges[d-1][1]&&(b.disableTimeRanges[d-1]=[Math.min(b.disableTimeRanges[d][0],b.disableTimeRanges[d-1][0]),Math.max(b.disableTimeRanges[d][1],b.disableTimeRanges[d-1][1])],b.disableTimeRanges.splice(d,1))}return b}function d(b){var c=b.data("timepicker-settings"),d=b.data("timepicker-list");d&&d.length&&(d.remove(),b.data("timepicker-list",
!1));if(c.useSelect)var g=d=a("<select />",{"class":"ui-timepicker-select"});else d=a("<ul />",{"class":"ui-timepicker-list"}),g=a("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1}),g.css({display:"none",position:"absolute"}).append(d);if(c.noneOption)if(!0===c.noneOption&&(c.noneOption=c.useSelect?"Time...":"None"),a.isArray(c.noneOption))for(var l in c.noneOption){if(parseInt(l,10)==l){var m=f(c.noneOption[l],c.useSelect);d.append(m)}}else m=f(c.noneOption,c.useSelect),d.append(m);c.className&&
g.addClass(c.className);null===c.minTime&&null===c.durationTime||!c.showDuration||(g.addClass("ui-timepicker-with-duration"),g.addClass("ui-timepicker-step-"+c.step));m=c.minTime;"function"===typeof c.durationTime?m=x(c.durationTime()):null!==c.durationTime&&(m=c.durationTime);l=null!==c.minTime?c.minTime:0;var n=null!==c.maxTime?c.maxTime:l+86400-1;n<l&&(n+=86400);86399===n&&"string"===a.type(c.timeFormat)&&c.show2400&&(n=86400);var p=c.disableTimeRanges,v=0,J=p.length,I=c.step;"function"!=typeof I&&
(I=function(){return c.step});for(var U=0;l<=n;U++,l+=60*I(U)){var O=l,k=r(O,c);if(c.useSelect)var K=a("<option />",{value:k});else K=a("<li />"),K.data("time",86400>=O?O:O%86400);K.text(k);if((null!==c.minTime||null!==c.durationTime)&&c.showDuration)if(k=u(l-m,c.step),c.useSelect)K.text(K.text()+" ("+k+")");else{var N=a("<span />",{"class":"ui-timepicker-duration"});N.text(" ("+k+")");K.append(N)}v<J&&(O>=p[v][1]&&(v+=1),p[v]&&O>=p[v][0]&&O<p[v][1]&&(c.useSelect?K.prop("disabled",!0):K.addClass("ui-timepicker-disabled")));
d.append(K)}g.data("timepicker-input",b);b.data("timepicker-list",g);c.useSelect?(b.val()&&d.val(e(x(b.val()),c)),d.on("focus",function(){a(this).data("timepicker-input").trigger("showTimepicker")}),d.on("blur",function(){a(this).data("timepicker-input").trigger("hideTimepicker")}),d.on("change",function(){t(b,a(this).val(),"select")}),t(b,d.val(),"initial"),b.hide().after(d)):(l=c.appendTo,"string"===typeof l?l=a(l):"function"===typeof l&&(l=l(b)),l.append(g),q(b,d),d.on("mousedown","li",function(c){b.off("focus.timepicker");
b.on("focus.timepicker-ie-hack",function(){b.off("focus.timepicker-ie-hack");b.on("focus.timepicker",z.show)});h(b)||b[0].focus();d.find("li").removeClass("ui-timepicker-selected");a(this).addClass("ui-timepicker-selected");D(b)&&(b.trigger("hideTimepicker"),d.on("mouseup.timepicker","li",function(a){d.off("mouseup.timepicker");g.hide()}))}))}function f(b,c){var d,e,f;"object"==typeof b?(d=b.label,e=b.className,f=b.value):"string"==typeof b?d=b:a.error("Invalid noneOption value");return c?a("<option />",
{value:f,"class":e,text:d}):a("<li />",{"class":e,text:d}).data("time",f)}function e(a,b){a=b.roundingFunction(a,b);if(null!==a)return r(a,b)}function g(b){b=a(b.target);0===b.closest(".ui-timepicker-input").length&&0===b.closest(".ui-timepicker-wrapper").length&&(z.hide(),a(document).unbind(".ui-timepicker"),a(window).unbind(".ui-timepicker"))}function h(a){a=a.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&a.disableTouchKeyboard}function l(b,c,
d){if(!d&&0!==d)return!1;b=b.data("timepicker-settings");var e=!1;d=b.roundingFunction(d,b);c.find("li").each(function(b,c){var f=a(c);if("number"==typeof f.data("time")&&f.data("time")==d)return e=f,!1});return e}function q(a,b){b.find("li").removeClass("ui-timepicker-selected");var c=x(p(a),a.data("timepicker-settings"));if(null!==c&&(c=l(a,b,c))){var d=c.offset().top-b.offset().top;(d+c.outerHeight()>b.outerHeight()||0>d)&&b.scrollTop(b.scrollTop()+c.position().top-c.outerHeight());c.addClass("ui-timepicker-selected")}}
function m(b,c){if(""!==this.value&&"timepicker"!=c){var d=a(this);if(!d.is(":focus")||b&&"change"==b.type){var e=d.data("timepicker-settings"),f=x(this.value,e);if(null===f)d.trigger("timeFormatError");else{var g=!1;null!==e.minTime&&f<e.minTime?g=!0:null!==e.maxTime&&f>e.maxTime&&(g=!0);a.each(e.disableTimeRanges,function(){if(f>=this[0]&&f<this[1])return g=!0,!1});e.forceRoundTime&&(f=e.roundingFunction(f,e));e=r(f,e);g?t(d,e,"error")&&d.trigger("timeRangeError"):t(d,e)}}}}function p(a){return a.is("input")?
a.val():a.data("ui-timepicker-value")}function t(a,b,c){if(a.is("input")){a.val(b);var d=a.data("timepicker-settings");d.useSelect&&"select"!=c&&"initial"!=c&&a.data("timepicker-list").val(e(x(b),d))}if(a.data("ui-timepicker-value")!=b)return a.data("ui-timepicker-value",b),"select"==c?a.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=c&&a.trigger("changeTime"),!0;a.trigger("selectTime");return!1}function v(c){var d=a(this),e=d.data("timepicker-list");if(!e||!b(e))if(40==
c.keyCode)z.show.call(d.get(0)),e=d.data("timepicker-list"),h(d)||d.focus();else return!0;switch(c.keyCode){case 13:return D(d)&&z.hide.apply(this),c.preventDefault(),!1;case 38:var f=e.find(".ui-timepicker-selected");f.length?f.is(":first-child")||(f.removeClass("ui-timepicker-selected"),f.prev().addClass("ui-timepicker-selected"),f.prev().position().top<f.outerHeight()&&e.scrollTop(e.scrollTop()-f.outerHeight())):(e.find("li").each(function(b,c){if(0<a(c).position().top)return f=a(c),!1}),f.addClass("ui-timepicker-selected"));
return!1;case 40:return f=e.find(".ui-timepicker-selected"),0===f.length?(e.find("li").each(function(b,c){if(0<a(c).position().top)return f=a(c),!1}),f.addClass("ui-timepicker-selected")):f.is(":last-child")||(f.removeClass("ui-timepicker-selected"),f.next().addClass("ui-timepicker-selected"),f.next().position().top+2*f.outerHeight()>e.outerHeight()&&e.scrollTop(e.scrollTop()+f.outerHeight())),!1;case 27:e.find("li").removeClass("ui-timepicker-selected");z.hide();break;case 9:z.hide();break;default:return!0}}
function J(c){var d=a(this),e=d.data("timepicker-list"),f=d.data("timepicker-settings");if(!e||!b(e)||f.disableTextInput)return!0;switch(c.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:f.typeaheadHighlight?q(d,e):e.hide()}}function D(a){var b=a.data("timepicker-settings"),c=null,d=a.data("timepicker-list").find(".ui-timepicker-selected");
if(d.hasClass("ui-timepicker-disabled"))return!1;d.length&&(c=d.data("time"));null!==c&&("string"!=typeof c&&(c=r(c,b)),t(a,c,"select"));return!0}function u(a,b){a=Math.abs(a);var c=Math.round(a/60),d=[],e;60>c?d=[c,n.mins]:(e=Math.floor(c/60),c%=60,30==b&&30==c&&(e+=n.decimal+5),d.push(e),d.push(1==e?n.hr:n.hrs),30!=b&&c&&(d.push(c),d.push(n.mins)));return d.join(" ")}function r(b,c){if(null===b)return null;var d=new Date(I.valueOf()+1E3*b);if(isNaN(d.getTime()))return null;if("function"===a.type(c.timeFormat))return c.timeFormat(d);
for(var e="",f,g=0;g<c.timeFormat.length;g++)switch(f=c.timeFormat.charAt(g),f){case "a":e+=11<d.getHours()?n.pm:n.am;break;case "A":e+=11<d.getHours()?n.PM:n.AM;break;case "g":f=d.getHours()%12;e+=0===f?"12":f;break;case "G":f=d.getHours();86400===b&&(f=24);e+=f;break;case "h":f=d.getHours()%12;0!==f&&10>f&&(f="0"+f);e+=0===f?"12":f;break;case "H":f=d.getHours();86400===b&&(f=24);e+=9<f?f:"0"+f;break;case "i":f=d.getMinutes();e+=9<f?f:"0"+f;break;case "s":b=d.getSeconds();e+=9<b?b:"0"+b;break;case "\\":g++;
e+=c.timeFormat.charAt(g);break;default:e+=f}return e}function x(a,b){if(""===a)return null;if(!a||a+0==a)return a;if("object"==typeof a)return 3600*a.getHours()+60*a.getMinutes()+a.getSeconds();a=a.toLowerCase().replace(/[\s\.]/g,"");if("a"==a.slice(-1)||"p"==a.slice(-1))a+="m";var c="("+n.am.replace(".","")+"|"+n.pm.replace(".","")+"|"+n.AM.replace(".","")+"|"+n.PM.replace(".","")+")?",d=a.match(new RegExp("^"+c+"([0-2]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+c+"$"));if(!d)return null;var e=parseInt(1*
d[2],10),c=d[1]||d[5],f=e;12>=e&&c&&(f=c==n.pm||c==n.PM,f=12==e?f?12:0:e+(f?12:0));d=3600*f+60*(1*d[3]||0)+(1*d[4]||0);!c&&b&&b._twelveHourTime&&b.scrollDefault&&(c=d-b.scrollDefault(),0>c&&-43200<=c&&(d=(d+43200)%86400));return d}var I=new Date(1970,1,1,0,0,0),n={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},z={init:function(b){return this.each(function(){var e=a(this),f=[],g;for(g in a.fn.timepicker.defaults)e.data(g)&&(f[g]=e.data(g));f=a.extend({},a.fn.timepicker.defaults,
f,b);f.lang&&(n=a.extend(n,f.lang));f=c(f);e.data("timepicker-settings",f);e.addClass("ui-timepicker-input");if(f.useSelect)d(e);else{e.prop("autocomplete","off");e.on("click.timepicker focus.timepicker",z.show);e.on("change.timepicker",m);e.on("keydown.timepicker",v);e.on("keyup.timepicker",J);if(f.disableTextInput)e.on("keypress.timepicker",function(a){a.preventDefault()});m.call(e.get(0))}})},show:function(c){var e=a(this),f=e.data("timepicker-settings");if(c){if(f.showOn!==c.type)return!0;c.preventDefault()}if(f.useSelect)e.data("timepicker-list").focus();
else if(h(e)&&e.blur(),c=e.data("timepicker-list"),!e.prop("readonly")&&(c&&0!==c.length&&"function"!==typeof f.durationTime||(d(e),c=e.data("timepicker-list")),!b(c))){e.data("ui-timepicker-value",e.val());q(e,c);z.hide();c.show();var m={};f.orientation.match(/r/)?m.left=e.offset().left+e.outerWidth()-c.outerWidth()+parseInt(c.css("marginLeft").replace("px",""),10):m.left=e.offset().left+parseInt(c.css("marginLeft").replace("px",""),10);"t"==(f.orientation.match(/t/)?"t":f.orientation.match(/b/)?
"b":e.offset().top+e.outerHeight(!0)+c.outerHeight()>a(window).height()+a(window).scrollTop()?"t":"b")?(c.addClass("ui-timepicker-positioned-top"),m.top=e.offset().top-c.outerHeight()+parseInt(c.css("marginTop").replace("px",""),10)):(c.removeClass("ui-timepicker-positioned-top"),m.top=e.offset().top+e.outerHeight()+parseInt(c.css("marginTop").replace("px",""),10));c.offset(m);m=c.find(".ui-timepicker-selected");m.length||(p(e)?m=l(e,c,x(p(e))):f.scrollDefault&&(m=l(e,c,f.scrollDefault())));m&&m.length?
(m=c.scrollTop()+m.position().top-m.outerHeight(),c.scrollTop(m)):c.scrollTop(0);if(f.stopScrollPropagation)a(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",function(b){b.preventDefault();var c=a(this).scrollTop();a(this).scrollTop(c+b.originalEvent.deltaY)});a(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",g);a(window).on("resize.ui-timepicker",g);if(f.closeOnWindowScroll)a(document).on("scroll.ui-timepicker",g);e.trigger("showTimepicker");return this}},hide:function(c){c=
a(this);var d=c.data("timepicker-settings");d&&d.useSelect&&c.blur();a(".ui-timepicker-wrapper").each(function(){var c=a(this);if(b(c)){var d=c.data("timepicker-input"),e=d.data("timepicker-settings");e&&e.selectOnBlur&&D(d);c.hide();d.trigger("hideTimepicker")}});return this},option:function(b,e){return this.each(function(){var f=a(this),g=f.data("timepicker-settings"),h=f.data("timepicker-list");if("object"==typeof b)g=a.extend(g,b);else if("string"==typeof b&&"undefined"!=typeof e)g[b]=e;else if("string"==
typeof b)return g[b];g=c(g);f.data("timepicker-settings",g);h&&(h.remove(),f.data("timepicker-list",!1));g.useSelect&&d(f)})},getSecondsFromMidnight:function(){return x(p(this))},getTime:function(a){var b=p(this);if(!b)return null;b=x(b);if(null===b)return null;a||(a=new Date);a=new Date(a);a.setHours(b/3600);a.setMinutes(b%3600/60);a.setSeconds(b%60);a.setMilliseconds(0);return a},setTime:function(a){var b=this.data("timepicker-settings"),c=b.forceRoundTime?e(x(a),b):r(x(a),b);a&&null===c&&b.noneOption&&
(c=a);t(this,c);this.data("timepicker-list")&&q(this,this.data("timepicker-list"));return this},remove:function(){if(this.hasClass("ui-timepicker-input")){var a=this.data("timepicker-settings");this.removeAttr("autocomplete","off");this.removeClass("ui-timepicker-input");this.removeData("timepicker-settings");this.off(".timepicker");this.data("timepicker-list")&&this.data("timepicker-list").remove();a.useSelect&&this.show();this.removeData("timepicker-list");return this}}};a.fn.timepicker=function(b){if(!this.length)return this;
if(z[b])return this.hasClass("ui-timepicker-input")?z[b].apply(this,Array.prototype.slice.call(arguments,1)):this;if("object"!==typeof b&&b)a.error("Method "+b+" does not exist on jQuery.timepicker");else return z.init.apply(this,arguments)};a.fn.timepicker.defaults={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,showOnFocus:!0,showOn:"focus",timeFormat:"g:ia",scrollDefault:null,selectOnBlur:!1,disableTextInput:!1,disableTouchKeyboard:!1,forceRoundTime:!1,roundingFunction:function(a,
b){if(null===a)return null;var c=a%(60*b.step);return a=c>=30*b.step?a+(60*b.step-c):a-c},appendTo:"body",orientation:"l",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1,show2400:!1,stopScrollPropagation:!1}});
