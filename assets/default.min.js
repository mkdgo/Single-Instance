(function(a,c){function d(){a.removeEventListener("load",d,!1);h=!0}function b(a){return m=m||new b.Class(a)}function e(a,b){for(var c in b)a[c]=b[c];return a}function f(){"#ath"==c.location.hash&&history.replaceState("",a.document.title,c.location.href.split("#")[0]);l.test(c.location.href)&&history.replaceState("",a.document.title,c.location.href.replace(l,"$1"));p.test(c.location.search)&&history.replaceState("",a.document.title,c.location.href.replace(p,"$2"))}var g="addEventListener"in a,h=!1;
"complete"===c.readyState?h=!0:g&&a.addEventListener("load",d,!1);var l=/\/ath(\/)?$/,p=/([\?&]ath=[^&]*$|&ath=[^&]*(&))/,m;b.intl={de_de:{ios:"Um diese Web-App zum Home-Bildschirm hinzuzuf\u00fcgen, tippen Sie auf %icon und dann <strong>Zum Home-Bildschirm</strong>.",android:"Um diese Web-App zum Home-Bildschirm hinzuzuf\u00fcgen, \u00f6ffnen Sie das Men\u00fc und tippen dann auf <strong>Zum Startbildschirm hinzuf\u00fcgen</strong>. <small>Wenn Ihr Ger\u00e4t eine Men\u00fctaste hat, l\u00e4sst sich das Browsermen\u00fc \u00fcber diese \u00f6ffnen. Ansonsten tippen Sie auf %icon.</small>"},
da_dk:{ios:"For at tilf\u00f8je denne web app til hjemmesk\u00e6rmen: Tryk %icon og derefter <strong>F\u00f8j til hjemmesk\u00e6rm</strong>.",android:"For at tilf\u00f8je denne web app til hjemmesk\u00e6rmen, \u00e5bn browser egenskaber menuen og tryk p\u00e5 <strong>F\u00f8j til hjemmesk\u00e6rm</strong>. <small>Denne menu kan tilg\u00e5s ved at trykke p\u00e5 menu knappen, hvis din enhed har en, eller ved at trykke p\u00e5 det \u00f8verste h\u00f8jre menu ikon %icon.</small>"},en_us:{ios:"To add this web app to the home screen: tap %icon and then <strong>Add to Home Screen</strong>.",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},es_es:{ios:"Para a\u00f1adir esta aplicaci\u00f3n web a la pantalla de inicio: pulsa %icon y selecciona <strong>A\u00f1adir a pantalla de inicio</strong>.",android:"Para a\u00f1adir esta aplicaci\u00f3n web a la pantalla de inicio, abre las opciones y pulsa <strong>A\u00f1adir a pantalla inicio</strong>. <small>El men\u00fa se puede acceder pulsando el bot\u00f3n t\u00e1ctil en caso de tenerlo, o bien el icono de la parte superior derecha de la pantalla %icon.</small>"},
fi_fi:{ios:"Liit\u00e4 t\u00e4m\u00e4 sovellus kotivalikkoon: klikkaa %icon ja t\u00e4m\u00e4n j\u00e4lkeen <strong>Lis\u00e4\u00e4 kotivalikkoon</strong>.",android:"Lis\u00e4t\u00e4ksesi t\u00e4m\u00e4n sovelluksen aloitusn\u00e4yt\u00f6lle, avaa selaimen valikko ja klikkaa t\u00e4hti -ikonia tai <strong>Lis\u00e4\u00e4 aloitusn\u00e4yt\u00f6lle teksti\u00e4</strong>. <small>Valikkoon p\u00e4\u00e4see my\u00f6s painamalla menuvalikkoa, jos laitteessasi on sellainen tai koskettamalla oikealla yl\u00e4kulmassa menu ikonia %icon.</small>"},
fr_fr:{ios:"Pour ajouter cette application web sur l'\u00e9cran d'accueil : Appuyez %icon et s\u00e9lectionnez <strong>Ajouter sur l'\u00e9cran d'accueil</strong>.",android:'Pour ajouter cette application web sur l\'\u00e9cran d\'accueil : Appuyez sur le bouton "menu", puis sur <strong>Ajouter sur l\'\u00e9cran d\'accueil</strong>. <small>Le menu peut-\u00eatre accessible en appyant sur le bouton "menu" du t\u00e9l\u00e9phone s\'il en poss\u00e8de un <i class="fa fa-bars"></i>. Sinon, il se trouve probablement dans la coin sup\u00e9rieur droit du navigateur %icon.</small>'},
he_il:{ios:'<span dir="rtl">\u05dc\u05d4\u05d5\u05e1\u05e4\u05ea \u05d4\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d4 \u05dc\u05de\u05e1\u05da \u05d4\u05d1\u05d9\u05ea: \u05dc\u05dc\u05d7\u05d5\u05e5 \u05e2\u05dc %icon \u05d5\u05d0\u05d6 <strong>\u05d4\u05d5\u05e1\u05e3 \u05dc\u05de\u05e1\u05da \u05d4\u05d1\u05d9\u05ea</strong>.</span>',android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},
hu_hu:{ios:"Ha hozz\u00e1 szeretn\u00e9 adni ezt az alkalmaz\u00e1st a kezd\u0151k\u00e9perny\u0151j\u00e9hez, \u00e9rintse meg a k\u00f6vetkez\u0151 ikont: %icon , majd a <strong>Hozz\u00e1ad\u00e1s a kezd\u0151k\u00e9perny\u0151h\u00f6z</strong> men\u00fcpontot.",android:"Ha hozz\u00e1 szeretn\u00e9 adni ezt az alkalmaz\u00e1st a kezd\u0151k\u00e9perny\u0151j\u00e9hez, a b\u00f6ng\u00e9sz\u0151 men\u00fcj\u00e9ben kattintson a <strong>Hozz\u00e1ad\u00e1s a kezd\u0151k\u00e9perny\u0151h\u00f6z</strong> men\u00fcpontra. <small>A b\u00f6ng\u00e9sz\u0151 men\u00fcj\u00e9t a k\u00f6vetkez\u0151 ikon meg\u00e9rint\u00e9s\u00e9vel tudja megnyitni: %icon.</small>"},
it_it:{ios:"Per aggiungere questa web app alla schermata iniziale: premi %icon e poi <strong>Aggiungi a Home</strong>.",android:"Per aggiungere questa web app alla schermata iniziale, apri il menu opzioni del browser e premi su <strong>Aggiungi alla homescreen</strong>. <small>Puoi accedere al menu premendo il pulsante hardware delle opzioni se la tua device ne ha uno, oppure premendo l'icona %icon in alto a destra.</small>"},ja_jp:{ios:"\u3053\u306e\u30a6\u30a7\u30d7\u30a2\u30d7\u30ea\u3092\u30db\u30fc\u30e0\u753b\u9762\u306b\u8ffd\u52a0\u3059\u308b\u305f\u3081\u306b%icon\u3092\u62bc\u3057\u3066<strong>\u30db\u30fc\u30e0\u753b\u9762\u306b\u8ffd\u52a0</strong>\u3002",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},ko_kr:{ios:"\ud648 \ud654\uba74\uc5d0 \ubc14\ub85c\uac00\uae30 \uc0dd\uc131: %icon \uc744 \ud074\ub9ad\ud55c \ud6c4 <strong>\ud648 \ud654\uba74\uc5d0 \ucd94\uac00</strong>.",android:"\ube0c\ub77c\uc6b0\uc800 \uc635\uc158 \uba54\ub274\uc758 <string>\ud648 \ud654\uba74\uc5d0 \ucd94\uac00</string>\ub97c \ud074\ub9ad\ud558\uc5ec \ud648\ud654\uba74\uc5d0 \ubc14\ub85c\uac00\uae30\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. <small>\uc635\uc158 \uba54\ub274\ub294 \uc7a5\uce58\uc758 \uba54\ub274 \ubc84\ud2bc\uc744 \ub204\ub974\uac70\ub098 \uc624\ub978\ucabd \uc0c1\ub2e8\uc758 \uba54\ub274 \uc544\uc774\ucf58 %icon\uc744 \ud074\ub9ad\ud558\uc5ec \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</small>"},
nb_no:{ios:"For \u00e5 installere denne appen p\u00e5 hjem-skjermen: trykk p\u00e5 %icon og deretter <strong>Legg til p\u00e5 Hjem-skjerm</strong>.",android:"For \u00e5 legge til denne webappen p\u00e5 startsiden \u00e5pner en nettlesermenyen og velger <strong>Legg til p\u00e5 startsiden</strong>. <small>Menyen \u00e5pnes ved \u00e5 trykke p\u00e5 den fysiske menyknappen hvis enheten har det, eller ved \u00e5 trykke p\u00e5 menyikonet \u00f8verst til h\u00f8yre %icon.</small>"},pt_br:{ios:"Para adicionar este app \u00e0 tela de in\u00edcio: clique %icon e ent\u00e3o <strong>Tela de in\u00edcio</strong>.",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},pt_pt:{ios:"Para adicionar esta app ao ecr\u00e3 principal: clique %icon e depois <strong>Ecr\u00e3 principal</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},
nl_nl:{ios:"Om deze webapp op je telefoon te installeren, klik op %icon en dan <strong>Zet in beginscherm</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},ru_ru:{ios:'\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u0441\u0430\u0439\u0442 \u043d\u0430 \u0441\u0432\u043e\u0439 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u044d\u043a\u0440\u0430\u043d, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0438\u043a\u043e\u043d\u043a\u0443 %icon \u0438 \u0437\u0430\u0442\u0435\u043c <strong>\u041d\u0430 \u044d\u043a\u0440\u0430\u043d "\u0414\u043e\u043c\u043e\u0439"</strong>.',
android:"\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0430\u0439\u0442 \u043d\u0430 \u0441\u0432\u043e\u0439 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u044d\u043a\u0440\u0430\u043d, \u043e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u043c\u0435\u043d\u044e \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 <strong>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u044b\u0439 \u044d\u043a\u0440\u0430\u043d</strong>. <small>\u041c\u0435\u043d\u044e \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c, \u043d\u0430\u0436\u0430\u0432 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \u043c\u0435\u043d\u044e \u0432\u0430\u0448\u0435\u0433\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430, \u0435\u0441\u043b\u0438 \u043e\u043d\u0430 \u0435\u0441\u0442\u044c. \u0418\u043b\u0438 \u043d\u0430\u0439\u0434\u0438\u0442\u0435 \u0438\u043a\u043e\u043d\u043a\u0443 \u0441\u0432\u0435\u0440\u0445\u0443 \u0441\u043f\u0440\u0430\u0432\u0430 %icon[\u0438\u043a\u043e\u043d\u043a\u0430].</small>"},
sv_se:{ios:"F\u00f6r att l\u00e4gga till denna webbapplikation p\u00e5 hemsk\u00e4rmen: tryck p\u00e5 %icon och d\u00e4refter <strong>L\u00e4gg till p\u00e5 hemsk\u00e4rmen</strong>.",android:"F\u00f6r att l\u00e4gga till den h\u00e4r webbappen p\u00e5 hemsk\u00e4rmen \u00f6ppnar du webbl\u00e4sarens alternativ-meny och v\u00e4ljer <strong>L\u00e4gg till p\u00e5 startsk\u00e4rmen</strong>. <small>Man hittar menyn genom att trycka p\u00e5 h\u00e5rdvaruknappen om din enhet har en s\u00e5dan, eller genom att trycka p\u00e5 menyikonen h\u00f6gst upp till h\u00f6ger %icon.</small>"},
zh_cn:{ios:"\u5982\u8981\u628a\u5e94\u7528\u7a0b\u5e8f\u52a0\u81f3\u4e3b\u5c4f\u5e55,\u8bf7\u70b9\u51fb%icon, \u7136\u540e<strong>\u6dfb\u52a0\u5230\u4e3b\u5c4f\u5e55</strong>",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},zh_tw:{ios:"\u5982\u8981\u628a\u61c9\u7528\u7a0b\u5f0f\u52a0\u81f3\u4e3b\u5c4f\u5e55, \u8acb\u9ede\u64ca%icon, \u7136\u5f8c<strong>\u52a0\u81f3\u4e3b\u5c4f\u5e55</strong>.",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"}};for(var r in b.intl)b.intl[r.substr(0,2)]=b.intl[r];b.defaults={appID:"org.cubiq.addtohome",fontSize:15,debug:!1,logging:!1,modal:!1,mandatory:!1,autostart:!0,skipFirstVisit:!1,startDelay:1,lifespan:15,displayPace:1440,maxDisplayCount:0,
icon:!0,message:"",validLocation:[],onInit:null,onShow:null,onRemove:null,onAdd:null,onPrivate:null,privateModeOverride:!1,detectHomescreen:!1};r=a.navigator.userAgent;var C=a.navigator;e(b,{hasToken:"#ath"==c.location.hash||l.test(c.location.href)||p.test(c.location.search),isRetina:a.devicePixelRatio&&1<a.devicePixelRatio,isIDevice:/iphone|ipod|ipad/i.test(r),isMobileChrome:-1<r.indexOf("Android")&&/Chrome\/[.0-9]*/.test(r)&&-1==r.indexOf("Version"),isMobileIE:-1<r.indexOf("Windows Phone"),language:C.language&&
C.language.toLowerCase().replace("-","_")||""});b.language=b.language&&b.language in b.intl?b.language:"en_us";b.isMobileSafari=b.isIDevice&&-1<r.indexOf("Safari")&&0>r.indexOf("CriOS");b.OS=b.isIDevice?"ios":b.isMobileChrome?"android":b.isMobileIE?"windows":"unsupported";b.OSVersion=r.match(/(OS|Android) (\d+[_\.]\d+)/);b.OSVersion=b.OSVersion&&b.OSVersion[2]?+b.OSVersion[2].replace("_","."):0;b.isStandalone="standalone"in a.navigator&&a.navigator.standalone;b.isTablet=b.isMobileSafari&&-1<r.indexOf("iPad")||
b.isMobileChrome&&0>r.indexOf("Mobile");b.isCompatible=b.isMobileSafari&&6<=b.OSVersion||b.isMobileChrome;var y={lastDisplayTime:0,returningVisitor:!1,displayCount:0,optedout:!1,added:!1};b.removeSession=function(a){try{if(!localStorage)throw Error("localStorage is not defined");localStorage.removeItem(a||b.defaults.appID)}catch(c){}};b.doLog=function(a){this.options.logging&&console.log(a)};b.Class=function(d){this.doLog=b.doLog;this.options=e({},b.defaults);e(this.options,d);d&&d.debug&&"undefined"===
typeof d.logging&&(this.options.logging=!0);if(g)if(this.options.mandatory=this.options.mandatory&&("standalone"in a.navigator||this.options.debug),this.options.modal=this.options.modal||this.options.mandatory,this.options.mandatory&&(this.options.startDelay=-.5),this.options.detectHomescreen=!0===this.options.detectHomescreen?"hash":this.options.detectHomescreen,this.options.debug&&(b.isCompatible=!0,b.OS="string"==typeof this.options.debug?this.options.debug:"unsupported"==b.OS?"android":b.OS,b.OSVersion=
"ios"==b.OS?"8":"4"),this.container=c.documentElement,this.session=(this.session=this.getItem(this.options.appID))?JSON.parse(this.session):void 0,!b.hasToken||b.isCompatible&&this.session||(b.hasToken=!1,f()),b.isCompatible){this.session=this.session||y;try{if(!localStorage)throw Error("localStorage is not defined");localStorage.setItem(this.options.appID,JSON.stringify(this.session));b.hasLocalStorage=!0}catch(p){b.hasLocalStorage=!1,this.options.onPrivate&&this.options.onPrivate.call(this)}d=!this.options.validLocation.length;
for(var h=this.options.validLocation.length;h--;)if(this.options.validLocation[h].test(c.location.href)){d=!0;break}this.getItem("addToHome")&&this.optOut();if(this.session.optedout)this.doLog("Add to homescreen: not displaying callout because user opted out");else if(this.session.added)this.doLog("Add to homescreen: not displaying callout because already added to the homescreen");else if(d)if(b.isStandalone)this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&b.hasLocalStorage&&
this.options.onAdd.call(this)),this.doLog("Add to homescreen: not displaying callout because in standalone mode");else{if(this.options.detectHomescreen){if(b.hasToken){f();this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&b.hasLocalStorage&&this.options.onAdd.call(this));this.doLog("Add to homescreen: not displaying callout because URL has token, so we are likely coming from homescreen");return}"hash"==this.options.detectHomescreen?history.replaceState("",a.document.title,
c.location.href+"#ath"):"smartURL"==this.options.detectHomescreen?history.replaceState("",a.document.title,c.location.href.replace(/(\/)?$/,"/ath$1")):history.replaceState("",a.document.title,c.location.href+(c.location.search?"&":"?")+"ath=")}if(!this.session.returningVisitor&&(this.session.returningVisitor=!0,this.updateSession(),this.options.skipFirstVisit)){this.doLog("Add to homescreen: not displaying callout because skipping first visit");return}this.options.privateModeOverride||b.hasLocalStorage?
(this.ready=!0,this.options.onInit&&this.options.onInit.call(this),this.options.autostart&&(this.doLog("Add to homescreen: autostart displaying callout"),this.show())):this.doLog("Add to homescreen: not displaying callout because browser is in private mode")}else this.doLog("Add to homescreen: not displaying callout because not a valid location")}else this.doLog("Add to homescreen: not displaying callout because device not supported")};b.Class.prototype={events:{load:"_delayedShow",error:"_delayedShow",
orientationchange:"resize",resize:"resize",scroll:"resize",click:"remove",touchmove:"_preventDefault",transitionend:"_removeElements",webkitTransitionEnd:"_removeElements",MSTransitionEnd:"_removeElements"},handleEvent:function(a){var b=this.events[a.type];if(b)this[b](a)},show:function(e){if(this.options.autostart&&!h)setTimeout(this.show.bind(this),50);else if(this.shown)this.doLog("Add to homescreen: not displaying callout because already shown on screen");else{var d=Date.now(),f=this.session.lastDisplayTime;
if(!0!==e){if(!this.ready){this.doLog("Add to homescreen: not displaying callout because not ready");return}if(d-f<6E4*this.options.displayPace){this.doLog("Add to homescreen: not displaying callout because displayed recently");return}if(this.options.maxDisplayCount&&this.session.displayCount>=this.options.maxDisplayCount){this.doLog("Add to homescreen: not displaying callout because displayed too many times already");return}}this.shown=!0;this.session.lastDisplayTime=d;this.session.displayCount++;
this.updateSession();this.applicationIcon||(this.applicationIcon="ios"==b.OS?c.querySelector('head link[rel^=apple-touch-icon][sizes="152x152"],head link[rel^=apple-touch-icon][sizes="144x144"],head link[rel^=apple-touch-icon][sizes="120x120"],head link[rel^=apple-touch-icon][sizes="114x114"],head link[rel^=apple-touch-icon]'):c.querySelector('head link[rel^="shortcut icon"][sizes="196x196"],head link[rel^=apple-touch-icon]'));e="";"object"==typeof this.options.message&&b.language in this.options.message?
e=this.options.message[b.language][b.OS]:"object"==typeof this.options.message&&b.OS in this.options.message?e=this.options.message[b.OS]:this.options.message in b.intl?e=b.intl[this.options.message][b.OS]:""!==this.options.message?e=this.options.message:b.OS in b.intl[b.language]&&(e=b.intl[b.language][b.OS]);e="<p>"+e.replace(/%icon(?:\[([^\]]+)\])?/gi,function(a,b){return'<span class="ath-action-icon">'+(b?b:"icon")+"</span>"});NaN;this.viewport=c.createElement("div");this.viewport.className="ath-viewport";
this.options.modal&&(this.viewport.className+=" ath-modal");this.options.mandatory&&(this.viewport.className+=" ath-mandatory");this.viewport.style.position="absolute";this.element=c.createElement("div");this.element.className="ath-container ath-"+b.OS+" ath-"+b.OS+(b.OSVersion+"").substr(0,1)+" ath-"+(b.isTablet?"tablet":"phone");this.element.style.cssText="-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0s;-webkit-transition-timing-function:ease-out;transition-property:transform,opacity;transition-duration:0s;transition-timing-function:ease-out;";
this.element.style.webkitTransform="translate3d(0,-"+a.innerHeight+"px,0)";this.element.style.transform="translate3d(0,-"+a.innerHeight+"px,0)";this.options.icon&&this.applicationIcon&&(this.element.className+=" ath-icon",this.img=c.createElement("img"),this.img.className="ath-application-icon",this.img.addEventListener("load",this,!1),this.img.addEventListener("error",this,!1),this.img.src=this.applicationIcon.href,this.element.appendChild(this.img));this.element.innerHTML+=e;this.viewport.style.left=
"-99999em";this.viewport.appendChild(this.element);this.container.appendChild(this.viewport);this.img?this.doLog("Add to homescreen: not displaying callout because waiting for img to load"):this._delayedShow()}},_delayedShow:function(a){setTimeout(this._show.bind(this),1E3*this.options.startDelay+500)},_show:function(){var b=this;this.updateViewport();a.addEventListener("resize",this,!1);a.addEventListener("scroll",this,!1);a.addEventListener("orientationchange",this,!1);this.options.modal&&c.addEventListener("touchmove",
this,!0);this.options.mandatory||setTimeout(function(){b.element.addEventListener("click",b,!0)},1E3);setTimeout(function(){b.element.style.webkitTransitionDuration="1.2s";b.element.style.transitionDuration="1.2s";b.element.style.webkitTransform="translate3d(0,0,0)";b.element.style.transform="translate3d(0,0,0)"},0);this.options.lifespan&&(this.removeTimer=setTimeout(this.remove.bind(this),1E3*this.options.lifespan));this.options.onShow&&this.options.onShow.call(this)},remove:function(){clearTimeout(this.removeTimer);
this.img&&(this.img.removeEventListener("load",this,!1),this.img.removeEventListener("error",this,!1));a.removeEventListener("resize",this,!1);a.removeEventListener("scroll",this,!1);a.removeEventListener("orientationchange",this,!1);c.removeEventListener("touchmove",this,!0);this.element.removeEventListener("click",this,!0);this.element.addEventListener("transitionend",this,!1);this.element.addEventListener("webkitTransitionEnd",this,!1);this.element.addEventListener("MSTransitionEnd",this,!1);this.element.style.webkitTransitionDuration=
"0.3s";this.element.style.opacity="0"},_removeElements:function(){this.element.removeEventListener("transitionend",this,!1);this.element.removeEventListener("webkitTransitionEnd",this,!1);this.element.removeEventListener("MSTransitionEnd",this,!1);this.container.removeChild(this.viewport);this.shown=!1;this.options.onRemove&&this.options.onRemove.call(this)},updateViewport:function(){if(this.shown){this.viewport.style.width=a.innerWidth+"px";this.viewport.style.height=a.innerHeight+"px";this.viewport.style.left=
a.scrollX+"px";this.viewport.style.top=a.scrollY+"px";var e=c.documentElement.clientWidth;this.orientation=e>c.documentElement.clientHeight?"landscape":"portrait";var d="ios"==b.OS?"portrait"==this.orientation?screen.width:screen.height:screen.width;this.scale=screen.width>e?1:d/a.innerWidth;this.element.style.fontSize=this.options.fontSize/this.scale+"px"}},resize:function(){clearTimeout(this.resizeTimer);this.resizeTimer=setTimeout(this.updateViewport.bind(this),100)},updateSession:function(){!1!==
b.hasLocalStorage&&localStorage&&localStorage.setItem(this.options.appID,JSON.stringify(this.session))},clearSession:function(){this.session=y;this.updateSession()},getItem:function(a){try{if(!localStorage)throw Error("localStorage is not defined");return localStorage.getItem(a)}catch(c){b.hasLocalStorage=!1}},optOut:function(){this.session.optedout=!0;this.updateSession()},optIn:function(){this.session.optedout=!1;this.updateSession()},clearDisplayCount:function(){this.session.displayCount=0;this.updateSession()},
_preventDefault:function(a){a.preventDefault();a.stopPropagation()}};a.addToHomescreen=b})(window,document);$(document).bind("mobileinit",function(){$.mobile.ajaxEnabled=!1;$.autoInitializePage=!0});
function showFooterMessage(a){"undefined"!=a.status?"success"==a.status?($("prefooter > .container").html('<p><span class="circle-ok"><span class="glyphicon glyphicon-ok"></span></span>'+a.mess+"</p>"),$("prefooter > .container p").css("background","#128c44"),$("prefooter > .container p").css("color","#fff"),$("prefooter > .container p").css("padding","20px")):"alert"==a.status&&($("prefooter > .container").html('<p><span class="circle-alert"><span>!</span></span>'+a.mess+"</p>"),$("prefooter > .container p").css("background",
"#fcaa57"),$("prefooter > .container p").css("color","#fff"),$("prefooter > .container p").css("padding","20px")):($("prefooter > .container").html('<p style="">'+a.mess+"</p>"),$("prefooter > .container p").css("background",a.clr),$("prefooter > .container p").css("color",a.clrT),$("prefooter > .container p").css("padding","20px"));$("prefooter").show();$("prefooter").delay(a.anim_a).fadeOut(a.anim_b,function(){$("prefooter").hide();a.onFinish&&eval(a.onFinish)})}
$(document).ready(function(){$("prefooter").hide();$(".int_less_publish").change(function(){var a=$("form#int_lesson_form").serialize();$.ajax({url:"/ajax/interactive_lessons_ajax/save_publish/",dataType:"json",type:"POST",data:a,success:function(a){}})});$("a.template_id").click(function(a){a.preventDefault();a=$(this).attr("id").replace("template_","");$("div.ui-controlgroup-controls").find("a.active_template").removeClass("active_template");$(this).addClass("active_template");$("input#tmpl_id").val(a)});
var a=$("input#tmpl_id").val();""!==a&&$("#template_"+a).addClass("active_template");$(".add_question a").on("click",function(a){a.preventDefault();var d=$(".hidden.question_box:first").clone(!0,!0);a=$("input.subject_id").val();var b=$("input.module_id").val(),e=$("input.lesson_id").val();$("input.int_les_id").val();var f=$("input.int_assessment_id").val();$("#questions_wrap").append(d);d=parseInt($("#questions_wrap .question_box").last().index());$("#questions_wrap .question_box").last().find("input.question_text").attr("name",
"questions["+d+"][question_text]");$("#questions_wrap .question_box").last().find("input.question_id").attr("name","questions[question]["+d+"][question_id]");$("#questions_wrap .question_box").last().find("input.resource_id").attr("name","questions["+d+"][question_resource_id]");$("#questions_wrap .question_box").last().find("a.add_q_ressource").attr("href","/c1/index/question/"+d+"/"+a+"/"+b+"/"+e+"/"+f);$(".question_box").last().removeClass("hidden")});$(".add_option").on("click",function(a){a.preventDefault();
var d=$(this).parent().parent().find("input.add_option_text");a=d.val();$(d).val("");d=$(this).parent().parent().parent().find(".q_options_list").children().length;if(10>=d){var b=$(this).parent().parent().parent().find(".hidden.q_option").clone();$.each(b.find("select"),function(a,b){var c=$(this);a=c.attr("id");a++;c.attr("id",a);c.slider();c.slider("refresh");c.parent().find(".ui-slider").last().remove()});var e=$(this).parent().parent().parent().find(".q_options_list");$(e).append(b);$(this).parent().parent().parent().find(".q_options_list .q_option:last input.option_text").val(a);
a=parseInt($(this).parent().parent().parent().parent(".question_box").index());$(this).parent().parent().parent().find(".q_options_list .q_option:last input.option_text").attr("name","questions["+a+"][answers]["+(parseInt(d)-1)+"][answer_text]");$(this).parent().parent().parent().find(".q_options_list .q_option:last select.answer").attr("name","questions["+a+"][answers]["+(parseInt(d)-1)+"][answer_true]");$(this).parent().parent().parent().find(".q_options_list .q_option:last").removeClass("hidden")}});
$(document).on("click",".delete_option",function(a){a.preventDefault();$(this).parent().parent(".q_option").remove()});$("a.add_q_ressource").click(function(a){a.preventDefault();a=$("form#int_assessment_form").serialize();var d=$(this).attr("href");$.ajax({url:"/ajax/int_assessment_ajax/save_temp_data/",dataType:"json",type:"POST",data:a,success:function(a){a.success&&(window.location.href=d)}})});$(".colorbox").colorbox({photo:!0,maxWidth:"100%",maxHeight:"100%"});"student"==user_type?intervalRes=
setInterval(function(){checkRunningLesson()},3E3):"teacher"==user_type?(intervalRes=setInterval(function(){checkRunningLessonForTeacher()},5E3),setInterval(function(){checkOnlineStudents()},5E3)):-1!=window.location.href.indexOf("/e5_teacher")&&-1!=window.location.href.indexOf("/running")&&setInterval(function(){checkOnlineStudents()},5E3);$(".add_option_text").keypress(function(a){if(13==a.which)return a=$(this).parent().parent().parent().find(".add_option"),$(a).click(),!1});$.each($("textarea[data-autoresize]"),
function(){var a=this.offsetHeight-this.clientHeight;$(this).on("keyup input",function(){$(this).css("height","auto").css("height",this.scrollHeight+a);0==$(this).val().length&&$(this).css({height:"62px"})}).removeAttr("data-autoresize")});$("textarea").each(function(){$(this).outerHeight()}).on("keyup",function(){var a=this.scrollHeight,d=$(this).outerHeight();a+2>d&&$(this).scrollTop(0).css({height:a+2+"px"})});$(".keywords").each(function(){var a=this,d=$(a),b=$("> input",a),e=b.val();ke=e.slice(1,
-1);var e=ke.split(","),f=function(e,d){if(e){if(!d){var f=b.val(),f=f.split(",");f.push(e);f=f.join();f=f.toString();f=f.replace(/[\])}[{(]/g,"");b.val(f)}$(".input-container",a).before('<div class="keyword"><span>'+e+'</span><a class="remove"></a></div>');$(".list").html("")}};b.css({display:"none"});d.append('<div class="input-container"><input value="" type="text"><div><div class="list"></div>');e.length&&$.each(e,function(a,b){f(b,!0)});d.on("keyup",".input-container input",function(){var a=
$(this).val(),b=d.data("to");b&&clearTimeout(b);b=!1;a&&(b=setTimeout(function(){$.ajax({url:"/c2/suggestKeywords",data:{q:a},dataType:"json",success:function(a){var b="";$.each(a,function(a,c){b+="<li>"+c+"</li>"});$(".list").html("<ul>"+b+"</ul>")}})},200),d.data("to",b))}).on("keydown",".input-container input",function(a){var b=$(this).val();13==a.keyCode&&b&&($(this).val(""),f(b))}).on("click",".list li",function(){var b=$(this).text();b&&($(".input-container input",a).val(""),f(b))}).on("click",
".keyword .remove",function(){var a=b.val(),a=a.split(","),a=a.toString(),a=a.replace(/[\])}[{(]/g,""),a=a.split(","),c=$(this).parent().index()-2;a.splice(c,1);b.val(a);$(this).parent().remove();$(".list").html("")});$(document).click(function(a){var b=$(".input-container input").val();""!=b&&(f(b),$(".input-container input").val(""));void 0===$(a.target).closest("li")[0]&&$(".list").html("")})});$(".keystudents").each(function(){var a=this,d=$(a),b=$("> input#keystudents",a),e=$("> input#keystudents_a",
a),f=e.val(),g=b.val();kest=f.slice(1,-1);kest1=g.slice(1,-1);var f=kest.split(","),g=kest1.split(","),h=function(d,f,g){if(d){if(!g){g=e.val();var h=b.val(),h=h+f+",";e.val(g+d+",");b.val(h)}$(".input-container",a).before('<div class="keystudent"><span>'+d+'</span><a class="remove"></a></div>');$(".list").html("")}};e.css({display:"none"});d.append('<div class="input-container"><input value="" type="text"><div><div class="list"></div>');f.length&&$.each(f,function(a,b){h(b,a,!0)});d.on("keyup",".input-container input",
function(){var a=$(this).val(),b=d.data("to");b&&clearTimeout(b);b=!1;a&&(b=setTimeout(function(){$.ajax({url:"/f2c_teacher/suggestKeystudents",data:{q:a},dataType:"json",success:function(a){var b="";$.each(a,function(a,c){b+='<li rel="'+a+'">'+c+"</li>"});$(".list").html("<ul>"+b+"</ul>");updateSlideHeight(".step.s3")}})},200),d.data("to",b))}).on("keydown",".input-container input",function(a){var b=$(this).val(),c=$(this).attr("rel");13==a.keyCode&&b&&($(this).val(""),h(b,c))}).on("click",".list li",
function(){var b=$(this).text(),e=$(this).attr("rel");b&&($(".input-container input",a).val(""),h(b,e))}).on("click",".keystudent .remove",function(){var a=e.val(),a=a.split(","),a=a.toString(),a=a.replace(/[\])}[{(]/g,""),a=a.split(","),b=$(this).parent().index()-2;a.splice(b,1);e.val(a);$(this).parent().remove();$(".list").html("")});$(document).click(function(a){var b=$(".input-container input").val();""!=b&&(h(b),$(".input-container input").val(""));void 0===$(a.target).closest("li")[0]&&$(".list").html("")})});
$("select").each(function(){$(this).hasClass("customize")||($(this).addClass("customize"),$(this).after('<span class="select"><span class="v">'+$("option:selected",this).text()+'</span><span class="a"></span></span>'),$(this).appendTo($(this).next()))});$("span.select select").on("change",function(){$(this).closest(".select").find(".v").text($("option:selected",this).text())});initPublishButton("#publish_btn","publish","PUBLISHED","PUBLISH")});$(window).load(function(){bg_fix()});$(window).resize(function(){bg_fix()});
function initPublishButton(a,c,d,b){$(a).each(function(){$("input[name="+c+"]").size()&&"1"==$("input[name="+c+"]").val()&&$(this).addClass("active").text(d);$(this).off("click");$(this).on("click",function(){0==disablepublishandsave&&$("input[name="+c+"]").size()&&("1"==$("input[name="+c+"]").val()?($("input[name="+c+"]").val("0"),$(this).removeClass("active").text(b)):($("input[name="+c+"]").val("1"),$(this).addClass("active").text(d)))})})}
function bg_fix(){$(".blue_gradient_bg").height()-parseInt($(".blue_gradient_bg").css("margin-top"))-$("footer").height()-parseInt($("footer").css("border-top-width"))<$(window).height()&&$(".blue_gradient_bg").css("min-height",parseInt($(window).height()-$("footer").height()-parseInt($("footer").css("border-top-width"))-parseInt($(".blue_gradient_bg").css("margin-top")))+"px");$(".red_gradient_bg").height()<$(window).height()&&$(".red_gradient_bg").css("min-height",parseInt($(window).height()-42-
$(".footer_menu").height())+"px");$(".rred_gradient_bg").height()<$(window).height()&&$(".rred_gradient_bg").css("min-height",parseInt($(window).height())+"px");$(".ui-header>.ui-btn-right").css("left",parseInt($(".ui-header").width()/2-$(".ui-header>.ui-btn-right").width()/2)+"px");768<$(window).width()?$(".left_menu_pic").css("height",$(".pic_e5").height()+"px"):$(".left_menu_pic").css("height","auto")}
function getPathnameParts(){var a=window.location.pathname;"/"==a.substr(0,1)&&(a=a.substr(1));return a.split("/")}
function checkRunningLesson(){set_logout();$.ajax({url:"/ajax/running_lesson/index/"+user_id,dataType:"json",success:function(a){if(void 0!==a.subject_id&&void 0!==a.module_id&&void 0!==a.lesson_id&&void 0!==a.secret)if(-1==window.location.href.indexOf("/running")){var c=function(){var b=((new Date).getTime()-d)/1E3;5>b?$("#dialog_title").html('Taking you to interactive lesson: <br /><span style="color:#004400;text-shadow:none;font-weight:bold;font-size:58px;font-style: italics;">'+a.lesson_title+
"</span><br /> with "+a.teacher_first_name+" "+a.teacher_last_name+" in "+Math.floor(5-b)+" seconds..."):(clearInterval(intervalRes),window.location.href="/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/")};clearInterval(intervalRes);$("#staticheader").css("background-color","#009900");$(".gray_top_field").css("background-color","#004400");$("#dialog_title").html("title");$("#dialog").show();var d=(new Date).getTime();c();intervalRes=setInterval(function(){c()},800)}else-1==
window.location.href.indexOf("/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/")&&(window.location.href="/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/");else-1!=window.location.href.indexOf("/running")&&void 0!==a.free_preview&&(window.location.href="/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1")},error:function(a){}})}
function checkRunningLessonForTeacher(){set_logout();$.ajax({url:"/ajax/running_lesson_t/index/"+user_id,dataType:"json",success:function(a){var c=a.running_page-1;if(void 0!==a.subject_id&&void 0!==a.module_id&&void 0!==a.lesson_id&&void 0!==a.running_page&&-1==window.location.href.indexOf("/running")){var d=function(){var e=((new Date).getTime()-b)/1E3;5>e?$("#dialog_title").html('Returning you to your open interactive lesson: <br /><span style="color:#004400;text-shadow:none;font-weight:bold;font-size:58px;font-style: italics;">'+
a.lesson_title+"</span><br /> in "+Math.floor(5-e)+" seconds..."):(clearInterval(intervalRes),window.location.href="/e5_teacher/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/"+c)};clearInterval(intervalRes);$("#staticheader").css("background-color","#009900");$(".gray_top_field").css("background-color","#004400");$("#dialog_title").html("title");$("#dialog").show();var b=(new Date).getTime();d();intervalRes=setInterval(function(){d()},800)}}})}
function checkOnlineStudents(){var a=getPathnameParts()[4];$.ajax({url:"/ajax/online_students/index/"+a,dataType:"json",success:function(a){$("#studentlist .student.online1").removeClass("online1").addClass("online0");for(index in a)$("#studentlist #student_"+a[index]).removeClass("online0").addClass("online1")}});var c=new Date,a=c.getHours();10>a&&(a="0"+a);c=c.getMinutes();10>c&&(c="0"+c);$("#student_list #clock").html(a+":"+c)}
function change_res(a){1==a?($("#all_resources").addClass("hidden"),$("#my_resources").removeClass("hidden"),$("#all_resources_button").removeClass("hidden"),$("#my_resources_button").addClass("hidden")):($("#my_resources").addClass("hidden"),$("#all_resources").removeClass("hidden"),$("#all_resources_button").addClass("hidden"),$("#my_resources_button").removeClass("hidden"))}
function loadTinymce(){tinymce.init({selector:"textarea.mce-toolbar-grp",theme:"modern",mode:"exact",plugins:"pagebreak table save charmap media contextmenu paste directionality noneditable visualchars nonbreaking spellchecker template",toolbar:" bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link | table |",menu:{},setup:function(a){a.on("init",function(){this.getDoc().body.style.fontSize="14px";this.getDoc().body.style.letterSpacing="0.8px";this.getDoc().body.style.lineHeight=
"24px"});a.on("change",function(){tinymce.triggerSave()});a.on("submit",function(c){a.getElement().value=a.getContent()})},contextmenu:"cut copy paste",menubar:!0,statusbar:!1,toolbar_item_size:"normal"})}
function loadTinymceStudent(){tinymce.init({selector:"textarea.mce-toolbar-grp",theme:"modern",readonly:1,mode:"exact",plugins:"",toolbar:"|",menu:{},setup:function(a){a.on("init",function(){this.getDoc().body.style.fontSize="14px";this.getDoc().body.style.letterSpacing="0.8px";this.getDoc().body.style.lineHeight="24px"});a.on("change",function(){tinymce.triggerSave()});a.on("submit",function(c){a.getElement().value=a.getContent()})},contextmenu:"cut copy paste",menubar:!0,statusbar:!1,toolbar_item_size:"normal"})}
function loadTinymceSlider(){tinymce.init({selector:"textarea.mce-toolbar-grp",theme:"modern",mode:"exact",plugins:"pagebreak table save charmap media contextmenu paste directionality noneditable visualchars nonbreaking spellchecker template",toolbar:" bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link | table |",menu:{},setup:function(a){a.on("init",function(){this.getDoc().body.style.fontSize="14px";this.getDoc().body.style.letterSpacing="0.8px";
this.getDoc().body.style.lineHeight="24px";updateSlideHeight(".step.s1")});a.on("change",function(){tinymce.triggerSave()})},contextmenu:"cut copy paste",menubar:!0,statusbar:!1,toolbar_item_size:"normal"})}
function validate(){var a=[];$("input, select, textarea").each(function(c,d){var b=$(this);if($(b).hasClass("required"))if(""==b.val().trim()||void 0===b.val()){b.css({border:"1px dashed red"});var e=b.attr("data-validation-required-message");b.prev("span").attr("id","scrolled");b.prev("span").html("").removeClass("tip2").addClass("tip2").append(e).css({display:"block"});$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300);b.prev("span").removeAttr("scrolled");a[c]=1}else void 0!==
b.attr("minlength")&&b.val().length<b.attr("minlength")&&(b.css({border:"1px dashed red"}),b.prev("span").attr("id","scrolled"),e="This must be at least "+b.attr("minlength")+" characters long",b.prev("span").html("").removeClass("tip2").addClass("tip2").append(e).css({display:"block"}),$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300),b.prev("span").removeAttr("scrolled"),a[c]=1);b.on("focus",function(){b.prev("span.tip2").fadeOut("3333");b.css({"border-color":"#c8c8c8",
"border-width":"1px","border-style":"solid"})})});0===a.length&&($("input:text, textarea").each(function(){$(this).val(this.value)}),$(".hidden_submit").click())}
function validate_slider(a){var c=[];1==a&&$("input, select").each(function(a,b){var e=$(this);if($(e).hasClass("required"))if(""==e.val().trim()||void 0===e.val()){e.css({border:"1px dashed red"});var f=e.attr("data-validation-required-message");e.prev("span").attr("id","scrolled");e.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"});e.prev("span").removeAttr("scrolled");c[a]=1}else void 0!==e.attr("minlength")&&e.val().length<e.attr("minlength")&&(e.css({border:"1px dashed red"}),
e.prev("span").attr("id","scrolled"),f="This must be at least "+e.attr("minlength")+" characters long",e.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"}),e.prev("span").removeAttr("scrolled"),c[a]=1);e.on("focus",function(){e.prev("span.tip2").fadeOut("3333");e.css({"border-color":"#c8c8c8","border-width":"1px","border-style":"solid"})})});if(0===c.length)return $("input:text, textarea").each(function(){$(this).val(this.value)}),c=[],0;c=[];return 1}
function validate_as_draft(a){var c=[],d=$("#assignment_title");if(1==a){if(""==d.val().trim()||void 0===d.val())d.css({border:"1px dashed red"}),a=d.attr("data-validation-required-message"),d.prev("span").attr("id","scrolled"),d.prev("span").html("").removeClass("tip2").addClass("tip2").append(a).css({display:"block"}),d.prev("span").removeAttr("scrolled"),c[0]=1;d.on("focus",function(){d.prev("span.tip2").fadeOut("3333");d.css({"border-color":"#c8c8c8","border-width":"1px","border-style":"solid"})})}if(0===
c.length)return c=[],0;c=[];return 1}
function validate_to_publish(a){var c=1;a=$(".pdatepicker").datepicker("getDate").getTime();864E5>$(".datepicker").datepicker("getDate").getTime()-a&&(opdate=$("#publish_date"),oddate=$("#deadline_date"),oddate.css({border:"1px dashed #fcaa57"}),a=oddate.attr("data-validation-required-message"),oddate.prev("span").attr("id","scrolled"),oddate.prev("span").html("").removeClass("tip3").addClass("tip3").append(a).css({display:"block"}),oddate.prev("span").removeAttr("scrolled"),c=1);"offline"!=$("#grade_type").val()&&
(0<$("#grade_categories_holder tr").length?($(".add_cat #mark").removeClass("required"),$(".add_cat #catg").removeClass("required")):($(".add_cat #catg").addClass("required"),$(".add_cat #mark").addClass("required")));$("input, select").each(function(a,b){var e=$(this);if($(e).hasClass("required"))if(""==e.val().trim()||void 0===e.val()){e.css({border:"1px dashed red"});var f=e.attr("data-validation-required-message");e.prev("span").attr("id","scrolled");e.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"});
e.prev("span").removeAttr("scrolled");c=0}else void 0!==e.attr("minlength")&&e.val().length<e.attr("minlength")&&(e.css({border:"1px dashed red"}),e.prev("span").attr("id","scrolled"),f="This must be at least "+e.attr("minlength")+" characters long",e.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"}),e.prev("span").removeAttr("scrolled"),c=0);e.on("focus",function(){e.prev("span.tip2").fadeOut("3333");e.prev("span.tip3").fadeOut("3333");e.css({"border-color":"#c8c8c8",
"border-width":"1px","border-style":"solid"})})});1>$(".classes:checked").length&&($(".table4").css({border:"1px dashed red"}),a="You must choose at least one class!",$(".table4").prev("span").attr("id","scrolled"),$(".table4").prev("span").html("").removeClass("tip2").addClass("tip2").append(a).css({display:"block"}),$(".table4").prev("span").removeAttr("scrolled"),c=0,$(".classes").on("click",function(){$(".table4").prev("span.tip2").fadeOut("3333");$(".table4").css({"border-color":"#c8c8c8","border-width":"1px",
"border-style":"solid"})}));"offline"!=$("#grade_type").val()&&($("#catg").removeClass("required"),$("#mark").removeClass("required"));return c}
function validate_resource(){var a=[];$("input, select, textarea").each(function(c,d){var b=$(this);if($(b).hasClass("required"))if(""==b.val().trim()||void 0===b.val()){b.css({border:"1px dashed red"});var e=b.attr("data-validation-required-message");b.prev("span").attr("id","scrolled");b.prev("span").html("").removeClass("tip2").addClass("tip2").append(e).css({display:"block"});$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300);b.prev("span").removeAttr("scrolled");
a[c]=1}else void 0!==b.attr("minlength")&&b.val().length<b.attr("minlength")&&(b.css({border:"1px dashed red"}),b.prev("span").attr("id","scrolled"),e="This must be at least "+b.attr("minlength")+" characters long",b.prev("span").html("").removeClass("tip2").addClass("tip2").append(e).css({display:"block"}),$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300),b.prev("span").removeAttr("scrolled"),a[c]=1);b.on("focus",function(){b.prev("span.tip2").fadeOut("3333");b.css({"border-color":"#c8c8c8",
"border-width":"1px","border-style":"solid"})})});0===a.length&&($(".red_btn").fadeOut(100),$("#saveform").submit())}
$(function(){$(document).on("click",".up_down",function(a){a=$(this).next(".collapsed");if($(a).hasClass("hidden"))return!1;$(a).is(":visible")?($(this).next(".collapsed").slideUp(400),$(this).css({"background-position":"0 1px"}),$.session.set($(this).next().attr("id"),"none")):($(this).next(".collapsed").slideDown(400,function(){}),$(this).css({"background-position":"0 -36px"}),$.session.set($(this).next().attr("id"),"block"))});$(document).on("click",".acc_title",function(a){a=$(this).next().next(".collapsed");
if($(a).hasClass("hidden"))return!1;$(a).is(":visible")?($(this).next().next(".collapsed").slideUp(400),$(this).next(".up_down").css({"background-position":"0 1px"}),$.session.set($(this).next().next().attr("id"),"none")):($(this).next().next(".collapsed").slideDown(400,function(){}),$(this).next(".up_down").css({"background-position":"0 -36px"}),$.session.set($(this).next().next().attr("id"),"block"))});$(".up_down_homework").click(function(){var a=$(this).next(".collapsed");$(a).is(":visible")?
($(this).next(".collapsed").slideUp(400),$(this).css({"background-position":"0 1px"})):($(this).next(".collapsed").slideDown(400,function(){}),$(this).css({"background-position":"0 -30px"}))});$(".assignment").show()});var timer=0,timer1=0,set_timer=!1,logout_sec=10,activity=72E5;function set_logout(){0==set_timer&&(set_timer=!0,timer=setInterval("auto_logout()",activity),$(".dismiss-logout").on("click",function(){clearInterval(timer1);reset_logout()}))}
function reset_logout(){0!=timer&&(clearInterval(timer),timer=setInterval("auto_logout()",activity),logout_sec=10,$("#dialog_logout .logout_sec").text(logout_sec))}function auto_logout(){$("#dialog_logout").modal("show");timer1=setInterval("auto_logout2()",1E3)}function auto_logout2(){logout_sec--;$("#dialog_logout .logout_sec").text(logout_sec);1>logout_sec&&(window.location.href="/logout/")}
(function(a){a.session={_id:null,_cookieCache:void 0,_init:function(){window.name||(window.name=Math.random());this._id=window.name;this._initCache();var a=(new RegExp(this._generatePrefix()+"=([^;]+);")).exec(document.cookie);if(a&&document.location.protocol!==a[1]){this._clearSession();for(var d in this._cookieCache)try{window.sessionStorage.setItem(d,this._cookieCache[d])}catch(b){}}document.cookie=this._generatePrefix()+"="+document.location.protocol+";path=/;expires="+(new Date((new Date).getTime()+
12E4)).toUTCString()},_generatePrefix:function(){return"__session:"+this._id+":"},_initCache:function(){var a=document.cookie.split(";");this._cookieCache={};for(var d in a){var b=a[d].split("=");(new RegExp(this._generatePrefix()+".+")).test(b[0])&&b[1]&&(this._cookieCache[b[0].split(":",3)[2]]=b[1])}},_setFallback:function(a,d,b){var e=this._generatePrefix()+a+"="+d+"; path=/";b&&(e+="; expires="+(new Date(Date.now()+12E4)).toUTCString());document.cookie=e;this._cookieCache[a]=d;return this},_getFallback:function(a){this._cookieCache||
this._initCache();return this._cookieCache[a]},_clearFallback:function(){for(var a in this._cookieCache)document.cookie=this._generatePrefix()+a+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;";this._cookieCache={}},_deleteFallback:function(a){document.cookie=this._generatePrefix()+a+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;";delete this._cookieCache[a]},get:function(a){return window.sessionStorage.getItem(a)||this._getFallback(a)},set:function(a,d,b){try{window.sessionStorage.setItem(a,
d)}catch(e){}this._setFallback(a,d,b||!1);return this},"delete":function(a){return this.remove(a)},remove:function(a){try{window.sessionStorage.removeItem(a)}catch(d){}this._deleteFallback(a);return this},_clearSession:function(){try{window.sessionStorage.clear()}catch(a){for(var c in window.sessionStorage)window.sessionStorage.removeItem(c)}},clear:function(){this._clearSession();this._clearFallback();return this}};a.session._init()})(jQuery);
(function(a,c){"object"==typeof exports?module.exports=c():"function"==typeof define&&define.amd?define(c):a.Spinner=c()})(this,function(){function a(a,b){var c,e=document.createElement(a||"div");for(c in b)e[c]=b[c];return e}function c(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function d(a,b,c,e){var d=["opacity",b,~~(100*a),c,e].join("-");c=.01+c/e*100;e=Math.max(1-(1-a)/b*(100-c),a);var f=p.substring(0,p.indexOf("Animation")).toLowerCase();return r[d]||(C.insertRule("@"+
(f&&"-"+f+"-"||"")+"keyframes "+d+"{0%{opacity:"+e+"}"+c+"%{opacity:"+a+"}"+(c+.01)+"%{opacity:1}"+(c+b)%100+"%{opacity:"+a+"}100%{opacity:"+e+"}}",C.cssRules.length),r[d]=1),d}function b(a,b){var c,e,d=a.style;b=b.charAt(0).toUpperCase()+b.slice(1);for(e=0;m.length>e;e++)if(c=m[e]+b,void 0!==d[c])return c;return void 0!==d[b]?b:void 0}function e(a,c){for(var e in c)a.style[b(a,e)||e]=c[e];return a}function f(a){for(var b=1;arguments.length>b;b++){var c=arguments[b],e;for(e in c)void 0===a[e]&&(a[e]=
c[e])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,y)}function l(){function b(c,e){return a("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}C.addRule(".spin-vml","behavior:url(#default#VML)");h.prototype.lines=function(a,d){function f(){return e(b("group",{coordsize:m+" "+m,coordorigin:-l+" "+-l}),{width:m,height:m})}function p(a,h,m){c(r,c(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),c(e(b("roundrect",{arcsize:d.corners}),
{width:l,height:d.width,left:d.radius,top:-d.width>>1,filter:m}),b("fill",{color:g(d.color,a),opacity:d.opacity}),b("stroke",{opacity:0}))))}var h,l=d.length+d.width,m=2*l;h=2*-(d.width+d.length)+"px";var r=e(f(),{position:"absolute",top:h,left:h});if(d.shadow)for(h=1;d.lines>=h;h++)p(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;d.lines>=h;h++)p(h);return c(a,r)};h.prototype.opacity=function(a,b,c,e){a=a.firstChild;e=e.shadow&&e.lines||0;a&&a.childNodes.length>
b+e&&(a=a.childNodes[b+e],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=c))}}var p,m=["webkit","Moz","ms","O"],r={},C=function(){var b=a("style",{type:"text/css"});return c(document.getElementsByTagName("head")[0],b),b.sheet||b.styleSheet}(),y={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2E9,className:"spinner",top:"50%",left:"50%",position:"absolute"};h.defaults={};f(h.prototype,{spin:function(b){this.stop();var c=
this,d=c.opts,f=c.el=e(a(0,{className:d.className}),{position:d.position,width:0,zIndex:d.zIndex});if(d.radius+d.length+d.width,e(f,{left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute("role","progressbar"),c.lines(f,c.opts),!p){var g,h=0,l=(d.lines-1)*(1-d.direction)/2,m=d.fps,r=m/d.speed,y=(1-d.opacity)/(r*d.trail/100),C=r/d.lines;(function T(){h++;for(var a=0;d.lines>a;a++)g=Math.max(1-(h+(d.lines-a)*C)%r*y,d.opacity),c.opacity(f,a*d.direction+l,g,d);c.timeout=c.el&&
setTimeout(T,~~(1E3/m))})()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(b,f){function h(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*m+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var l,m=0,r=(f.lines-1)*(1-f.direction)/
2;f.lines>m;m++)l=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:p&&d(f.opacity,f.trail,r+m*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&c(l,e(h("#000","0 0 4px #000"),{top:"2px"})),c(b,c(l,h(g(f.color,m),"0 0 1px rgba(0,0,0,.1)")));return b},opacity:function(a,b,c){a.childNodes.length>b&&(a.childNodes[b].style.opacity=c)}});var K=e(a("group"),{behavior:"url(#default#VML)"});return!b(K,"transform")&&
K.adj?l():p=b(K,"animation"),h});
(function(a,c){"object"==typeof exports?module.exports=c(require("spin.js")):"function"==typeof define&&define.amd?define(["spin"],c):a.Ladda=c(a.Spinner)})(this,function(a){function c(c){if(void 0===c)return console.warn("Ladda button target must be defined."),void 0;c.querySelector(".ladda-label")||(c.innerHTML='<span class="ladda-label">'+c.innerHTML+"</span>");var d,g=c.querySelector(".ladda-spinner");g||(g=document.createElement("span"),g.className="ladda-spinner");c.appendChild(g);var h,l={start:function(){if(!d){var b,
l=c.offsetHeight;0===l&&(l=parseFloat(window.getComputedStyle(c).height));32<l&&(l*=.8);c.hasAttribute("data-spinner-size")&&(l=parseInt(c.getAttribute("data-spinner-size"),10));c.hasAttribute("data-spinner-color")&&(b=c.getAttribute("data-spinner-color"));l*=.2;d=new a({color:b||"#fff",lines:12,radius:l,length:.6*l,width:7>l?2:3,zIndex:"auto",top:"auto",left:"auto",className:""})}return c.setAttribute("disabled",""),c.setAttribute("data-loading",""),clearTimeout(h),d.spin(g),this.setProgress(0),
this},startAfter:function(a){return clearTimeout(h),h=setTimeout(function(){l.start()},a),this},stop:function(){return c.removeAttribute("disabled"),c.removeAttribute("data-loading"),clearTimeout(h),d&&(h=setTimeout(function(){d.stop()},1E3)),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(a){a=Math.max(Math.min(a,1),0);var b=c.querySelector(".ladda-progress");0===a&&b&&b.parentNode?b.parentNode.removeChild(b):(b||(b=document.createElement("div"),
b.className="ladda-progress",c.appendChild(b)),b.style.width=(a||0)*c.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),c.setAttribute("disabled",""),this},isLoading:function(){return c.hasAttribute("data-loading")},remove:function(){clearTimeout(h);c.removeAttribute("disabled","");c.removeAttribute("data-loading","");d&&(d.stop(),d=null);for(var a=0,g=b.length;g>a;a++)if(l===b[a]){b.splice(a,1);break}}};return b.push(l),l}function d(a){for(var b=
[],c=0;a.length>c;c++)b.push(a[c]);return b}var b=[];return{bind:function(a,b){b=b||{};var g=[];"string"==typeof a?g=d(document.querySelectorAll(a)):"object"==typeof a&&"string"==typeof a.nodeName&&(g=[a]);for(var h=0,l=g.length;l>h;h++)(function(){var a=g[h];if("function"==typeof a.addEventListener){var e=c(a),d=-1;a.addEventListener("click",function(){for(var c=!0,g,h=a;h.parentNode&&"FORM"!==h.tagName;)h=h.parentNode;g="FORM"===h.tagName?h:void 0;if(void 0!==g){for(var l=["input","textarea","select"],
h=[],t=0;l.length>t;t++)for(var q=g.getElementsByTagName(l[t]),F=0;q.length>F;F++)q[F].hasAttribute("required")&&h.push(q[F]);for(g=0;h.length>g;g++)""===h[g].value.replace(/^\s+|\s+$/g,"")&&(c=!1),"checkbox"!==h[g].type&&"radio"!==h[g].type||h[g].checked||(c=!1),"email"===h[g].type&&(c=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(h[g].value))}c&&(e.startAfter(1),"number"==typeof b.timeout&&(clearTimeout(d),d=setTimeout(e.stop,b.timeout)),"function"==typeof b.callback&&b.callback.apply(null,
[e]))},!1)}})()},create:c,stopAll:function(){for(var a=0,c=b.length;c>a;a++)b[a].stop()}}});
var qq=function(a){return{hide:function(){a.style.display="none";return this},attach:function(c,d){a.addEventListener?a.addEventListener(c,d,!1):a.attachEvent&&a.attachEvent("on"+c,d);return function(){qq(a).detach(c,d)}},detach:function(c,d){a.removeEventListener?a.removeEventListener(c,d,!1):a.attachEvent&&a.detachEvent("on"+c,d);return this},contains:function(c){return a===c?!0:a.contains?a.contains(c):!!(c.compareDocumentPosition(a)&8)},insertBefore:function(c){c.parentNode.insertBefore(a,c);
return this},remove:function(){a.parentNode.removeChild(a);return this},css:function(c){null!==c.opacity&&"string"!==typeof a.style.opacity&&"undefined"!==typeof a.filters&&(c.filter="alpha(opacity="+Math.round(100*c.opacity)+")");qq.extend(a.style,c);return this},hasClass:function(c){return RegExp("(^| )"+c+"( |$)").test(a.className)},addClass:function(c){qq(a).hasClass(c)||(a.className+=" "+c);return this},removeClass:function(c){a.className=a.className.replace(RegExp("(^| )"+c+"( |$)")," ").replace(/^\s+|\s+$/g,
"");return this},getByClass:function(c){var d,b=[];if(a.querySelectorAll)return a.querySelectorAll("."+c);d=a.getElementsByTagName("*");qq.each(d,function(a,d){qq(d).hasClass(c)&&b.push(d)});return b},children:function(){for(var c=[],d=a.firstChild;d;)1===d.nodeType&&c.push(d),d=d.nextSibling;return c},setText:function(c){a.innerText=c;a.textContent=c;return this},clearText:function(){return qq(a).setText("")}}};
qq.log=function(a,c){if(window.console)if(c&&"info"!==c)if(window.console[c])window.console[c](a);else window.console.log("<"+c+"> "+a);else window.console.log(a)};qq.isObject=function(a){return null!==a&&a&&"object"===typeof a&&a.constructor===Object};qq.isFunction=function(a){return"function"===typeof a};qq.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)};qq.trimStr=function(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")};
qq.isFileOrInput=function(a){if(window.File&&a instanceof File)return!0;if(window.HTMLInputElement){if(a instanceof HTMLInputElement&&a.type&&"file"===a.type.toLowerCase())return!0}else if(a.tagName&&"input"===a.tagName.toLowerCase()&&a.type&&"file"===a.type.toLowerCase())return!0;return!1};qq.isBlob=function(a){return window.Blob&&"[object Blob]"===Object.prototype.toString.call(a)};
qq.isXhrUploadSupported=function(){var a=document.createElement("input");a.type="file";return void 0!==a.multiple&&"undefined"!==typeof File&&"undefined"!==typeof FormData&&"undefined"!==typeof(new XMLHttpRequest).upload};qq.isFolderDropSupported=function(a){return a.items&&a.items[0].webkitGetAsEntry};qq.isFileChunkingSupported=function(){return!qq.android()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)};
qq.extend=function(a,c,d){qq.each(c,function(b,c){d&&qq.isObject(c)?(void 0===a[b]&&(a[b]={}),qq.extend(a[b],c,!0)):a[b]=c})};qq.indexOf=function(a,c,d){if(a.indexOf)return a.indexOf(c,d);d=d||0;var b=a.length;for(0>d&&(d+=b);d<b;d+=1)if(a.hasOwnProperty(d)&&a[d]===c)return d;return-1};qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"==a?c:c&3|8).toString(16)})};qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")};
qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")};qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")};qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")};qq.firefox=function(){return-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor};qq.windows=function(){return"Win32"===navigator.platform};qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")};
qq.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};qq.toElement=function(){var a=document.createElement("div");return function(c){a.innerHTML=c;c=a.firstChild;a.removeChild(c);return c}}();qq.each=function(a,c){var d,b;if(a)for(d in a)if(Object.prototype.hasOwnProperty.call(a,d)&&(b=c(d,a[d]),!1===b))break};
qq.obj2url=function(a,c,d){var b,e=[],f="&",g=function(a,b){var d=c?/\[\]$/.test(c)?c:c+"["+b+"]":b;"undefined"!==d&&"undefined"!==b&&e.push("object"===typeof a?qq.obj2url(a,d,!0):"[object Function]"===Object.prototype.toString.call(a)?encodeURIComponent(d)+"="+encodeURIComponent(a()):encodeURIComponent(d)+"="+encodeURIComponent(a))};if(!d&&c)f=/\?/.test(c)?/\?$/.test(c)?"":"&":"?",e.push(c),e.push(qq.obj2url(a));else if("[object Array]"===Object.prototype.toString.call(a)&&"undefined"!==typeof a)for(b=
-1,d=a.length;b<d;b+=1)g(a[b],b);else if("undefined"!==typeof a&&null!==a&&"object"===typeof a)for(b in a)a.hasOwnProperty(b)&&g(a[b],b);else e.push(encodeURIComponent(c)+"="+encodeURIComponent(a));return c?e.join(f):e.join(f).replace(/^&/,"").replace(/%20/g,"+")};qq.obj2FormData=function(a,c,d){c||(c=new FormData);qq.each(a,function(a,e){a=d?d+"["+a+"]":a;qq.isObject(e)?qq.obj2FormData(e,c,a):qq.isFunction(e)?c.append(a,e()):c.append(a,e)});return c};
qq.obj2Inputs=function(a,c){var d;c||(c=document.createElement("form"));qq.obj2FormData(a,{append:function(a,e){d=document.createElement("input");d.setAttribute("name",a);d.setAttribute("value",e);c.appendChild(d)}});return c};qq.setCookie=function(a,c,d){var b=new Date,e="";d&&(b.setTime(b.getTime()+864E5*d),e="; expires="+b.toGMTString());document.cookie=a+"="+c+e+"; path=/"};
qq.getCookie=function(a){a+="=";for(var c=document.cookie.split(";"),d,b=0;b<c.length;b++){for(d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return d.substring(a.length,d.length)}};qq.getCookieNames=function(a){var c=document.cookie.split(";"),d=[];qq.each(c,function(b,c){c=qq.trimStr(c);var f=c.indexOf("=");c.match(a)&&d.push(c.substr(0,f))});return d};qq.deleteCookie=function(a){qq.setCookie(a,"",-1)};
qq.areCookiesEnabled=function(){var a="qqCookieTest:"+1E5*Math.random();qq.setCookie(a,1);return qq.getCookie(a)?(qq.deleteCookie(a),!0):!1};qq.parseJson=function(a){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(a):eval("("+a+")")};qq.DisposeSupport=function(){var a=[];return{dispose:function(){var c;do(c=a.shift())&&c();while(c)},attach:function(){this.addDisposer(qq(arguments[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(c){a.push(c)}}};
qq.supportedFeatures=function(){var a,c,d,b,e,f;a=!0;try{c=document.createElement("input"),c.type="file",qq(c).hide(),c.disabled&&(a=!1)}catch(g){a=!1}d=(c=a&&qq.isXhrUploadSupported())&&qq.chrome()&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/);b=c&&qq.isFileChunkingSupported();e=c&&b&&qq.areCookiesEnabled();f=c&&qq.chrome()&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/);return{uploading:a,ajaxUploading:c,fileDrop:c,folderDrop:d,chunking:b,
resume:e,uploadCustomHeaders:c,uploadNonMultipart:c,itemSizeValidation:c,uploadViaPaste:f,progressBar:c,uploadCors:a&&(void 0!==window.postMessage||c),deleteFileCors:c}}();qq.Promise=function(){var a,c,d,b,e,f=0;return{then:function(e,h){0===f?(d=e,b=h):-1===f&&h?h(c):e&&e(a);return this},done:function(a){0===f?e=a:a();return this},success:function(b){f=1;a=b;d&&d(b);e&&e();return this},failure:function(a){f=-1;c=a;b&&b(a);e&&e();return this}}};
qq.UploadButton=function(a){function c(){var a=document.createElement("input");e.multiple&&a.setAttribute("multiple","multiple");e.acceptFiles&&a.setAttribute("accept",e.acceptFiles);a.setAttribute("type","file");a.setAttribute("name",e.name);qq(a).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0});e.element.appendChild(a);b.attach(a,"change",function(){e.onChange(a)});b.attach(a,"mouseover",function(){qq(e.element).addClass(e.hoverClass)});
b.attach(a,"mouseout",function(){qq(e.element).removeClass(e.hoverClass)});b.attach(a,"focus",function(){qq(e.element).addClass(e.focusClass)});b.attach(a,"blur",function(){qq(e.element).removeClass(e.focusClass)});window.attachEvent&&a.setAttribute("tabIndex","-1");return a}var d,b=new qq.DisposeSupport,e={element:null,multiple:!1,acceptFiles:null,name:"file",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(e,a);qq(e.element).css({position:"relative",
overflow:"hidden",direction:"ltr"});d=c();return{getInput:function(){return d},reset:function(){d.parentNode&&qq(d).remove();qq(e.element).removeClass(e.focusClass);d=c()}}};
qq.PasteSupport=function(a){var c;c={targetElement:null,callbacks:{log:function(){},pasteReceived:function(){}}};qq.extend(c,a);(function(){qq(c.targetElement).attach("paste",function(a){(a=a.clipboardData)&&qq.each(a.items,function(a,e){if(e.type&&0===e.type.indexOf("image/")){var d=e.getAsFile();c.callbacks.pasteReceived(d)}})})})();return{reset:function(){}}};
qq.FineUploaderBasic=function(a){this._options={debug:!1,button:null,multiple:!0,maxConnections:1,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},paramsInBody:!0,customHeaders:{},forceMultipart:!0,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0},callbacks:{onSubmit:function(){},onSubmitted:function(){},onComplete:function(){},onCancel:function(){},
onUpload:function(){},onUploadChunk:function(){},onResume:function(){},onProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidateBatch:function(){},onValidate:function(){},onSubmitDelete:function(){},onDelete:function(){},onDeleteComplete:function(){},onPasteReceived:function(){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",
emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",
buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,partSize:2E6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(a){33<a.length&&(a=a.slice(0,19)+"..."+a.slice(-14));return a},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:"kB MB GB TB PB EB".split(" ")},
deleteFile:{enabled:!1,endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1},blobs:{defaultName:"misc_data",paramNames:{name:"qqblobname"}},paste:{targetElement:null,defaultName:"pasted_image"}};qq.extend(this._options,a,!0);this._wrapCallbacks();this._disposeSupport=new qq.DisposeSupport;this._filesInProgress=[];this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._netUploaded=this._netUploadedOrQueued=0;this._paramsStore=
this._createParamsStore("request");this._deleteFileParamsStore=this._createParamsStore("deleteFile");this._endpointStore=this._createEndpointStore("request");this._deleteFileEndpointStore=this._createEndpointStore("deleteFile");this._handler=this._createUploadHandler();this._deleteHandler=this._createDeleteHandler();this._options.button&&(this._button=this._createUploadButton(this._options.button));this._options.paste.targetElement&&(this._pasteHandler=this._createPasteHandler());this._preventLeaveInProgress()};
qq.FineUploaderBasic.prototype={log:function(a,c){!this._options.debug||c&&"info"!==c?c&&"info"!==c&&qq.log("[FineUploader] "+a,c):qq.log("[FineUploader] "+a)},setParams:function(a,c){null==c?this._options.request.params=a:this._paramsStore.setParams(a,c)},setDeleteFileParams:function(a,c){null==c?this._options.deleteFile.params=a:this._deleteFileParamsStore.setParams(a,c)},setEndpoint:function(a,c){null==c?this._options.request.endpoint=a:this._endpointStore.setEndpoint(a,c)},getInProgress:function(){return this._filesInProgress.length},
getNetUploads:function(){return this._netUploaded},uploadStoredFiles:function(){for(var a;this._storedIds.length;)a=this._storedIds.shift(),this._filesInProgress.push(a),this._handler.upload(a)},clearStoredFiles:function(){this._storedIds=[]},retry:function(a){return this._onBeforeManualRetry(a)?(this._netUploadedOrQueued++,this._handler.retry(a),!0):!1},cancel:function(a){this._handler.cancel(a)},cancelAll:function(){var a=[],c=this;qq.extend(a,this._storedIds);qq.each(a,function(a,b){c.cancel(b)});
this._handler.cancelAll()},reset:function(){this.log("Resetting uploader...");this._handler.reset();this._filesInProgress=[];this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._button.reset();this._paramsStore.reset();this._endpointStore.reset();this._netUploaded=this._netUploadedOrQueued=0;this._pasteHandler&&this._pasteHandler.reset()},addFiles:function(a,c,d){var b=[],e,f;if(a){window.FileList&&a instanceof FileList||(a=[].concat(a));for(e=0;e<a.length;e+=
1)f=a[e],qq.isFileOrInput(f)?b.push(f):this.log(f+" is not a File or INPUT element!  Ignoring!","warn");this.log("Processing "+b.length+" files or inputs...");this._uploadFileOrBlobDataList(b,c,d)}},addBlobs:function(a,c,d){if(a){a=[].concat(a);var b=[],e=this;qq.each(a,function(a,c){qq.isBlob(c)&&!qq.isFileOrInput(c)?b.push({blob:c,name:e._options.blobs.defaultName}):qq.isObject(c)&&c.blob&&c.name?b.push(c):e.log("addBlobs: entry at index "+a+" is not a Blob or a BlobData object","error")});this._uploadFileOrBlobDataList(b,
c,d)}else this.log("undefined or non-array parameter passed into addBlobs","error")},getUuid:function(a){return this._handler.getUuid(a)},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(a){return this._handler.getSize(a)},getName:function(a){return this._handler.getName(a)},getFile:function(a){return this._handler.getFile(a)},deleteFile:function(a){this._onSubmitDelete(a)},setDeleteFileEndpoint:function(a,c){null==c?this._options.deleteFile.endpoint=
a:this._deleteFileEndpointStore.setEndpoint(a,c)},_createUploadButton:function(a){var c=this,d=new qq.UploadButton({element:a,multiple:this._options.multiple&&qq.supportedFeatures.ajaxUploading,acceptFiles:this._options.validation.acceptFiles,onChange:function(a){c._onInputChange(a)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});this._disposeSupport.addDisposer(function(){d.dispose()});return d},_createUploadHandler:function(){var a=this;return new qq.UploadHandler({debug:this._options.debug,
forceMultipart:this._options.request.forceMultipart,maxConnections:this._options.maxConnections,customHeaders:this._options.request.customHeaders,inputName:this._options.request.inputName,uuidParamName:this._options.request.uuidName,totalFileSizeParamName:this._options.request.totalFileSizeName,cors:this._options.cors,demoMode:this._options.demoMode,paramsInBody:this._options.request.paramsInBody,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,
blobs:this._options.blobs,log:function(c,d){a.log(c,d)},onProgress:function(c,d,b,e){a._onProgress(c,d,b,e);a._options.callbacks.onProgress(c,d,b,e)},onComplete:function(c,d,b,e){a._onComplete(c,d,b,e);a._options.callbacks.onComplete(c,d,b,e)},onCancel:function(c,d){a._onCancel(c,d);a._options.callbacks.onCancel(c,d)},onUpload:function(c,d){a._onUpload(c,d);a._options.callbacks.onUpload(c,d)},onUploadChunk:function(c,d,b){a._options.callbacks.onUploadChunk(c,d,b)},onResume:function(c,d,b){return a._options.callbacks.onResume(c,
d,b)},onAutoRetry:function(c,d,b,e){a._preventRetries[c]=b[a._options.retry.preventRetryResponseProperty];return a._shouldAutoRetry(c,d,b)?(a._maybeParseAndSendUploadError(c,d,b,e),a._options.callbacks.onAutoRetry(c,d,a._autoRetries[c]+1),a._onBeforeAutoRetry(c,d),a._retryTimeouts[c]=setTimeout(function(){a._onAutoRetry(c,d,b)},1E3*a._options.retry.autoAttemptDelay),!0):!1}})},_createDeleteHandler:function(){var a=this;return new qq.DeleteFileAjaxRequestor({maxConnections:this._options.maxConnections,
customHeaders:this._options.deleteFile.customHeaders,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:function(c,d){a.log(c,d)},onDelete:function(c){a._onDelete(c);a._options.callbacks.onDelete(c)},onDeleteComplete:function(c,d,b){a._onDeleteComplete(c,d,b);a._options.callbacks.onDeleteComplete(c,d,b)}})},_createPasteHandler:function(){var a=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,
callbacks:{log:function(c,d){a.log(c,d)},pasteReceived:function(c){var d=a._options.callbacks.onPasteReceived;(d=d(c))&&d.then?d.then(function(b){a._handlePasteSuccess(c,b)},function(b){a.log("Ignoring pasted image per paste received callback.  Reason = '"+b+"'")}):a._handlePasteSuccess(c)}}})},_handlePasteSuccess:function(a,c){var d=a.type.split("/")[1],b=c;null==b&&(b=this._options.paste.defaultName);this.addBlobs({name:b+("."+d),blob:a})},_preventLeaveInProgress:function(){var a=this;this._disposeSupport.attach(window,
"beforeunload",function(c){if(a._filesInProgress.length)return c=c||window.event,c.returnValue=a._options.messages.onLeave})},_onSubmit:function(a){this._netUploadedOrQueued++;this._options.autoUpload&&this._filesInProgress.push(a)},_onProgress:function(){},_onComplete:function(a,c,d,b){d.success?this._netUploaded++:this._netUploadedOrQueued--;this._removeFromFilesInProgress(a);this._maybeParseAndSendUploadError(a,c,d,b)},_onCancel:function(a){this._netUploadedOrQueued--;this._removeFromFilesInProgress(a);
clearTimeout(this._retryTimeouts[a]);a=qq.indexOf(this._storedIds,a);!this._options.autoUpload&&0<=a&&this._storedIds.splice(a,1)},_isDeletePossible:function(){return this._options.deleteFile.enabled&&(!this._options.cors.expected||qq.supportedFeatures.deleteFileCors)},_onSubmitDelete:function(a){if(this._isDeletePossible())!1!==this._options.callbacks.onSubmitDelete(a)&&this._deleteHandler.sendDelete(a,this.getUuid(a));else return this.log("Delete request ignored for ID "+a+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.",
"warn"),!1},_onDelete:function(){},_onDeleteComplete:function(a,c,d){var b=this._handler.getName(a);d?(this.log("Delete request for '"+b+"' has failed.","error"),this._options.callbacks.onError(a,b,"Delete request failed with response code "+c.status,c)):(this._netUploadedOrQueued--,this._netUploaded--,this.log("Delete request for '"+b+"' has succeeded."))},_removeFromFilesInProgress:function(a){a=qq.indexOf(this._filesInProgress,a);0<=a&&this._filesInProgress.splice(a,1)},_onUpload:function(){},
_onInputChange:function(a){qq.supportedFeatures.ajaxUploading?this.addFiles(a.files):this.addFiles(a);this._button.reset()},_onBeforeAutoRetry:function(a,c){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+c+"...")},_onAutoRetry:function(a,c){this.log("Retrying "+c+"...");this._autoRetries[a]++;this._handler.retry(a)},_shouldAutoRetry:function(a){return!this._preventRetries[a]&&this._options.retry.enableAuto?(void 0===this._autoRetries[a]&&(this._autoRetries[a]=
0),this._autoRetries[a]<this._options.retry.maxAutoAttempts):!1},_onBeforeManualRetry:function(a){var c=this._options.validation.itemLimit;if(this._preventRetries[a])return this.log("Retries are forbidden for id "+a,"warn"),!1;if(this._handler.isValid(a)){var d=this._handler.getName(a);if(!1===this._options.callbacks.onManualRetry(a,d))return!1;if(0<c&&this._netUploadedOrQueued+1>c)return this._itemError("retryFailTooManyItems",""),!1;this.log("Retrying upload for '"+d+"' (id: "+a+")...");this._filesInProgress.push(a);
return!0}this.log("'"+a+"' is not a valid file ID","error");return!1},_maybeParseAndSendUploadError:function(a,c,d,b){if(!d.success)if(b&&200!==b.status&&!d.error)this._options.callbacks.onError(a,c,"XHR returned response code "+b.status,b);else this._options.callbacks.onError(a,c,d.error?d.error:this._options.text.defaultResponseError,b)},_uploadFileOrBlobDataList:function(a,c,d){var b;if(this._isBatchValid(this._getValidationDescriptors(a)))if(0<a.length)for(b=0;b<a.length;b++)if(this._validateFileOrBlobData(a[b]))this._upload(a[b],
c,d);else{if(this._options.validation.stopOnFirstInvalidFile)break}else this._itemError("noFilesError","")},_upload:function(a,c,d){a=this._handler.add(a);var b=this._handler.getName(a);c&&this.setParams(c,a);d&&this.setEndpoint(d,a);!1!==this._options.callbacks.onSubmit(a,b)&&(this._onSubmit(a,b),this._options.callbacks.onSubmitted(a,b),this._options.autoUpload?this._handler.upload(a):this._storeForLater(a))},_storeForLater:function(a){this._storedIds.push(a)},_isBatchValid:function(a){var c;c=this._options.validation.itemLimit;
var d=this._netUploadedOrQueued+a.length;if(a=!1!==this._options.callbacks.onValidateBatch(a))0===c||d<=c?a=!0:(a=!1,c=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,d).replace(/\{itemLimit\}/g,c),this._batchError(c));return a},_validateFileOrBlobData:function(a){var c,d,b;c=this._getValidationDescriptor(a);d=c.name;b=c.size;return!1===this._options.callbacks.onValidate(c)?!1:qq.isFileOrInput(a)&&!this._isAllowedExtension(d)?(this._itemError("typeError",d),!1):0===b?(this._itemError("emptyError",
d),!1):b&&this._options.validation.sizeLimit&&b>this._options.validation.sizeLimit?(this._itemError("sizeError",d),!1):b&&b<this._options.validation.minSizeLimit?(this._itemError("minSizeError",d),!1):!0},_itemError:function(a,c){function d(a,c){b=b.replace(a,c)}var b=this._options.messages[a],e=[],f=[].concat(c),g=f[0],h;qq.each(this._options.validation.allowedExtensions,function(a,b){qq.isString(b)&&e.push(b)});h=e.join(", ").toLowerCase();d("{file}",this._options.formatFileName(g));d("{extensions}",
h);d("{sizeLimit}",this._formatSize(this._options.validation.sizeLimit));d("{minSizeLimit}",this._formatSize(this._options.validation.minSizeLimit));h=b.match(/(\{\w+\})/g);null!==h&&qq.each(h,function(a,b){d(b,f[a])});this._options.callbacks.onError(null,g,b);return b},_batchError:function(a){this._options.callbacks.onError(null,null,a)},_isAllowedExtension:function(a){var c=this._options.validation.allowedExtensions,d=!1;if(!c.length)return!0;qq.each(c,function(b,c){if(qq.isString(c)&&null!=a.match(RegExp("\\."+
c+"$","i")))return d=!0,!1});return d},_formatSize:function(a){var c=-1;do a/=1024,c++;while(99<a);return Math.max(a,.1).toFixed(1)+this._options.text.sizeSymbols[c]},_wrapCallbacks:function(){var a,c;a=this;c=function(b,c,d){try{return c.apply(a,d)}catch(g){a.log("Caught exception in '"+b+"' callback - "+g.message,"error")}};for(var d in this._options.callbacks)(function(){var b,e;b=d;e=a._options.callbacks[b];a._options.callbacks[b]=function(){return c(b,e,arguments)}})()},_parseFileOrBlobDataName:function(a){return qq.isFileOrInput(a)?
a.value?a.value.replace(/.*(\/|\\)/,""):null!==a.fileName&&void 0!==a.fileName?a.fileName:a.name:a.name},_parseFileOrBlobDataSize:function(a){var c;qq.isFileOrInput(a)?a.value||(c=null!==a.fileSize&&void 0!==a.fileSize?a.fileSize:a.size):c=a.blob.size;return c},_getValidationDescriptor:function(a){var c,d;d={};c=this._parseFileOrBlobDataName(a);a=this._parseFileOrBlobDataSize(a);d.name=c;void 0!==a&&(d.size=a);return d},_getValidationDescriptors:function(a){var c=this,d=[];qq.each(a,function(a,e){d.push(c._getValidationDescriptor(e))});
return d},_createParamsStore:function(a){var c={},d=this;return{setParams:function(a,e){var d={};qq.extend(d,a);c[e]=d},getParams:function(b){var e={};null!=b&&c[b]?qq.extend(e,c[b]):qq.extend(e,d._options[a].params);return e},remove:function(a){return delete c[a]},reset:function(){c={}}}},_createEndpointStore:function(a){var c={},d=this;return{setEndpoint:function(a,e){c[e]=a},getEndpoint:function(b){return null!=b&&c[b]?c[b]:d._options[a].endpoint},remove:function(a){return delete c[a]},reset:function(){c=
{}}}}};
qq.DragAndDrop=function(a){function c(a){var b,e,d=new qq.Promise;a.isFile?a.file(function(a){h.push(a);d.success()},function(b){f.callbacks.dropLog("Problem parsing '"+a.fullPath+"'.  FileError code "+b.code+".","error");d.failure()}):a.isDirectory&&(b=a.createReader(),b.readEntries(function(a){var b=a.length;for(e=0;e<a.length;e+=1)c(a[e]).done(function(){--b;0===b&&d.success()});a.length||d.success()},function(b){f.callbacks.dropLog("Problem parsing '"+a.fullPath+"'.  FileError code "+b.code+".",
"error");d.failure()}));return d}function d(a){var b,e,d=[],l=new qq.Promise;f.callbacks.processingDroppedFiles();g.dropDisabled(!0);if(1<a.files.length&&!f.allowMultipleItems)f.callbacks.processingDroppedFilesComplete([]),f.callbacks.dropError("tooManyFilesError",""),g.dropDisabled(!1),l.failure();else{h=[];if(qq.isFolderDropSupported(a))for(b=a.items,a=0;a<b.length;a+=1)(e=b[a].webkitGetAsEntry())&&(e.isFile?h.push(b[a].getAsFile()):d.push(c(e).done(function(){d.pop();0===d.length&&l.success()})));
else h=a.files;0===d.length&&l.success()}return l}function b(a){g=new qq.UploadDropZone({element:a,onEnter:function(b){qq(a).addClass(f.classes.dropActive);b.stopPropagation()},onLeaveNotDescendants:function(){qq(a).removeClass(f.classes.dropActive)},onDrop:function(b){f.hideDropZonesBeforeEnter&&qq(a).hide();qq(a).removeClass(f.classes.dropActive);d(b.dataTransfer).done(function(){var a=h;f.callbacks.dropLog("Grabbed "+a.length+" dropped files.");g.dropDisabled(!1);f.callbacks.processingDroppedFilesComplete(a)})}});
l.addDisposer(function(){g.dispose()});f.hideDropZonesBeforeEnter&&qq(a).hide()}function e(a){var b;qq.each(a.dataTransfer.types,function(a,c){if("Files"===c)return b=!0,!1});return b}var f,g,h=[],l=new qq.DisposeSupport;f={dropZoneElements:[],hideDropZonesBeforeEnter:!1,allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks};qq.extend(f,a,!0);(function(){var a=f.dropZoneElements;qq.each(a,function(a,c){b(c)});a.length&&(!qq.ie()||qq.ie10())&&l.attach(document,"dragenter",
function(b){!g.dropDisabled()&&e(b)&&qq.each(a,function(a,b){qq(b).css({display:"block"})})});l.attach(document,"dragleave",function(b){f.hideDropZonesBeforeEnter&&qq.FineUploader.prototype._leaving_document_out(b)&&qq.each(a,function(a,b){qq(b).hide()})});l.attach(document,"drop",function(b){f.hideDropZonesBeforeEnter&&qq.each(a,function(a,b){qq(b).hide()});b.preventDefault()})})();return{setupExtraDropzone:function(a){f.dropZoneElements.push(a);b(a)},removeDropzone:function(a){var b,c=f.dropZoneElements;
for(b in c)if(c[b]===a)return c.splice(b,1)},dispose:function(){l.dispose();g.dispose()}}};qq.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(){},dropError:function(a,c){qq.log("Drag & drop error code '"+a+" with these specifics: '"+c+"'","error")},dropLog:function(a,c){qq.log(a,c)}}};
qq.UploadDropZone=function(a){function c(){return qq.safari()||qq.firefox()&&qq.windows()}function d(a){if(qq.ie()&&!qq.ie10())return!1;var b=a.dataTransfer,c=qq.safari();a=qq.ie10()?!0:"none"!==b.effectAllowed;return b&&a&&(b.files||!c&&b.types.contains&&b.types.contains("Files"))}function b(a){void 0!==a&&(g=a);return g}var e,f,g,h,l=new qq.DisposeSupport;e={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}};qq.extend(e,a);f=e.element;
(function(){h||(c?l.attach(document,"dragover",function(a){a.preventDefault()}):l.attach(document,"dragover",function(a){a.dataTransfer&&(a.dataTransfer.dropEffect="none",a.preventDefault())}),h=!0)})();(function(){l.attach(f,"dragover",function(a){if(d(a)){var b=qq.ie()?null:a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect="move"===b||"linkMove"===b?"move":"copy";a.stopPropagation();a.preventDefault()}});l.attach(f,"dragenter",function(a){if(!b()&&d(a))e.onEnter(a)});l.attach(f,"dragleave",
function(a){if(d(a)){e.onLeave(a);var b=document.elementFromPoint(a.clientX,a.clientY);if(!qq(this).contains(b))e.onLeaveNotDescendants(a)}});l.attach(f,"drop",function(a){!b()&&d(a)&&(a.preventDefault(),e.onDrop(a))})})();return{dropDisabled:function(a){return b(a)},dispose:function(){l.dispose()}}};
qq.FineUploader=function(a){qq.FineUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,dragAndDrop:{extraDropzones:[],hideDropzones:!0,disableDefaultDropzone:!1},text:{uploadButton:"Upload a file",cancelButton:"Cancel",retryButton:"Retry",deleteButton:"Delete",failUpload:"Upload failed",dragZone:"Drop files here to upload",dropProcessing:"Processing dropped files...",formatProgress:"{percent}% of {total_size}",waitingForResponse:"Processing..."},template:'<div class="qq-uploader">'+
(this._options.dragAndDrop&&this._options.dragAndDrop.disableDefaultDropzone?"":'<div class="qq-upload-drop-area"><span>{dragZoneText}</span></div>')+(this._options.button?"":'<div class="qq-upload-button"><div>{uploadButtonText}</div></div>')+'<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>'+(this._options.listElement?"":'<ul class="qq-upload-list"></ul>')+"</div>",fileTemplate:'<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span><span class="qq-upload-file"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">{cancelButtonText}</a><a class="qq-upload-retry" href="#">{retryButtonText}</a><a class="qq-upload-delete" href="#">{deleteButtonText}</a><span class="qq-upload-status-text">{statusText}</span></li>',
classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",size:"qq-upload-size",cancel:"qq-upload-cancel",deleteButton:"qq-upload-delete",retry:"qq-upload-retry",statusText:"qq-upload-status-text",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,
failIcon:null,dropProcessing:"qq-drop-processing",dropProcessingSpinner:"qq-drop-processing-spinner"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}...",showButton:!1},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",
deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},showMessage:function(a){setTimeout(function(){window.alert(a)},0)},showConfirm:function(a,d,b){setTimeout(function(){window.confirm(a)?d():b&&b()},0)},showPrompt:function(a,d){var b=new qq.Promise,e=window.prompt(a,d);null!=e&&0<qq.trimStr(e).length?b.success(e):b.failure("Undefined or invalid user-supplied value.");return b}},!0);qq.extend(this._options,
a,!0);!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors?this._options.element.innerHTML="<div>"+this._options.messages.unsupportedBrowser+"</div>":(this._wrapCallbacks(),this._options.template=this._options.template.replace(/\{dragZoneText\}/g,this._options.text.dragZone),this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.text.uploadButton),this._options.template=this._options.template.replace(/\{dropProcessingText\}/g,
this._options.text.dropProcessing),this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.text.cancelButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{retryButtonText\}/g,this._options.text.retryButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{deleteButtonText\}/g,this._options.text.deleteButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{statusText\}/g,""),this._element=this._options.element,
this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button||(this._button=this._createUploadButton(this._find(this._element,"button"))),this._bindCancelAndRetryEvents(),this._dnd=this._setupDragAndDrop(),this._options.paste.targetElement&&this._options.paste.promptForName&&this._setupPastePrompt())};qq.extend(qq.FineUploader.prototype,qq.FineUploaderBasic.prototype);
qq.extend(qq.FineUploader.prototype,{clearStoredFiles:function(){qq.FineUploaderBasic.prototype.clearStoredFiles.apply(this,arguments);this._listElement.innerHTML=""},addExtraDropzone:function(a){this._dnd.setupExtraDropzone(a)},removeExtraDropzone:function(a){return this._dnd.removeDropzone(a)},getItemByFileId:function(a){for(var c=this._listElement.firstChild;c;){if(c.qqFileId==a)return c;c=c.nextSibling}},reset:function(){qq.FineUploaderBasic.prototype.reset.apply(this,arguments);this._element.innerHTML=
this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._options.button||(this._button=this._createUploadButton(this._find(this._element,"button")));this._bindCancelAndRetryEvents();this._dnd.dispose();this._dnd=this._setupDragAndDrop()},_removeFileItem:function(a){a=this.getItemByFileId(a);qq(a).remove()},_setupDragAndDrop:function(){var a=this,c=this._find(this._element,"dropProcessing"),d=this._options.dragAndDrop.extraDropzones,b;b=function(a){a.preventDefault()};
this._options.dragAndDrop.disableDefaultDropzone||d.push(this._find(this._options.element,"drop"));return new qq.DragAndDrop({dropZoneElements:d,hideDropZonesBeforeEnter:this._options.dragAndDrop.hideDropzones,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){var e=a._button.getInput();qq(c).css({display:"block"});qq(e).attach("click",b)},processingDroppedFilesComplete:function(e){var d=a._button.getInput();
qq(c).hide();qq(d).detach("click",b);e&&a.addFiles(e)},dropError:function(b,c){a._itemError(b,c)},dropLog:function(b,c){a.log(b,c)}}})},_leaving_document_out:function(a){return(qq.chrome()||qq.safari()&&qq.windows())&&0==a.clientX&&0==a.clientY||qq.firefox()&&!a.relatedTarget},_storeForLater:function(a){qq.FineUploaderBasic.prototype._storeForLater.apply(this,arguments);var c=this.getItemByFileId(a);qq(this._find(c,"spinner")).hide()},_find:function(a,c){var d=qq(a).getByClass(this._options.classes[c])[0];
if(!d)throw Error("element not found "+c);return d},_onSubmit:function(a,c){qq.FineUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(a,c)},_onProgress:function(a,c,d,b){qq.FineUploaderBasic.prototype._onProgress.apply(this,arguments);var e,f,g,h;e=this.getItemByFileId(a);f=this._find(e,"progressBar");g=Math.round(d/b*100);d===b?(h=this._find(e,"cancel"),qq(h).hide(),qq(f).hide(),qq(this._find(e,"statusText")).setText(this._options.text.waitingForResponse),this._displayFileSize(a)):
(this._displayFileSize(a,d,b),qq(f).css({display:"block"}));qq(f).css({width:g+"%"})},_onComplete:function(a,c,d,b){qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments);var e=this.getItemByFileId(a);qq(this._find(e,"statusText")).clearText();qq(e).removeClass(this._classes.retrying);qq(this._find(e,"progressBar")).hide();this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading||qq(this._find(e,"cancel")).hide();qq(this._find(e,"spinner")).hide();d.success?(this._isDeletePossible()&&
this._showDeleteLink(a),qq(e).addClass(this._classes.success),this._classes.successIcon&&(this._find(e,"finished").style.display="inline-block",qq(e).addClass(this._classes.successIcon))):(qq(e).addClass(this._classes.fail),this._classes.failIcon&&(this._find(e,"finished").style.display="inline-block",qq(e).addClass(this._classes.failIcon)),this._options.retry.showButton&&!this._preventRetries[a]&&qq(e).addClass(this._classes.retryable),this._controlFailureTextDisplay(e,d))},_onUpload:function(a,
c){qq.FineUploaderBasic.prototype._onUpload.apply(this,arguments);this._showSpinner(a)},_onCancel:function(a,c){qq.FineUploaderBasic.prototype._onCancel.apply(this,arguments);this._removeFileItem(a)},_onBeforeAutoRetry:function(a){var c,d,b,e,f;qq.FineUploaderBasic.prototype._onBeforeAutoRetry.apply(this,arguments);c=this.getItemByFileId(a);d=this._find(c,"progressBar");this._showCancelLink(c);d.style.width=0;qq(d).hide();this._options.retry.showAutoRetryNote&&(d=this._find(c,"statusText"),b=this._autoRetries[a]+
1,e=this._options.retry.maxAutoAttempts,f=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,b),f=f.replace(/\{maxAuto\}/g,e),qq(d).setText(f),1===b&&qq(c).addClass(this._classes.retrying))},_onBeforeManualRetry:function(a){var c=this.getItemByFileId(a);if(qq.FineUploaderBasic.prototype._onBeforeManualRetry.apply(this,arguments))return this._find(c,"progressBar").style.width=0,qq(c).removeClass(this._classes.fail),qq(this._find(c,"statusText")).clearText(),this._showSpinner(a),this._showCancelLink(c),
!0;qq(c).addClass(this._classes.retryable);return!1},_onSubmitDelete:function(a){if(this._isDeletePossible())!1!==this._options.callbacks.onSubmitDelete(a)&&(this._options.deleteFile.forceConfirm?this._showDeleteConfirm(a):this._sendDeleteRequest(a));else return this.log("Delete request ignored for file ID "+a+", delete feature is disabled.","warn"),!1},_onDeleteComplete:function(a,c,d){qq.FineUploaderBasic.prototype._onDeleteComplete.apply(this,arguments);var b=this.getItemByFileId(a),e=this._find(b,
"spinner"),b=this._find(b,"statusText");qq(e).hide();d?(qq(b).setText(this._options.deleteFile.deletingFailedText),this._showDeleteLink(a)):this._removeFileItem(a)},_sendDeleteRequest:function(a){var c=this.getItemByFileId(a),d=this._find(c,"deleteButton"),c=this._find(c,"statusText");qq(d).hide();this._showSpinner(a);qq(c).setText(this._options.deleteFile.deletingStatusText);this._deleteHandler.sendDelete(a,this.getUuid(a))},_showDeleteConfirm:function(a){var c=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,
this._handler.getName(a));this.getUuid(a);var d=this;this._options.showConfirm(c,function(){d._sendDeleteRequest(a)})},_addToList:function(a,c){var d=qq.toElement(this._options.fileTemplate);if(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading){var b=this._find(d,"cancel");qq(b).remove()}d.qqFileId=a;b=this._find(d,"file");qq(b).setText(this._options.formatFileName(c));qq(this._find(d,"size")).hide();this._options.multiple||(this._handler.cancelAll(),this._clearList());
this._listElement.appendChild(d);this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading&&this._displayFileSize(a)},_clearList:function(){this._listElement.innerHTML="";this.clearStoredFiles()},_displayFileSize:function(a,c,d){var b=this.getItemByFileId(a);a=this._formatSize(this.getSize(a));b=this._find(b,"size");void 0!==c&&void 0!==d&&(a=this._formatProgress(c,d));qq(b).css({display:"inline"});qq(b).setText(a)},_bindCancelAndRetryEvents:function(){var a=this;this._disposeSupport.attach(this._listElement,
"click",function(c){c=c||window.event;var d=c.target||c.srcElement;if(qq(d).hasClass(a._classes.cancel)||qq(d).hasClass(a._classes.retry)||qq(d).hasClass(a._classes.deleteButton)){qq.preventDefault(c);for(c=d.parentNode;void 0===c.qqFileId;)c=c.parentNode;qq(d).hasClass(a._classes.deleteButton)?a.deleteFile(c.qqFileId):qq(d).hasClass(a._classes.cancel)?a.cancel(c.qqFileId):(qq(c).removeClass(a._classes.retryable),a.retry(c.qqFileId))}})},_formatProgress:function(a,c){var d=this._options.text.formatProgress,
b=Math.round(a/c*100),d=d.replace("{percent}",b),b=this._formatSize(c);return d.replace("{total_size}",b)},_controlFailureTextDisplay:function(a,c){var d,b,e,f;d=this._options.failedUploadTextDisplay.mode;b=this._options.failedUploadTextDisplay.maxChars;e=this._options.failedUploadTextDisplay.responseProperty;"custom"===d?((d=c[e])?d.length>b&&(f=d.substring(0,b)+"..."):(d=this._options.text.failUpload,this.log("'"+e+"' is not a valid property on the server response.","warn")),qq(this._find(a,"statusText")).setText(f||
d),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(a,d)):"default"===d?qq(this._find(a,"statusText")).setText(this._options.text.failUpload):"none"!==d&&this.log("failedUploadTextDisplay.mode value of '"+d+"' is not valid","warn")},_showTooltip:function(a,c){a.title=c},_showSpinner:function(a){this._find(this.getItemByFileId(a),"spinner").style.display="inline-block"},_showCancelLink:function(a){if(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)a=
this._find(a,"cancel"),qq(a).css({display:"inline"})},_showDeleteLink:function(a){a=this._find(this.getItemByFileId(a),"deleteButton");qq(a).css({display:"inline"})},_itemError:function(a,c){this._options.showMessage(qq.FineUploaderBasic.prototype._itemError.apply(this,arguments))},_batchError:function(a){qq.FineUploaderBasic.prototype._batchError.apply(this,arguments);this._options.showMessage(a)},_setupPastePrompt:function(){var a=this;this._options.callbacks.onPasteReceived=function(){return a._options.showPrompt(a._options.paste.namePromptMessage,
a._options.paste.defaultName)}}});
qq.AjaxRequestor=function(a){function c(a){var b=qq.indexOf(l,a),c=m.maxConnections;delete p[a];l.splice(b,1);l.length>=c&&b<c&&(a=l[c-1],d(a))}function d(a){var c=new XMLHttpRequest,d=f(),l={},A;m.onSend(a);m.paramsStore.getParams&&(l=m.paramsStore.getParams(a));A=l;var t=m.endpointStore.getEndpoint(a),q=p[a].addToPath;void 0!==q&&(t+="/"+q);A=h&&A?qq.obj2url(A,t):t;p[a].xhr=c;c.onreadystatechange=b(a);c.open(d,A,!0);m.cors.expected&&m.cors.sendCredentials&&(c.withCredentials=!0);e(a);g("Sending "+
d+" request for "+a);!h&&l?c.send(qq.obj2url(l,"")):c.send()}function b(a){var b=p[a].xhr;return function(){if(4===b.readyState){var e=p[a].xhr,d=f(),h=!1;c(a);0<=qq.indexOf(m.successfulResponseCodes,e.status)||(h=!0,g(d+" request for "+a+" has failed - response code "+e.status,"error"));m.onComplete(a,e,h)}}}function e(a){var b=p[a].xhr;a=m.customHeaders;b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Cache-Control","no-cache");qq.each(a,function(a,c){b.setRequestHeader(a,
c)})}function f(){return m.demoMode?"GET":m.method}var g,h,l=[],p=[],m={method:"POST",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},successfulResponseCodes:[200],demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onSend:function(){},onComplete:function(){},onCancel:function(){}};qq.extend(m,a);g=m.log;h="GET"===f()||"DELETE"===f();return{send:function(a,b){p[a]={addToPath:b};l.push(a)<=m.maxConnections&&d(a)},cancel:function(a){var b=p[a].xhr,e=f();b?(b.onreadystatechange=
null,b.abort(),c(a),g("Cancelled "+e+" for "+a),m.onCancel(a),a=!0):a=!1;return a}}};
qq.DeleteFileAjaxRequestor=function(a){var c,d={endpointStore:{},maxConnections:3,customHeaders:{},paramsStore:{},demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onDelete:function(){},onDeleteComplete:function(){}};qq.extend(d,a);c=new qq.AjaxRequestor({method:"DELETE",endpointStore:d.endpointStore,paramsStore:d.paramsStore,maxConnections:d.maxConnections,customHeaders:d.customHeaders,successfulResponseCodes:[200,202,204],demoMode:d.demoMode,log:d.log,onSend:d.onDelete,onComplete:d.onDeleteComplete});
return{sendDelete:function(a,e){c.send(a,e);d.log("Submitted delete file request for "+a)}}};qq.WindowReceiveMessage=function(a){var c={};qq.extend({log:function(){}},a);return{receiveMessage:function(a,b){var e=function(a){b(a.data)};window.postMessage?c[a]=qq(window).attach("message",e):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(a){window.postMessage&&(a=c[a])&&a()}}};
qq.UploadHandler=function(a){var c=[],d,b,e,f;d={debug:!1,forceMultipart:!0,paramsInBody:!1,paramsStore:{},endpointStore:{},cors:{expected:!1,sendCredentials:!1},maxConnections:3,uuidParamName:"qquuid",totalFileSizeParamName:"qqtotalfilesize",chunking:{enabled:!1,partSize:2E6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},blobs:{paramNames:{name:"qqblobname"}},
log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onAutoRetry:function(){},onResume:function(){}};qq.extend(d,a);b=d.log;e=function(a){a=qq.indexOf(c,a);var b=d.maxConnections;0<=a&&(c.splice(a,1),c.length>=b&&a<b&&(a=c[b-1],f.upload(a)))};f=qq.supportedFeatures.ajaxUploading?new qq.UploadHandlerXhr(d,e,b):new qq.UploadHandlerForm(d,e,b);return{add:function(a){return f.add(a)},upload:function(a){if(c.push(a)<=d.maxConnections)return f.upload(a)},
retry:function(a){return 0<=qq.indexOf(c,a)?f.upload(a,!0):this.upload(a)},cancel:function(a){b("Cancelling "+a);d.paramsStore.remove(a);f.cancel(a);e(a)},cancelAll:function(){var a=this,b=[];qq.extend(b,c);qq.each(b,function(b,c){a.cancel(c)});c=[]},getName:function(a){return f.getName(a)},getSize:function(a){if(f.getSize)return f.getSize(a)},getFile:function(a){if(f.getFile)return f.getFile(a)},getQueue:function(){return c},reset:function(){b("Resetting upload handler");c=[];f.reset()},getUuid:function(a){return f.getUuid(a)},
isValid:function(a){return f.isValid(a)},getResumableFilesData:function(){return f.getResumableFilesData?f.getResumableFilesData():[]}}};
qq.UploadHandlerForm=function(a,c,d){function b(a){void 0!==r[a]&&(r[a](),delete r[a])}function e(a,c){var e=a.id;A[m[e]]=c;r[e]=qq(a).attach("load",function(){p[e]&&(y("Received iframe load event for CORS upload request (file id "+e+")"),C[e]=setTimeout(function(){var a="No valid message received from loaded iframe for file id "+e;y(a,"error");c({error:a})},1E3))});K.receiveMessage(e,function(a){y("Received the following window message: '"+a+"'");var c=qq.parseJson(a),d=c.uuid;d&&A[d]?(clearTimeout(C[e]),
delete C[e],b(e),a=A[d],delete A[d],K.stopReceivingMessages(e),a(c)):d||y("'"+a+"' does not contain a UUID - ignoring.")})}function f(a,b){l.cors.expected?e(a,b):r[a.id]=qq(a).attach("load",function(){y("Received response for "+a.id);if(a.parentNode){try{if(a.contentDocument&&a.contentDocument.body&&"false"==a.contentDocument.body.innerHTML)return}catch(c){y("Error when attempting to access iframe during handling of upload response ("+c+")","error")}b()}})}function g(a){var b=qq.toElement('<iframe src="javascript:false;" name="'+
a+'" />');b.setAttribute("id",a);b.style.display="none";document.body.appendChild(b);return b}function h(a,b){var c=l.paramsStore.getParams(a),e=qq.toElement('<form method="'+(l.demoMode?"GET":"POST")+'" enctype="multipart/form-data"></form>'),d=l.endpointStore.getEndpoint(a),f=d;c[l.uuidParamName]=m[a];l.paramsInBody?qq.obj2Inputs(c,e):f=qq.obj2url(c,d);e.setAttribute("action",f);e.setAttribute("target",b.name);e.style.display="none";document.body.appendChild(e);return e}var l=a,p=[],m=[],r={},C=
{},y=d,K=new qq.WindowReceiveMessage({log:y}),A={},t;return t={add:function(a){a.setAttribute("name",l.inputName);var b=p.push(a)-1;m[b]=qq.getUniqueId();a.parentNode&&qq(a).remove();return b},getName:function(a){if(t.isValid(a))return p[a].value.replace(/.*(\/|\\)/,"");y(a+" is not a valid item ID.","error")},isValid:function(a){return void 0!==p[a]},reset:function(){p=[];m=[];r={}},getUuid:function(a){return m[a]},cancel:function(a){l.onCancel(a,this.getName(a));delete p[a];delete m[a];delete r[a];
l.cors.expected&&(clearTimeout(C[a]),delete C[a],K.stopReceivingMessages(a));if(a=document.getElementById(a))a.setAttribute("src","java"+String.fromCharCode(115)+"cript:false;"),qq(a).remove()},upload:function(a){var e=p[a],d=t.getName(a),m=g(a),r;if(!e)throw Error("file with passed id was not added, or already uploaded or cancelled");l.onUpload(a,this.getName(a));r=h(a,m);r.appendChild(e);f(m,function(e){y("iframe loaded");if(!e){var f;try{var g=m.contentDocument||m.contentWindow.document,h=g.body.innerHTML;
y("converting iframe's innerHTML to JSON");y("innerHTML = "+h);h&&h.match(/^<pre/i)&&(h=g.body.firstChild.firstChild.nodeValue);f=qq.parseJson(h)}catch(p){y("Error when attempting to parse form upload response ("+p+")","error"),f={success:!1}}e=f}b(a);l.cors.expected||qq(m).remove();if(e.success||!l.onAutoRetry(a,d,e))l.onComplete(a,d,e),c(a)});y("Sending upload request for "+a);r.submit();qq(r).remove();return a}}};
qq.UploadHandlerXhr=function(a,c,d){function b(a,b,c){var e=w.getSize(a);a=w.getName(a);b[q.chunking.paramNames.partIndex]=c.part;b[q.chunking.paramNames.partByteOffset]=c.start;b[q.chunking.paramNames.chunkSize]=c.size;b[q.chunking.paramNames.totalParts]=c.count;b[q.totalFileSizeParamName]=e;v&&(b[q.chunking.paramNames.filename]=a)}function e(a,b){var c=q.chunking.partSize,e=w.getSize(a),d=n[a].file||n[a].blobData.blob,g=c*b,c=g+c>=e?e:g+c,e=f(a),h;d.slice?h=d.slice(g,c):d.mozSlice?h=d.mozSlice(g,
c):d.webkitSlice&&(h=d.webkitSlice(g,c));return{part:b,start:g,end:c,count:e,blob:h,size:c-g}}function f(a){a=w.getSize(a);return Math.ceil(a/q.chunking.partSize)}function g(a,b,c,e){var d=new FormData,f=q.demoMode?"GET":"POST",g=q.endpointStore.getEndpoint(e),h=g,l=w.getName(e),m=w.getSize(e),p=n[e].blobData;a[q.uuidParamName]=n[e].uuid;v&&(a[q.totalFileSizeParamName]=m,p&&(a[q.blobs.paramNames.name]=p.name));q.paramsInBody||(v||(a[q.inputName]=l),h=qq.obj2url(a,g));b.open(f,h,!0);q.cors.expected&&
q.cors.sendCredentials&&(b.withCredentials=!0);return v?(q.paramsInBody&&qq.obj2FormData(a,d),d.append(q.inputName,c),d):c}function h(a,b){var c=q.customHeaders,e=n[a].file||n[a].blobData.blob;b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Cache-Control","no-cache");v||(b.setRequestHeader("Content-Type","application/octet-stream"),b.setRequestHeader("X-Mime-Type",e.type));qq.each(c,function(a,c){b.setRequestHeader(a,c)})}function l(a,b,c){var e=w.getName(a),d=w.getSize(a);
n[a].attemptingResume=!1;q.onProgress(a,e,d,d);q.onComplete(a,e,b,c);delete n[a].xhr;F(a)}function p(a){var c=n[a].remainingChunkIdxs[0],d=e(a,c),f=n[a].xhr=new XMLHttpRequest,l=w.getSize(a),m=w.getName(a),p;void 0===n[a].loaded&&(n[a].loaded=0);x&&n[a].file&&y(a,d);f.onreadystatechange=C(a,f);f.upload.onprogress=function(b){if(b.lengthComputable){var d=b.loaded+n[a].loaded;b=b.total;var f=e(a,c);b-=f.size;var g=w.getSize(a),f=f.count,h=b-n[a].initialRequestOverhead;n[a].lastRequestOverhead=b;0===
c?(n[a].lastChunkIdxProgress=0,n[a].initialRequestOverhead=b,n[a].estTotalRequestsSize=g+f*b):n[a].lastChunkIdxProgress!==c&&(n[a].lastChunkIdxProgress=c,n[a].estTotalRequestsSize+=h);q.onProgress(a,m,d,n[a].estTotalRequestsSize)}};q.onUploadChunk(a,m,r(d));p=q.paramsStore.getParams(a);b(a,p,d);n[a].attemptingResume&&(p[q.resume.paramNames.resuming]=!0);p=g(p,f,d.blob,a);h(a,f);J("Sending chunked upload request for item "+a+": bytes "+(d.start+1)+"-"+d.end+" of "+l);f.send(p)}function m(a){J("Server has ordered chunking effort to be restarted on next attempt for item ID "+
a,"error");x&&(K(a),n[a].attemptingResume=!1);n[a].remainingChunkIdxs=[];delete n[a].loaded;delete n[a].estTotalRequestsSize;delete n[a].initialRequestOverhead}function r(a){return{partIndex:a.part,startByte:a.start+1,endByte:a.end,totalParts:a.count}}function C(a,b){return function(){if(4===b.readyState){var c;if(n[a]){J("xhr - server response received for "+a);J("responseText = "+b.responseText);try{c=qq.parseJson(b.responseText)}catch(d){J("Error when attempting to parse xhr response text ("+d+
")","error"),c={}}if(200!==b.status||!c.success||c.reset)if(c.reset&&m(a),n[a].attemptingResume&&c.reset)n[a].attemptingResume=!1,J("Server has declared that it cannot handle resume for item ID "+a+" - starting from the first chunk","error"),m(a),w.upload(a,!0);else{var f=w.getName(a);q.onAutoRetry(a,f,c,b)||l(a,c,b)}else if(Q){var f=n[a].remainingChunkIdxs.shift(),g=e(a,f);n[a].attemptingResume=!1;var f=n[a],h=f.loaded,g=g.size;f.loaded=h+(g+(v?n[a].lastRequestOverhead:0));0<n[a].remainingChunkIdxs.length?
p(a):(x&&K(a),l(a,c,b))}else l(a,c,b)}}}}function y(a,b){var c=w.getUuid(a),e=n[a].loaded,d=n[a].initialRequestOverhead,f=n[a].estTotalRequestsSize,g=A(a);qq.setCookie(g,c+E+b.part+E+e+E+d+E+f,q.resume.cookiesExpireIn)}function K(a){n[a].file&&(a=A(a),qq.deleteCookie(a))}function A(a){var b=w.getName(a);a=w.getSize(a);var c=q.chunking.partSize,b="qqfilechunk"+E+encodeURIComponent(b)+E+a+E+c;void 0!==I&&(b+=E+I);return b}function t(a){var b=n[a].file||n[a].blobData.blob,c=w.getName(a),e,d;n[a].loaded=
0;e=n[a].xhr=new XMLHttpRequest;e.upload.onprogress=function(b){b.lengthComputable&&(n[a].loaded=b.loaded,q.onProgress(a,c,b.loaded,b.total))};e.onreadystatechange=C(a,e);d=q.paramsStore.getParams(a);b=g(d,e,b,a);h(a,e);J("Sending upload request for "+a);e.send(b)}var q=a,F=c,J=d,n=[],E="|",Q=q.chunking.enabled&&qq.supportedFeatures.chunking,x=q.resume.enabled&&Q&&qq.supportedFeatures.resume,I;I=null===q.resume.id||void 0===q.resume.id||qq.isFunction(q.resume.id)||qq.isObject(q.resume.id)?void 0:
q.resume.id;var v=q.forceMultipart||q.paramsInBody,w;return w={add:function(a){if(a instanceof File)a=n.push({file:a})-1;else if(qq.isBlob(a.blob))a=n.push({blobData:a})-1;else throw Error("Passed obj in not a File or BlobData (in qq.UploadHandlerXhr)");n[a].uuid=qq.getUniqueId();return a},getName:function(a){if(w.isValid(a)){var b=n[a].file;a=n[a].blobData;return b?null!==b.fileName&&void 0!==b.fileName?b.fileName:b.name:a.name}J(a+" is not a valid item ID.","error")},getSize:function(a){a=n[a].file||
n[a].blobData.blob;return qq.isFileOrInput(a)?null!=a.fileSize?a.fileSize:a.size:a.size},getFile:function(a){if(n[a])return n[a].file||n[a].blobData.blob},getLoaded:function(a){return n[a].loaded||0},isValid:function(a){return void 0!==n[a]},reset:function(){n=[]},getUuid:function(a){return n[a].uuid},upload:function(a,b){var c=this.getName(a);q.onUpload(a,c);if(Q){var d=w.getName(a),c=0,g,h;if(!n[a].remainingChunkIdxs||0===n[a].remainingChunkIdxs.length){n[a].remainingChunkIdxs=[];if(x&&!b&&n[a].file){a:{g=
qq.getCookie(A(a));h=w.getName(a);var l,m,k;if(g){g=g.split(E);if(5===g.length){h=g[0];l=parseInt(g[1],10);m=parseInt(g[2],10);k=parseInt(g[3],10);g=parseInt(g[4],10);g={uuid:h,part:l,lastByteSent:m,initialRequestOverhead:k,estTotalRequestsSize:g};break a}J("Ignoring previously stored resume/chunk cookie for "+h+" - old cookie format","warn")}g=void 0}g&&(h=e(a,g.part),!1!==q.onResume(a,d,r(h))&&(c=g.part,n[a].uuid=g.uuid,n[a].loaded=g.lastByteSent,n[a].estTotalRequestsSize=g.estTotalRequestsSize,
n[a].initialRequestOverhead=g.initialRequestOverhead,n[a].attemptingResume=!0,J("Resuming "+d+" at partition index "+c)))}for(d=f(a)-1;d>=c;--d)n[a].remainingChunkIdxs.unshift(d)}p(a)}else t(a)},cancel:function(a){var b=n[a].xhr;q.onCancel(a,this.getName(a));b&&(b.onreadystatechange=null,b.abort());x&&K(a);delete n[a]},getResumableFilesData:function(){var a=[],b=[];return Q&&x?(a=void 0===I?qq.getCookieNames(RegExp("^qqfilechunk\\"+E+".+\\"+E+"\\d+\\"+E+q.chunking.partSize+"=")):qq.getCookieNames(RegExp("^qqfilechunk\\"+
E+".+\\"+E+"\\d+\\"+E+q.chunking.partSize+"\\"+E+I+"=")),qq.each(a,function(a,c){var e=c.split(E),d=qq.getCookie(c).split(E);b.push({name:decodeURIComponent(e[1]),size:e[2],uuid:d[0],partIdx:d[1]})}),b):[]}}};
(function(a){var c,d,b,e,f,g,h,l,p,m;g=["uploaderType"];b=function(a){a&&(a=l(a),h(a),"basic"===f("uploaderType")?c(new qq.FineUploaderBasic(a)):c(new qq.FineUploader(a)));return d};e=function(a,b){var c=d.data("fineuploader");if(b)void 0===c&&(c={}),c[a]=b,d.data("fineuploader",c);else return void 0===c?null:c[a]};c=function(a){return e("uploader",a)};f=function(a,b){return e(a,b)};h=function(b){var c=b.callbacks={};b=new qq.FineUploaderBasic;a.each(b._options.callbacks,function(a){var b,e;b=/^on(\w+)/.exec(a)[1];
b=b.substring(0,1).toLowerCase()+b.substring(1);e=d;c[a]=function(){var a=Array.prototype.slice.call(arguments);return e.triggerHandler(b,a)}})};l=function(b,c){var e,h;e=void 0===c?"basic"!==b.uploaderType?{element:d[0]}:{}:c;a.each(b,function(b,c){0<=a.inArray(b,g)?f(b,c):c instanceof a?e[b]=c[0]:a.isPlainObject(c)?(e[b]={},l(c,e[b])):a.isArray(c)?(h=[],a.each(c,function(b,c){c instanceof a?a.merge(h,c):h.push(c)}),e[b]=h):e[b]=c});if(void 0===c)return e};p=function(b){return"string"===a.type(b)&&
!b.match(/^_/)&&void 0!==c()[b]};m=function(a){var b=[],e=Array.prototype.slice.call(arguments,1);l(e,b);return c()[a].apply(c(),b)};a.fn.fineUploader=function(e){var f=this,g=arguments,h=[];this.each(function(l,t){d=a(t);if(c()&&p(e)){if(h.push(m.apply(f,g)),1===f.length)return!1}else"object"!==typeof e&&e?a.error("Method "+e+" does not exist on jQuery.fineUploader"):b.apply(f,g)});return 1===h.length?h[0]:1<h.length?h:this}})(jQuery);
(function(a){function c(a){a||(a={});a.dropZoneElements=[h];a=e(a);b(a);d(new qq.DragAndDrop(a));return h}function d(a){var b,c=h.data(g);a?(void 0===c&&(c={}),c.dndInstance=a,h.data(g,c)):b=void 0===c?null:c.dndInstance;return b}function b(b){var c=b.callbacks={};new qq.FineUploaderBasic;a.each(new qq.DragAndDrop.callbacks,function(a){var b;b=h;c[a]=function(){var c=Array.prototype.slice.call(arguments);return b.triggerHandler(a,c)}})}function e(b,c){var d,f;d=void 0===c?{}:c;a.each(b,function(b,
c){c instanceof a?d[b]=c[0]:a.isPlainObject(c)?(d[b]={},e(c,d[b])):a.isArray(c)?(f=[],a.each(c,function(b,c){c instanceof a?a.merge(f,c):f.push(c)}),d[b]=f):d[b]=c});if(void 0===c)return d}function f(a){var b=[],c=Array.prototype.slice.call(arguments,1);e(c,b);return d()[a].apply(d(),b)}var g="fineUploaderDnd",h;a.fn.fineUploaderDnd=function(b){var e=this,g=arguments,r=[];this.each(function(C,y){h=a(y);if(d()&&"string"===a.type(b)&&"dispose"===b&&void 0!==d()[b]){if(r.push(f.apply(e,g)),1===e.length)return!1}else"object"!==
typeof b&&b?a.error("Method "+b+" does not exist in Fine Uploader's DnD module."):c.apply(e,g)});return 1===r.length?r[0]:1<r.length?r:this}})(jQuery);
(function(a){function c(a,c){(d(a,c)?e:b)(a,c)}var d,b,e;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},b=function(a,b){a.classList.add(b)},e=function(a,b){a.classList.remove(b)}):(d=function(a,b){return(new RegExp("(^|\\s+)"+b+"(\\s+|$)")).test(a.className)},b=function(a,b){d(a,b)||(a.className=a.className+" "+b)},e=function(a,b){a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," ")});var f={hasClass:d,addClass:b,removeClass:e,toggleClass:c,
has:d,add:b,remove:e,toggle:c};"function"===typeof define&&define.amd?define(f):a.classie=f})(window);
$(function(a){var c=document.querySelector("#input"),d=document.querySelector("#search-label");d.addEventListener("click",function(b){classie.has(c,"focus")?(classie.remove(c,"focus"),classie.remove(d,"active"),a("#input input").animate({width:"0px",left:"-20px"},function(){})):a("#input input").animate({left:0,width:"100%"},function(){classie.add(c,"focus");classie.add(d,"active")})});document.addEventListener("click",function(b){b=b.target.id;"search-terms"!=b&&"search-label-target"!=b&&classie.has(c,
"focus")&&(classie.remove(c,"focus"),classie.remove(d,"active"),a("#input input").animate({width:"0px",left:"-20px"},function(){}))})});$(document).ready(function(){$(".not_so_cool_input").focus(function(){$(this).css("border","2px solid #cb9897")});$(".not_so_cool_input").blur(function(){$(this).css("border","2px solid #ccc")});$(".not_so_cool_textarea").focus(function(){$(this).css("border","2px solid #cb9897")});$(".not_so_cool_textarea").blur(function(){$(this).css("border","2px solid #ccc")})});
if(!jQuery)throw Error("Bootstrap requires jQuery");
+function(a){a.fn.emulateTransitionEnd=function(c){var d=!1,b=this;a(this).one(a.support.transition.end,function(){d=!0});return setTimeout(function(){d||a(b).trigger(a.support.transition.end)},c),this};a(function(){var c=a.support,d;a:{d=document.createElement("bootstrap");var b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},e;for(e in b)if(void 0!==d.style[e]){d={end:b[e]};break a}d=void 0}c.transition=
d})}(window.jQuery);
+function(a){var c=function(b){a(b).on("click",'[data-dismiss="alert"]',this.close)};c.prototype.close=function(b){function c(){h.trigger("closed.bs.alert").remove()}var d=a(this),g=d.attr("data-target");g||(g=d.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,""));var h=a(g);b&&b.preventDefault();h.length||(h=d.hasClass("alert")?d:d.parent());h.trigger(b=a.Event("close.bs.alert"));b.isDefaultPrevented()||(h.removeClass("in"),a.support.transition&&h.hasClass("fade")?h.one(a.support.transition.end,c).emulateTransitionEnd(150):
c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var e=a(this),d=e.data("bs.alert");d||e.data("bs.alert",d=new c(this));"string"==typeof b&&d[b].call(e)})};a.fn.alert.Constructor=c;a.fn.alert.noConflict=function(){return a.fn.alert=d,this};a(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',c.prototype.close)}(window.jQuery);
+function(a){var c=function(b,e){this.$element=a(b);this.options=a.extend({},c.DEFAULTS,e)};c.DEFAULTS={loadingText:"loading..."};c.prototype.setState=function(a){var c=this.$element,d=c.is("input")?"val":"html",g=c.data();a+="Text";g.resetText||c.data("resetText",c[d]());c[d](g[a]||this.options[a]);setTimeout(function(){"loadingText"==a?c.addClass("disabled").attr("disabled","disabled"):c.removeClass("disabled").removeAttr("disabled")},0)};c.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons"]');
a.length&&"radio"===this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change").prop("type")&&a.find(".active").removeClass("active");this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=function(b){return this.each(function(){var e=a(this),d=e.data("bs.button"),g="object"==typeof b&&b;d||e.data("bs.button",d=new c(this,g));"toggle"==b?d.toggle():b&&d.setState(b)})};a.fn.button.Constructor=c;a.fn.button.noConflict=function(){return a.fn.button=d,this};
a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn"));c.button("toggle");b.preventDefault()})}(window.jQuery);
+function(a){var c=function(b,c){this.$element=a(b);this.$indicators=this.$element.find(".carousel-indicators");this.options=c;this.paused=this.sliding=this.interval=this.$active=this.$items=null;"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};c.DEFAULTS={interval:5E3,pause:"hover",wrap:!0};c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&
(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this};c.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)};c.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))};c.prototype.pause=
function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};c.prototype.next=function(){return this.sliding?void 0:this.slide("next")};c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")};c.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),g=c||d[b](),h=this.interval,l="next"==b?"left":"right",p=
"next"==b?"first":"last",m=this;if(!g.length){if(!this.options.wrap)return;g=this.$element.find(".item")[p]()}this.sliding=!0;h&&this.pause();p=a.Event("slide.bs.carousel",{relatedTarget:g[0],direction:l});if(!g.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(m.$indicators.children()[m.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(p),
p.isDefaultPrevented())return;g.addClass(b);g[0].offsetWidth;d.addClass(l);g.addClass(l);d.one(a.support.transition.end,function(){g.removeClass([b,l].join(" ")).addClass("active");d.removeClass(["active",l].join(" "));m.sliding=!1;setTimeout(function(){m.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(p),p.isDefaultPrevented())return;d.removeClass("active");g.addClass("active");this.sliding=!1;this.$element.trigger("slid")}return h&&this.cycle(),this}};var d=
a.fn.carousel;a.fn.carousel=function(b){return this.each(function(){var e=a(this),d=e.data("bs.carousel"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b),h="string"==typeof b?b:g.slide;d||e.data("bs.carousel",d=new c(this,g));"number"==typeof b?d.to(b):h?d[h]():g.interval&&d.pause().cycle()})};a.fn.carousel.Constructor=c;a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),
g=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""));c=a.extend({},g.data(),d.data());var h=d.attr("data-slide-to");h&&(c.interval=!1);g.carousel(c);(h=d.attr("data-slide-to"))&&g.data("bs.carousel").to(h);b.preventDefault()});a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(window.jQuery);
+function(a){var c=function(b,d){this.$element=a(b);this.options=a.extend({},c.DEFAULTS,d);this.transitioning=null;this.options.parent&&(this.$parent=a(this.options.parent));this.options.toggle&&this.toggle()};c.DEFAULTS={toggle:!0};c.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};c.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){if((b=this.$parent&&
this.$parent.find("> .panel > .in"))&&b.length){var c=b.data("bs.collapse");if(c&&c.transitioning)return;b.collapse("hide");c||b.data("bs.collapse",null)}var d=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[d](0);this.transitioning=1;b=function(){this.$element.removeClass("collapsing").addClass("in")[d]("auto");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return b.call(this);c=a.camelCase(["scroll",d].join("-"));this.$element.one(a.support.transition.end,
a.proxy(b,this)).emulateTransitionEnd(350)[d](this.$element[0][c])}}};c.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){b=this.dimension();this.$element[b](this.$element[b]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var c=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};
return a.support.transition?(this.$element[b](0).one(a.support.transition.end,a.proxy(c,this)).emulateTransitionEnd(350),void 0):c.call(this)}}};c.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var d=a.fn.collapse;a.fn.collapse=function(b){return this.each(function(){var d=a(this),f=d.data("bs.collapse"),g=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b);f||d.data("bs.collapse",f=new c(this,g));"string"==typeof b&&f[b]()})};a.fn.collapse.Constructor=c;a.fn.collapse.noConflict=
function(){return a.fn.collapse=d,this};a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this);b=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");c=a(b);var g=(b=c.data("bs.collapse"))?"toggle":d.data(),h=d.attr("data-parent"),l=h&&a(h);b&&b.transitioning||(l&&l.find('[data-toggle=collapse][data-parent="'+h+'"]').not(d).addClass("collapsed"),d[c.hasClass("in")?"addClass":"removeClass"]("collapsed"));c.collapse(g)})}(window.jQuery);
+function(a){function c(){a(b).remove();a(e).each(function(b){var c=d(a(this));c.hasClass("open")&&(c.trigger(b=a.Event("hide.bs.dropdown")),b.isDefaultPrevented()||c.removeClass("open").trigger("hidden.bs.dropdown"))})}function d(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));return(c=c&&a(c))&&c.length?c:b.parent()}var b=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=
function(b){var e=a(this);if(!e.is(".disabled, :disabled")){var f=d(e),g=f.hasClass("open");if(c(),!g){if("ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",c),f.trigger(b=a.Event("show.bs.dropdown")),b.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown");e.focus()}return!1}};f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var c=a(this);if(b.preventDefault(),b.stopPropagation(),
!c.is(".disabled, :disabled")){var f=d(c),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),c.click();c=a("[role=menu] li:not(.divider):visible a",f);c.length&&(f=c.index(c.filter(":focus")),38==b.keyCode&&0<f&&f--,40==b.keyCode&&f<c.length-1&&f++,~f||(f=0),c.eq(f).focus())}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new f(this));"string"==typeof b&&d[b].call(c)})};a.fn.dropdown.Constructor=
f;a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this};a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu]",f.prototype.keydown)}(window.jQuery);
+function(a){var c=function(b,c){this.options=c;this.$element=a(b);this.$backdrop=this.isShown=null;this.options.remote&&this.$element.load(this.options.remote)};c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};c.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)};c.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d);this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',
a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body);c.$element.show();d&&c.$element[0].offsetWidth;c.$element.addClass("in").attr("aria-hidden",!1);c.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(f)}).emulateTransitionEnd(300):c.$element.focus().trigger(f)}))};c.prototype.hide=
function(b){b&&b.preventDefault();b=a.Event("hide.bs.modal");this.$element.trigger(b);this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())};c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",
a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))};c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")};c.prototype.hideModal=function(){var a=this;this.$element.hide();this.backdrop(function(){a.removeBackdrop();a.$element.trigger("hidden.bs.modal")})};c.prototype.removeBackdrop=
function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};c.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),
d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),b)d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var d=a.fn.modal;a.fn.modal=function(b,d){return this.each(function(){var f=a(this),g=f.data("bs.modal"),h=a.extend({},c.DEFAULTS,f.data(),"object"==typeof b&&
b);g||f.data("bs.modal",g=new c(this,h));"string"==typeof b?g[b](d):h.show&&g.show(d)})};a.fn.modal.Constructor=c;a.fn.modal.noConflict=function(){return a.fn.modal=d,this};a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),g=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),d=g.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},g.data(),c.data());b.preventDefault();g.modal(d,this).one("hide",function(){c.is(":visible")&&c.focus()})});
a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(window.jQuery);
+function(a){var c=function(a,c){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",a,c)};c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};c.prototype.init=function(b,c,d){this.enabled=!0;this.type=b;this.$element=a(c);this.options=this.getOptions(d);b=this.options.trigger.split(" ");
for(c=b.length;c--;)if(d=b[c],"click"==d)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=d){var g="hover"==d?"mouseleave":"blur";this.$element.on(("hover"==d?"mouseenter":"focus")+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(g+"."+this.type,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};c.prototype.getDefaults=
function(){return c.DEFAULTS};c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b};c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b};c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()};c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),
void 0):c.hide()};c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled&&(this.$element.trigger(b),!b.isDefaultPrevented())){var c=this.tip();this.setContent();this.options.animation&&c.addClass("fade");var b="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,d=/\s?auto?\s?/i,g=d.test(b);g&&(b=b.replace(d,"")||"top");c.detach().css({top:0,left:0,display:"block"}).addClass(b);this.options.container?
c.appendTo(this.options.container):c.insertAfter(this.$element);var d=this.getPosition(),h=c[0].offsetWidth,l=c[0].offsetHeight;if(g){var p=this.$element.parent(),g=b,m=document.documentElement.scrollTop||document.body.scrollTop,r="body"==this.options.container?window.innerWidth:p.outerWidth(),C="body"==this.options.container?window.innerHeight:p.outerHeight(),p="body"==this.options.container?0:p.offset().left,b="bottom"==b&&d.top+d.height+l-m>C?"top":"top"==b&&0>d.top-m-l?"bottom":"right"==b&&d.right+
h>r?"left":"left"==b&&d.left-h<p?"right":b;c.removeClass(g).addClass(b)}c=this.getCalculatedOffset(b,d,h,l);this.applyPlacement(c,b);this.$element.trigger("shown.bs."+this.type)}};c.prototype.applyPlacement=function(a,c){var d,g=this.tip(),h=g[0].offsetWidth,l=g[0].offsetHeight,p=parseInt(g.css("margin-top"),10),m=parseInt(g.css("margin-left"),10);isNaN(p)&&(p=0);isNaN(m)&&(m=0);a.top+=p;a.left+=m;g.offset(a).addClass("in");p=g[0].offsetWidth;m=g[0].offsetHeight;("top"==c&&m!=l&&(d=!0,a.top=a.top+
l-m),/bottom|top/.test(c))?(l=0,0>a.left&&(l=-2*a.left,a.left=0,g.offset(a),p=g[0].offsetWidth),this.replaceArrow(l-h+p,p,"left")):this.replaceArrow(m-l,m,"top");d&&g.offset(a)};c.prototype.replaceArrow=function(a,c,d){this.arrow().css(d,a?50*(1-a/c)+"%":"")};c.prototype.setContent=function(){var a=this.tip(),c=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](c);a.removeClass("fade in top bottom left right")};c.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach()}
var c=this,d=this.tip(),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.$element.trigger("hidden.bs."+this.type),this)};c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};c.prototype.hasContent=
function(){return this.getTitle()};c.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())};c.prototype.getCalculatedOffset=function(a,c,d,g){return"bottom"==a?{top:c.top+c.height,left:c.left+c.width/2-d/2}:"top"==a?{top:c.top-g,left:c.left+c.width/2-d/2}:"left"==a?{top:c.top+c.height/2-g/2,left:c.left-d}:{top:c.top+c.height/2-g/2,left:c.left+
c.width}};c.prototype.getTitle=function(){var a=this.$element,c=this.options;return a.attr("data-original-title")||("function"==typeof c.title?c.title.call(a[0]):c.title)};c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)};c.prototype.enable=function(){this.enabled=
!0};c.prototype.disable=function(){this.enabled=!1};c.prototype.toggleEnabled=function(){this.enabled=!this.enabled};c.prototype.toggle=function(b){b=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;b.tip().hasClass("in")?b.leave(b):b.enter(b)};c.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var d=a.fn.tooltip;a.fn.tooltip=function(b){return this.each(function(){var d=a(this),f=d.data("bs.tooltip"),g="object"==
typeof b&&b;f||d.data("bs.tooltip",f=new c(this,g));"string"==typeof b&&f[b]()})};a.fn.tooltip.Constructor=c;a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(window.jQuery);
+function(a){var c=function(a,c){this.init("popover",a,c)};if(!a.fn.tooltip)throw Error("Popover requires tooltip.js");c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);c.prototype.constructor=c;c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.setContent=
function(){var a=this.tip(),c=this.getTitle(),d=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](c);a.find(".popover-content")[this.options.html?"html":"text"](d);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};c.prototype.hasContent=function(){return this.getTitle()||this.getContent()};c.prototype.getContent=function(){var a=this.$element,c=this.options;return a.attr("data-content")||("function"==typeof c.content?
c.content.call(a[0]):c.content)};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=function(b){return this.each(function(){var d=a(this),f=d.data("bs.popover"),g="object"==typeof b&&b;f||d.data("bs.popover",f=new c(this,g));"string"==typeof b&&f[b]()})};a.fn.popover.Constructor=c;a.fn.popover.noConflict=function(){return a.fn.popover=d,
this}}(window.jQuery);
+function(a){function c(b,d){var f,g=a.proxy(this.process,this);this.$element=a(b).is("body")?a(window):a(b);this.$body=a("body");this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",g);this.options=a.extend({},c.DEFAULTS,d);this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.offsets=a([]);this.targets=a([]);this.activeTarget=null;this.refresh();this.process()}c.DEFAULTS={offset:10};c.prototype.refresh=function(){var b=
this.$element[0]==window?"offset":"position";this.offsets=a([]);this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var d=a(this),d=d.data("target")||d.attr("href"),g=/^#\w/.test(d)&&a(d);return g&&g.length&&[[g[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]);c.targets.push(this[1])})};c.prototype.process=function(){var a,c=this.$scrollElement.scrollTop()+
this.options.offset,d=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),g=this.offsets,h=this.targets,l=this.activeTarget;if(c>=d)return l!=(a=h.last()[0])&&this.activate(a);for(a=g.length;a--;)l!=h[a]&&c>=g[a]&&(!g[a+1]||c<=g[a+1])&&this.activate(h[a])};c.prototype.activate=function(b){this.activeTarget=b;a(this.selector).parents(".active").removeClass("active");b=a(this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]').parents("li").addClass("active");
b.parent(".dropdown-menu").length&&(b=b.closest("li.dropdown").addClass("active"));b.trigger("activate")};var d=a.fn.scrollspy;a.fn.scrollspy=function(b){return this.each(function(){var d=a(this),f=d.data("bs.scrollspy"),g="object"==typeof b&&b;f||d.data("bs.scrollspy",f=new c(this,g));"string"==typeof b&&f[b]()})};a.fn.scrollspy.Constructor=c;a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this};a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery);
+function(a){var c=function(b){this.element=a(b)};c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var g=c.find(".active:last a")[0],h=a.Event("show.bs.tab",{relatedTarget:g});(b.trigger(h),h.isDefaultPrevented())||(d=a(d),this.activate(b.parent("li"),c),this.activate(d,d.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:g})}))}};
c.prototype.activate=function(b,c,d){function g(){h.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");b.addClass("active");l?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active");d&&d()}var h=c.find("> .active"),l=d&&a.support.transition&&h.hasClass("fade");l?h.one(a.support.transition.end,g).emulateTransitionEnd(150):g();h.removeClass("in")};var d=a.fn.tab;a.fn.tab=function(b){return this.each(function(){var d=
a(this),f=d.data("bs.tab");f||d.data("bs.tab",f=new c(this));"string"==typeof b&&f[b]()})};a.fn.tab.Constructor=c;a.fn.tab.noConflict=function(){return a.fn.tab=d,this};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault();a(this).tab("show")})}(window.jQuery);
+function(a){var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d);this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this));this.$element=a(b);this.affixed=this.unpin=null;this.checkPosition()};c.RESET="affix affix-top affix-bottom";c.DEFAULTS={offset:0};c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)};c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=
a(document).height(),d=this.$window.scrollTop(),f=this.$element.offset(),g=this.options.offset,h=g.top,l=g.bottom;"object"!=typeof g&&(l=h=g);"function"==typeof h&&(h=g.top());"function"==typeof l&&(l=g.bottom());b=null!=this.unpin&&d+this.unpin<=f.top?!1:null!=l&&f.top+this.$element.height()>=b-l?"bottom":null!=h&&h>=d?"top":!1;this.affixed!==b&&(this.unpin&&this.$element.css("top",""),this.affixed=b,this.unpin="bottom"==b?f.top-d:null,this.$element.removeClass(c.RESET).addClass("affix"+(b?"-"+b:
"")),"bottom"==b&&this.$element.offset({top:document.body.offsetHeight-l-this.$element.height()}))}};var d=a.fn.affix;a.fn.affix=function(b){return this.each(function(){var d=a(this),f=d.data("bs.affix"),g="object"==typeof b&&b;f||d.data("bs.affix",f=new c(this,g));"string"==typeof b&&f[b]()})};a.fn.affix.Constructor=c;a.fn.affix.noConflict=function(){return a.fn.affix=d,this};a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{};c.offsetBottom&&
(c.offset.bottom=c.offsetBottom);c.offsetTop&&(c.offset.top=c.offsetTop);b.affix(c)})})}(window.jQuery);
(function(a,c,d){function b(b,d,e){b=c.createElement(b);return d&&(b.id=D+d),e&&(b.style.cssText=e),a(b)}function e(){return d.innerHeight?d.innerHeight:a(d).height()}function f(a){var b=x.length;a=(G+a)%b;return 0>a?b+a:a}function g(a,b){return Math.round((/%/.test(a)?("x"===b?I.width():e())/100:1)*parseInt(a,10))}function h(a,b){return a.retinaUrl&&1<d.devicePixelRatio?b.replace(a.photoRegex,a.retinaSuffix):b}function l(a){"contains"in t[0]&&!t[0].contains(a.target)&&(a.stopPropagation(),t.focus())}
function p(){var b,c=a.data(H,O);null==c?(k=a.extend({},ha),console&&console.log&&console.log("Error: cboxElement missing settings object")):k=a.extend({},c);for(b in k)a.isFunction(k[b])&&"on"!==b.slice(0,2)&&(k[b]=k[b].call(H));k.rel=k.rel||H.rel||a(H).data("rel")||"nofollow";k.href=k.href||a(H).attr("href");k.title=k.title||H.title;"string"==typeof k.href&&(k.href=a.trim(k.href))}function m(b,d){a(c).trigger(b);L.triggerHandler(b);a.isFunction(d)&&d.call(H)}function r(d){Y||(H=d,p(),x=a(H),G=0,
"nofollow"!==k.rel&&(x=a("."+V).filter(function(){var b,c=a.data(this,O);return c&&(b=a(this).data("rel")||c.rel||this.rel),b===k.rel}),G=x.index(H),-1===G&&(x=x.add(H),G=x.length-1)),A.css({opacity:parseFloat(k.opacity),cursor:k.overlayClose?"pointer":"auto",visibility:"visible"}).show(),ia&&t.add(A).removeClass(ia),k.className&&t.add(A).addClass(k.className),ia=k.className,k.closeButton?aa.html(k.close).appendTo(F):aa.appendTo("<div/>"),P||(P=Z=!0,t.css({visibility:"hidden",display:"block"}),v=
b(z,"LoadedContent","width:0; height:0; overflow:hidden"),F.css({width:"",height:""}).append(v),M=J.height()+Q.height()+F.outerHeight(!0)-F.height(),N=n.width()+E.width()+F.outerWidth(!0)-F.width(),R=v.outerHeight(!0),S=v.outerWidth(!0),k.w=g(k.initialWidth,"x"),k.h=g(k.initialHeight,"y"),v.css({width:"",height:k.h}),B.position(),m(pa,k.onOpen),ga.add(ea).hide(),t.focus(),k.trapFocus&&c.addEventListener&&(c.addEventListener("focus",l,!0),L.one(ja,function(){c.removeEventListener("focus",l,!0)})),
k.returnFocus&&L.one(ja,function(){a(H).focus()})),K())}function C(){!t&&c.body&&(ka=!1,I=a(d),t=b(z).attr({id:O,"class":!1===a.support.opacity?D+"IE":"",role:"dialog",tabindex:"-1"}).hide(),A=b(z,"Overlay").hide(),T=a([b(z,"LoadingOverlay")[0],b(z,"LoadingGraphic")[0]]),q=b(z,"Wrapper"),F=b(z,"Content").append(ea=b(z,"Title"),fa=b(z,"Current"),X=a('<button type="button"/>').attr({id:D+"Previous"}),W=a('<button type="button"/>').attr({id:D+"Next"}),U=b("button","Slideshow"),T),aa=a('<button type="button"/>').attr({id:D+
"Close"}),q.append(b(z).append(b(z,"TopLeft"),J=b(z,"TopCenter"),b(z,"TopRight")),b(z,!1,"clear:left").append(n=b(z,"MiddleLeft"),F,E=b(z,"MiddleRight")),b(z,!1,"clear:left").append(b(z,"BottomLeft"),Q=b(z,"BottomCenter"),b(z,"BottomRight"))).find("div div").css({"float":"left"}),w=b(z,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),ga=W.add(X).add(fa).add(U),a(c.body).append(A,t.append(q,w)))}function y(){function b(a){1<a.which||a.shiftKey||a.altKey||a.metaKey||
a.ctrlKey||(a.preventDefault(),r(this))}return t?(ka||(ka=!0,W.click(function(){B.next()}),X.click(function(){B.prev()}),aa.click(function(){B.close()}),A.click(function(){k.overlayClose&&B.close()}),a(c).bind("keydown."+D,function(a){var b=a.keyCode;P&&k.escKey&&27===b&&(a.preventDefault(),B.close());P&&k.arrowKey&&x[1]&&!a.altKey&&(37===b?(a.preventDefault(),X.click()):39===b&&(a.preventDefault(),W.click()))}),a.isFunction(a.fn.on)?a(c).on("click."+D,"."+V,b):a("."+V).live("click."+D,b)),!0):!1}
function K(){var e,f,l,n=B.prep,q=++la;Z=!0;u=!1;H=x[G];p();m(ba);m(ca,k.onLoad);k.h=k.height?g(k.height,"y")-R-M:k.innerHeight&&g(k.innerHeight,"y");k.w=k.width?g(k.width,"x")-S-N:k.innerWidth&&g(k.innerWidth,"x");k.mw=k.w;k.mh=k.h;k.maxWidth&&(k.mw=g(k.maxWidth,"x")-S-N,k.mw=k.w&&k.w<k.mw?k.w:k.mw);k.maxHeight&&(k.mh=g(k.maxHeight,"y")-R-M,k.mh=k.h&&k.h<k.mh?k.h:k.mh);e=k.href;na=setTimeout(function(){T.show()},100);k.inline?(l=b(z).hide().insertBefore(a(e)[0]),L.one(ba,function(){l.replaceWith(v.children())}),
n(a(e))):k.iframe?n(" "):k.html?n(k.html):k.photo||k.photoRegex.test(e)?(e=h(k,e),u=c.createElement("img"),a(u).addClass(D+"Photo").bind("error",function(){k.title=!1;n(b(z,"Error").html(k.imgError))}).one("load",function(){var b;q===la&&(a.each(["alt","longdesc","aria-describedby"],function(b,c){var d=a(H).attr(c)||a(H).attr("data-"+c);d&&u.setAttribute(c,d)}),k.retinaImage&&1<d.devicePixelRatio&&(u.height/=d.devicePixelRatio,u.width/=d.devicePixelRatio),k.scalePhotos&&(f=function(){u.height-=u.height*
b;u.width-=u.width*b},k.mw&&u.width>k.mw&&(b=(u.width-k.mw)/u.width,f()),k.mh&&u.height>k.mh&&(b=(u.height-k.mh)/u.height,f())),k.h&&(u.style.marginTop=Math.max(k.mh-u.height,0)/2+"px"),x[1]&&(k.loop||x[G+1])&&(u.style.cursor="pointer",u.onclick=function(){B.next()}),u.style.width=u.width+"px",u.style.height=u.height+"px",setTimeout(function(){n(u)},1))}),setTimeout(function(){u.src=e},1)):e&&w.load(e,k.data,function(c,d){q===la&&n("error"===d?b(z,"Error").html(k.xhrError):a(this).contents())})}var A,
t,q,F,J,n,E,Q,x,I,v,w,T,ea,fa,U,W,X,aa,ga,k,M,N,R,S,H,G,u,P,Z,Y,na,B,ia,ka,ha={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,
loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1},O="colorbox",D="cbox",
V=D+"Element",pa=D+"_open",ca=D+"_load",da=D+"_complete",ma=D+"_cleanup",ja=D+"_closed",ba=D+"_purge",L=a("<a/>"),z="div",la=0,oa={},qa=function(){function a(){clearTimeout(g)}function b(){(k.loop||x[G+1])&&(a(),g=setTimeout(B.next,k.slideshowSpeed))}function c(){U.html(k.slideshowStop).unbind(l).one(l,d);L.bind(da,b).bind(ca,a);t.removeClass(h+"off").addClass(h+"on")}function d(){a();L.unbind(da,b).unbind(ca,a);U.html(k.slideshowStart).unbind(l).one(l,function(){B.next();c()});t.removeClass(h+"on").addClass(h+
"off")}function e(){f=!1;U.hide();a();L.unbind(da,b).unbind(ca,a);t.removeClass(h+"off "+h+"on")}var f,g,h=D+"Slideshow_",l="click."+D;return function(){f?k.slideshow||(L.unbind(ma,e),e()):k.slideshow&&x[1]&&(f=!0,L.one(ma,e),k.slideshowAuto?c():d(),U.show())}}();a.colorbox||(a(C),B=a.fn[O]=a[O]=function(b,c){var d=this;if(b=b||{},C(),y()){if(a.isFunction(d))d=a("<a/>"),b.open=!0;else if(!d[0])return d;c&&(b.onComplete=c);d.each(function(){a.data(this,O,a.extend({},a.data(this,O)||ha,b))}).addClass(V);
(a.isFunction(b.open)&&b.open.call(d)||b.open)&&r(d[0])}return d},B.position=function(b,c){function d(){J[0].style.width=Q[0].style.width=F[0].style.width=parseInt(t[0].style.width,10)-N+"px";F[0].style.height=n[0].style.height=E[0].style.height=parseInt(t[0].style.height,10)-M+"px"}var f,h,l,m=0,p=0,r=t.offset();if(I.unbind("resize."+D),t.css({top:-9E4,left:-9E4}),h=I.scrollTop(),l=I.scrollLeft(),k.fixed?(r.top-=h,r.left-=l,t.css({position:"fixed"})):(m=h,p=l,t.css({position:"absolute"})),p+=!1!==
k.right?Math.max(I.width()-k.w-S-N-g(k.right,"x"),0):!1!==k.left?g(k.left,"x"):Math.round(Math.max(I.width()-k.w-S-N,0)/2),m+=!1!==k.bottom?Math.max(e()-k.h-R-M-g(k.bottom,"y"),0):!1!==k.top?g(k.top,"y"):Math.round(Math.max(e()-k.h-R-M,0)/2),t.css({top:r.top,left:r.left,visibility:"visible"}),q[0].style.width=q[0].style.height="9999px",f={width:k.w+S+N,height:k.h+R+M,top:m,left:p},b){var u=0;a.each(f,function(a){return f[a]!==oa[a]?(u=b,void 0):void 0});b=u}oa=f;b||t.css(f);t.dequeue().animate(f,
{duration:b||0,complete:function(){d();Z=!1;q[0].style.width=k.w+S+N+"px";q[0].style.height=k.h+R+M+"px";k.reposition&&setTimeout(function(){I.bind("resize."+D,B.position)},1);c&&c()},step:d})},B.resize=function(a){var b;P&&(a=a||{},a.width&&(k.w=g(a.width,"x")-S-N),a.innerWidth&&(k.w=g(a.innerWidth,"x")),v.css({width:k.w}),a.height&&(k.h=g(a.height,"y")-R-M),a.innerHeight&&(k.h=g(a.innerHeight,"y")),a.innerHeight||a.height||(b=v.scrollTop(),v.css({height:"auto"}),k.h=v.height()),v.css({height:k.h}),
b&&v.scrollTop(b),B.position("none"===k.transition?0:k.speed))},B.prep=function(d){if(P){var e,g="none"===k.transition?0:k.speed;v.empty().remove();v=b(z,"LoadedContent").append(d);v.hide().appendTo(w.show()).css({width:(k.w=k.w||v.width(),k.w=k.mw&&k.mw<k.w?k.mw:k.w,k.w),overflow:k.scrolling?"auto":"hidden"}).css({height:(k.h=k.h||v.height(),k.h=k.mh&&k.mh<k.h?k.mh:k.h,k.h)}).prependTo(F);w.hide();a(u).css({"float":"none"});e=function(){function d(){!1===a.support.opacity&&t[0].style.removeAttribute("filter")}
var e,l,n=x.length;P&&(l=function(){clearTimeout(na);T.hide();m(da,k.onComplete)},ea.html(k.title).add(v).show(),1<n?("string"==typeof k.current&&fa.html(k.current.replace("{current}",G+1).replace("{total}",n)).show(),W[k.loop||n-1>G?"show":"hide"]().html(k.next),X[k.loop||G?"show":"hide"]().html(k.previous),qa(),k.preloading&&a.each([f(-1),f(1)],function(){var b,d,e=x[this],f=a.data(e,O);f&&f.href?(b=f.href,a.isFunction(b)&&(b=b.call(e))):b=a(e).attr("href");b&&(f.photo||f.photoRegex.test(b))&&(b=
h(f,b),d=c.createElement("img"),d.src=b)})):ga.hide(),k.iframe?(e=b("iframe")[0],"frameBorder"in e&&(e.frameBorder=0),"allowTransparency"in e&&(e.allowTransparency="true"),k.scrolling||(e.scrolling="no"),a(e).attr({src:k.href,name:(new Date).getTime(),"class":D+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",l).appendTo(v),L.one(ba,function(){e.src="//about:blank"}),k.fastIframe&&a(e).trigger("load")):l(),"fade"===k.transition?t.fadeTo(g,1,d):d())};"fade"===
k.transition?t.fadeTo(g,0,function(){B.position(0,e)}):B.position(g,e)}},B.next=function(){!Z&&x[1]&&(k.loop||x[G+1])&&(G=f(1),r(x[G]))},B.prev=function(){!Z&&x[1]&&(k.loop||G)&&(G=f(-1),r(x[G]))},B.close=function(){P&&!Y&&(Y=!0,P=!1,m(ma,k.onCleanup),I.unbind("."+D),A.fadeTo(k.fadeOut||0,0),t.stop().fadeTo(k.fadeOut||0,0,function(){t.add(A).css({opacity:1,cursor:"auto"}).hide();m(ba);v.empty().remove();setTimeout(function(){Y=!1;m(ja,k.onClosed)},1)}))},B.remove=function(){t&&(t.stop(),a.colorbox.close(),
t.stop().remove(),A.remove(),Y=!1,t=null,a("."+V).removeData(O).removeClass(V),a(c).unbind("click."+D))},B.element=function(){return a(H)},B.settings=ha)})(jQuery,document,window);
