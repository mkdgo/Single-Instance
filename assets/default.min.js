(function(a,b){function d(){a.removeEventListener("load",d,!1);h=!0}function c(a){return m=m||new c.Class(a)}function e(a,c){for(var b in c)a[b]=c[b];return a}function f(){"#ath"==b.location.hash&&history.replaceState("",a.document.title,b.location.href.split("#")[0]);l.test(b.location.href)&&history.replaceState("",a.document.title,b.location.href.replace(l,"$1"));p.test(b.location.search)&&history.replaceState("",a.document.title,b.location.href.replace(p,"$2"))}var g="addEventListener"in a,h=!1;
"complete"===b.readyState?h=!0:g&&a.addEventListener("load",d,!1);var l=/\/ath(\/)?$/,p=/([\?&]ath=[^&]*$|&ath=[^&]*(&))/,m;c.intl={de_de:{ios:"Um diese Web-App zum Home-Bildschirm hinzuzuf\u00fcgen, tippen Sie auf %icon und dann <strong>Zum Home-Bildschirm</strong>.",android:"Um diese Web-App zum Home-Bildschirm hinzuzuf\u00fcgen, \u00f6ffnen Sie das Men\u00fc und tippen dann auf <strong>Zum Startbildschirm hinzuf\u00fcgen</strong>. <small>Wenn Ihr Ger\u00e4t eine Men\u00fctaste hat, l\u00e4sst sich das Browsermen\u00fc \u00fcber diese \u00f6ffnen. Ansonsten tippen Sie auf %icon.</small>"},
da_dk:{ios:"For at tilf\u00f8je denne web app til hjemmesk\u00e6rmen: Tryk %icon og derefter <strong>F\u00f8j til hjemmesk\u00e6rm</strong>.",android:"For at tilf\u00f8je denne web app til hjemmesk\u00e6rmen, \u00e5bn browser egenskaber menuen og tryk p\u00e5 <strong>F\u00f8j til hjemmesk\u00e6rm</strong>. <small>Denne menu kan tilg\u00e5s ved at trykke p\u00e5 menu knappen, hvis din enhed har en, eller ved at trykke p\u00e5 det \u00f8verste h\u00f8jre menu ikon %icon.</small>"},en_us:{ios:"To add this web app to the home screen: tap %icon and then <strong>Add to Home Screen</strong>.",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},es_es:{ios:"Para a\u00f1adir esta aplicaci\u00f3n web a la pantalla de inicio: pulsa %icon y selecciona <strong>A\u00f1adir a pantalla de inicio</strong>.",android:"Para a\u00f1adir esta aplicaci\u00f3n web a la pantalla de inicio, abre las opciones y pulsa <strong>A\u00f1adir a pantalla inicio</strong>. <small>El men\u00fa se puede acceder pulsando el bot\u00f3n t\u00e1ctil en caso de tenerlo, o bien el icono de la parte superior derecha de la pantalla %icon.</small>"},
fi_fi:{ios:"Liit\u00e4 t\u00e4m\u00e4 sovellus kotivalikkoon: klikkaa %icon ja t\u00e4m\u00e4n j\u00e4lkeen <strong>Lis\u00e4\u00e4 kotivalikkoon</strong>.",android:"Lis\u00e4t\u00e4ksesi t\u00e4m\u00e4n sovelluksen aloitusn\u00e4yt\u00f6lle, avaa selaimen valikko ja klikkaa t\u00e4hti -ikonia tai <strong>Lis\u00e4\u00e4 aloitusn\u00e4yt\u00f6lle teksti\u00e4</strong>. <small>Valikkoon p\u00e4\u00e4see my\u00f6s painamalla menuvalikkoa, jos laitteessasi on sellainen tai koskettamalla oikealla yl\u00e4kulmassa menu ikonia %icon.</small>"},
fr_fr:{ios:"Pour ajouter cette application web sur l'\u00e9cran d'accueil : Appuyez %icon et s\u00e9lectionnez <strong>Ajouter sur l'\u00e9cran d'accueil</strong>.",android:'Pour ajouter cette application web sur l\'\u00e9cran d\'accueil : Appuyez sur le bouton "menu", puis sur <strong>Ajouter sur l\'\u00e9cran d\'accueil</strong>. <small>Le menu peut-\u00eatre accessible en appyant sur le bouton "menu" du t\u00e9l\u00e9phone s\'il en poss\u00e8de un <i class="fa fa-bars"></i>. Sinon, il se trouve probablement dans la coin sup\u00e9rieur droit du navigateur %icon.</small>'},
he_il:{ios:'<span dir="rtl">\u05dc\u05d4\u05d5\u05e1\u05e4\u05ea \u05d4\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d4 \u05dc\u05de\u05e1\u05da \u05d4\u05d1\u05d9\u05ea: \u05dc\u05dc\u05d7\u05d5\u05e5 \u05e2\u05dc %icon \u05d5\u05d0\u05d6 <strong>\u05d4\u05d5\u05e1\u05e3 \u05dc\u05de\u05e1\u05da \u05d4\u05d1\u05d9\u05ea</strong>.</span>',android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},
hu_hu:{ios:"Ha hozz\u00e1 szeretn\u00e9 adni ezt az alkalmaz\u00e1st a kezd\u0151k\u00e9perny\u0151j\u00e9hez, \u00e9rintse meg a k\u00f6vetkez\u0151 ikont: %icon , majd a <strong>Hozz\u00e1ad\u00e1s a kezd\u0151k\u00e9perny\u0151h\u00f6z</strong> men\u00fcpontot.",android:"Ha hozz\u00e1 szeretn\u00e9 adni ezt az alkalmaz\u00e1st a kezd\u0151k\u00e9perny\u0151j\u00e9hez, a b\u00f6ng\u00e9sz\u0151 men\u00fcj\u00e9ben kattintson a <strong>Hozz\u00e1ad\u00e1s a kezd\u0151k\u00e9perny\u0151h\u00f6z</strong> men\u00fcpontra. <small>A b\u00f6ng\u00e9sz\u0151 men\u00fcj\u00e9t a k\u00f6vetkez\u0151 ikon meg\u00e9rint\u00e9s\u00e9vel tudja megnyitni: %icon.</small>"},
it_it:{ios:"Per aggiungere questa web app alla schermata iniziale: premi %icon e poi <strong>Aggiungi a Home</strong>.",android:"Per aggiungere questa web app alla schermata iniziale, apri il menu opzioni del browser e premi su <strong>Aggiungi alla homescreen</strong>. <small>Puoi accedere al menu premendo il pulsante hardware delle opzioni se la tua device ne ha uno, oppure premendo l'icona %icon in alto a destra.</small>"},ja_jp:{ios:"\u3053\u306e\u30a6\u30a7\u30d7\u30a2\u30d7\u30ea\u3092\u30db\u30fc\u30e0\u753b\u9762\u306b\u8ffd\u52a0\u3059\u308b\u305f\u3081\u306b%icon\u3092\u62bc\u3057\u3066<strong>\u30db\u30fc\u30e0\u753b\u9762\u306b\u8ffd\u52a0</strong>\u3002",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},ko_kr:{ios:"\ud648 \ud654\uba74\uc5d0 \ubc14\ub85c\uac00\uae30 \uc0dd\uc131: %icon \uc744 \ud074\ub9ad\ud55c \ud6c4 <strong>\ud648 \ud654\uba74\uc5d0 \ucd94\uac00</strong>.",android:"\ube0c\ub77c\uc6b0\uc800 \uc635\uc158 \uba54\ub274\uc758 <string>\ud648 \ud654\uba74\uc5d0 \ucd94\uac00</string>\ub97c \ud074\ub9ad\ud558\uc5ec \ud648\ud654\uba74\uc5d0 \ubc14\ub85c\uac00\uae30\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. <small>\uc635\uc158 \uba54\ub274\ub294 \uc7a5\uce58\uc758 \uba54\ub274 \ubc84\ud2bc\uc744 \ub204\ub974\uac70\ub098 \uc624\ub978\ucabd \uc0c1\ub2e8\uc758 \uba54\ub274 \uc544\uc774\ucf58 %icon\uc744 \ud074\ub9ad\ud558\uc5ec \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</small>"},
nb_no:{ios:"For \u00e5 installere denne appen p\u00e5 hjem-skjermen: trykk p\u00e5 %icon og deretter <strong>Legg til p\u00e5 Hjem-skjerm</strong>.",android:"For \u00e5 legge til denne webappen p\u00e5 startsiden \u00e5pner en nettlesermenyen og velger <strong>Legg til p\u00e5 startsiden</strong>. <small>Menyen \u00e5pnes ved \u00e5 trykke p\u00e5 den fysiske menyknappen hvis enheten har det, eller ved \u00e5 trykke p\u00e5 menyikonet \u00f8verst til h\u00f8yre %icon.</small>"},pt_br:{ios:"Para adicionar este app \u00e0 tela de in\u00edcio: clique %icon e ent\u00e3o <strong>Tela de in\u00edcio</strong>.",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},pt_pt:{ios:"Para adicionar esta app ao ecr\u00e3 principal: clique %icon e depois <strong>Ecr\u00e3 principal</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},
nl_nl:{ios:"Om deze webapp op je telefoon te installeren, klik op %icon en dan <strong>Zet in beginscherm</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},ru_ru:{ios:'\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u0441\u0430\u0439\u0442 \u043d\u0430 \u0441\u0432\u043e\u0439 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u044d\u043a\u0440\u0430\u043d, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0438\u043a\u043e\u043d\u043a\u0443 %icon \u0438 \u0437\u0430\u0442\u0435\u043c <strong>\u041d\u0430 \u044d\u043a\u0440\u0430\u043d "\u0414\u043e\u043c\u043e\u0439"</strong>.',
android:"\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0430\u0439\u0442 \u043d\u0430 \u0441\u0432\u043e\u0439 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u044d\u043a\u0440\u0430\u043d, \u043e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u043c\u0435\u043d\u044e \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 <strong>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u044b\u0439 \u044d\u043a\u0440\u0430\u043d</strong>. <small>\u041c\u0435\u043d\u044e \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c, \u043d\u0430\u0436\u0430\u0432 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \u043c\u0435\u043d\u044e \u0432\u0430\u0448\u0435\u0433\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430, \u0435\u0441\u043b\u0438 \u043e\u043d\u0430 \u0435\u0441\u0442\u044c. \u0418\u043b\u0438 \u043d\u0430\u0439\u0434\u0438\u0442\u0435 \u0438\u043a\u043e\u043d\u043a\u0443 \u0441\u0432\u0435\u0440\u0445\u0443 \u0441\u043f\u0440\u0430\u0432\u0430 %icon[\u0438\u043a\u043e\u043d\u043a\u0430].</small>"},
sv_se:{ios:"F\u00f6r att l\u00e4gga till denna webbapplikation p\u00e5 hemsk\u00e4rmen: tryck p\u00e5 %icon och d\u00e4refter <strong>L\u00e4gg till p\u00e5 hemsk\u00e4rmen</strong>.",android:"F\u00f6r att l\u00e4gga till den h\u00e4r webbappen p\u00e5 hemsk\u00e4rmen \u00f6ppnar du webbl\u00e4sarens alternativ-meny och v\u00e4ljer <strong>L\u00e4gg till p\u00e5 startsk\u00e4rmen</strong>. <small>Man hittar menyn genom att trycka p\u00e5 h\u00e5rdvaruknappen om din enhet har en s\u00e5dan, eller genom att trycka p\u00e5 menyikonen h\u00f6gst upp till h\u00f6ger %icon.</small>"},
zh_cn:{ios:"\u5982\u8981\u628a\u5e94\u7528\u7a0b\u5e8f\u52a0\u81f3\u4e3b\u5c4f\u5e55,\u8bf7\u70b9\u51fb%icon, \u7136\u540e<strong>\u6dfb\u52a0\u5230\u4e3b\u5c4f\u5e55</strong>",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},zh_tw:{ios:"\u5982\u8981\u628a\u61c9\u7528\u7a0b\u5f0f\u52a0\u81f3\u4e3b\u5c4f\u5e55, \u8acb\u9ede\u64ca%icon, \u7136\u5f8c<strong>\u52a0\u81f3\u4e3b\u5c4f\u5e55</strong>.",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"}};for(var r in c.intl)c.intl[r.substr(0,2)]=c.intl[r];c.defaults={appID:"org.cubiq.addtohome",fontSize:15,debug:!1,logging:!1,modal:!1,mandatory:!1,autostart:!0,skipFirstVisit:!1,startDelay:1,lifespan:15,displayPace:1440,maxDisplayCount:0,
icon:!0,message:"",validLocation:[],onInit:null,onShow:null,onRemove:null,onAdd:null,onPrivate:null,privateModeOverride:!1,detectHomescreen:!1};r=a.navigator.userAgent;var C=a.navigator;e(c,{hasToken:"#ath"==b.location.hash||l.test(b.location.href)||p.test(b.location.search),isRetina:a.devicePixelRatio&&1<a.devicePixelRatio,isIDevice:/iphone|ipod|ipad/i.test(r),isMobileChrome:-1<r.indexOf("Android")&&/Chrome\/[.0-9]*/.test(r)&&-1==r.indexOf("Version"),isMobileIE:-1<r.indexOf("Windows Phone"),language:C.language&&
C.language.toLowerCase().replace("-","_")||""});c.language=c.language&&c.language in c.intl?c.language:"en_us";c.isMobileSafari=c.isIDevice&&-1<r.indexOf("Safari")&&0>r.indexOf("CriOS");c.OS=c.isIDevice?"ios":c.isMobileChrome?"android":c.isMobileIE?"windows":"unsupported";c.OSVersion=r.match(/(OS|Android) (\d+[_\.]\d+)/);c.OSVersion=c.OSVersion&&c.OSVersion[2]?+c.OSVersion[2].replace("_","."):0;c.isStandalone="standalone"in a.navigator&&a.navigator.standalone;c.isTablet=c.isMobileSafari&&-1<r.indexOf("iPad")||
c.isMobileChrome&&0>r.indexOf("Mobile");c.isCompatible=c.isMobileSafari&&6<=c.OSVersion||c.isMobileChrome;var y={lastDisplayTime:0,returningVisitor:!1,displayCount:0,optedout:!1,added:!1};c.removeSession=function(a){try{if(!localStorage)throw Error("localStorage is not defined");localStorage.removeItem(a||c.defaults.appID)}catch(b){}};c.doLog=function(a){this.options.logging&&console.log(a)};c.Class=function(d){this.doLog=c.doLog;this.options=e({},c.defaults);e(this.options,d);d&&d.debug&&"undefined"===
typeof d.logging&&(this.options.logging=!0);if(g)if(this.options.mandatory=this.options.mandatory&&("standalone"in a.navigator||this.options.debug),this.options.modal=this.options.modal||this.options.mandatory,this.options.mandatory&&(this.options.startDelay=-.5),this.options.detectHomescreen=!0===this.options.detectHomescreen?"hash":this.options.detectHomescreen,this.options.debug&&(c.isCompatible=!0,c.OS="string"==typeof this.options.debug?this.options.debug:"unsupported"==c.OS?"android":c.OS,c.OSVersion=
"ios"==c.OS?"8":"4"),this.container=b.documentElement,this.session=(this.session=this.getItem(this.options.appID))?JSON.parse(this.session):void 0,!c.hasToken||c.isCompatible&&this.session||(c.hasToken=!1,f()),c.isCompatible){this.session=this.session||y;try{if(!localStorage)throw Error("localStorage is not defined");localStorage.setItem(this.options.appID,JSON.stringify(this.session));c.hasLocalStorage=!0}catch(h){c.hasLocalStorage=!1,this.options.onPrivate&&this.options.onPrivate.call(this)}d=!this.options.validLocation.length;
for(var p=this.options.validLocation.length;p--;)if(this.options.validLocation[p].test(b.location.href)){d=!0;break}this.getItem("addToHome")&&this.optOut();if(this.session.optedout)this.doLog("Add to homescreen: not displaying callout because user opted out");else if(this.session.added)this.doLog("Add to homescreen: not displaying callout because already added to the homescreen");else if(d)if(c.isStandalone)this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&c.hasLocalStorage&&
this.options.onAdd.call(this)),this.doLog("Add to homescreen: not displaying callout because in standalone mode");else{if(this.options.detectHomescreen){if(c.hasToken){f();this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&c.hasLocalStorage&&this.options.onAdd.call(this));this.doLog("Add to homescreen: not displaying callout because URL has token, so we are likely coming from homescreen");return}"hash"==this.options.detectHomescreen?history.replaceState("",a.document.title,
b.location.href+"#ath"):"smartURL"==this.options.detectHomescreen?history.replaceState("",a.document.title,b.location.href.replace(/(\/)?$/,"/ath$1")):history.replaceState("",a.document.title,b.location.href+(b.location.search?"&":"?")+"ath=")}if(!this.session.returningVisitor&&(this.session.returningVisitor=!0,this.updateSession(),this.options.skipFirstVisit)){this.doLog("Add to homescreen: not displaying callout because skipping first visit");return}this.options.privateModeOverride||c.hasLocalStorage?
(this.ready=!0,this.options.onInit&&this.options.onInit.call(this),this.options.autostart&&(this.doLog("Add to homescreen: autostart displaying callout"),this.show())):this.doLog("Add to homescreen: not displaying callout because browser is in private mode")}else this.doLog("Add to homescreen: not displaying callout because not a valid location")}else this.doLog("Add to homescreen: not displaying callout because device not supported")};c.Class.prototype={events:{load:"_delayedShow",error:"_delayedShow",
orientationchange:"resize",resize:"resize",scroll:"resize",click:"remove",touchmove:"_preventDefault",transitionend:"_removeElements",webkitTransitionEnd:"_removeElements",MSTransitionEnd:"_removeElements"},handleEvent:function(a){var c=this.events[a.type];if(c)this[c](a)},show:function(e){if(this.options.autostart&&!h)setTimeout(this.show.bind(this),50);else if(this.shown)this.doLog("Add to homescreen: not displaying callout because already shown on screen");else{var d=Date.now(),f=this.session.lastDisplayTime;
if(!0!==e){if(!this.ready){this.doLog("Add to homescreen: not displaying callout because not ready");return}if(d-f<6E4*this.options.displayPace){this.doLog("Add to homescreen: not displaying callout because displayed recently");return}if(this.options.maxDisplayCount&&this.session.displayCount>=this.options.maxDisplayCount){this.doLog("Add to homescreen: not displaying callout because displayed too many times already");return}}this.shown=!0;this.session.lastDisplayTime=d;this.session.displayCount++;
this.updateSession();this.applicationIcon||(this.applicationIcon="ios"==c.OS?b.querySelector('head link[rel^=apple-touch-icon][sizes="152x152"],head link[rel^=apple-touch-icon][sizes="144x144"],head link[rel^=apple-touch-icon][sizes="120x120"],head link[rel^=apple-touch-icon][sizes="114x114"],head link[rel^=apple-touch-icon]'):b.querySelector('head link[rel^="shortcut icon"][sizes="196x196"],head link[rel^=apple-touch-icon]'));e="";"object"==typeof this.options.message&&c.language in this.options.message?
e=this.options.message[c.language][c.OS]:"object"==typeof this.options.message&&c.OS in this.options.message?e=this.options.message[c.OS]:this.options.message in c.intl?e=c.intl[this.options.message][c.OS]:""!==this.options.message?e=this.options.message:c.OS in c.intl[c.language]&&(e=c.intl[c.language][c.OS]);e="<p>"+e.replace(/%icon(?:\[([^\]]+)\])?/gi,function(a,c){return'<span class="ath-action-icon">'+(c?c:"icon")+"</span>"});NaN;this.viewport=b.createElement("div");this.viewport.className="ath-viewport";
this.options.modal&&(this.viewport.className+=" ath-modal");this.options.mandatory&&(this.viewport.className+=" ath-mandatory");this.viewport.style.position="absolute";this.element=b.createElement("div");this.element.className="ath-container ath-"+c.OS+" ath-"+c.OS+(c.OSVersion+"").substr(0,1)+" ath-"+(c.isTablet?"tablet":"phone");this.element.style.cssText="-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0s;-webkit-transition-timing-function:ease-out;transition-property:transform,opacity;transition-duration:0s;transition-timing-function:ease-out;";
this.element.style.webkitTransform="translate3d(0,-"+a.innerHeight+"px,0)";this.element.style.transform="translate3d(0,-"+a.innerHeight+"px,0)";this.options.icon&&this.applicationIcon&&(this.element.className+=" ath-icon",this.img=b.createElement("img"),this.img.className="ath-application-icon",this.img.addEventListener("load",this,!1),this.img.addEventListener("error",this,!1),this.img.src=this.applicationIcon.href,this.element.appendChild(this.img));this.element.innerHTML+=e;this.viewport.style.left=
"-99999em";this.viewport.appendChild(this.element);this.container.appendChild(this.viewport);this.img?this.doLog("Add to homescreen: not displaying callout because waiting for img to load"):this._delayedShow()}},_delayedShow:function(a){setTimeout(this._show.bind(this),1E3*this.options.startDelay+500)},_show:function(){var c=this;this.updateViewport();a.addEventListener("resize",this,!1);a.addEventListener("scroll",this,!1);a.addEventListener("orientationchange",this,!1);this.options.modal&&b.addEventListener("touchmove",
this,!0);this.options.mandatory||setTimeout(function(){c.element.addEventListener("click",c,!0)},1E3);setTimeout(function(){c.element.style.webkitTransitionDuration="1.2s";c.element.style.transitionDuration="1.2s";c.element.style.webkitTransform="translate3d(0,0,0)";c.element.style.transform="translate3d(0,0,0)"},0);this.options.lifespan&&(this.removeTimer=setTimeout(this.remove.bind(this),1E3*this.options.lifespan));this.options.onShow&&this.options.onShow.call(this)},remove:function(){clearTimeout(this.removeTimer);
this.img&&(this.img.removeEventListener("load",this,!1),this.img.removeEventListener("error",this,!1));a.removeEventListener("resize",this,!1);a.removeEventListener("scroll",this,!1);a.removeEventListener("orientationchange",this,!1);b.removeEventListener("touchmove",this,!0);this.element.removeEventListener("click",this,!0);this.element.addEventListener("transitionend",this,!1);this.element.addEventListener("webkitTransitionEnd",this,!1);this.element.addEventListener("MSTransitionEnd",this,!1);this.element.style.webkitTransitionDuration=
"0.3s";this.element.style.opacity="0"},_removeElements:function(){this.element.removeEventListener("transitionend",this,!1);this.element.removeEventListener("webkitTransitionEnd",this,!1);this.element.removeEventListener("MSTransitionEnd",this,!1);this.container.removeChild(this.viewport);this.shown=!1;this.options.onRemove&&this.options.onRemove.call(this)},updateViewport:function(){if(this.shown){this.viewport.style.width=a.innerWidth+"px";this.viewport.style.height=a.innerHeight+"px";this.viewport.style.left=
a.scrollX+"px";this.viewport.style.top=a.scrollY+"px";var e=b.documentElement.clientWidth;this.orientation=e>b.documentElement.clientHeight?"landscape":"portrait";var d="ios"==c.OS?"portrait"==this.orientation?screen.width:screen.height:screen.width;this.scale=screen.width>e?1:d/a.innerWidth;this.element.style.fontSize=this.options.fontSize/this.scale+"px"}},resize:function(){clearTimeout(this.resizeTimer);this.resizeTimer=setTimeout(this.updateViewport.bind(this),100)},updateSession:function(){!1!==
c.hasLocalStorage&&localStorage&&localStorage.setItem(this.options.appID,JSON.stringify(this.session))},clearSession:function(){this.session=y;this.updateSession()},getItem:function(a){try{if(!localStorage)throw Error("localStorage is not defined");return localStorage.getItem(a)}catch(b){c.hasLocalStorage=!1}},optOut:function(){this.session.optedout=!0;this.updateSession()},optIn:function(){this.session.optedout=!1;this.updateSession()},clearDisplayCount:function(){this.session.displayCount=0;this.updateSession()},
_preventDefault:function(a){a.preventDefault();a.stopPropagation()}};a.addToHomescreen=c})(window,document);$(document).bind("mobileinit",function(){$.mobile.ajaxEnabled=!1;$.autoInitializePage=!0});
function showFooterMessage(a){"undefined"!=a.status?"success"==a.status?$("prefooter > .container").html('<p style="background: #128c44; color: #fff; padding: 20px;><span class="circle-ok"><span class="glyphicon glyphicon-ok"></span></span>'+a.mess+"</p>"):"alert"==a.status&&$("prefooter > .container").html('<p style="background: #fcaa57; color: #fff; padding: 20px;"><span class="circle-alert"><span>!</span></span>'+a.mess+"</p>"):($("prefooter > .container").html('<p style="">'+a.mess+"</p>"),$("prefooter > .container p").css("background",
a.clr),$("prefooter > .container p").css("color",a.clrT),$("prefooter > .container p").css("padding","20px"));$("prefooter").show();$("prefooter").delay(a.anim_a).fadeOut(a.anim_b,function(){$("prefooter").hide();a.onFinish&&eval(a.onFinish)})}
function appendFooterMessage(a){"undefined"!=a.status?"success"==a.status?$("prefooter > .container").append('<p style="background: #128c44; color: #fff; padding: 20px;><span class="circle-ok"><span class="glyphicon glyphicon-ok"></span></span>'+a.mess+"</p>"):"alert"==a.status&&$("prefooter > .container").append('<p style="background: #fcaa57; color: #fff; padding: 20px;><span class="circle-alert"><span>!</span></span>'+a.mess+"</p>"):($("prefooter > .container").append('<p style="">'+a.mess+"</p>"),
$("prefooter > .container p").css("background",a.clr),$("prefooter > .container p").css("color",a.clrT),$("prefooter > .container p").css("padding","20px"));$("prefooter").show().delay(1700);$("prefooter").delay(a.anim_a).fadeOut(a.anim_b,function(){$("prefooter").hide();a.onFinish&&eval(a.onFinish)})}
$(document).ready(function(){$("prefooter").hide();$(".int_less_publish").change(function(){var a=$("form#int_lesson_form").serialize();$.ajax({url:"/ajax/interactive_lessons_ajax/save_publish/",dataType:"json",type:"POST",data:a,success:function(a){}})});$("a.template_id").click(function(a){a.preventDefault();a=$(this).attr("id").replace("template_","");$("div.ui-controlgroup-controls").find("a.active_template").removeClass("active_template");$(this).addClass("active_template");$("input#tmpl_id").val(a)});
var a=$("input#tmpl_id").val();""!==a&&$("#template_"+a).addClass("active_template");$(".add_question a").on("click",function(a){a.preventDefault();var d=$(".hidden.question_box:first").clone(!0,!0);a=$("input.subject_id").val();var c=$("input.module_id").val(),e=$("input.lesson_id").val();$("input.int_les_id").val();var f=$("input.int_assessment_id").val();$("#questions_wrap").append(d);d=parseInt($("#questions_wrap .question_box").last().index());$("#questions_wrap .question_box").last().find("input.question_text").attr("name",
"questions["+d+"][question_text]");$("#questions_wrap .question_box").last().find("input.question_id").attr("name","questions[question]["+d+"][question_id]");$("#questions_wrap .question_box").last().find("input.resource_id").attr("name","questions["+d+"][question_resource_id]");$("#questions_wrap .question_box").last().find("a.add_q_ressource").attr("href","/c1/index/question/"+d+"/"+a+"/"+c+"/"+e+"/"+f);$(".question_box").last().removeClass("hidden")});$(".add_option").on("click",function(a){a.preventDefault();
var d=$(this).parent().parent().find("input.add_option_text");a=d.val();$(d).val("");d=$(this).parent().parent().parent().find(".q_options_list").children().length;if(10>=d){var c=$(this).parent().parent().parent().find(".hidden.q_option").clone();$.each(c.find("select"),function(a,c){var b=$(this);a=b.attr("id");a++;b.attr("id",a);b.slider();b.slider("refresh");b.parent().find(".ui-slider").last().remove()});var e=$(this).parent().parent().parent().find(".q_options_list");$(e).append(c);$(this).parent().parent().parent().find(".q_options_list .q_option:last input.option_text").val(a);
a=parseInt($(this).parent().parent().parent().parent(".question_box").index());$(this).parent().parent().parent().find(".q_options_list .q_option:last input.option_text").attr("name","questions["+a+"][answers]["+(parseInt(d)-1)+"][answer_text]");$(this).parent().parent().parent().find(".q_options_list .q_option:last select.answer").attr("name","questions["+a+"][answers]["+(parseInt(d)-1)+"][answer_true]");$(this).parent().parent().parent().find(".q_options_list .q_option:last").removeClass("hidden")}});
$(document).on("click",".delete_option",function(a){a.preventDefault();$(this).parent().parent(".q_option").remove()});$("a.add_q_ressource").click(function(a){a.preventDefault();a=$("form#int_assessment_form").serialize();var d=$(this).attr("href");$.ajax({url:"/ajax/int_assessment_ajax/save_temp_data/",dataType:"json",type:"POST",data:a,success:function(a){a.success&&(window.location.href=d)}})});$(".colorbox").colorbox({photo:!0,maxWidth:"100%",maxHeight:"100%",onCleanup:function(){$("a.cdownload").remove()},
onClosed:function(){$("a.cdownload").remove()}});"student"==user_type?intervalRes=setInterval(function(){checkRunningLesson()},3E3):"teacher"==user_type?(intervalRes=setInterval(function(){checkRunningLessonForTeacher()},5E3),setInterval(function(){checkOnlineStudents()},5E3)):-1!=window.location.href.indexOf("/e5_teacher")&&-1!=window.location.href.indexOf("/running")&&setInterval(function(){checkOnlineStudents()},5E3);$(".add_option_text").keypress(function(a){if(13==a.which)return a=$(this).parent().parent().parent().find(".add_option"),
$(a).click(),!1});$.each($("textarea[data-autoresize]"),function(){var a=this.offsetHeight-this.clientHeight;$(this).on("keyup input",function(){$(this).css("height","auto").css("height",this.scrollHeight+a);0==$(this).val().length&&$(this).css({height:"62px"})}).removeAttr("data-autoresize")});$("textarea").each(function(){$(this).outerHeight()}).on("keyup",function(){var a=this.scrollHeight,d=$(this).outerHeight();a+2>d&&$(this).scrollTop(0).css({height:a+2+"px"})});$(".keywords").each(function(){var a=
this,d=$(a),c=$("> input",a),e=c.val();ke=e.slice(1,-1);var e=ke.split(","),f=function(e,d){if(e){if(!d){var f=c.val(),f=f.split(",");f.push(e);f=f.join();f=f.toString();f=f.replace(/[\])}[{(]/g,"");c.val(f)}$(".input-container",a).before('<div class="keyword"><span>'+e+'</span><a class="remove"></a></div>');$(".list").html("")}};c.css({display:"none"});d.append('<div class="input-container"><input value="" type="text"><div><div class="list"></div>');e.length&&$.each(e,function(a,c){f(c,!0)});d.on("keyup",
".input-container input",function(){var a=$(this).val(),c=d.data("to");c&&clearTimeout(c);c=!1;a&&(c=setTimeout(function(){$.ajax({url:"/c2/suggestKeywords",data:{q:a},dataType:"json",success:function(a){var c="";$.each(a,function(a,b){c+="<li>"+b+"</li>"});$(".list").html("<ul>"+c+"</ul>")}})},200),d.data("to",c))}).on("keydown",".input-container input",function(a){var c=$(this).val();13==a.keyCode&&c&&($(this).val(""),f(c))}).on("click",".list li",function(){var c=$(this).text();c&&($(".input-container input",
a).val(""),f(c))}).on("click",".keyword .remove",function(){var a=c.val(),a=a.split(","),a=a.toString(),a=a.replace(/[\])}[{(]/g,""),a=a.split(","),b=$(this).parent().index()-2;a.splice(b,1);c.val(a);$(this).parent().remove();$(".list").html("")});$(document).click(function(a){var c=$(".input-container input").val();""!=c&&(f(c),$(".input-container input").val(""));void 0===$(a.target).closest("li")[0]&&$(".list").html("")})});$(".keystudents").each(function(){var a=this,d=$(a),c=$("> input#keystudents",
a),e=c.val();kest1=e.slice(1,-1);var e=kest1.split(","),f=function(e,d,f){e&&(f||(f=c.val(),c.val(f+","+d)),$(".input-container",a).before('<div class="keystudent"><span>'+e+'</span><a rel="'+d+'" class="remove"></a></div>'),$(".list").html(""))};d.append('<div class="input-container"><input value="" type="text"><div><div class="list"></div>');d.on("keyup",".input-container input",function(){var a=$(this).val(),c=d.data("to");c&&clearTimeout(c);c=!1;a&&(c=setTimeout(function(){$.ajax({url:"/f2c_teacher/suggestKeystudents",
data:{q:a},dataType:"json",success:function(a){var c="";$.each(a,function(a,b){c+='<li rel="'+a+'">'+b+"</li>"});$(".list").html("<ul>"+c+"</ul>");updateSlideHeight(".step.s3")}})},200),d.data("to",c))}).on("keydown",".input-container input",function(a){var c=$(this).val(),b=$(this).attr("rel");13==a.keyCode&&c&&($(this).val(""),f(c,b))}).on("click",".list li",function(){var c=$(this).text(),e=$(this).attr("rel");c&&($(".input-container input",a).val(""),f(c,e))}).on("click",".keystudent .remove",
function(){var a=c.val(),a=a.split(","),a=a.toString(),a=a.replace(/[\])}[{(]/g,""),a=a.split(","),b=$(this).parent().index()-2;a.splice(b,1);c.val(a);$(this).parent().remove();$(".list").html("")});$(document).click(function(a){var c=$(".input-container input").val();""!=c&&(f(c),$(".input-container input").val(""));void 0===$(a.target).closest("li")[0]&&$(".list").html("")})});$("select").each(function(){$(this).hasClass("customize")||($(this).addClass("customize"),$(this).after('<span class="select"><span class="v">'+
$("option:selected",this).text()+'</span><span class="a"></span></span>'),$(this).appendTo($(this).next()))});$("span.select select").on("change",function(){$(this).closest(".select").find(".v").text($("option:selected",this).text())})});$(window).load(function(){bg_fix()});$(window).resize(function(){bg_fix()});
function initPublishButton(a,b,d,c){$(a).each(function(){$("input[name="+b+"]").size()&&"1"==$("input[name="+b+"]").val()&&$(this).addClass("active").text(d);$(this).off("click");$(this).on("click",function(){0==disablepublishandsave&&$("input[name="+b+"]").size()&&("1"==$("input[name="+b+"]").val()?($("input[name="+b+"]").val("0"),$(this).removeClass("active").text(c)):($("input[name="+b+"]").val("1"),$(this).addClass("active").text(d)))})})}
function bg_fix(){$(".blue_gradient_bg").height()-parseInt($(".blue_gradient_bg").css("margin-top"))-$("footer").height()-parseInt($("footer").css("border-top-width"))<$(window).height()&&$(".blue_gradient_bg").css("min-height",parseInt($(window).height()-$("footer").height()-parseInt($("footer").css("border-top-width"))-parseInt($(".blue_gradient_bg").css("margin-top")))+"px");$(".red_gradient_bg").height()<$(window).height()&&$(".red_gradient_bg").css("min-height",parseInt($(window).height()-42-
$(".footer_menu").height())+"px");$(".rred_gradient_bg").height()<$(window).height()&&$(".rred_gradient_bg").css("min-height",parseInt($(window).height())+"px");$(".ui-header>.ui-btn-right").css("left",parseInt($(".ui-header").width()/2-$(".ui-header>.ui-btn-right").width()/2)+"px");768<$(window).width()?$(".left_menu_pic").css("height",$(".pic_e5").height()+"px"):$(".left_menu_pic").css("height","auto")}
function getPathnameParts(){var a=window.location.pathname;"/"==a.substr(0,1)&&(a=a.substr(1));return a.split("/")}
function checkRunningLesson(){set_logout();$.ajax({url:"/ajax/running_lesson/index/"+user_id,dataType:"json",success:function(a){if(void 0!==a.subject_id&&void 0!==a.module_id&&void 0!==a.lesson_id&&void 0!==a.secret)if(-1==window.location.href.indexOf("/running")){var b=function(){var c=((new Date).getTime()-d)/1E3;5>c?$("#dialog_title").html('Taking you to interactive lesson: <br /><span style="color:#004400;text-shadow:none;font-weight:bold;font-size:58px;font-style: italics;">'+a.lesson_title+
"</span><br /> with "+a.teacher_first_name+" "+a.teacher_last_name+" in "+Math.floor(5-c)+" seconds..."):(clearInterval(intervalRes),window.location.href="/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/")};clearInterval(intervalRes);$("#staticheader").css("background-color","#009900");$(".gray_top_field").css("background-color","#004400");$("#dialog_title").html("title");$("#dialog").show();var d=(new Date).getTime();b();intervalRes=setInterval(function(){b()},800)}else-1==
window.location.href.indexOf("/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/")&&(window.location.href="/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/");else-1!=window.location.href.indexOf("/running")&&void 0!==a.free_preview&&(window.location.href="/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1")},error:function(a){}})}
function checkRunningLessonForTeacher(){set_logout();$.ajax({url:"/ajax/running_lesson_t/index/"+user_id,dataType:"json",success:function(a){var b=a.running_page-1;if(void 0!==a.subject_id&&void 0!==a.module_id&&void 0!==a.lesson_id&&void 0!==a.running_page&&-1==window.location.href.indexOf("/running")){var d=function(){var e=((new Date).getTime()-c)/1E3;5>e?$("#dialog_title").html('Returning you to your open interactive lesson: <br /><span style="color:#004400;text-shadow:none;font-weight:bold;font-size:58px;font-style: italics;">'+
a.lesson_title+"</span><br /> in "+Math.floor(5-e)+" seconds..."):(clearInterval(intervalRes),window.location.href="/e5_teacher/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/"+b)};clearInterval(intervalRes);$("#staticheader").css("background-color","#009900");$(".gray_top_field").css("background-color","#004400");$("#dialog_title").html("title");$("#dialog").show();var c=(new Date).getTime();d();intervalRes=setInterval(function(){d()},800)}}})}
function checkOnlineStudents(){var a=getPathnameParts()[4];$.ajax({url:"/ajax/online_students/index/"+a,dataType:"json",success:function(a){$("#studentlist .student.online1").removeClass("online1").addClass("online0");for(index in a)$("#studentlist #student_"+a[index]).removeClass("online0").addClass("online1")}});var b=new Date,a=b.getHours();10>a&&(a="0"+a);b=b.getMinutes();10>b&&(b="0"+b);$("#student_list #clock").html(a+":"+b)}
function change_res(a){1==a?($("#all_resources").addClass("hidden"),$("#my_resources").removeClass("hidden"),$("#all_resources_button").removeClass("hidden"),$("#my_resources_button").addClass("hidden")):($("#my_resources").addClass("hidden"),$("#all_resources").removeClass("hidden"),$("#all_resources_button").addClass("hidden"),$("#my_resources_button").removeClass("hidden"))}
function loadTinymce(){tinymce.init({selector:"textarea.mce-toolbar-grp",theme:"modern",mode:"exact",plugins:"pagebreak table save charmap media contextmenu paste directionality noneditable visualchars nonbreaking spellchecker template",toolbar:" bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link | table |",menu:{},setup:function(a){a.on("init",function(){this.getDoc().body.style.fontSize="14px";this.getDoc().body.style.letterSpacing="0.8px";this.getDoc().body.style.lineHeight=
"24px"});a.on("change",function(){tinymce.triggerSave()});a.on("submit",function(b){a.getElement().value=a.getContent()})},contextmenu:"cut copy paste",menubar:!0,statusbar:!1,toolbar_item_size:"normal"})}
function loadTinymceStudent(){tinymce.init({selector:"textarea.mce-toolbar-grp",theme:"modern",readonly:1,mode:"exact",plugins:"",toolbar:"|",menu:{},setup:function(a){a.on("init",function(){this.getDoc().body.style.fontSize="14px";this.getDoc().body.style.letterSpacing="0.8px";this.getDoc().body.style.lineHeight="24px"});a.on("change",function(){tinymce.triggerSave()});a.on("submit",function(b){a.getElement().value=a.getContent()})},contextmenu:"cut copy paste",menubar:!0,statusbar:!1,toolbar_item_size:"normal"})}
function loadTinymceSlider(){tinymce.init({selector:"textarea.mce-toolbar-grp",theme:"modern",mode:"exact",plugins:"pagebreak table save charmap media contextmenu paste directionality noneditable visualchars nonbreaking spellchecker template",toolbar:" bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link | table |",menu:{},setup:function(a){a.on("init",function(){this.getDoc().body.style.fontSize="14px";this.getDoc().body.style.letterSpacing="0.8px";
this.getDoc().body.style.lineHeight="24px";updateSlideHeight(".step.s1")});a.on("change",function(){tinymce.triggerSave()})},contextmenu:"cut copy paste",menubar:!0,statusbar:!1,toolbar_item_size:"normal"})}
function validate(){var a=[];$("input, select, textarea").each(function(b,d){var c=$(this);if($(c).hasClass("required"))if(""==c.val().trim()||void 0===c.val()){c.css({border:"1px dashed red"});var e=c.attr("data-validation-required-message");c.prev("span").attr("id","scrolled");c.prev("span").html("").removeClass("tip2").addClass("tip2").append(e).css({display:"block"});$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300);c.prev("span").removeAttr("scrolled");a[0]=1}else void 0!==
c.attr("minlength")&&c.val().length<c.attr("minlength")&&(c.css({border:"1px dashed red"}),c.prev("span").attr("id","scrolled"),e="This must be at least "+c.attr("minlength")+" characters long",c.prev("span").html("").removeClass("tip2").addClass("tip2").append(e).css({display:"block"}),$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300),c.prev("span").removeAttr("scrolled"),a[0]=1);c.on("focus",function(){c.prev("span.tip2").fadeOut("3333");c.css({"border-color":"#c8c8c8",
"border-width":"1px","border-style":"solid"})})});0===a.length?($("input:text, textarea").each(function(){$(this).val(this.value)}),a=[],$(".hidden_submit").click()):a=[]}
function validate_slider(a){var b=[];1==a&&$("input, select").each(function(a,c){var e=$(this);if($(e).hasClass("required"))if(""==e.val().trim()||void 0===e.val()){e.css({border:"1px dashed red"});var f=e.attr("data-validation-required-message");e.prev("span").attr("id","scrolled");e.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"});e.prev("span").removeAttr("scrolled");b[a]=1}else void 0!==e.attr("minlength")&&e.val().length<e.attr("minlength")&&(e.css({border:"1px dashed red"}),
e.prev("span").attr("id","scrolled"),f="This must be at least "+e.attr("minlength")+" characters long",e.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"}),e.prev("span").removeAttr("scrolled"),b[a]=1);e.on("focus",function(){e.prev("span.tip2").fadeOut("3333");e.css({"border-color":"#c8c8c8","border-width":"1px","border-style":"solid"})})});if(0===b.length)return $("input:text, textarea").each(function(){$(this).val(this.value)}),b=[],0;b=[];return 1}
function validate_as_draft(a){var b=[],d=$("#assignment_title");if(1==a){if(""==d.val().trim()||void 0===d.val())d.css({border:"1px dashed red"}),a=d.attr("data-validation-required-message"),d.prev("span").attr("id","scrolled"),d.prev("span").html("").removeClass("tip2").addClass("tip2").append(a).css({display:"block"}),d.prev("span").removeAttr("scrolled"),b[0]=1;d.on("focus",function(){d.prev("span.tip2").fadeOut("3333");d.css({"border-color":"#c8c8c8","border-width":"1px","border-style":"solid"})})}if(0===
b.length)return b=[],0;b=[];return 1}
function validate_to_publish(a){var b=1;a=$(".pdatepicker").datepicker("getDate").getTime();864E5>$(".datepicker").datepicker("getDate").getTime()-a&&(opdate=$("#publish_date"),oddate=$("#deadline_date"),oddate.css({border:"1px dashed #fcaa57"}),a=oddate.attr("data-validation-required-message"),oddate.prev("span").attr("id","scrolled"),oddate.prev("span").html("").removeClass("tip3").addClass("tip3").append(a).css({display:"block"}),oddate.prev("span").removeAttr("scrolled"),b=1);"offline"!=$("#grade_type").val()&&
(0<$("#grade_categories_holder tr").length?(""!=$(".add_cat #catg").val().trim()?$(".add_cat #mark").addClass("required"):$(".add_cat #mark").removeClass("required"),$("#grade_categories_holder .catg").addClass("required"),$("#grade_categories_holder .mark").addClass("required")):""!=$(".add_cat #catg").val().trim()?$(".add_cat #mark").addClass("required"):$(".add_cat #mark").removeClass("required"));$("input, select").each(function(a,c){var e=$(this);if($(e).hasClass("required"))if(""==e.val().trim()||
void 0===e.val()){e.css({border:"1px dashed red"});var f=e.attr("data-validation-required-message");e.prev("span").attr("id","scrolled");e.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"});e.prev("span").removeAttr("scrolled");b=0}else void 0!==e.attr("minlength")&&e.val().length<e.attr("minlength")&&(e.css({border:"1px dashed red"}),e.prev("span").attr("id","scrolled"),f="This must be at least "+e.attr("minlength")+" characters long",e.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"}),
e.prev("span").removeAttr("scrolled"),b=0);e.on("focus",function(){e.prev("span.tip2").fadeOut("3333");e.prev("span.tip3").fadeOut("3333");e.css({"border-color":"#c8c8c8","border-width":"1px","border-style":"solid"})})});1>$(".classes:checked").length&&""==$("#keystudents").val()&&($(".table4").css({border:"1px dashed red"}),a="You must choose at least one class!",$(".table4").prev("span").attr("id","scrolled"),$(".table4").prev("span").html("").removeClass("tip2").addClass("tip2").append(a).css({display:"block"}),
$(".table4").prev("span").removeAttr("scrolled"),b=0,$(".classes").on("click",function(){$(".table4").prev("span.tip2").fadeOut("3333");$(".table4").css({"border-color":"#c8c8c8","border-width":"1px","border-style":"solid"})}));"offline"!=$("#grade_type").val()&&($("#catg").removeClass("required"),$("#mark").removeClass("required"));return b}
function validate_resource(){var a=[];$("input, select, textarea").each(function(b,d){var c=$(this);if($(c).hasClass("required"))if(""==c.val().trim()||void 0===c.val()){c.css({border:"1px dashed red"});var e=c.attr("data-validation-required-message");c.prev("span").attr("id","scrolled");c.prev("span").html("").removeClass("tip2").addClass("tip2").append(e).css({display:"block"});$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300);c.prev("span").removeAttr("scrolled");
a[b]=1}else void 0!==c.attr("minlength")&&c.val().length<c.attr("minlength")&&(c.css({border:"1px dashed red"}),c.prev("span").attr("id","scrolled"),e="This must be at least "+c.attr("minlength")+" characters long",c.prev("span").html("").removeClass("tip2").addClass("tip2").append(e).css({display:"block"}),$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300),c.prev("span").removeAttr("scrolled"),a[b]=1);c.on("focus",function(){c.prev("span.tip2").fadeOut("3333");c.css({"border-color":"#c8c8c8",
"border-width":"1px","border-style":"solid"})})});0===a.length&&($(".red_btn").fadeOut(100),$("#saveform").submit())}
$(function(){$(document).on("click",".up_down",function(a){a=$(this).next(".collapsed");if($(a).hasClass("hidden"))return!1;$(a).is(":visible")?($(this).next(".collapsed").slideUp(400),$(this).css({"background-position":"0 1px"}),$.session.set($(this).next().attr("id"),"none")):($(this).next(".collapsed").slideDown(400,function(){}),$(this).css({"background-position":"0 -36px"}),$.session.set($(this).next().attr("id"),"block"))});$(document).on("click",".acc_title",function(a){a=$(this).next().next(".collapsed");
if($(a).hasClass("hidden"))return!1;$(a).is(":visible")?($(this).next().next(".collapsed").slideUp(400),$(this).next(".up_down").css({"background-position":"0 1px"}),$.session.set($(this).next().next().attr("id"),"none")):($(this).next().next(".collapsed").slideDown(400,function(){}),$(this).next(".up_down").css({"background-position":"0 -36px"}),$.session.set($(this).next().next().attr("id"),"block"))});$(".up_down_homework").click(function(){var a=$(this).next(".collapsed");$(a).is(":visible")?
($(this).next(".collapsed").slideUp(400),$(this).css({"background-position":"0 1px"})):($(this).next(".collapsed").slideDown(400,function(){}),$(this).css({"background-position":"0 -30px"}))});$(".assignment").show()});var timer=0,timer1=0,set_timer=!1,logout_sec=10,activity=72E5;function set_logout(){0==set_timer&&(set_timer=!0,timer=setInterval("auto_logout()",activity),$(".dismiss-logout").on("click",function(){clearInterval(timer1);reset_logout()}))}
function reset_logout(){0!=timer&&(clearInterval(timer),timer=setInterval("auto_logout()",activity),logout_sec=10,$("#dialog_logout .logout_sec").text(logout_sec))}function auto_logout(){$("#dialog_logout").modal("show");timer1=setInterval("auto_logout2()",1E3)}function auto_logout2(){logout_sec--;$("#dialog_logout .logout_sec").text(logout_sec);1>logout_sec&&(window.location.href="/logout/")}
(function(a){a.session={_id:null,_cookieCache:void 0,_init:function(){window.name||(window.name=Math.random());this._id=window.name;this._initCache();var a=(new RegExp(this._generatePrefix()+"=([^;]+);")).exec(document.cookie);if(a&&document.location.protocol!==a[1]){this._clearSession();for(var d in this._cookieCache)try{window.sessionStorage.setItem(d,this._cookieCache[d])}catch(c){}}document.cookie=this._generatePrefix()+"="+document.location.protocol+";path=/;expires="+(new Date((new Date).getTime()+
12E4)).toUTCString()},_generatePrefix:function(){return"__session:"+this._id+":"},_initCache:function(){var a=document.cookie.split(";");this._cookieCache={};for(var d in a){var c=a[d].split("=");(new RegExp(this._generatePrefix()+".+")).test(c[0])&&c[1]&&(this._cookieCache[c[0].split(":",3)[2]]=c[1])}},_setFallback:function(a,d,c){var e=this._generatePrefix()+a+"="+d+"; path=/";c&&(e+="; expires="+(new Date(Date.now()+12E4)).toUTCString());document.cookie=e;this._cookieCache[a]=d;return this},_getFallback:function(a){this._cookieCache||
this._initCache();return this._cookieCache[a]},_clearFallback:function(){for(var a in this._cookieCache)document.cookie=this._generatePrefix()+a+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;";this._cookieCache={}},_deleteFallback:function(a){document.cookie=this._generatePrefix()+a+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;";delete this._cookieCache[a]},get:function(a){return window.sessionStorage.getItem(a)||this._getFallback(a)},set:function(a,d,c){try{window.sessionStorage.setItem(a,
d)}catch(e){}this._setFallback(a,d,c||!1);return this},"delete":function(a){return this.remove(a)},remove:function(a){try{window.sessionStorage.removeItem(a)}catch(d){}this._deleteFallback(a);return this},_clearSession:function(){try{window.sessionStorage.clear()}catch(a){for(var b in window.sessionStorage)window.sessionStorage.removeItem(b)}},clear:function(){this._clearSession();this._clearFallback();return this}};a.session._init()})(jQuery);
(function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()})(this,function(){function a(a,c){var b,e=document.createElement(a||"div");for(b in c)e[b]=c[b];return e}function b(a){for(var c=1,b=arguments.length;b>c;c++)a.appendChild(arguments[c]);return a}function d(a,c,b,e){var d=["opacity",c,~~(100*a),b,e].join("-");b=.01+b/e*100;e=Math.max(1-(1-a)/c*(100-b),a);var f=p.substring(0,p.indexOf("Animation")).toLowerCase();return r[d]||(C.insertRule("@"+
(f&&"-"+f+"-"||"")+"keyframes "+d+"{0%{opacity:"+e+"}"+b+"%{opacity:"+a+"}"+(b+.01)+"%{opacity:1}"+(b+c)%100+"%{opacity:"+a+"}100%{opacity:"+e+"}}",C.cssRules.length),r[d]=1),d}function c(a,c){var b,e,d=a.style;c=c.charAt(0).toUpperCase()+c.slice(1);for(e=0;m.length>e;e++)if(b=m[e]+c,void 0!==d[b])return b;return void 0!==d[c]?c:void 0}function e(a,b){for(var e in b)a.style[c(a,e)||e]=b[e];return a}function f(a){for(var c=1;arguments.length>c;c++){var b=arguments[c],e;for(e in b)void 0===a[e]&&(a[e]=
b[e])}return a}function g(a,c){return"string"==typeof a?a:a[c%a.length]}function h(a){this.opts=f(a||{},h.defaults,y)}function l(){function c(b,e){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}C.addRule(".spin-vml","behavior:url(#default#VML)");h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:m+" "+m,coordorigin:-l+" "+-l}),{width:m,height:m})}function p(a,h,m){b(r,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),
{width:l,height:d.width,left:d.radius,top:-d.width>>1,filter:m}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var h,l=d.length+d.width,m=2*l;h=2*-(d.width+d.length)+"px";var r=e(f(),{position:"absolute",top:h,left:h});if(d.shadow)for(h=1;d.lines>=h;h++)p(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;d.lines>=h;h++)p(h);return b(a,r)};h.prototype.opacity=function(a,c,b,e){a=a.firstChild;e=e.shadow&&e.lines||0;a&&a.childNodes.length>
c+e&&(a=a.childNodes[c+e],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=b))}}var p,m=["webkit","Moz","ms","O"],r={},C=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),y={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2E9,className:"spinner",top:"50%",left:"50%",position:"absolute"};h.defaults={};f(h.prototype,{spin:function(c){this.stop();var b=
this,d=b.opts,f=b.el=e(a(0,{className:d.className}),{position:d.position,width:0,zIndex:d.zIndex});if(d.radius+d.length+d.width,e(f,{left:d.left,top:d.top}),c&&c.insertBefore(f,c.firstChild||null),f.setAttribute("role","progressbar"),b.lines(f,b.opts),!p){var g,h=0,l=(d.lines-1)*(1-d.direction)/2,m=d.fps,r=m/d.speed,y=(1-d.opacity)/(r*d.trail/100),C=r/d.lines;(function T(){h++;for(var a=0;d.lines>a;a++)g=Math.max(1-(h+(d.lines-a)*C)%r*y,d.opacity),b.opacity(f,a*d.direction+l,g,d);b.timeout=b.el&&
setTimeout(T,~~(1E3/m))})()}return b},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(c,f){function h(c,b){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:c,boxShadow:b,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*m+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var l,m=0,r=(f.lines-1)*(1-f.direction)/
2;f.lines>m;m++)l=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:p&&d(f.opacity,f.trail,r+m*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(l,e(h("#000","0 0 4px #000"),{top:"2px"})),b(c,b(l,h(g(f.color,m),"0 0 1px rgba(0,0,0,.1)")));return c},opacity:function(a,c,b){a.childNodes.length>c&&(a.childNodes[c].style.opacity=b)}});var K=e(a("group"),{behavior:"url(#default#VML)"});return!c(K,"transform")&&
K.adj?l():p=c(K,"animation"),h});
(function(a,b){"object"==typeof exports?module.exports=b(require("spin.js")):"function"==typeof define&&define.amd?define(["spin"],b):a.Ladda=b(a.Spinner)})(this,function(a){function b(b){if(void 0===b)return console.warn("Ladda button target must be defined."),void 0;b.querySelector(".ladda-label")||(b.innerHTML='<span class="ladda-label">'+b.innerHTML+"</span>");var d,g=b.querySelector(".ladda-spinner");g||(g=document.createElement("span"),g.className="ladda-spinner");b.appendChild(g);var h,l={start:function(){if(!d){var c,
l=b.offsetHeight;0===l&&(l=parseFloat(window.getComputedStyle(b).height));32<l&&(l*=.8);b.hasAttribute("data-spinner-size")&&(l=parseInt(b.getAttribute("data-spinner-size"),10));b.hasAttribute("data-spinner-color")&&(c=b.getAttribute("data-spinner-color"));l*=.2;d=new a({color:c||"#fff",lines:12,radius:l,length:.6*l,width:7>l?2:3,zIndex:"auto",top:"auto",left:"auto",className:""})}return b.setAttribute("disabled",""),b.setAttribute("data-loading",""),clearTimeout(h),d.spin(g),this.setProgress(0),
this},startAfter:function(a){return clearTimeout(h),h=setTimeout(function(){l.start()},a),this},stop:function(){return b.removeAttribute("disabled"),b.removeAttribute("data-loading"),clearTimeout(h),d&&(h=setTimeout(function(){d.stop()},1E3)),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(a){a=Math.max(Math.min(a,1),0);var c=b.querySelector(".ladda-progress");0===a&&c&&c.parentNode?c.parentNode.removeChild(c):(c||(c=document.createElement("div"),
c.className="ladda-progress",b.appendChild(c)),c.style.width=(a||0)*b.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),b.setAttribute("disabled",""),this},isLoading:function(){return b.hasAttribute("data-loading")},remove:function(){clearTimeout(h);b.removeAttribute("disabled","");b.removeAttribute("data-loading","");d&&(d.stop(),d=null);for(var a=0,g=c.length;g>a;a++)if(l===c[a]){c.splice(a,1);break}}};return c.push(l),l}function d(a){for(var c=
[],b=0;a.length>b;b++)c.push(a[b]);return c}var c=[];return{bind:function(a,c){c=c||{};var g=[];"string"==typeof a?g=d(document.querySelectorAll(a)):"object"==typeof a&&"string"==typeof a.nodeName&&(g=[a]);for(var h=0,l=g.length;l>h;h++)(function(){var a=g[h];if("function"==typeof a.addEventListener){var e=b(a),d=-1;a.addEventListener("click",function(){for(var b=!0,g,h=a;h.parentNode&&"FORM"!==h.tagName;)h=h.parentNode;g="FORM"===h.tagName?h:void 0;if(void 0!==g){for(var l=["input","textarea","select"],
h=[],t=0;l.length>t;t++)for(var q=g.getElementsByTagName(l[t]),F=0;q.length>F;F++)q[F].hasAttribute("required")&&h.push(q[F]);for(g=0;h.length>g;g++)""===h[g].value.replace(/^\s+|\s+$/g,"")&&(b=!1),"checkbox"!==h[g].type&&"radio"!==h[g].type||h[g].checked||(b=!1),"email"===h[g].type&&(b=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(h[g].value))}b&&(e.startAfter(1),"number"==typeof c.timeout&&(clearTimeout(d),d=setTimeout(e.stop,c.timeout)),"function"==typeof c.callback&&c.callback.apply(null,
[e]))},!1)}})()},create:b,stopAll:function(){for(var a=0,b=c.length;b>a;a++)c[a].stop()}}});
var qq=function(a){return{hide:function(){a.style.display="none";return this},attach:function(b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent&&a.attachEvent("on"+b,d);return function(){qq(a).detach(b,d)}},detach:function(b,d){a.removeEventListener?a.removeEventListener(b,d,!1):a.attachEvent&&a.detachEvent("on"+b,d);return this},contains:function(b){return a===b?!0:a.contains?a.contains(b):!!(b.compareDocumentPosition(a)&8)},insertBefore:function(b){b.parentNode.insertBefore(a,b);
return this},remove:function(){a.parentNode.removeChild(a);return this},css:function(b){null!==b.opacity&&"string"!==typeof a.style.opacity&&"undefined"!==typeof a.filters&&(b.filter="alpha(opacity="+Math.round(100*b.opacity)+")");qq.extend(a.style,b);return this},hasClass:function(b){return RegExp("(^| )"+b+"( |$)").test(a.className)},addClass:function(b){qq(a).hasClass(b)||(a.className+=" "+b);return this},removeClass:function(b){a.className=a.className.replace(RegExp("(^| )"+b+"( |$)")," ").replace(/^\s+|\s+$/g,
"");return this},getByClass:function(b){var d,c=[];if(a.querySelectorAll)return a.querySelectorAll("."+b);d=a.getElementsByTagName("*");qq.each(d,function(a,d){qq(d).hasClass(b)&&c.push(d)});return c},children:function(){for(var b=[],d=a.firstChild;d;)1===d.nodeType&&b.push(d),d=d.nextSibling;return b},setText:function(b){a.innerText=b;a.textContent=b;return this},clearText:function(){return qq(a).setText("")}}};
qq.log=function(a,b){if(window.console)if(b&&"info"!==b)if(window.console[b])window.console[b](a);else window.console.log("<"+b+"> "+a);else window.console.log(a)};qq.isObject=function(a){return null!==a&&a&&"object"===typeof a&&a.constructor===Object};qq.isFunction=function(a){return"function"===typeof a};qq.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)};qq.trimStr=function(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")};
qq.isFileOrInput=function(a){if(window.File&&a instanceof File)return!0;if(window.HTMLInputElement){if(a instanceof HTMLInputElement&&a.type&&"file"===a.type.toLowerCase())return!0}else if(a.tagName&&"input"===a.tagName.toLowerCase()&&a.type&&"file"===a.type.toLowerCase())return!0;return!1};qq.isBlob=function(a){return window.Blob&&"[object Blob]"===Object.prototype.toString.call(a)};
qq.isXhrUploadSupported=function(){var a=document.createElement("input");a.type="file";return void 0!==a.multiple&&"undefined"!==typeof File&&"undefined"!==typeof FormData&&"undefined"!==typeof(new XMLHttpRequest).upload};qq.isFolderDropSupported=function(a){return a.items&&a.items[0].webkitGetAsEntry};qq.isFileChunkingSupported=function(){return!qq.android()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)};
qq.extend=function(a,b,d){qq.each(b,function(c,b){d&&qq.isObject(b)?(void 0===a[c]&&(a[c]={}),qq.extend(a[c],b,!0)):a[c]=b})};qq.indexOf=function(a,b,d){if(a.indexOf)return a.indexOf(b,d);d=d||0;var c=a.length;for(0>d&&(d+=c);d<c;d+=1)if(a.hasOwnProperty(d)&&a[d]===b)return d;return-1};qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})};qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")};
qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")};qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")};qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")};qq.firefox=function(){return-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor};qq.windows=function(){return"Win32"===navigator.platform};qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")};
qq.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};qq.toElement=function(){var a=document.createElement("div");return function(b){a.innerHTML=b;b=a.firstChild;a.removeChild(b);return b}}();qq.each=function(a,b){var d,c;if(a)for(d in a)if(Object.prototype.hasOwnProperty.call(a,d)&&(c=b(d,a[d]),!1===c))break};
qq.obj2url=function(a,b,d){var c,e=[],f="&",g=function(a,c){var d=b?/\[\]$/.test(b)?b:b+"["+c+"]":c;"undefined"!==d&&"undefined"!==c&&e.push("object"===typeof a?qq.obj2url(a,d,!0):"[object Function]"===Object.prototype.toString.call(a)?encodeURIComponent(d)+"="+encodeURIComponent(a()):encodeURIComponent(d)+"="+encodeURIComponent(a))};if(!d&&b)f=/\?/.test(b)?/\?$/.test(b)?"":"&":"?",e.push(b),e.push(qq.obj2url(a));else if("[object Array]"===Object.prototype.toString.call(a)&&"undefined"!==typeof a)for(c=
-1,d=a.length;c<d;c+=1)g(a[c],c);else if("undefined"!==typeof a&&null!==a&&"object"===typeof a)for(c in a)a.hasOwnProperty(c)&&g(a[c],c);else e.push(encodeURIComponent(b)+"="+encodeURIComponent(a));return b?e.join(f):e.join(f).replace(/^&/,"").replace(/%20/g,"+")};qq.obj2FormData=function(a,b,d){b||(b=new FormData);qq.each(a,function(a,e){a=d?d+"["+a+"]":a;qq.isObject(e)?qq.obj2FormData(e,b,a):qq.isFunction(e)?b.append(a,e()):b.append(a,e)});return b};
qq.obj2Inputs=function(a,b){var d;b||(b=document.createElement("form"));qq.obj2FormData(a,{append:function(a,e){d=document.createElement("input");d.setAttribute("name",a);d.setAttribute("value",e);b.appendChild(d)}});return b};qq.setCookie=function(a,b,d){var c=new Date,e="";d&&(c.setTime(c.getTime()+864E5*d),e="; expires="+c.toGMTString());document.cookie=a+"="+b+e+"; path=/"};
qq.getCookie=function(a){a+="=";for(var b=document.cookie.split(";"),d,c=0;c<b.length;c++){for(d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return d.substring(a.length,d.length)}};qq.getCookieNames=function(a){var b=document.cookie.split(";"),d=[];qq.each(b,function(c,b){b=qq.trimStr(b);var f=b.indexOf("=");b.match(a)&&d.push(b.substr(0,f))});return d};qq.deleteCookie=function(a){qq.setCookie(a,"",-1)};
qq.areCookiesEnabled=function(){var a="qqCookieTest:"+1E5*Math.random();qq.setCookie(a,1);return qq.getCookie(a)?(qq.deleteCookie(a),!0):!1};qq.parseJson=function(a){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(a):eval("("+a+")")};qq.DisposeSupport=function(){var a=[];return{dispose:function(){var b;do(b=a.shift())&&b();while(b)},attach:function(){this.addDisposer(qq(arguments[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(b){a.push(b)}}};
qq.supportedFeatures=function(){var a,b,d,c,e,f;a=!0;try{b=document.createElement("input"),b.type="file",qq(b).hide(),b.disabled&&(a=!1)}catch(g){a=!1}d=(b=a&&qq.isXhrUploadSupported())&&qq.chrome()&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/);c=b&&qq.isFileChunkingSupported();e=b&&c&&qq.areCookiesEnabled();f=b&&qq.chrome()&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/);return{uploading:a,ajaxUploading:b,fileDrop:b,folderDrop:d,chunking:c,
resume:e,uploadCustomHeaders:b,uploadNonMultipart:b,itemSizeValidation:b,uploadViaPaste:f,progressBar:b,uploadCors:a&&(void 0!==window.postMessage||b),deleteFileCors:b}}();qq.Promise=function(){var a,b,d,c,e,f=0;return{then:function(e,h){0===f?(d=e,c=h):-1===f&&h?h(b):e&&e(a);return this},done:function(a){0===f?e=a:a();return this},success:function(c){f=1;a=c;d&&d(c);e&&e();return this},failure:function(a){f=-1;b=a;c&&c(a);e&&e();return this}}};
qq.UploadButton=function(a){function b(){var a=document.createElement("input");e.multiple&&a.setAttribute("multiple","multiple");e.acceptFiles&&a.setAttribute("accept",e.acceptFiles);a.setAttribute("type","file");a.setAttribute("name",e.name);qq(a).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0});e.element.appendChild(a);c.attach(a,"change",function(){e.onChange(a)});c.attach(a,"mouseover",function(){qq(e.element).addClass(e.hoverClass)});
c.attach(a,"mouseout",function(){qq(e.element).removeClass(e.hoverClass)});c.attach(a,"focus",function(){qq(e.element).addClass(e.focusClass)});c.attach(a,"blur",function(){qq(e.element).removeClass(e.focusClass)});window.attachEvent&&a.setAttribute("tabIndex","-1");return a}var d,c=new qq.DisposeSupport,e={element:null,multiple:!1,acceptFiles:null,name:"file",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(e,a);qq(e.element).css({position:"relative",
overflow:"hidden",direction:"ltr"});d=b();return{getInput:function(){return d},reset:function(){d.parentNode&&qq(d).remove();qq(e.element).removeClass(e.focusClass);d=b()}}};
qq.PasteSupport=function(a){var b;b={targetElement:null,callbacks:{log:function(){},pasteReceived:function(){}}};qq.extend(b,a);(function(){qq(b.targetElement).attach("paste",function(a){(a=a.clipboardData)&&qq.each(a.items,function(a,e){if(e.type&&0===e.type.indexOf("image/")){var d=e.getAsFile();b.callbacks.pasteReceived(d)}})})})();return{reset:function(){}}};
qq.FineUploaderBasic=function(a){this._options={debug:!1,button:null,multiple:!0,maxConnections:1,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},paramsInBody:!0,customHeaders:{},forceMultipart:!0,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0},callbacks:{onSubmit:function(){},onSubmitted:function(){},onComplete:function(){},onCancel:function(){},
onUpload:function(){},onUploadChunk:function(){},onResume:function(){},onProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidateBatch:function(){},onValidate:function(){},onSubmitDelete:function(){},onDelete:function(){},onDeleteComplete:function(){},onPasteReceived:function(){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",
emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",
buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,partSize:2E6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(a){33<a.length&&(a=a.slice(0,19)+"..."+a.slice(-14));return a},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:"kB MB GB TB PB EB".split(" ")},
deleteFile:{enabled:!1,endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1},blobs:{defaultName:"misc_data",paramNames:{name:"qqblobname"}},paste:{targetElement:null,defaultName:"pasted_image"}};qq.extend(this._options,a,!0);this._wrapCallbacks();this._disposeSupport=new qq.DisposeSupport;this._filesInProgress=[];this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._netUploaded=this._netUploadedOrQueued=0;this._paramsStore=
this._createParamsStore("request");this._deleteFileParamsStore=this._createParamsStore("deleteFile");this._endpointStore=this._createEndpointStore("request");this._deleteFileEndpointStore=this._createEndpointStore("deleteFile");this._handler=this._createUploadHandler();this._deleteHandler=this._createDeleteHandler();this._options.button&&(this._button=this._createUploadButton(this._options.button));this._options.paste.targetElement&&(this._pasteHandler=this._createPasteHandler());this._preventLeaveInProgress()};
qq.FineUploaderBasic.prototype={log:function(a,b){!this._options.debug||b&&"info"!==b?b&&"info"!==b&&qq.log("[FineUploader] "+a,b):qq.log("[FineUploader] "+a)},setParams:function(a,b){null==b?this._options.request.params=a:this._paramsStore.setParams(a,b)},setDeleteFileParams:function(a,b){null==b?this._options.deleteFile.params=a:this._deleteFileParamsStore.setParams(a,b)},setEndpoint:function(a,b){null==b?this._options.request.endpoint=a:this._endpointStore.setEndpoint(a,b)},getInProgress:function(){return this._filesInProgress.length},
getNetUploads:function(){return this._netUploaded},uploadStoredFiles:function(){for(var a;this._storedIds.length;)a=this._storedIds.shift(),this._filesInProgress.push(a),this._handler.upload(a)},clearStoredFiles:function(){this._storedIds=[]},retry:function(a){return this._onBeforeManualRetry(a)?(this._netUploadedOrQueued++,this._handler.retry(a),!0):!1},cancel:function(a){this._handler.cancel(a)},cancelAll:function(){var a=[],b=this;qq.extend(a,this._storedIds);qq.each(a,function(a,c){b.cancel(c)});
this._handler.cancelAll()},reset:function(){this.log("Resetting uploader...");this._handler.reset();this._filesInProgress=[];this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._button.reset();this._paramsStore.reset();this._endpointStore.reset();this._netUploaded=this._netUploadedOrQueued=0;this._pasteHandler&&this._pasteHandler.reset()},addFiles:function(a,b,d){var c=[],e,f;if(a){window.FileList&&a instanceof FileList||(a=[].concat(a));for(e=0;e<a.length;e+=
1)f=a[e],qq.isFileOrInput(f)?c.push(f):this.log(f+" is not a File or INPUT element!  Ignoring!","warn");this.log("Processing "+c.length+" files or inputs...");this._uploadFileOrBlobDataList(c,b,d)}},addBlobs:function(a,b,d){if(a){a=[].concat(a);var c=[],e=this;qq.each(a,function(a,b){qq.isBlob(b)&&!qq.isFileOrInput(b)?c.push({blob:b,name:e._options.blobs.defaultName}):qq.isObject(b)&&b.blob&&b.name?c.push(b):e.log("addBlobs: entry at index "+a+" is not a Blob or a BlobData object","error")});this._uploadFileOrBlobDataList(c,
b,d)}else this.log("undefined or non-array parameter passed into addBlobs","error")},getUuid:function(a){return this._handler.getUuid(a)},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(a){return this._handler.getSize(a)},getName:function(a){return this._handler.getName(a)},getFile:function(a){return this._handler.getFile(a)},deleteFile:function(a){this._onSubmitDelete(a)},setDeleteFileEndpoint:function(a,b){null==b?this._options.deleteFile.endpoint=
a:this._deleteFileEndpointStore.setEndpoint(a,b)},_createUploadButton:function(a){var b=this,d=new qq.UploadButton({element:a,multiple:this._options.multiple&&qq.supportedFeatures.ajaxUploading,acceptFiles:this._options.validation.acceptFiles,onChange:function(a){b._onInputChange(a)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});this._disposeSupport.addDisposer(function(){d.dispose()});return d},_createUploadHandler:function(){var a=this;return new qq.UploadHandler({debug:this._options.debug,
forceMultipart:this._options.request.forceMultipart,maxConnections:this._options.maxConnections,customHeaders:this._options.request.customHeaders,inputName:this._options.request.inputName,uuidParamName:this._options.request.uuidName,totalFileSizeParamName:this._options.request.totalFileSizeName,cors:this._options.cors,demoMode:this._options.demoMode,paramsInBody:this._options.request.paramsInBody,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,
blobs:this._options.blobs,log:function(b,d){a.log(b,d)},onProgress:function(b,d,c,e){a._onProgress(b,d,c,e);a._options.callbacks.onProgress(b,d,c,e)},onComplete:function(b,d,c,e){a._onComplete(b,d,c,e);a._options.callbacks.onComplete(b,d,c,e)},onCancel:function(b,d){a._onCancel(b,d);a._options.callbacks.onCancel(b,d)},onUpload:function(b,d){a._onUpload(b,d);a._options.callbacks.onUpload(b,d)},onUploadChunk:function(b,d,c){a._options.callbacks.onUploadChunk(b,d,c)},onResume:function(b,d,c){return a._options.callbacks.onResume(b,
d,c)},onAutoRetry:function(b,d,c,e){a._preventRetries[b]=c[a._options.retry.preventRetryResponseProperty];return a._shouldAutoRetry(b,d,c)?(a._maybeParseAndSendUploadError(b,d,c,e),a._options.callbacks.onAutoRetry(b,d,a._autoRetries[b]+1),a._onBeforeAutoRetry(b,d),a._retryTimeouts[b]=setTimeout(function(){a._onAutoRetry(b,d,c)},1E3*a._options.retry.autoAttemptDelay),!0):!1}})},_createDeleteHandler:function(){var a=this;return new qq.DeleteFileAjaxRequestor({maxConnections:this._options.maxConnections,
customHeaders:this._options.deleteFile.customHeaders,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:function(b,d){a.log(b,d)},onDelete:function(b){a._onDelete(b);a._options.callbacks.onDelete(b)},onDeleteComplete:function(b,d,c){a._onDeleteComplete(b,d,c);a._options.callbacks.onDeleteComplete(b,d,c)}})},_createPasteHandler:function(){var a=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,
callbacks:{log:function(b,d){a.log(b,d)},pasteReceived:function(b){var d=a._options.callbacks.onPasteReceived;(d=d(b))&&d.then?d.then(function(c){a._handlePasteSuccess(b,c)},function(c){a.log("Ignoring pasted image per paste received callback.  Reason = '"+c+"'")}):a._handlePasteSuccess(b)}}})},_handlePasteSuccess:function(a,b){var d=a.type.split("/")[1],c=b;null==c&&(c=this._options.paste.defaultName);this.addBlobs({name:c+("."+d),blob:a})},_preventLeaveInProgress:function(){var a=this;this._disposeSupport.attach(window,
"beforeunload",function(b){if(a._filesInProgress.length)return b=b||window.event,b.returnValue=a._options.messages.onLeave})},_onSubmit:function(a){this._netUploadedOrQueued++;this._options.autoUpload&&this._filesInProgress.push(a)},_onProgress:function(){},_onComplete:function(a,b,d,c){d.success?this._netUploaded++:this._netUploadedOrQueued--;this._removeFromFilesInProgress(a);this._maybeParseAndSendUploadError(a,b,d,c)},_onCancel:function(a){this._netUploadedOrQueued--;this._removeFromFilesInProgress(a);
clearTimeout(this._retryTimeouts[a]);a=qq.indexOf(this._storedIds,a);!this._options.autoUpload&&0<=a&&this._storedIds.splice(a,1)},_isDeletePossible:function(){return this._options.deleteFile.enabled&&(!this._options.cors.expected||qq.supportedFeatures.deleteFileCors)},_onSubmitDelete:function(a){if(this._isDeletePossible())!1!==this._options.callbacks.onSubmitDelete(a)&&this._deleteHandler.sendDelete(a,this.getUuid(a));else return this.log("Delete request ignored for ID "+a+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.",
"warn"),!1},_onDelete:function(){},_onDeleteComplete:function(a,b,d){var c=this._handler.getName(a);d?(this.log("Delete request for '"+c+"' has failed.","error"),this._options.callbacks.onError(a,c,"Delete request failed with response code "+b.status,b)):(this._netUploadedOrQueued--,this._netUploaded--,this.log("Delete request for '"+c+"' has succeeded."))},_removeFromFilesInProgress:function(a){a=qq.indexOf(this._filesInProgress,a);0<=a&&this._filesInProgress.splice(a,1)},_onUpload:function(){},
_onInputChange:function(a){qq.supportedFeatures.ajaxUploading?this.addFiles(a.files):this.addFiles(a);this._button.reset()},_onBeforeAutoRetry:function(a,b){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+b+"...")},_onAutoRetry:function(a,b){this.log("Retrying "+b+"...");this._autoRetries[a]++;this._handler.retry(a)},_shouldAutoRetry:function(a){return!this._preventRetries[a]&&this._options.retry.enableAuto?(void 0===this._autoRetries[a]&&(this._autoRetries[a]=
0),this._autoRetries[a]<this._options.retry.maxAutoAttempts):!1},_onBeforeManualRetry:function(a){var b=this._options.validation.itemLimit;if(this._preventRetries[a])return this.log("Retries are forbidden for id "+a,"warn"),!1;if(this._handler.isValid(a)){var d=this._handler.getName(a);if(!1===this._options.callbacks.onManualRetry(a,d))return!1;if(0<b&&this._netUploadedOrQueued+1>b)return this._itemError("retryFailTooManyItems",""),!1;this.log("Retrying upload for '"+d+"' (id: "+a+")...");this._filesInProgress.push(a);
return!0}this.log("'"+a+"' is not a valid file ID","error");return!1},_maybeParseAndSendUploadError:function(a,b,d,c){if(!d.success)if(c&&200!==c.status&&!d.error)this._options.callbacks.onError(a,b,"XHR returned response code "+c.status,c);else this._options.callbacks.onError(a,b,d.error?d.error:this._options.text.defaultResponseError,c)},_uploadFileOrBlobDataList:function(a,b,d){var c;if(this._isBatchValid(this._getValidationDescriptors(a)))if(0<a.length)for(c=0;c<a.length;c++)if(this._validateFileOrBlobData(a[c]))this._upload(a[c],
b,d);else{if(this._options.validation.stopOnFirstInvalidFile)break}else this._itemError("noFilesError","")},_upload:function(a,b,d){a=this._handler.add(a);var c=this._handler.getName(a);b&&this.setParams(b,a);d&&this.setEndpoint(d,a);!1!==this._options.callbacks.onSubmit(a,c)&&(this._onSubmit(a,c),this._options.callbacks.onSubmitted(a,c),this._options.autoUpload?this._handler.upload(a):this._storeForLater(a))},_storeForLater:function(a){this._storedIds.push(a)},_isBatchValid:function(a){var b;b=this._options.validation.itemLimit;
var d=this._netUploadedOrQueued+a.length;if(a=!1!==this._options.callbacks.onValidateBatch(a))0===b||d<=b?a=!0:(a=!1,b=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,d).replace(/\{itemLimit\}/g,b),this._batchError(b));return a},_validateFileOrBlobData:function(a){var b,d,c;b=this._getValidationDescriptor(a);d=b.name;c=b.size;return!1===this._options.callbacks.onValidate(b)?!1:qq.isFileOrInput(a)&&!this._isAllowedExtension(d)?(this._itemError("typeError",d),!1):0===c?(this._itemError("emptyError",
d),!1):c&&this._options.validation.sizeLimit&&c>this._options.validation.sizeLimit?(this._itemError("sizeError",d),!1):c&&c<this._options.validation.minSizeLimit?(this._itemError("minSizeError",d),!1):!0},_itemError:function(a,b){function d(a,b){c=c.replace(a,b)}var c=this._options.messages[a],e=[],f=[].concat(b),g=f[0],h;qq.each(this._options.validation.allowedExtensions,function(a,c){qq.isString(c)&&e.push(c)});h=e.join(", ").toLowerCase();d("{file}",this._options.formatFileName(g));d("{extensions}",
h);d("{sizeLimit}",this._formatSize(this._options.validation.sizeLimit));d("{minSizeLimit}",this._formatSize(this._options.validation.minSizeLimit));h=c.match(/(\{\w+\})/g);null!==h&&qq.each(h,function(a,c){d(c,f[a])});this._options.callbacks.onError(null,g,c);return c},_batchError:function(a){this._options.callbacks.onError(null,null,a)},_isAllowedExtension:function(a){var b=this._options.validation.allowedExtensions,d=!1;if(!b.length)return!0;qq.each(b,function(c,b){if(qq.isString(b)&&null!=a.match(RegExp("\\."+
b+"$","i")))return d=!0,!1});return d},_formatSize:function(a){var b=-1;do a/=1024,b++;while(99<a);return Math.max(a,.1).toFixed(1)+this._options.text.sizeSymbols[b]},_wrapCallbacks:function(){var a,b;a=this;b=function(c,b,d){try{return b.apply(a,d)}catch(g){a.log("Caught exception in '"+c+"' callback - "+g.message,"error")}};for(var d in this._options.callbacks)(function(){var c,e;c=d;e=a._options.callbacks[c];a._options.callbacks[c]=function(){return b(c,e,arguments)}})()},_parseFileOrBlobDataName:function(a){return qq.isFileOrInput(a)?
a.value?a.value.replace(/.*(\/|\\)/,""):null!==a.fileName&&void 0!==a.fileName?a.fileName:a.name:a.name},_parseFileOrBlobDataSize:function(a){var b;qq.isFileOrInput(a)?a.value||(b=null!==a.fileSize&&void 0!==a.fileSize?a.fileSize:a.size):b=a.blob.size;return b},_getValidationDescriptor:function(a){var b,d;d={};b=this._parseFileOrBlobDataName(a);a=this._parseFileOrBlobDataSize(a);d.name=b;void 0!==a&&(d.size=a);return d},_getValidationDescriptors:function(a){var b=this,d=[];qq.each(a,function(a,e){d.push(b._getValidationDescriptor(e))});
return d},_createParamsStore:function(a){var b={},d=this;return{setParams:function(a,e){var d={};qq.extend(d,a);b[e]=d},getParams:function(c){var e={};null!=c&&b[c]?qq.extend(e,b[c]):qq.extend(e,d._options[a].params);return e},remove:function(a){return delete b[a]},reset:function(){b={}}}},_createEndpointStore:function(a){var b={},d=this;return{setEndpoint:function(a,e){b[e]=a},getEndpoint:function(c){return null!=c&&b[c]?b[c]:d._options[a].endpoint},remove:function(a){return delete b[a]},reset:function(){b=
{}}}}};
qq.DragAndDrop=function(a){function b(a){var c,e,d=new qq.Promise;a.isFile?a.file(function(a){h.push(a);d.success()},function(c){f.callbacks.dropLog("Problem parsing '"+a.fullPath+"'.  FileError code "+c.code+".","error");d.failure()}):a.isDirectory&&(c=a.createReader(),c.readEntries(function(a){var c=a.length;for(e=0;e<a.length;e+=1)b(a[e]).done(function(){--c;0===c&&d.success()});a.length||d.success()},function(c){f.callbacks.dropLog("Problem parsing '"+a.fullPath+"'.  FileError code "+c.code+".",
"error");d.failure()}));return d}function d(a){var c,e,d=[],l=new qq.Promise;f.callbacks.processingDroppedFiles();g.dropDisabled(!0);if(1<a.files.length&&!f.allowMultipleItems)f.callbacks.processingDroppedFilesComplete([]),f.callbacks.dropError("tooManyFilesError",""),g.dropDisabled(!1),l.failure();else{h=[];if(qq.isFolderDropSupported(a))for(c=a.items,a=0;a<c.length;a+=1)(e=c[a].webkitGetAsEntry())&&(e.isFile?h.push(c[a].getAsFile()):d.push(b(e).done(function(){d.pop();0===d.length&&l.success()})));
else h=a.files;0===d.length&&l.success()}return l}function c(a){g=new qq.UploadDropZone({element:a,onEnter:function(c){qq(a).addClass(f.classes.dropActive);c.stopPropagation()},onLeaveNotDescendants:function(){qq(a).removeClass(f.classes.dropActive)},onDrop:function(c){f.hideDropZonesBeforeEnter&&qq(a).hide();qq(a).removeClass(f.classes.dropActive);d(c.dataTransfer).done(function(){var a=h;f.callbacks.dropLog("Grabbed "+a.length+" dropped files.");g.dropDisabled(!1);f.callbacks.processingDroppedFilesComplete(a)})}});
l.addDisposer(function(){g.dispose()});f.hideDropZonesBeforeEnter&&qq(a).hide()}function e(a){var c;qq.each(a.dataTransfer.types,function(a,b){if("Files"===b)return c=!0,!1});return c}var f,g,h=[],l=new qq.DisposeSupport;f={dropZoneElements:[],hideDropZonesBeforeEnter:!1,allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks};qq.extend(f,a,!0);(function(){var a=f.dropZoneElements;qq.each(a,function(a,b){c(b)});a.length&&(!qq.ie()||qq.ie10())&&l.attach(document,"dragenter",
function(c){!g.dropDisabled()&&e(c)&&qq.each(a,function(a,c){qq(c).css({display:"block"})})});l.attach(document,"dragleave",function(c){f.hideDropZonesBeforeEnter&&qq.FineUploader.prototype._leaving_document_out(c)&&qq.each(a,function(a,c){qq(c).hide()})});l.attach(document,"drop",function(c){f.hideDropZonesBeforeEnter&&qq.each(a,function(a,c){qq(c).hide()});c.preventDefault()})})();return{setupExtraDropzone:function(a){f.dropZoneElements.push(a);c(a)},removeDropzone:function(a){var c,b=f.dropZoneElements;
for(c in b)if(b[c]===a)return b.splice(c,1)},dispose:function(){l.dispose();g.dispose()}}};qq.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(){},dropError:function(a,b){qq.log("Drag & drop error code '"+a+" with these specifics: '"+b+"'","error")},dropLog:function(a,b){qq.log(a,b)}}};
qq.UploadDropZone=function(a){function b(){return qq.safari()||qq.firefox()&&qq.windows()}function d(a){if(qq.ie()&&!qq.ie10())return!1;var c=a.dataTransfer,b=qq.safari();a=qq.ie10()?!0:"none"!==c.effectAllowed;return c&&a&&(c.files||!b&&c.types.contains&&c.types.contains("Files"))}function c(a){void 0!==a&&(g=a);return g}var e,f,g,h,l=new qq.DisposeSupport;e={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}};qq.extend(e,a);f=e.element;
(function(){h||(b?l.attach(document,"dragover",function(a){a.preventDefault()}):l.attach(document,"dragover",function(a){a.dataTransfer&&(a.dataTransfer.dropEffect="none",a.preventDefault())}),h=!0)})();(function(){l.attach(f,"dragover",function(a){if(d(a)){var c=qq.ie()?null:a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect="move"===c||"linkMove"===c?"move":"copy";a.stopPropagation();a.preventDefault()}});l.attach(f,"dragenter",function(a){if(!c()&&d(a))e.onEnter(a)});l.attach(f,"dragleave",
function(a){if(d(a)){e.onLeave(a);var c=document.elementFromPoint(a.clientX,a.clientY);if(!qq(this).contains(c))e.onLeaveNotDescendants(a)}});l.attach(f,"drop",function(a){!c()&&d(a)&&(a.preventDefault(),e.onDrop(a))})})();return{dropDisabled:function(a){return c(a)},dispose:function(){l.dispose()}}};
qq.FineUploader=function(a){qq.FineUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,dragAndDrop:{extraDropzones:[],hideDropzones:!0,disableDefaultDropzone:!1},text:{uploadButton:"Upload a file",cancelButton:"Cancel",retryButton:"Retry",deleteButton:"Delete",failUpload:"Upload failed",dragZone:"Drop files here to upload",dropProcessing:"Processing dropped files...",formatProgress:"{percent}% of {total_size}",waitingForResponse:"Processing..."},template:'<div class="qq-uploader">'+
(this._options.dragAndDrop&&this._options.dragAndDrop.disableDefaultDropzone?"":'<div class="qq-upload-drop-area"><span>{dragZoneText}</span></div>')+(this._options.button?"":'<div class="qq-upload-button"><div>{uploadButtonText}</div></div>')+'<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>'+(this._options.listElement?"":'<ul class="qq-upload-list"></ul>')+"</div>",fileTemplate:'<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span><span class="qq-upload-file"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">{cancelButtonText}</a><a class="qq-upload-retry" href="#">{retryButtonText}</a><a class="qq-upload-delete" href="#">{deleteButtonText}</a><span class="qq-upload-status-text">{statusText}</span></li>',
classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",size:"qq-upload-size",cancel:"qq-upload-cancel",deleteButton:"qq-upload-delete",retry:"qq-upload-retry",statusText:"qq-upload-status-text",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,
failIcon:null,dropProcessing:"qq-drop-processing",dropProcessingSpinner:"qq-drop-processing-spinner"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}...",showButton:!1},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",
deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},showMessage:function(a){setTimeout(function(){window.alert(a)},0)},showConfirm:function(a,d,c){setTimeout(function(){window.confirm(a)?d():c&&c()},0)},showPrompt:function(a,d){var c=new qq.Promise,e=window.prompt(a,d);null!=e&&0<qq.trimStr(e).length?c.success(e):c.failure("Undefined or invalid user-supplied value.");return c}},!0);qq.extend(this._options,
a,!0);!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors?this._options.element.innerHTML="<div>"+this._options.messages.unsupportedBrowser+"</div>":(this._wrapCallbacks(),this._options.template=this._options.template.replace(/\{dragZoneText\}/g,this._options.text.dragZone),this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.text.uploadButton),this._options.template=this._options.template.replace(/\{dropProcessingText\}/g,
this._options.text.dropProcessing),this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.text.cancelButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{retryButtonText\}/g,this._options.text.retryButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{deleteButtonText\}/g,this._options.text.deleteButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{statusText\}/g,""),this._element=this._options.element,
this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button||(this._button=this._createUploadButton(this._find(this._element,"button"))),this._bindCancelAndRetryEvents(),this._dnd=this._setupDragAndDrop(),this._options.paste.targetElement&&this._options.paste.promptForName&&this._setupPastePrompt())};qq.extend(qq.FineUploader.prototype,qq.FineUploaderBasic.prototype);
qq.extend(qq.FineUploader.prototype,{clearStoredFiles:function(){qq.FineUploaderBasic.prototype.clearStoredFiles.apply(this,arguments);this._listElement.innerHTML=""},addExtraDropzone:function(a){this._dnd.setupExtraDropzone(a)},removeExtraDropzone:function(a){return this._dnd.removeDropzone(a)},getItemByFileId:function(a){for(var b=this._listElement.firstChild;b;){if(b.qqFileId==a)return b;b=b.nextSibling}},reset:function(){qq.FineUploaderBasic.prototype.reset.apply(this,arguments);this._element.innerHTML=
this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._options.button||(this._button=this._createUploadButton(this._find(this._element,"button")));this._bindCancelAndRetryEvents();this._dnd.dispose();this._dnd=this._setupDragAndDrop()},_removeFileItem:function(a){a=this.getItemByFileId(a);qq(a).remove()},_setupDragAndDrop:function(){var a=this,b=this._find(this._element,"dropProcessing"),d=this._options.dragAndDrop.extraDropzones,c;c=function(a){a.preventDefault()};
this._options.dragAndDrop.disableDefaultDropzone||d.push(this._find(this._options.element,"drop"));return new qq.DragAndDrop({dropZoneElements:d,hideDropZonesBeforeEnter:this._options.dragAndDrop.hideDropzones,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){var e=a._button.getInput();qq(b).css({display:"block"});qq(e).attach("click",c)},processingDroppedFilesComplete:function(e){var d=a._button.getInput();
qq(b).hide();qq(d).detach("click",c);e&&a.addFiles(e)},dropError:function(c,b){a._itemError(c,b)},dropLog:function(c,b){a.log(c,b)}}})},_leaving_document_out:function(a){return(qq.chrome()||qq.safari()&&qq.windows())&&0==a.clientX&&0==a.clientY||qq.firefox()&&!a.relatedTarget},_storeForLater:function(a){qq.FineUploaderBasic.prototype._storeForLater.apply(this,arguments);var b=this.getItemByFileId(a);qq(this._find(b,"spinner")).hide()},_find:function(a,b){var d=qq(a).getByClass(this._options.classes[b])[0];
if(!d)throw Error("element not found "+b);return d},_onSubmit:function(a,b){qq.FineUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(a,b)},_onProgress:function(a,b,d,c){qq.FineUploaderBasic.prototype._onProgress.apply(this,arguments);var e,f,g,h;e=this.getItemByFileId(a);f=this._find(e,"progressBar");g=Math.round(d/c*100);d===c?(h=this._find(e,"cancel"),qq(h).hide(),qq(f).hide(),qq(this._find(e,"statusText")).setText(this._options.text.waitingForResponse),this._displayFileSize(a)):
(this._displayFileSize(a,d,c),qq(f).css({display:"block"}));qq(f).css({width:g+"%"})},_onComplete:function(a,b,d,c){qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments);var e=this.getItemByFileId(a);qq(this._find(e,"statusText")).clearText();qq(e).removeClass(this._classes.retrying);qq(this._find(e,"progressBar")).hide();this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading||qq(this._find(e,"cancel")).hide();qq(this._find(e,"spinner")).hide();d.success?(this._isDeletePossible()&&
this._showDeleteLink(a),qq(e).addClass(this._classes.success),this._classes.successIcon&&(this._find(e,"finished").style.display="inline-block",qq(e).addClass(this._classes.successIcon))):(qq(e).addClass(this._classes.fail),this._classes.failIcon&&(this._find(e,"finished").style.display="inline-block",qq(e).addClass(this._classes.failIcon)),this._options.retry.showButton&&!this._preventRetries[a]&&qq(e).addClass(this._classes.retryable),this._controlFailureTextDisplay(e,d))},_onUpload:function(a,
b){qq.FineUploaderBasic.prototype._onUpload.apply(this,arguments);this._showSpinner(a)},_onCancel:function(a,b){qq.FineUploaderBasic.prototype._onCancel.apply(this,arguments);this._removeFileItem(a)},_onBeforeAutoRetry:function(a){var b,d,c,e,f;qq.FineUploaderBasic.prototype._onBeforeAutoRetry.apply(this,arguments);b=this.getItemByFileId(a);d=this._find(b,"progressBar");this._showCancelLink(b);d.style.width=0;qq(d).hide();this._options.retry.showAutoRetryNote&&(d=this._find(b,"statusText"),c=this._autoRetries[a]+
1,e=this._options.retry.maxAutoAttempts,f=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,c),f=f.replace(/\{maxAuto\}/g,e),qq(d).setText(f),1===c&&qq(b).addClass(this._classes.retrying))},_onBeforeManualRetry:function(a){var b=this.getItemByFileId(a);if(qq.FineUploaderBasic.prototype._onBeforeManualRetry.apply(this,arguments))return this._find(b,"progressBar").style.width=0,qq(b).removeClass(this._classes.fail),qq(this._find(b,"statusText")).clearText(),this._showSpinner(a),this._showCancelLink(b),
!0;qq(b).addClass(this._classes.retryable);return!1},_onSubmitDelete:function(a){if(this._isDeletePossible())!1!==this._options.callbacks.onSubmitDelete(a)&&(this._options.deleteFile.forceConfirm?this._showDeleteConfirm(a):this._sendDeleteRequest(a));else return this.log("Delete request ignored for file ID "+a+", delete feature is disabled.","warn"),!1},_onDeleteComplete:function(a,b,d){qq.FineUploaderBasic.prototype._onDeleteComplete.apply(this,arguments);var c=this.getItemByFileId(a),e=this._find(c,
"spinner"),c=this._find(c,"statusText");qq(e).hide();d?(qq(c).setText(this._options.deleteFile.deletingFailedText),this._showDeleteLink(a)):this._removeFileItem(a)},_sendDeleteRequest:function(a){var b=this.getItemByFileId(a),d=this._find(b,"deleteButton"),b=this._find(b,"statusText");qq(d).hide();this._showSpinner(a);qq(b).setText(this._options.deleteFile.deletingStatusText);this._deleteHandler.sendDelete(a,this.getUuid(a))},_showDeleteConfirm:function(a){var b=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,
this._handler.getName(a));this.getUuid(a);var d=this;this._options.showConfirm(b,function(){d._sendDeleteRequest(a)})},_addToList:function(a,b){var d=qq.toElement(this._options.fileTemplate);if(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading){var c=this._find(d,"cancel");qq(c).remove()}d.qqFileId=a;c=this._find(d,"file");qq(c).setText(this._options.formatFileName(b));qq(this._find(d,"size")).hide();this._options.multiple||(this._handler.cancelAll(),this._clearList());
this._listElement.appendChild(d);this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading&&this._displayFileSize(a)},_clearList:function(){this._listElement.innerHTML="";this.clearStoredFiles()},_displayFileSize:function(a,b,d){var c=this.getItemByFileId(a);a=this._formatSize(this.getSize(a));c=this._find(c,"size");void 0!==b&&void 0!==d&&(a=this._formatProgress(b,d));qq(c).css({display:"inline"});qq(c).setText(a)},_bindCancelAndRetryEvents:function(){var a=this;this._disposeSupport.attach(this._listElement,
"click",function(b){b=b||window.event;var d=b.target||b.srcElement;if(qq(d).hasClass(a._classes.cancel)||qq(d).hasClass(a._classes.retry)||qq(d).hasClass(a._classes.deleteButton)){qq.preventDefault(b);for(b=d.parentNode;void 0===b.qqFileId;)b=b.parentNode;qq(d).hasClass(a._classes.deleteButton)?a.deleteFile(b.qqFileId):qq(d).hasClass(a._classes.cancel)?a.cancel(b.qqFileId):(qq(b).removeClass(a._classes.retryable),a.retry(b.qqFileId))}})},_formatProgress:function(a,b){var d=this._options.text.formatProgress,
c=Math.round(a/b*100),d=d.replace("{percent}",c),c=this._formatSize(b);return d.replace("{total_size}",c)},_controlFailureTextDisplay:function(a,b){var d,c,e,f;d=this._options.failedUploadTextDisplay.mode;c=this._options.failedUploadTextDisplay.maxChars;e=this._options.failedUploadTextDisplay.responseProperty;"custom"===d?((d=b[e])?d.length>c&&(f=d.substring(0,c)+"..."):(d=this._options.text.failUpload,this.log("'"+e+"' is not a valid property on the server response.","warn")),qq(this._find(a,"statusText")).setText(f||
d),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(a,d)):"default"===d?qq(this._find(a,"statusText")).setText(this._options.text.failUpload):"none"!==d&&this.log("failedUploadTextDisplay.mode value of '"+d+"' is not valid","warn")},_showTooltip:function(a,b){a.title=b},_showSpinner:function(a){this._find(this.getItemByFileId(a),"spinner").style.display="inline-block"},_showCancelLink:function(a){if(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)a=
this._find(a,"cancel"),qq(a).css({display:"inline"})},_showDeleteLink:function(a){a=this._find(this.getItemByFileId(a),"deleteButton");qq(a).css({display:"inline"})},_itemError:function(a,b){this._options.showMessage(qq.FineUploaderBasic.prototype._itemError.apply(this,arguments))},_batchError:function(a){qq.FineUploaderBasic.prototype._batchError.apply(this,arguments);this._options.showMessage(a)},_setupPastePrompt:function(){var a=this;this._options.callbacks.onPasteReceived=function(){return a._options.showPrompt(a._options.paste.namePromptMessage,
a._options.paste.defaultName)}}});
qq.AjaxRequestor=function(a){function b(a){var c=qq.indexOf(l,a),b=m.maxConnections;delete p[a];l.splice(c,1);l.length>=b&&c<b&&(a=l[b-1],d(a))}function d(a){var b=new XMLHttpRequest,d=f(),l={},A;m.onSend(a);m.paramsStore.getParams&&(l=m.paramsStore.getParams(a));A=l;var t=m.endpointStore.getEndpoint(a),q=p[a].addToPath;void 0!==q&&(t+="/"+q);A=h&&A?qq.obj2url(A,t):t;p[a].xhr=b;b.onreadystatechange=c(a);b.open(d,A,!0);m.cors.expected&&m.cors.sendCredentials&&(b.withCredentials=!0);e(a);g("Sending "+
d+" request for "+a);!h&&l?b.send(qq.obj2url(l,"")):b.send()}function c(a){var c=p[a].xhr;return function(){if(4===c.readyState){var e=p[a].xhr,d=f(),h=!1;b(a);0<=qq.indexOf(m.successfulResponseCodes,e.status)||(h=!0,g(d+" request for "+a+" has failed - response code "+e.status,"error"));m.onComplete(a,e,h)}}}function e(a){var c=p[a].xhr;a=m.customHeaders;c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.setRequestHeader("Cache-Control","no-cache");qq.each(a,function(a,b){c.setRequestHeader(a,
b)})}function f(){return m.demoMode?"GET":m.method}var g,h,l=[],p=[],m={method:"POST",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},successfulResponseCodes:[200],demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onSend:function(){},onComplete:function(){},onCancel:function(){}};qq.extend(m,a);g=m.log;h="GET"===f()||"DELETE"===f();return{send:function(a,c){p[a]={addToPath:c};l.push(a)<=m.maxConnections&&d(a)},cancel:function(a){var c=p[a].xhr,e=f();c?(c.onreadystatechange=
null,c.abort(),b(a),g("Cancelled "+e+" for "+a),m.onCancel(a),a=!0):a=!1;return a}}};
qq.DeleteFileAjaxRequestor=function(a){var b,d={endpointStore:{},maxConnections:3,customHeaders:{},paramsStore:{},demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onDelete:function(){},onDeleteComplete:function(){}};qq.extend(d,a);b=new qq.AjaxRequestor({method:"DELETE",endpointStore:d.endpointStore,paramsStore:d.paramsStore,maxConnections:d.maxConnections,customHeaders:d.customHeaders,successfulResponseCodes:[200,202,204],demoMode:d.demoMode,log:d.log,onSend:d.onDelete,onComplete:d.onDeleteComplete});
return{sendDelete:function(a,e){b.send(a,e);d.log("Submitted delete file request for "+a)}}};qq.WindowReceiveMessage=function(a){var b={};qq.extend({log:function(){}},a);return{receiveMessage:function(a,c){var e=function(a){c(a.data)};window.postMessage?b[a]=qq(window).attach("message",e):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(a){window.postMessage&&(a=b[a])&&a()}}};
qq.UploadHandler=function(a){var b=[],d,c,e,f;d={debug:!1,forceMultipart:!0,paramsInBody:!1,paramsStore:{},endpointStore:{},cors:{expected:!1,sendCredentials:!1},maxConnections:3,uuidParamName:"qquuid",totalFileSizeParamName:"qqtotalfilesize",chunking:{enabled:!1,partSize:2E6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},blobs:{paramNames:{name:"qqblobname"}},
log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onAutoRetry:function(){},onResume:function(){}};qq.extend(d,a);c=d.log;e=function(a){a=qq.indexOf(b,a);var c=d.maxConnections;0<=a&&(b.splice(a,1),b.length>=c&&a<c&&(a=b[c-1],f.upload(a)))};f=qq.supportedFeatures.ajaxUploading?new qq.UploadHandlerXhr(d,e,c):new qq.UploadHandlerForm(d,e,c);return{add:function(a){return f.add(a)},upload:function(a){if(b.push(a)<=d.maxConnections)return f.upload(a)},
retry:function(a){return 0<=qq.indexOf(b,a)?f.upload(a,!0):this.upload(a)},cancel:function(a){c("Cancelling "+a);d.paramsStore.remove(a);f.cancel(a);e(a)},cancelAll:function(){var a=this,c=[];qq.extend(c,b);qq.each(c,function(c,b){a.cancel(b)});b=[]},getName:function(a){return f.getName(a)},getSize:function(a){if(f.getSize)return f.getSize(a)},getFile:function(a){if(f.getFile)return f.getFile(a)},getQueue:function(){return b},reset:function(){c("Resetting upload handler");b=[];f.reset()},getUuid:function(a){return f.getUuid(a)},
isValid:function(a){return f.isValid(a)},getResumableFilesData:function(){return f.getResumableFilesData?f.getResumableFilesData():[]}}};
qq.UploadHandlerForm=function(a,b,d){function c(a){void 0!==r[a]&&(r[a](),delete r[a])}function e(a,b){var e=a.id;A[m[e]]=b;r[e]=qq(a).attach("load",function(){p[e]&&(y("Received iframe load event for CORS upload request (file id "+e+")"),C[e]=setTimeout(function(){var a="No valid message received from loaded iframe for file id "+e;y(a,"error");b({error:a})},1E3))});K.receiveMessage(e,function(a){y("Received the following window message: '"+a+"'");var b=qq.parseJson(a),d=b.uuid;d&&A[d]?(clearTimeout(C[e]),
delete C[e],c(e),a=A[d],delete A[d],K.stopReceivingMessages(e),a(b)):d||y("'"+a+"' does not contain a UUID - ignoring.")})}function f(a,c){l.cors.expected?e(a,c):r[a.id]=qq(a).attach("load",function(){y("Received response for "+a.id);if(a.parentNode){try{if(a.contentDocument&&a.contentDocument.body&&"false"==a.contentDocument.body.innerHTML)return}catch(b){y("Error when attempting to access iframe during handling of upload response ("+b+")","error")}c()}})}function g(a){var c=qq.toElement('<iframe src="javascript:false;" name="'+
a+'" />');c.setAttribute("id",a);c.style.display="none";document.body.appendChild(c);return c}function h(a,c){var b=l.paramsStore.getParams(a),e=qq.toElement('<form method="'+(l.demoMode?"GET":"POST")+'" enctype="multipart/form-data"></form>'),d=l.endpointStore.getEndpoint(a),f=d;b[l.uuidParamName]=m[a];l.paramsInBody?qq.obj2Inputs(b,e):f=qq.obj2url(b,d);e.setAttribute("action",f);e.setAttribute("target",c.name);e.style.display="none";document.body.appendChild(e);return e}var l=a,p=[],m=[],r={},C=
{},y=d,K=new qq.WindowReceiveMessage({log:y}),A={},t;return t={add:function(a){a.setAttribute("name",l.inputName);var c=p.push(a)-1;m[c]=qq.getUniqueId();a.parentNode&&qq(a).remove();return c},getName:function(a){if(t.isValid(a))return p[a].value.replace(/.*(\/|\\)/,"");y(a+" is not a valid item ID.","error")},isValid:function(a){return void 0!==p[a]},reset:function(){p=[];m=[];r={}},getUuid:function(a){return m[a]},cancel:function(a){l.onCancel(a,this.getName(a));delete p[a];delete m[a];delete r[a];
l.cors.expected&&(clearTimeout(C[a]),delete C[a],K.stopReceivingMessages(a));if(a=document.getElementById(a))a.setAttribute("src","java"+String.fromCharCode(115)+"cript:false;"),qq(a).remove()},upload:function(a){var e=p[a],d=t.getName(a),m=g(a),r;if(!e)throw Error("file with passed id was not added, or already uploaded or cancelled");l.onUpload(a,this.getName(a));r=h(a,m);r.appendChild(e);f(m,function(e){y("iframe loaded");if(!e){var f;try{var g=m.contentDocument||m.contentWindow.document,h=g.body.innerHTML;
y("converting iframe's innerHTML to JSON");y("innerHTML = "+h);h&&h.match(/^<pre/i)&&(h=g.body.firstChild.firstChild.nodeValue);f=qq.parseJson(h)}catch(p){y("Error when attempting to parse form upload response ("+p+")","error"),f={success:!1}}e=f}c(a);l.cors.expected||qq(m).remove();if(e.success||!l.onAutoRetry(a,d,e))l.onComplete(a,d,e),b(a)});y("Sending upload request for "+a);r.submit();qq(r).remove();return a}}};
qq.UploadHandlerXhr=function(a,b,d){function c(a,c,b){var e=w.getSize(a);a=w.getName(a);c[q.chunking.paramNames.partIndex]=b.part;c[q.chunking.paramNames.partByteOffset]=b.start;c[q.chunking.paramNames.chunkSize]=b.size;c[q.chunking.paramNames.totalParts]=b.count;c[q.totalFileSizeParamName]=e;v&&(c[q.chunking.paramNames.filename]=a)}function e(a,c){var b=q.chunking.partSize,e=w.getSize(a),d=n[a].file||n[a].blobData.blob,g=b*c,b=g+b>=e?e:g+b,e=f(a),h;d.slice?h=d.slice(g,b):d.mozSlice?h=d.mozSlice(g,
b):d.webkitSlice&&(h=d.webkitSlice(g,b));return{part:c,start:g,end:b,count:e,blob:h,size:b-g}}function f(a){a=w.getSize(a);return Math.ceil(a/q.chunking.partSize)}function g(a,c,b,e){var d=new FormData,f=q.demoMode?"GET":"POST",g=q.endpointStore.getEndpoint(e),h=g,l=w.getName(e),m=w.getSize(e),p=n[e].blobData;a[q.uuidParamName]=n[e].uuid;v&&(a[q.totalFileSizeParamName]=m,p&&(a[q.blobs.paramNames.name]=p.name));q.paramsInBody||(v||(a[q.inputName]=l),h=qq.obj2url(a,g));c.open(f,h,!0);q.cors.expected&&
q.cors.sendCredentials&&(c.withCredentials=!0);return v?(q.paramsInBody&&qq.obj2FormData(a,d),d.append(q.inputName,b),d):b}function h(a,c){var b=q.customHeaders,e=n[a].file||n[a].blobData.blob;c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.setRequestHeader("Cache-Control","no-cache");v||(c.setRequestHeader("Content-Type","application/octet-stream"),c.setRequestHeader("X-Mime-Type",e.type));qq.each(b,function(a,b){c.setRequestHeader(a,b)})}function l(a,c,b){var e=w.getName(a),d=w.getSize(a);
n[a].attemptingResume=!1;q.onProgress(a,e,d,d);q.onComplete(a,e,c,b);delete n[a].xhr;F(a)}function p(a){var b=n[a].remainingChunkIdxs[0],d=e(a,b),f=n[a].xhr=new XMLHttpRequest,l=w.getSize(a),m=w.getName(a),p;void 0===n[a].loaded&&(n[a].loaded=0);x&&n[a].file&&y(a,d);f.onreadystatechange=C(a,f);f.upload.onprogress=function(c){if(c.lengthComputable){var d=c.loaded+n[a].loaded;c=c.total;var f=e(a,b);c-=f.size;var g=w.getSize(a),f=f.count,h=c-n[a].initialRequestOverhead;n[a].lastRequestOverhead=c;0===
b?(n[a].lastChunkIdxProgress=0,n[a].initialRequestOverhead=c,n[a].estTotalRequestsSize=g+f*c):n[a].lastChunkIdxProgress!==b&&(n[a].lastChunkIdxProgress=b,n[a].estTotalRequestsSize+=h);q.onProgress(a,m,d,n[a].estTotalRequestsSize)}};q.onUploadChunk(a,m,r(d));p=q.paramsStore.getParams(a);c(a,p,d);n[a].attemptingResume&&(p[q.resume.paramNames.resuming]=!0);p=g(p,f,d.blob,a);h(a,f);J("Sending chunked upload request for item "+a+": bytes "+(d.start+1)+"-"+d.end+" of "+l);f.send(p)}function m(a){J("Server has ordered chunking effort to be restarted on next attempt for item ID "+
a,"error");x&&(K(a),n[a].attemptingResume=!1);n[a].remainingChunkIdxs=[];delete n[a].loaded;delete n[a].estTotalRequestsSize;delete n[a].initialRequestOverhead}function r(a){return{partIndex:a.part,startByte:a.start+1,endByte:a.end,totalParts:a.count}}function C(a,c){return function(){if(4===c.readyState){var b;if(n[a]){J("xhr - server response received for "+a);J("responseText = "+c.responseText);try{b=qq.parseJson(c.responseText)}catch(d){J("Error when attempting to parse xhr response text ("+d+
")","error"),b={}}if(200!==c.status||!b.success||b.reset)if(b.reset&&m(a),n[a].attemptingResume&&b.reset)n[a].attemptingResume=!1,J("Server has declared that it cannot handle resume for item ID "+a+" - starting from the first chunk","error"),m(a),w.upload(a,!0);else{var f=w.getName(a);q.onAutoRetry(a,f,b,c)||l(a,b,c)}else if(Q){var f=n[a].remainingChunkIdxs.shift(),g=e(a,f);n[a].attemptingResume=!1;var f=n[a],h=f.loaded,g=g.size;f.loaded=h+(g+(v?n[a].lastRequestOverhead:0));0<n[a].remainingChunkIdxs.length?
p(a):(x&&K(a),l(a,b,c))}else l(a,b,c)}}}}function y(a,c){var b=w.getUuid(a),e=n[a].loaded,d=n[a].initialRequestOverhead,f=n[a].estTotalRequestsSize,g=A(a);qq.setCookie(g,b+E+c.part+E+e+E+d+E+f,q.resume.cookiesExpireIn)}function K(a){n[a].file&&(a=A(a),qq.deleteCookie(a))}function A(a){var c=w.getName(a);a=w.getSize(a);var b=q.chunking.partSize,c="qqfilechunk"+E+encodeURIComponent(c)+E+a+E+b;void 0!==I&&(c+=E+I);return c}function t(a){var c=n[a].file||n[a].blobData.blob,b=w.getName(a),e,d;n[a].loaded=
0;e=n[a].xhr=new XMLHttpRequest;e.upload.onprogress=function(c){c.lengthComputable&&(n[a].loaded=c.loaded,q.onProgress(a,b,c.loaded,c.total))};e.onreadystatechange=C(a,e);d=q.paramsStore.getParams(a);c=g(d,e,c,a);h(a,e);J("Sending upload request for "+a);e.send(c)}var q=a,F=b,J=d,n=[],E="|",Q=q.chunking.enabled&&qq.supportedFeatures.chunking,x=q.resume.enabled&&Q&&qq.supportedFeatures.resume,I;I=null===q.resume.id||void 0===q.resume.id||qq.isFunction(q.resume.id)||qq.isObject(q.resume.id)?void 0:
q.resume.id;var v=q.forceMultipart||q.paramsInBody,w;return w={add:function(a){if(a instanceof File)a=n.push({file:a})-1;else if(qq.isBlob(a.blob))a=n.push({blobData:a})-1;else throw Error("Passed obj in not a File or BlobData (in qq.UploadHandlerXhr)");n[a].uuid=qq.getUniqueId();return a},getName:function(a){if(w.isValid(a)){var c=n[a].file;a=n[a].blobData;return c?null!==c.fileName&&void 0!==c.fileName?c.fileName:c.name:a.name}J(a+" is not a valid item ID.","error")},getSize:function(a){a=n[a].file||
n[a].blobData.blob;return qq.isFileOrInput(a)?null!=a.fileSize?a.fileSize:a.size:a.size},getFile:function(a){if(n[a])return n[a].file||n[a].blobData.blob},getLoaded:function(a){return n[a].loaded||0},isValid:function(a){return void 0!==n[a]},reset:function(){n=[]},getUuid:function(a){return n[a].uuid},upload:function(a,c){var b=this.getName(a);q.onUpload(a,b);if(Q){var d=w.getName(a),b=0,g,h;if(!n[a].remainingChunkIdxs||0===n[a].remainingChunkIdxs.length){n[a].remainingChunkIdxs=[];if(x&&!c&&n[a].file){a:{g=
qq.getCookie(A(a));h=w.getName(a);var l,m,k;if(g){g=g.split(E);if(5===g.length){h=g[0];l=parseInt(g[1],10);m=parseInt(g[2],10);k=parseInt(g[3],10);g=parseInt(g[4],10);g={uuid:h,part:l,lastByteSent:m,initialRequestOverhead:k,estTotalRequestsSize:g};break a}J("Ignoring previously stored resume/chunk cookie for "+h+" - old cookie format","warn")}g=void 0}g&&(h=e(a,g.part),!1!==q.onResume(a,d,r(h))&&(b=g.part,n[a].uuid=g.uuid,n[a].loaded=g.lastByteSent,n[a].estTotalRequestsSize=g.estTotalRequestsSize,
n[a].initialRequestOverhead=g.initialRequestOverhead,n[a].attemptingResume=!0,J("Resuming "+d+" at partition index "+b)))}for(d=f(a)-1;d>=b;--d)n[a].remainingChunkIdxs.unshift(d)}p(a)}else t(a)},cancel:function(a){var c=n[a].xhr;q.onCancel(a,this.getName(a));c&&(c.onreadystatechange=null,c.abort());x&&K(a);delete n[a]},getResumableFilesData:function(){var a=[],c=[];return Q&&x?(a=void 0===I?qq.getCookieNames(RegExp("^qqfilechunk\\"+E+".+\\"+E+"\\d+\\"+E+q.chunking.partSize+"=")):qq.getCookieNames(RegExp("^qqfilechunk\\"+
E+".+\\"+E+"\\d+\\"+E+q.chunking.partSize+"\\"+E+I+"=")),qq.each(a,function(a,b){var e=b.split(E),d=qq.getCookie(b).split(E);c.push({name:decodeURIComponent(e[1]),size:e[2],uuid:d[0],partIdx:d[1]})}),c):[]}}};
(function(a){var b,d,c,e,f,g,h,l,p,m;g=["uploaderType"];c=function(a){a&&(a=l(a),h(a),"basic"===f("uploaderType")?b(new qq.FineUploaderBasic(a)):b(new qq.FineUploader(a)));return d};e=function(a,c){var b=d.data("fineuploader");if(c)void 0===b&&(b={}),b[a]=c,d.data("fineuploader",b);else return void 0===b?null:b[a]};b=function(a){return e("uploader",a)};f=function(a,c){return e(a,c)};h=function(c){var b=c.callbacks={};c=new qq.FineUploaderBasic;a.each(c._options.callbacks,function(a){var c,e;c=/^on(\w+)/.exec(a)[1];
c=c.substring(0,1).toLowerCase()+c.substring(1);e=d;b[a]=function(){var a=Array.prototype.slice.call(arguments);return e.triggerHandler(c,a)}})};l=function(c,b){var e,h;e=void 0===b?"basic"!==c.uploaderType?{element:d[0]}:{}:b;a.each(c,function(c,b){0<=a.inArray(c,g)?f(c,b):b instanceof a?e[c]=b[0]:a.isPlainObject(b)?(e[c]={},l(b,e[c])):a.isArray(b)?(h=[],a.each(b,function(c,b){b instanceof a?a.merge(h,b):h.push(b)}),e[c]=h):e[c]=b});if(void 0===b)return e};p=function(c){return"string"===a.type(c)&&
!c.match(/^_/)&&void 0!==b()[c]};m=function(a){var c=[],e=Array.prototype.slice.call(arguments,1);l(e,c);return b()[a].apply(b(),c)};a.fn.fineUploader=function(e){var f=this,g=arguments,h=[];this.each(function(l,t){d=a(t);if(b()&&p(e)){if(h.push(m.apply(f,g)),1===f.length)return!1}else"object"!==typeof e&&e?a.error("Method "+e+" does not exist on jQuery.fineUploader"):c.apply(f,g)});return 1===h.length?h[0]:1<h.length?h:this}})(jQuery);
(function(a){function b(a){a||(a={});a.dropZoneElements=[h];a=e(a);c(a);d(new qq.DragAndDrop(a));return h}function d(a){var c,b=h.data(g);a?(void 0===b&&(b={}),b.dndInstance=a,h.data(g,b)):c=void 0===b?null:b.dndInstance;return c}function c(c){var b=c.callbacks={};new qq.FineUploaderBasic;a.each(new qq.DragAndDrop.callbacks,function(a){var c;c=h;b[a]=function(){var b=Array.prototype.slice.call(arguments);return c.triggerHandler(a,b)}})}function e(c,b){var d,f;d=void 0===b?{}:b;a.each(c,function(c,
b){b instanceof a?d[c]=b[0]:a.isPlainObject(b)?(d[c]={},e(b,d[c])):a.isArray(b)?(f=[],a.each(b,function(c,b){b instanceof a?a.merge(f,b):f.push(b)}),d[c]=f):d[c]=b});if(void 0===b)return d}function f(a){var c=[],b=Array.prototype.slice.call(arguments,1);e(b,c);return d()[a].apply(d(),c)}var g="fineUploaderDnd",h;a.fn.fineUploaderDnd=function(c){var e=this,g=arguments,r=[];this.each(function(C,y){h=a(y);if(d()&&"string"===a.type(c)&&"dispose"===c&&void 0!==d()[c]){if(r.push(f.apply(e,g)),1===e.length)return!1}else"object"!==
typeof c&&c?a.error("Method "+c+" does not exist in Fine Uploader's DnD module."):b.apply(e,g)});return 1===r.length?r[0]:1<r.length?r:this}})(jQuery);
(function(a){function b(a,b){(d(a,b)?e:c)(a,b)}var d,c,e;"classList"in document.documentElement?(d=function(a,c){return a.classList.contains(c)},c=function(a,c){a.classList.add(c)},e=function(a,c){a.classList.remove(c)}):(d=function(a,c){return(new RegExp("(^|\\s+)"+c+"(\\s+|$)")).test(a.className)},c=function(a,c){d(a,c)||(a.className=a.className+" "+c)},e=function(a,c){a.className=a.className.replace(new RegExp("(^|\\s+)"+c+"(\\s+|$)")," ")});var f={hasClass:d,addClass:c,removeClass:e,toggleClass:b,
has:d,add:c,remove:e,toggle:b};"function"===typeof define&&define.amd?define(f):a.classie=f})(window);
$(function(a){var b=document.querySelector("#input"),d=document.querySelector("#search-label");d.addEventListener("click",function(c){classie.has(b,"focus")?(classie.remove(b,"focus"),classie.remove(d,"active"),a("#input input").animate({width:"0px",left:"-20px"},function(){})):a("#input input").animate({left:0,width:"100%"},function(){classie.add(b,"focus");classie.add(d,"active")})});document.addEventListener("click",function(c){c=c.target.id;"search-terms"!=c&&"search-label-target"!=c&&classie.has(b,
"focus")&&(classie.remove(b,"focus"),classie.remove(d,"active"),a("#input input").animate({width:"0px",left:"-20px"},function(){}))})});$(document).ready(function(){$(".not_so_cool_input").focus(function(){$(this).css("border","2px solid #cb9897")});$(".not_so_cool_input").blur(function(){$(this).css("border","2px solid #ccc")});$(".not_so_cool_textarea").focus(function(){$(this).css("border","2px solid #cb9897")});$(".not_so_cool_textarea").blur(function(){$(this).css("border","2px solid #ccc")})});
if(!jQuery)throw Error("Bootstrap requires jQuery");
+function(a){a.fn.emulateTransitionEnd=function(b){var d=!1,c=this;a(this).one(a.support.transition.end,function(){d=!0});return setTimeout(function(){d||a(c).trigger(a.support.transition.end)},b),this};a(function(){var b=a.support,d;a:{d=document.createElement("bootstrap");var c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},e;for(e in c)if(void 0!==d.style[e]){d={end:c[e]};break a}d=void 0}b.transition=
d})}(window.jQuery);
+function(a){var b=function(c){a(c).on("click",'[data-dismiss="alert"]',this.close)};b.prototype.close=function(c){function b(){h.trigger("closed.bs.alert").remove()}var d=a(this),g=d.attr("data-target");g||(g=d.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,""));var h=a(g);c&&c.preventDefault();h.length||(h=d.hasClass("alert")?d:d.parent());h.trigger(c=a.Event("close.bs.alert"));c.isDefaultPrevented()||(h.removeClass("in"),a.support.transition&&h.hasClass("fade")?h.one(a.support.transition.end,b).emulateTransitionEnd(150):
b())};var d=a.fn.alert;a.fn.alert=function(c){return this.each(function(){var e=a(this),d=e.data("bs.alert");d||e.data("bs.alert",d=new b(this));"string"==typeof c&&d[c].call(e)})};a.fn.alert.Constructor=b;a.fn.alert.noConflict=function(){return a.fn.alert=d,this};a(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',b.prototype.close)}(window.jQuery);
+function(a){var b=function(c,e){this.$element=a(c);this.options=a.extend({},b.DEFAULTS,e)};b.DEFAULTS={loadingText:"loading..."};b.prototype.setState=function(a){var b=this.$element,d=b.is("input")?"val":"html",g=b.data();a+="Text";g.resetText||b.data("resetText",b[d]());b[d](g[a]||this.options[a]);setTimeout(function(){"loadingText"==a?b.addClass("disabled").attr("disabled","disabled"):b.removeClass("disabled").removeAttr("disabled")},0)};b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons"]');
a.length&&"radio"===this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change").prop("type")&&a.find(".active").removeClass("active");this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=function(c){return this.each(function(){var e=a(this),d=e.data("bs.button"),g="object"==typeof c&&c;d||e.data("bs.button",d=new b(this,g));"toggle"==c?d.toggle():c&&d.setState(c)})};a.fn.button.Constructor=b;a.fn.button.noConflict=function(){return a.fn.button=d,this};
a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(c){var b=a(c.target);b.hasClass("btn")||(b=b.closest(".btn"));b.button("toggle");c.preventDefault()})}(window.jQuery);
+function(a){var b=function(c,b){this.$element=a(c);this.$indicators=this.$element.find(".carousel-indicators");this.options=b;this.paused=this.sliding=this.interval=this.$active=this.$items=null;"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5E3,pause:"hover",wrap:!0};b.prototype.cycle=function(c){return c||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&
(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this};b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)};b.prototype.to=function(c){var b=this,d=this.getActiveIndex();return c>this.$items.length-1||0>c?void 0:this.sliding?this.$element.one("slid",function(){b.to(c)}):d==c?this.pause().cycle():this.slide(c>d?"next":"prev",a(this.$items[c]))};b.prototype.pause=
function(c){return c||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};b.prototype.next=function(){return this.sliding?void 0:this.slide("next")};b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")};b.prototype.slide=function(c,b){var d=this.$element.find(".item.active"),g=b||d[c](),h=this.interval,l="next"==c?"left":"right",p=
"next"==c?"first":"last",m=this;if(!g.length){if(!this.options.wrap)return;g=this.$element.find(".item")[p]()}this.sliding=!0;h&&this.pause();p=a.Event("slide.bs.carousel",{relatedTarget:g[0],direction:l});if(!g.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var c=a(m.$indicators.children()[m.getActiveIndex()]);c&&c.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(p),
p.isDefaultPrevented())return;g.addClass(c);g[0].offsetWidth;d.addClass(l);g.addClass(l);d.one(a.support.transition.end,function(){g.removeClass([c,l].join(" ")).addClass("active");d.removeClass(["active",l].join(" "));m.sliding=!1;setTimeout(function(){m.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(p),p.isDefaultPrevented())return;d.removeClass("active");g.addClass("active");this.sliding=!1;this.$element.trigger("slid")}return h&&this.cycle(),this}};var d=
a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var e=a(this),d=e.data("bs.carousel"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c),h="string"==typeof c?c:g.slide;d||e.data("bs.carousel",d=new b(this,g));"number"==typeof c?d.to(c):h?d[h]():g.interval&&d.pause().cycle()})};a.fn.carousel.Constructor=b;a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(c){var b,d=a(this),
g=a(d.attr("data-target")||(b=d.attr("href"))&&b.replace(/.*(?=#[^\s]+$)/,""));b=a.extend({},g.data(),d.data());var h=d.attr("data-slide-to");h&&(b.interval=!1);g.carousel(b);(h=d.attr("data-slide-to"))&&g.data("bs.carousel").to(h);c.preventDefault()});a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);c.carousel(c.data())})})}(window.jQuery);
+function(a){var b=function(c,d){this.$element=a(c);this.options=a.extend({},b.DEFAULTS,d);this.transitioning=null;this.options.parent&&(this.$parent=a(this.options.parent));this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0};b.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var c=a.Event("show.bs.collapse");if(this.$element.trigger(c),!c.isDefaultPrevented()){if((c=this.$parent&&
this.$parent.find("> .panel > .in"))&&c.length){var b=c.data("bs.collapse");if(b&&b.transitioning)return;c.collapse("hide");b||c.data("bs.collapse",null)}var d=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[d](0);this.transitioning=1;c=function(){this.$element.removeClass("collapsing").addClass("in")[d]("auto");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return c.call(this);b=a.camelCase(["scroll",d].join("-"));this.$element.one(a.support.transition.end,
a.proxy(c,this)).emulateTransitionEnd(350)[d](this.$element[0][b])}}};b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var c=a.Event("hide.bs.collapse");if(this.$element.trigger(c),!c.isDefaultPrevented()){c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var b=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};
return a.support.transition?(this.$element[c](0).one(a.support.transition.end,a.proxy(b,this)).emulateTransitionEnd(350),void 0):b.call(this)}}};b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var d=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),f=d.data("bs.collapse"),g=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);f||d.data("bs.collapse",f=new b(this,g));"string"==typeof c&&f[c]()})};a.fn.collapse.Constructor=b;a.fn.collapse.noConflict=
function(){return a.fn.collapse=d,this};a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(c){var b,d=a(this);c=d.attr("data-target")||c.preventDefault()||(b=d.attr("href"))&&b.replace(/.*(?=#[^\s]+$)/,"");b=a(c);var g=(c=b.data("bs.collapse"))?"toggle":d.data(),h=d.attr("data-parent"),l=h&&a(h);c&&c.transitioning||(l&&l.find('[data-toggle=collapse][data-parent="'+h+'"]').not(d).addClass("collapsed"),d[b.hasClass("in")?"addClass":"removeClass"]("collapsed"));b.collapse(g)})}(window.jQuery);
+function(a){function b(){a(c).remove();a(e).each(function(c){var b=d(a(this));b.hasClass("open")&&(b.trigger(c=a.Event("hide.bs.dropdown")),c.isDefaultPrevented()||b.removeClass("open").trigger("hidden.bs.dropdown"))})}function d(c){var b=c.attr("data-target");b||(b=c.attr("href"),b=b&&/#/.test(b)&&b.replace(/.*(?=#[^\s]*$)/,""));return(b=b&&a(b))&&b.length?b:c.parent()}var c=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(c){a(c).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=
function(c){var e=a(this);if(!e.is(".disabled, :disabled")){var f=d(e),g=f.hasClass("open");if(b(),!g){if("ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b),f.trigger(c=a.Event("show.bs.dropdown")),c.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown");e.focus()}return!1}};f.prototype.keydown=function(c){if(/(38|40|27)/.test(c.keyCode)){var b=a(this);if(c.preventDefault(),c.stopPropagation(),
!b.is(".disabled, :disabled")){var f=d(b),g=f.hasClass("open");if(!g||g&&27==c.keyCode)return 27==c.which&&f.find(e).focus(),b.click();b=a("[role=menu] li:not(.divider):visible a",f);b.length&&(f=b.index(b.filter(":focus")),38==c.keyCode&&0<f&&f--,40==c.keyCode&&f<b.length-1&&f++,~f||(f=0),b.eq(f).focus())}}};var g=a.fn.dropdown;a.fn.dropdown=function(c){return this.each(function(){var b=a(this),d=b.data("dropdown");d||b.data("dropdown",d=new f(this));"string"==typeof c&&d[c].call(b)})};a.fn.dropdown.Constructor=
f;a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this};a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu]",f.prototype.keydown)}(window.jQuery);
+function(a){var b=function(c,b){this.options=b;this.$element=a(c);this.$backdrop=this.isShown=null;this.options.remote&&this.$element.load(this.options.remote)};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)};b.prototype.show=function(c){var b=this,d=a.Event("show.bs.modal",{relatedTarget:c});this.$element.trigger(d);this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',
a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body);b.$element.show();d&&b.$element[0].offsetWidth;b.$element.addClass("in").attr("aria-hidden",!1);b.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:c});d?b.$element.find(".modal-dialog").one(a.support.transition.end,function(){b.$element.focus().trigger(f)}).emulateTransitionEnd(300):b.$element.focus().trigger(f)}))};b.prototype.hide=
function(c){c&&c.preventDefault();c=a.Event("hide.bs.modal");this.$element.trigger(c);this.isShown&&!c.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())};b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",
a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))};b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")};b.prototype.hideModal=function(){var a=this;this.$element.hide();this.backdrop(function(){a.removeBackdrop();a.$element.trigger("hidden.bs.modal")})};b.prototype.removeBackdrop=
function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};b.prototype.backdrop=function(c){var b=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&b;if(this.$backdrop=a('<div class="modal-backdrop '+b+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),
d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),c)d?this.$backdrop.one(a.support.transition.end,c).emulateTransitionEnd(150):c()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,c).emulateTransitionEnd(150):c()):c&&c()};var d=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var f=a(this),g=f.data("bs.modal"),h=a.extend({},b.DEFAULTS,f.data(),"object"==typeof c&&
c);g||f.data("bs.modal",g=new b(this,h));"string"==typeof c?g[c](d):h.show&&g.show(d)})};a.fn.modal.Constructor=b;a.fn.modal.noConflict=function(){return a.fn.modal=d,this};a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var b=a(this),d=b.attr("href"),g=a(b.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),d=g.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},g.data(),b.data());c.preventDefault();g.modal(d,this).one("hide",function(){b.is(":visible")&&b.focus()})});
a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(window.jQuery);
+function(a){var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};b.prototype.init=function(c,b,d){this.enabled=!0;this.type=c;this.$element=a(b);this.options=this.getOptions(d);c=this.options.trigger.split(" ");
for(b=c.length;b--;)if(d=c[b],"click"==d)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=d){var g="hover"==d?"mouseleave":"blur";this.$element.on(("hover"==d?"mouseenter":"focus")+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(g+"."+this.type,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};b.prototype.getDefaults=
function(){return b.DEFAULTS};b.prototype.getOptions=function(c){return c=a.extend({},this.getDefaults(),this.$element.data(),c),c.delay&&"number"==typeof c.delay&&(c.delay={show:c.delay,hide:c.delay}),c};b.prototype.getDelegateOptions=function(){var c={},b=this.getDefaults();return this._options&&a.each(this._options,function(a,d){b[a]!=d&&(c[a]=d)}),c};b.prototype.enter=function(c){var b=c instanceof this.constructor?c:a(c.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
return clearTimeout(b.timeout),b.hoverState="in",b.options.delay&&b.options.delay.show?(b.timeout=setTimeout(function(){"in"==b.hoverState&&b.show()},b.options.delay.show),void 0):b.show()};b.prototype.leave=function(c){var b=c instanceof this.constructor?c:a(c.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(b.timeout),b.hoverState="out",b.options.delay&&b.options.delay.hide?(b.timeout=setTimeout(function(){"out"==b.hoverState&&b.hide()},b.options.delay.hide),
void 0):b.hide()};b.prototype.show=function(){var c=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled&&(this.$element.trigger(c),!c.isDefaultPrevented())){var b=this.tip();this.setContent();this.options.animation&&b.addClass("fade");var c="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,d=/\s?auto?\s?/i,g=d.test(c);g&&(c=c.replace(d,"")||"top");b.detach().css({top:0,left:0,display:"block"}).addClass(c);this.options.container?
b.appendTo(this.options.container):b.insertAfter(this.$element);var d=this.getPosition(),h=b[0].offsetWidth,l=b[0].offsetHeight;if(g){var p=this.$element.parent(),g=c,m=document.documentElement.scrollTop||document.body.scrollTop,r="body"==this.options.container?window.innerWidth:p.outerWidth(),C="body"==this.options.container?window.innerHeight:p.outerHeight(),p="body"==this.options.container?0:p.offset().left,c="bottom"==c&&d.top+d.height+l-m>C?"top":"top"==c&&0>d.top-m-l?"bottom":"right"==c&&d.right+
h>r?"left":"left"==c&&d.left-h<p?"right":c;b.removeClass(g).addClass(c)}b=this.getCalculatedOffset(c,d,h,l);this.applyPlacement(b,c);this.$element.trigger("shown.bs."+this.type)}};b.prototype.applyPlacement=function(a,b){var d,g=this.tip(),h=g[0].offsetWidth,l=g[0].offsetHeight,p=parseInt(g.css("margin-top"),10),m=parseInt(g.css("margin-left"),10);isNaN(p)&&(p=0);isNaN(m)&&(m=0);a.top+=p;a.left+=m;g.offset(a).addClass("in");p=g[0].offsetWidth;m=g[0].offsetHeight;("top"==b&&m!=l&&(d=!0,a.top=a.top+
l-m),/bottom|top/.test(b))?(l=0,0>a.left&&(l=-2*a.left,a.left=0,g.offset(a),p=g[0].offsetWidth),this.replaceArrow(l-h+p,p,"left")):this.replaceArrow(m-l,m,"top");d&&g.offset(a)};b.prototype.replaceArrow=function(a,b,d){this.arrow().css(d,a?50*(1-a/b)+"%":"")};b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b);a.removeClass("fade in top bottom left right")};b.prototype.hide=function(){function c(){"in"!=b.hoverState&&d.detach()}
var b=this,d=this.tip(),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,c).emulateTransitionEnd(150):c(),this.$element.trigger("hidden.bs."+this.type),this)};b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};b.prototype.hasContent=
function(){return this.getTitle()};b.prototype.getPosition=function(){var c=this.$element[0];return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():{width:c.offsetWidth,height:c.offsetHeight},this.$element.offset())};b.prototype.getCalculatedOffset=function(a,b,d,g){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-d/2}:"top"==a?{top:b.top-g,left:b.left+b.width/2-d/2}:"left"==a?{top:b.top+b.height/2-g/2,left:b.left-d}:{top:b.top+b.height/2-g/2,left:b.left+
b.width}};b.prototype.getTitle=function(){var a=this.$element,b=this.options;return a.attr("data-original-title")||("function"==typeof b.title?b.title.call(a[0]):b.title)};b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)};b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)};b.prototype.enable=function(){this.enabled=
!0};b.prototype.disable=function(){this.enabled=!1};b.prototype.toggleEnabled=function(){this.enabled=!this.enabled};b.prototype.toggle=function(c){c=c?a(c.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)};b.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var d=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),f=d.data("bs.tooltip"),g="object"==
typeof c&&c;f||d.data("bs.tooltip",f=new b(this,g));"string"==typeof c&&f[c]()})};a.fn.tooltip.Constructor=b;a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(window.jQuery);
+function(a){var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);b.prototype.constructor=b;b.prototype.getDefaults=function(){return b.DEFAULTS};b.prototype.setContent=
function(){var a=this.tip(),b=this.getTitle(),d=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b);a.find(".popover-content")[this.options.html?"html":"text"](d);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};b.prototype.hasContent=function(){return this.getTitle()||this.getContent()};b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?
b.content.call(a[0]):b.content)};b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),f=d.data("bs.popover"),g="object"==typeof c&&c;f||d.data("bs.popover",f=new b(this,g));"string"==typeof c&&f[c]()})};a.fn.popover.Constructor=b;a.fn.popover.noConflict=function(){return a.fn.popover=d,
this}}(window.jQuery);
+function(a){function b(c,d){var f,g=a.proxy(this.process,this);this.$element=a(c).is("body")?a(window):a(c);this.$body=a("body");this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",g);this.options=a.extend({},b.DEFAULTS,d);this.selector=(this.options.target||(f=a(c).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.offsets=a([]);this.targets=a([]);this.activeTarget=null;this.refresh();this.process()}b.DEFAULTS={offset:10};b.prototype.refresh=function(){var c=
this.$element[0]==window?"offset":"position";this.offsets=a([]);this.targets=a([]);var b=this;this.$body.find(this.selector).map(function(){var d=a(this),d=d.data("target")||d.attr("href"),g=/^#\w/.test(d)&&a(d);return g&&g.length&&[[g[c]().top+(!a.isWindow(b.$scrollElement.get(0))&&b.$scrollElement.scrollTop()),d]]||null}).sort(function(a,c){return a[0]-c[0]}).each(function(){b.offsets.push(this[0]);b.targets.push(this[1])})};b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+
this.options.offset,d=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),g=this.offsets,h=this.targets,l=this.activeTarget;if(b>=d)return l!=(a=h.last()[0])&&this.activate(a);for(a=g.length;a--;)l!=h[a]&&b>=g[a]&&(!g[a+1]||b<=g[a+1])&&this.activate(h[a])};b.prototype.activate=function(c){this.activeTarget=c;a(this.selector).parents(".active").removeClass("active");c=a(this.selector+'[data-target="'+c+'"],'+this.selector+'[href="'+c+'"]').parents("li").addClass("active");
c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active"));c.trigger("activate")};var d=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),f=d.data("bs.scrollspy"),g="object"==typeof c&&c;f||d.data("bs.scrollspy",f=new b(this,g));"string"==typeof c&&f[c]()})};a.fn.scrollspy.Constructor=b;a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this};a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var c=a(this);c.scrollspy(c.data())})})}(window.jQuery);
+function(a){var b=function(c){this.element=a(c)};b.prototype.show=function(){var c=this.element,b=c.closest("ul:not(.dropdown-menu)"),d=c.attr("data-target");if(d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!c.parent("li").hasClass("active")){var g=b.find(".active:last a")[0],h=a.Event("show.bs.tab",{relatedTarget:g});(c.trigger(h),h.isDefaultPrevented())||(d=a(d),this.activate(c.parent("li"),b),this.activate(d,d.parent(),function(){c.trigger({type:"shown.bs.tab",relatedTarget:g})}))}};
b.prototype.activate=function(c,b,d){function g(){h.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");c.addClass("active");l?(c[0].offsetWidth,c.addClass("in")):c.removeClass("fade");c.parent(".dropdown-menu")&&c.closest("li.dropdown").addClass("active");d&&d()}var h=b.find("> .active"),l=d&&a.support.transition&&h.hasClass("fade");l?h.one(a.support.transition.end,g).emulateTransitionEnd(150):g();h.removeClass("in")};var d=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=
a(this),f=d.data("bs.tab");f||d.data("bs.tab",f=new b(this));"string"==typeof c&&f[c]()})};a.fn.tab.Constructor=b;a.fn.tab.noConflict=function(){return a.fn.tab=d,this};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault();a(this).tab("show")})}(window.jQuery);
+function(a){var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d);this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this));this.$element=a(c);this.affixed=this.unpin=null;this.checkPosition()};b.RESET="affix affix-top affix-bottom";b.DEFAULTS={offset:0};b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=
a(document).height(),d=this.$window.scrollTop(),f=this.$element.offset(),g=this.options.offset,h=g.top,l=g.bottom;"object"!=typeof g&&(l=h=g);"function"==typeof h&&(h=g.top());"function"==typeof l&&(l=g.bottom());c=null!=this.unpin&&d+this.unpin<=f.top?!1:null!=l&&f.top+this.$element.height()>=c-l?"bottom":null!=h&&h>=d?"top":!1;this.affixed!==c&&(this.unpin&&this.$element.css("top",""),this.affixed=c,this.unpin="bottom"==c?f.top-d:null,this.$element.removeClass(b.RESET).addClass("affix"+(c?"-"+c:
"")),"bottom"==c&&this.$element.offset({top:document.body.offsetHeight-l-this.$element.height()}))}};var d=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),f=d.data("bs.affix"),g="object"==typeof c&&c;f||d.data("bs.affix",f=new b(this,g));"string"==typeof c&&f[c]()})};a.fn.affix.Constructor=b;a.fn.affix.noConflict=function(){return a.fn.affix=d,this};a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),b=c.data();b.offset=b.offset||{};b.offsetBottom&&
(b.offset.bottom=b.offsetBottom);b.offsetTop&&(b.offset.top=b.offsetTop);c.affix(b)})})}(window.jQuery);
(function(a,b,d){function c(c,d,e){c=b.createElement(c);return d&&(c.id=D+d),e&&(c.style.cssText=e),a(c)}function e(){return d.innerHeight?d.innerHeight:a(d).height()}function f(a){var b=x.length;a=(G+a)%b;return 0>a?b+a:a}function g(a,b){return Math.round((/%/.test(a)?("x"===b?I.width():e())/100:1)*parseInt(a,10))}function h(a,b){return a.retinaUrl&&1<d.devicePixelRatio?b.replace(a.photoRegex,a.retinaSuffix):b}function l(a){"contains"in t[0]&&!t[0].contains(a.target)&&(a.stopPropagation(),t.focus())}
function p(){var b,c=a.data(H,O);null==c?(k=a.extend({},ha),console&&console.log&&console.log("Error: cboxElement missing settings object")):k=a.extend({},c);for(b in k)a.isFunction(k[b])&&"on"!==b.slice(0,2)&&(k[b]=k[b].call(H));k.rel=k.rel||H.rel||a(H).data("rel")||"nofollow";k.href=k.href||a(H).attr("href");k.title=k.title||H.title;"string"==typeof k.href&&(k.href=a.trim(k.href))}function m(c,d){a(b).trigger(c);L.triggerHandler(c);a.isFunction(d)&&d.call(H)}function r(d){Y||(H=d,p(),x=a(H),G=0,
"nofollow"!==k.rel&&(x=a("."+V).filter(function(){var b,c=a.data(this,O);return c&&(b=a(this).data("rel")||c.rel||this.rel),b===k.rel}),G=x.index(H),-1===G&&(x=x.add(H),G=x.length-1)),A.css({opacity:parseFloat(k.opacity),cursor:k.overlayClose?"pointer":"auto",visibility:"visible"}).show(),ia&&t.add(A).removeClass(ia),k.className&&t.add(A).addClass(k.className),ia=k.className,k.closeButton?aa.html(k.close).appendTo(F):aa.appendTo("<div/>"),P||(P=Z=!0,t.css({visibility:"hidden",display:"block"}),v=
c(z,"LoadedContent","width:0; height:0; overflow:hidden"),F.css({width:"",height:""}).append(v),M=J.height()+Q.height()+F.outerHeight(!0)-F.height(),N=n.width()+E.width()+F.outerWidth(!0)-F.width(),R=v.outerHeight(!0),S=v.outerWidth(!0),k.w=g(k.initialWidth,"x"),k.h=g(k.initialHeight,"y"),v.css({width:"",height:k.h}),B.position(),m(pa,k.onOpen),ga.add(ea).hide(),t.focus(),k.trapFocus&&b.addEventListener&&(b.addEventListener("focus",l,!0),L.one(ja,function(){b.removeEventListener("focus",l,!0)})),
k.returnFocus&&L.one(ja,function(){a(H).focus()})),K())}function C(){!t&&b.body&&(ka=!1,I=a(d),t=c(z).attr({id:O,"class":!1===a.support.opacity?D+"IE":"",role:"dialog",tabindex:"-1"}).hide(),A=c(z,"Overlay").hide(),T=a([c(z,"LoadingOverlay")[0],c(z,"LoadingGraphic")[0]]),q=c(z,"Wrapper"),F=c(z,"Content").append(ea=c(z,"Title"),fa=c(z,"Current"),X=a('<button type="button"/>').attr({id:D+"Previous"}),W=a('<button type="button"/>').attr({id:D+"Next"}),U=c("button","Slideshow"),T),aa=a('<button type="button"/>').attr({id:D+
"Close"}),q.append(c(z).append(c(z,"TopLeft"),J=c(z,"TopCenter"),c(z,"TopRight")),c(z,!1,"clear:left").append(n=c(z,"MiddleLeft"),F,E=c(z,"MiddleRight")),c(z,!1,"clear:left").append(c(z,"BottomLeft"),Q=c(z,"BottomCenter"),c(z,"BottomRight"))).find("div div").css({"float":"left"}),w=c(z,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),ga=W.add(X).add(fa).add(U),a(b.body).append(A,t.append(q,w)))}function y(){function c(a){1<a.which||a.shiftKey||a.altKey||a.metaKey||
a.ctrlKey||(a.preventDefault(),r(this))}return t?(ka||(ka=!0,W.click(function(){B.next()}),X.click(function(){B.prev()}),aa.click(function(){B.close()}),A.click(function(){k.overlayClose&&B.close()}),a(b).bind("keydown."+D,function(a){var b=a.keyCode;P&&k.escKey&&27===b&&(a.preventDefault(),B.close());P&&k.arrowKey&&x[1]&&!a.altKey&&(37===b?(a.preventDefault(),X.click()):39===b&&(a.preventDefault(),W.click()))}),a.isFunction(a.fn.on)?a(b).on("click."+D,"."+V,c):a("."+V).live("click."+D,c)),!0):!1}
function K(){var e,f,l,n=B.prep,q=++la;Z=!0;u=!1;H=x[G];p();m(ba);m(ca,k.onLoad);k.h=k.height?g(k.height,"y")-R-M:k.innerHeight&&g(k.innerHeight,"y");k.w=k.width?g(k.width,"x")-S-N:k.innerWidth&&g(k.innerWidth,"x");k.mw=k.w;k.mh=k.h;k.maxWidth&&(k.mw=g(k.maxWidth,"x")-S-N,k.mw=k.w&&k.w<k.mw?k.w:k.mw);k.maxHeight&&(k.mh=g(k.maxHeight,"y")-R-M,k.mh=k.h&&k.h<k.mh?k.h:k.mh);e=k.href;na=setTimeout(function(){T.show()},100);k.inline?(l=c(z).hide().insertBefore(a(e)[0]),L.one(ba,function(){l.replaceWith(v.children())}),
n(a(e))):k.iframe?n(" "):k.html?n(k.html):k.photo||k.photoRegex.test(e)?(e=h(k,e),u=b.createElement("img"),a(u).addClass(D+"Photo").bind("error",function(){k.title=!1;n(c(z,"Error").html(k.imgError))}).one("load",function(){var b;q===la&&(a.each(["alt","longdesc","aria-describedby"],function(b,c){var d=a(H).attr(c)||a(H).attr("data-"+c);d&&u.setAttribute(c,d)}),k.retinaImage&&1<d.devicePixelRatio&&(u.height/=d.devicePixelRatio,u.width/=d.devicePixelRatio),k.scalePhotos&&(f=function(){u.height-=u.height*
b;u.width-=u.width*b},k.mw&&u.width>k.mw&&(b=(u.width-k.mw)/u.width,f()),k.mh&&u.height>k.mh&&(b=(u.height-k.mh)/u.height,f())),k.h&&(u.style.marginTop=Math.max(k.mh-u.height,0)/2+"px"),x[1]&&(k.loop||x[G+1])&&(u.style.cursor="pointer",u.onclick=function(){B.next()}),u.style.width=u.width+"px",u.style.height=u.height+"px",setTimeout(function(){n(u)},1))}),setTimeout(function(){u.src=e},1)):e&&w.load(e,k.data,function(b,d){q===la&&n("error"===d?c(z,"Error").html(k.xhrError):a(this).contents())})}var A,
t,q,F,J,n,E,Q,x,I,v,w,T,ea,fa,U,W,X,aa,ga,k,M,N,R,S,H,G,u,P,Z,Y,na,B,ia,ka,ha={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,
loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1},O="colorbox",D="cbox",
V=D+"Element",pa=D+"_open",ca=D+"_load",da=D+"_complete",ma=D+"_cleanup",ja=D+"_closed",ba=D+"_purge",L=a("<a/>"),z="div",la=0,oa={},qa=function(){function a(){clearTimeout(g)}function b(){(k.loop||x[G+1])&&(a(),g=setTimeout(B.next,k.slideshowSpeed))}function c(){U.html(k.slideshowStop).unbind(l).one(l,d);L.bind(da,b).bind(ca,a);t.removeClass(h+"off").addClass(h+"on")}function d(){a();L.unbind(da,b).unbind(ca,a);U.html(k.slideshowStart).unbind(l).one(l,function(){B.next();c()});t.removeClass(h+"on").addClass(h+
"off")}function e(){f=!1;U.hide();a();L.unbind(da,b).unbind(ca,a);t.removeClass(h+"off "+h+"on")}var f,g,h=D+"Slideshow_",l="click."+D;return function(){f?k.slideshow||(L.unbind(ma,e),e()):k.slideshow&&x[1]&&(f=!0,L.one(ma,e),k.slideshowAuto?c():d(),U.show())}}();a.colorbox||(a(C),B=a.fn[O]=a[O]=function(b,c){var d=this;if(b=b||{},C(),y()){if(a.isFunction(d))d=a("<a/>"),b.open=!0;else if(!d[0])return d;c&&(b.onComplete=c);d.each(function(){a.data(this,O,a.extend({},a.data(this,O)||ha,b))}).addClass(V);
(a.isFunction(b.open)&&b.open.call(d)||b.open)&&r(d[0])}return d},B.position=function(b,c){function d(){J[0].style.width=Q[0].style.width=F[0].style.width=parseInt(t[0].style.width,10)-N+"px";F[0].style.height=n[0].style.height=E[0].style.height=parseInt(t[0].style.height,10)-M+"px"}var f,h,l,m=0,p=0,r=t.offset();if(I.unbind("resize."+D),t.css({top:-9E4,left:-9E4}),h=I.scrollTop(),l=I.scrollLeft(),k.fixed?(r.top-=h,r.left-=l,t.css({position:"fixed"})):(m=h,p=l,t.css({position:"absolute"})),p+=!1!==
k.right?Math.max(I.width()-k.w-S-N-g(k.right,"x"),0):!1!==k.left?g(k.left,"x"):Math.round(Math.max(I.width()-k.w-S-N,0)/2),m+=!1!==k.bottom?Math.max(e()-k.h-R-M-g(k.bottom,"y"),0):!1!==k.top?g(k.top,"y"):Math.round(Math.max(e()-k.h-R-M,0)/2),t.css({top:r.top,left:r.left,visibility:"visible"}),q[0].style.width=q[0].style.height="9999px",f={width:k.w+S+N,height:k.h+R+M,top:m,left:p},b){var u=0;a.each(f,function(a){return f[a]!==oa[a]?(u=b,void 0):void 0});b=u}oa=f;b||t.css(f);t.dequeue().animate(f,
{duration:b||0,complete:function(){d();Z=!1;q[0].style.width=k.w+S+N+"px";q[0].style.height=k.h+R+M+"px";k.reposition&&setTimeout(function(){I.bind("resize."+D,B.position)},1);c&&c()},step:d})},B.resize=function(a){var b;P&&(a=a||{},a.width&&(k.w=g(a.width,"x")-S-N),a.innerWidth&&(k.w=g(a.innerWidth,"x")),v.css({width:k.w}),a.height&&(k.h=g(a.height,"y")-R-M),a.innerHeight&&(k.h=g(a.innerHeight,"y")),a.innerHeight||a.height||(b=v.scrollTop(),v.css({height:"auto"}),k.h=v.height()),v.css({height:k.h}),
b&&v.scrollTop(b),B.position("none"===k.transition?0:k.speed))},B.prep=function(d){if(P){var e,g="none"===k.transition?0:k.speed;v.empty().remove();v=c(z,"LoadedContent").append(d);v.hide().appendTo(w.show()).css({width:(k.w=k.w||v.width(),k.w=k.mw&&k.mw<k.w?k.mw:k.w,k.w),overflow:k.scrolling?"auto":"hidden"}).css({height:(k.h=k.h||v.height(),k.h=k.mh&&k.mh<k.h?k.mh:k.h,k.h)}).prependTo(F);w.hide();a(u).css({"float":"none"});e=function(){function d(){!1===a.support.opacity&&t[0].style.removeAttribute("filter")}
var e,l,n=x.length;P&&(l=function(){clearTimeout(na);T.hide();m(da,k.onComplete)},ea.html(k.title).add(v).show(),1<n?("string"==typeof k.current&&fa.html(k.current.replace("{current}",G+1).replace("{total}",n)).show(),W[k.loop||n-1>G?"show":"hide"]().html(k.next),X[k.loop||G?"show":"hide"]().html(k.previous),qa(),k.preloading&&a.each([f(-1),f(1)],function(){var c,d,e=x[this],f=a.data(e,O);f&&f.href?(c=f.href,a.isFunction(c)&&(c=c.call(e))):c=a(e).attr("href");c&&(f.photo||f.photoRegex.test(c))&&(c=
h(f,c),d=b.createElement("img"),d.src=c)})):ga.hide(),k.iframe?(e=c("iframe")[0],"frameBorder"in e&&(e.frameBorder=0),"allowTransparency"in e&&(e.allowTransparency="true"),k.scrolling||(e.scrolling="no"),a(e).attr({src:k.href,name:(new Date).getTime(),"class":D+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",l).appendTo(v),L.one(ba,function(){e.src="//about:blank"}),k.fastIframe&&a(e).trigger("load")):l(),"fade"===k.transition?t.fadeTo(g,1,d):d())};"fade"===
k.transition?t.fadeTo(g,0,function(){B.position(0,e)}):B.position(g,e)}},B.next=function(){!Z&&x[1]&&(k.loop||x[G+1])&&(G=f(1),r(x[G]))},B.prev=function(){!Z&&x[1]&&(k.loop||G)&&(G=f(-1),r(x[G]))},B.close=function(){P&&!Y&&(Y=!0,P=!1,m(ma,k.onCleanup),I.unbind("."+D),A.fadeTo(k.fadeOut||0,0),t.stop().fadeTo(k.fadeOut||0,0,function(){t.add(A).css({opacity:1,cursor:"auto"}).hide();m(ba);v.empty().remove();setTimeout(function(){Y=!1;m(ja,k.onClosed)},1)}))},B.remove=function(){t&&(t.stop(),a.colorbox.close(),
t.stop().remove(),A.remove(),Y=!1,t=null,a("."+V).removeData(O).removeClass(V),a(b).unbind("click."+D))},B.element=function(){return a(H)},B.settings=ha)})(jQuery,document,window);
