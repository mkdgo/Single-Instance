(function(a,c){function e(){a.removeEventListener("load",e,!1);k=!0}function b(a){return n=n||new b.Class(a)}function f(a,b){for(var c in b)a[c]=b[c];return a}function g(){"#ath"==c.location.hash&&history.replaceState("",a.document.title,c.location.href.split("#")[0]);m.test(c.location.href)&&history.replaceState("",a.document.title,c.location.href.replace(m,"$1"));p.test(c.location.search)&&history.replaceState("",a.document.title,c.location.href.replace(p,"$2"))}var h="addEventListener"in a,k=!1;
"complete"===c.readyState?k=!0:h&&a.addEventListener("load",e,!1);var m=/\/ath(\/)?$/,p=/([\?&]ath=[^&]*$|&ath=[^&]*(&))/,n;b.intl={de_de:{ios:"Um diese Web-App zum Home-Bildschirm hinzuzuf\u00fcgen, tippen Sie auf %icon und dann <strong>Zum Home-Bildschirm</strong>.",android:"Um diese Web-App zum Home-Bildschirm hinzuzuf\u00fcgen, \u00f6ffnen Sie das Men\u00fc und tippen dann auf <strong>Zum Startbildschirm hinzuf\u00fcgen</strong>. <small>Wenn Ihr Ger\u00e4t eine Men\u00fctaste hat, l\u00e4sst sich das Browsermen\u00fc \u00fcber diese \u00f6ffnen. Ansonsten tippen Sie auf %icon.</small>"},
da_dk:{ios:"For at tilf\u00f8je denne web app til hjemmesk\u00e6rmen: Tryk %icon og derefter <strong>F\u00f8j til hjemmesk\u00e6rm</strong>.",android:"For at tilf\u00f8je denne web app til hjemmesk\u00e6rmen, \u00e5bn browser egenskaber menuen og tryk p\u00e5 <strong>F\u00f8j til hjemmesk\u00e6rm</strong>. <small>Denne menu kan tilg\u00e5s ved at trykke p\u00e5 menu knappen, hvis din enhed har en, eller ved at trykke p\u00e5 det \u00f8verste h\u00f8jre menu ikon %icon.</small>"},en_us:{ios:"To add this web app to the home screen: tap %icon and then <strong>Add to Home Screen</strong>.",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},es_es:{ios:"Para a\u00f1adir esta aplicaci\u00f3n web a la pantalla de inicio: pulsa %icon y selecciona <strong>A\u00f1adir a pantalla de inicio</strong>.",android:"Para a\u00f1adir esta aplicaci\u00f3n web a la pantalla de inicio, abre las opciones y pulsa <strong>A\u00f1adir a pantalla inicio</strong>. <small>El men\u00fa se puede acceder pulsando el bot\u00f3n t\u00e1ctil en caso de tenerlo, o bien el icono de la parte superior derecha de la pantalla %icon.</small>"},
fi_fi:{ios:"Liit\u00e4 t\u00e4m\u00e4 sovellus kotivalikkoon: klikkaa %icon ja t\u00e4m\u00e4n j\u00e4lkeen <strong>Lis\u00e4\u00e4 kotivalikkoon</strong>.",android:"Lis\u00e4t\u00e4ksesi t\u00e4m\u00e4n sovelluksen aloitusn\u00e4yt\u00f6lle, avaa selaimen valikko ja klikkaa t\u00e4hti -ikonia tai <strong>Lis\u00e4\u00e4 aloitusn\u00e4yt\u00f6lle teksti\u00e4</strong>. <small>Valikkoon p\u00e4\u00e4see my\u00f6s painamalla menuvalikkoa, jos laitteessasi on sellainen tai koskettamalla oikealla yl\u00e4kulmassa menu ikonia %icon.</small>"},
fr_fr:{ios:"Pour ajouter cette application web sur l'\u00e9cran d'accueil : Appuyez %icon et s\u00e9lectionnez <strong>Ajouter sur l'\u00e9cran d'accueil</strong>.",android:'Pour ajouter cette application web sur l\'\u00e9cran d\'accueil : Appuyez sur le bouton "menu", puis sur <strong>Ajouter sur l\'\u00e9cran d\'accueil</strong>. <small>Le menu peut-\u00eatre accessible en appyant sur le bouton "menu" du t\u00e9l\u00e9phone s\'il en poss\u00e8de un <i class="fa fa-bars"></i>. Sinon, il se trouve probablement dans la coin sup\u00e9rieur droit du navigateur %icon.</small>'},
he_il:{ios:'<span dir="rtl">\u05dc\u05d4\u05d5\u05e1\u05e4\u05ea \u05d4\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d4 \u05dc\u05de\u05e1\u05da \u05d4\u05d1\u05d9\u05ea: \u05dc\u05dc\u05d7\u05d5\u05e5 \u05e2\u05dc %icon \u05d5\u05d0\u05d6 <strong>\u05d4\u05d5\u05e1\u05e3 \u05dc\u05de\u05e1\u05da \u05d4\u05d1\u05d9\u05ea</strong>.</span>',android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},
hu_hu:{ios:"Ha hozz\u00e1 szeretn\u00e9 adni ezt az alkalmaz\u00e1st a kezd\u0151k\u00e9perny\u0151j\u00e9hez, \u00e9rintse meg a k\u00f6vetkez\u0151 ikont: %icon , majd a <strong>Hozz\u00e1ad\u00e1s a kezd\u0151k\u00e9perny\u0151h\u00f6z</strong> men\u00fcpontot.",android:"Ha hozz\u00e1 szeretn\u00e9 adni ezt az alkalmaz\u00e1st a kezd\u0151k\u00e9perny\u0151j\u00e9hez, a b\u00f6ng\u00e9sz\u0151 men\u00fcj\u00e9ben kattintson a <strong>Hozz\u00e1ad\u00e1s a kezd\u0151k\u00e9perny\u0151h\u00f6z</strong> men\u00fcpontra. <small>A b\u00f6ng\u00e9sz\u0151 men\u00fcj\u00e9t a k\u00f6vetkez\u0151 ikon meg\u00e9rint\u00e9s\u00e9vel tudja megnyitni: %icon.</small>"},
it_it:{ios:"Per aggiungere questa web app alla schermata iniziale: premi %icon e poi <strong>Aggiungi a Home</strong>.",android:"Per aggiungere questa web app alla schermata iniziale, apri il menu opzioni del browser e premi su <strong>Aggiungi alla homescreen</strong>. <small>Puoi accedere al menu premendo il pulsante hardware delle opzioni se la tua device ne ha uno, oppure premendo l'icona %icon in alto a destra.</small>"},ja_jp:{ios:"\u3053\u306e\u30a6\u30a7\u30d7\u30a2\u30d7\u30ea\u3092\u30db\u30fc\u30e0\u753b\u9762\u306b\u8ffd\u52a0\u3059\u308b\u305f\u3081\u306b%icon\u3092\u62bc\u3057\u3066<strong>\u30db\u30fc\u30e0\u753b\u9762\u306b\u8ffd\u52a0</strong>\u3002",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},ko_kr:{ios:"\ud648 \ud654\uba74\uc5d0 \ubc14\ub85c\uac00\uae30 \uc0dd\uc131: %icon \uc744 \ud074\ub9ad\ud55c \ud6c4 <strong>\ud648 \ud654\uba74\uc5d0 \ucd94\uac00</strong>.",android:"\ube0c\ub77c\uc6b0\uc800 \uc635\uc158 \uba54\ub274\uc758 <string>\ud648 \ud654\uba74\uc5d0 \ucd94\uac00</string>\ub97c \ud074\ub9ad\ud558\uc5ec \ud648\ud654\uba74\uc5d0 \ubc14\ub85c\uac00\uae30\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. <small>\uc635\uc158 \uba54\ub274\ub294 \uc7a5\uce58\uc758 \uba54\ub274 \ubc84\ud2bc\uc744 \ub204\ub974\uac70\ub098 \uc624\ub978\ucabd \uc0c1\ub2e8\uc758 \uba54\ub274 \uc544\uc774\ucf58 %icon\uc744 \ud074\ub9ad\ud558\uc5ec \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</small>"},
nb_no:{ios:"For \u00e5 installere denne appen p\u00e5 hjem-skjermen: trykk p\u00e5 %icon og deretter <strong>Legg til p\u00e5 Hjem-skjerm</strong>.",android:"For \u00e5 legge til denne webappen p\u00e5 startsiden \u00e5pner en nettlesermenyen og velger <strong>Legg til p\u00e5 startsiden</strong>. <small>Menyen \u00e5pnes ved \u00e5 trykke p\u00e5 den fysiske menyknappen hvis enheten har det, eller ved \u00e5 trykke p\u00e5 menyikonet \u00f8verst til h\u00f8yre %icon.</small>"},pt_br:{ios:"Para adicionar este app \u00e0 tela de in\u00edcio: clique %icon e ent\u00e3o <strong>Tela de in\u00edcio</strong>.",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},pt_pt:{ios:"Para adicionar esta app ao ecr\u00e3 principal: clique %icon e depois <strong>Ecr\u00e3 principal</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},
nl_nl:{ios:"Om deze webapp op je telefoon te installeren, klik op %icon en dan <strong>Zet in beginscherm</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},ru_ru:{ios:'\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u0441\u0430\u0439\u0442 \u043d\u0430 \u0441\u0432\u043e\u0439 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u044d\u043a\u0440\u0430\u043d, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0438\u043a\u043e\u043d\u043a\u0443 %icon \u0438 \u0437\u0430\u0442\u0435\u043c <strong>\u041d\u0430 \u044d\u043a\u0440\u0430\u043d "\u0414\u043e\u043c\u043e\u0439"</strong>.',
android:"\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0430\u0439\u0442 \u043d\u0430 \u0441\u0432\u043e\u0439 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u044d\u043a\u0440\u0430\u043d, \u043e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u043c\u0435\u043d\u044e \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 <strong>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u044b\u0439 \u044d\u043a\u0440\u0430\u043d</strong>. <small>\u041c\u0435\u043d\u044e \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c, \u043d\u0430\u0436\u0430\u0432 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \u043c\u0435\u043d\u044e \u0432\u0430\u0448\u0435\u0433\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430, \u0435\u0441\u043b\u0438 \u043e\u043d\u0430 \u0435\u0441\u0442\u044c. \u0418\u043b\u0438 \u043d\u0430\u0439\u0434\u0438\u0442\u0435 \u0438\u043a\u043e\u043d\u043a\u0443 \u0441\u0432\u0435\u0440\u0445\u0443 \u0441\u043f\u0440\u0430\u0432\u0430 %icon[\u0438\u043a\u043e\u043d\u043a\u0430].</small>"},
sv_se:{ios:"F\u00f6r att l\u00e4gga till denna webbapplikation p\u00e5 hemsk\u00e4rmen: tryck p\u00e5 %icon och d\u00e4refter <strong>L\u00e4gg till p\u00e5 hemsk\u00e4rmen</strong>.",android:"F\u00f6r att l\u00e4gga till den h\u00e4r webbappen p\u00e5 hemsk\u00e4rmen \u00f6ppnar du webbl\u00e4sarens alternativ-meny och v\u00e4ljer <strong>L\u00e4gg till p\u00e5 startsk\u00e4rmen</strong>. <small>Man hittar menyn genom att trycka p\u00e5 h\u00e5rdvaruknappen om din enhet har en s\u00e5dan, eller genom att trycka p\u00e5 menyikonen h\u00f6gst upp till h\u00f6ger %icon.</small>"},
zh_cn:{ios:"\u5982\u8981\u628a\u5e94\u7528\u7a0b\u5e8f\u52a0\u81f3\u4e3b\u5c4f\u5e55,\u8bf7\u70b9\u51fb%icon, \u7136\u540e<strong>\u6dfb\u52a0\u5230\u4e3b\u5c4f\u5e55</strong>",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},zh_tw:{ios:"\u5982\u8981\u628a\u61c9\u7528\u7a0b\u5f0f\u52a0\u81f3\u4e3b\u5c4f\u5e55, \u8acb\u9ede\u64ca%icon, \u7136\u5f8c<strong>\u52a0\u81f3\u4e3b\u5c4f\u5e55</strong>.",
android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"}};for(var r in b.intl)b.intl[r.substr(0,2)]=b.intl[r];b.defaults={appID:"org.cubiq.addtohome",fontSize:15,debug:!1,logging:!1,modal:!1,mandatory:!1,autostart:!0,skipFirstVisit:!1,startDelay:1,lifespan:15,displayPace:1440,maxDisplayCount:0,
icon:!0,message:"",validLocation:[],onInit:null,onShow:null,onRemove:null,onAdd:null,onPrivate:null,privateModeOverride:!1,detectHomescreen:!1};r=a.navigator.userAgent;var x=a.navigator;f(b,{hasToken:"#ath"==c.location.hash||m.test(c.location.href)||p.test(c.location.search),isRetina:a.devicePixelRatio&&1<a.devicePixelRatio,isIDevice:/iphone|ipod|ipad/i.test(r),isMobileChrome:-1<r.indexOf("Android")&&/Chrome\/[.0-9]*/.test(r)&&-1==r.indexOf("Version"),isMobileIE:-1<r.indexOf("Windows Phone"),language:x.language&&
x.language.toLowerCase().replace("-","_")||""});b.language=b.language&&b.language in b.intl?b.language:"en_us";b.isMobileSafari=b.isIDevice&&-1<r.indexOf("Safari")&&0>r.indexOf("CriOS");b.OS=b.isIDevice?"ios":b.isMobileChrome?"android":b.isMobileIE?"windows":"unsupported";b.OSVersion=r.match(/(OS|Android) (\d+[_\.]\d+)/);b.OSVersion=b.OSVersion&&b.OSVersion[2]?+b.OSVersion[2].replace("_","."):0;b.isStandalone="standalone"in a.navigator&&a.navigator.standalone;b.isTablet=b.isMobileSafari&&-1<r.indexOf("iPad")||
b.isMobileChrome&&0>r.indexOf("Mobile");b.isCompatible=b.isMobileSafari&&6<=b.OSVersion||b.isMobileChrome;var v={lastDisplayTime:0,returningVisitor:!1,displayCount:0,optedout:!1,added:!1};b.removeSession=function(a){try{if(!localStorage)throw Error("localStorage is not defined");localStorage.removeItem(a||b.defaults.appID)}catch(c){}};b.doLog=function(a){this.options.logging&&console.log(a)};b.Class=function(e){this.doLog=b.doLog;this.options=f({},b.defaults);f(this.options,e);e&&e.debug&&"undefined"===
typeof e.logging&&(this.options.logging=!0);if(h)if(this.options.mandatory=this.options.mandatory&&("standalone"in a.navigator||this.options.debug),this.options.modal=this.options.modal||this.options.mandatory,this.options.mandatory&&(this.options.startDelay=-.5),this.options.detectHomescreen=!0===this.options.detectHomescreen?"hash":this.options.detectHomescreen,this.options.debug&&(b.isCompatible=!0,b.OS="string"==typeof this.options.debug?this.options.debug:"unsupported"==b.OS?"android":b.OS,b.OSVersion=
"ios"==b.OS?"8":"4"),this.container=c.documentElement,this.session=(this.session=this.getItem(this.options.appID))?JSON.parse(this.session):void 0,!b.hasToken||b.isCompatible&&this.session||(b.hasToken=!1,g()),b.isCompatible){this.session=this.session||v;try{if(!localStorage)throw Error("localStorage is not defined");localStorage.setItem(this.options.appID,JSON.stringify(this.session));b.hasLocalStorage=!0}catch(k){b.hasLocalStorage=!1,this.options.onPrivate&&this.options.onPrivate.call(this)}e=!this.options.validLocation.length;
for(var p=this.options.validLocation.length;p--;)if(this.options.validLocation[p].test(c.location.href)){e=!0;break}this.getItem("addToHome")&&this.optOut();if(this.session.optedout)this.doLog("Add to homescreen: not displaying callout because user opted out");else if(this.session.added)this.doLog("Add to homescreen: not displaying callout because already added to the homescreen");else if(e)if(b.isStandalone)this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&b.hasLocalStorage&&
this.options.onAdd.call(this)),this.doLog("Add to homescreen: not displaying callout because in standalone mode");else{if(this.options.detectHomescreen){if(b.hasToken){g();this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&b.hasLocalStorage&&this.options.onAdd.call(this));this.doLog("Add to homescreen: not displaying callout because URL has token, so we are likely coming from homescreen");return}"hash"==this.options.detectHomescreen?history.replaceState("",a.document.title,
c.location.href+"#ath"):"smartURL"==this.options.detectHomescreen?history.replaceState("",a.document.title,c.location.href.replace(/(\/)?$/,"/ath$1")):history.replaceState("",a.document.title,c.location.href+(c.location.search?"&":"?")+"ath=")}if(!this.session.returningVisitor&&(this.session.returningVisitor=!0,this.updateSession(),this.options.skipFirstVisit)){this.doLog("Add to homescreen: not displaying callout because skipping first visit");return}this.options.privateModeOverride||b.hasLocalStorage?
(this.ready=!0,this.options.onInit&&this.options.onInit.call(this),this.options.autostart&&(this.doLog("Add to homescreen: autostart displaying callout"),this.show())):this.doLog("Add to homescreen: not displaying callout because browser is in private mode")}else this.doLog("Add to homescreen: not displaying callout because not a valid location")}else this.doLog("Add to homescreen: not displaying callout because device not supported")};b.Class.prototype={events:{load:"_delayedShow",error:"_delayedShow",
orientationchange:"resize",resize:"resize",scroll:"resize",click:"remove",touchmove:"_preventDefault",transitionend:"_removeElements",webkitTransitionEnd:"_removeElements",MSTransitionEnd:"_removeElements"},handleEvent:function(a){var b=this.events[a.type];if(b)this[b](a)},show:function(f){if(this.options.autostart&&!k)setTimeout(this.show.bind(this),50);else if(this.shown)this.doLog("Add to homescreen: not displaying callout because already shown on screen");else{var e=Date.now(),g=this.session.lastDisplayTime;
if(!0!==f){if(!this.ready){this.doLog("Add to homescreen: not displaying callout because not ready");return}if(e-g<6E4*this.options.displayPace){this.doLog("Add to homescreen: not displaying callout because displayed recently");return}if(this.options.maxDisplayCount&&this.session.displayCount>=this.options.maxDisplayCount){this.doLog("Add to homescreen: not displaying callout because displayed too many times already");return}}this.shown=!0;this.session.lastDisplayTime=e;this.session.displayCount++;
this.updateSession();this.applicationIcon||(this.applicationIcon="ios"==b.OS?c.querySelector('head link[rel^=apple-touch-icon][sizes="152x152"],head link[rel^=apple-touch-icon][sizes="144x144"],head link[rel^=apple-touch-icon][sizes="120x120"],head link[rel^=apple-touch-icon][sizes="114x114"],head link[rel^=apple-touch-icon]'):c.querySelector('head link[rel^="shortcut icon"][sizes="196x196"],head link[rel^=apple-touch-icon]'));f="";"object"==typeof this.options.message&&b.language in this.options.message?
f=this.options.message[b.language][b.OS]:"object"==typeof this.options.message&&b.OS in this.options.message?f=this.options.message[b.OS]:this.options.message in b.intl?f=b.intl[this.options.message][b.OS]:""!==this.options.message?f=this.options.message:b.OS in b.intl[b.language]&&(f=b.intl[b.language][b.OS]);f="<p>"+f.replace(/%icon(?:\[([^\]]+)\])?/gi,function(a,b){return'<span class="ath-action-icon">'+(b?b:"icon")+"</span>"});NaN;this.viewport=c.createElement("div");this.viewport.className="ath-viewport";
this.options.modal&&(this.viewport.className+=" ath-modal");this.options.mandatory&&(this.viewport.className+=" ath-mandatory");this.viewport.style.position="absolute";this.element=c.createElement("div");this.element.className="ath-container ath-"+b.OS+" ath-"+b.OS+(b.OSVersion+"").substr(0,1)+" ath-"+(b.isTablet?"tablet":"phone");this.element.style.cssText="-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0s;-webkit-transition-timing-function:ease-out;transition-property:transform,opacity;transition-duration:0s;transition-timing-function:ease-out;";
this.element.style.webkitTransform="translate3d(0,-"+a.innerHeight+"px,0)";this.element.style.transform="translate3d(0,-"+a.innerHeight+"px,0)";this.options.icon&&this.applicationIcon&&(this.element.className+=" ath-icon",this.img=c.createElement("img"),this.img.className="ath-application-icon",this.img.addEventListener("load",this,!1),this.img.addEventListener("error",this,!1),this.img.src=this.applicationIcon.href,this.element.appendChild(this.img));this.element.innerHTML+=f;this.viewport.style.left=
"-99999em";this.viewport.appendChild(this.element);this.container.appendChild(this.viewport);this.img?this.doLog("Add to homescreen: not displaying callout because waiting for img to load"):this._delayedShow()}},_delayedShow:function(a){setTimeout(this._show.bind(this),1E3*this.options.startDelay+500)},_show:function(){var b=this;this.updateViewport();a.addEventListener("resize",this,!1);a.addEventListener("scroll",this,!1);a.addEventListener("orientationchange",this,!1);this.options.modal&&c.addEventListener("touchmove",
this,!0);this.options.mandatory||setTimeout(function(){b.element.addEventListener("click",b,!0)},1E3);setTimeout(function(){b.element.style.webkitTransitionDuration="1.2s";b.element.style.transitionDuration="1.2s";b.element.style.webkitTransform="translate3d(0,0,0)";b.element.style.transform="translate3d(0,0,0)"},0);this.options.lifespan&&(this.removeTimer=setTimeout(this.remove.bind(this),1E3*this.options.lifespan));this.options.onShow&&this.options.onShow.call(this)},remove:function(){clearTimeout(this.removeTimer);
this.img&&(this.img.removeEventListener("load",this,!1),this.img.removeEventListener("error",this,!1));a.removeEventListener("resize",this,!1);a.removeEventListener("scroll",this,!1);a.removeEventListener("orientationchange",this,!1);c.removeEventListener("touchmove",this,!0);this.element.removeEventListener("click",this,!0);this.element.addEventListener("transitionend",this,!1);this.element.addEventListener("webkitTransitionEnd",this,!1);this.element.addEventListener("MSTransitionEnd",this,!1);this.element.style.webkitTransitionDuration=
"0.3s";this.element.style.opacity="0"},_removeElements:function(){this.element.removeEventListener("transitionend",this,!1);this.element.removeEventListener("webkitTransitionEnd",this,!1);this.element.removeEventListener("MSTransitionEnd",this,!1);this.container.removeChild(this.viewport);this.shown=!1;this.options.onRemove&&this.options.onRemove.call(this)},updateViewport:function(){if(this.shown){this.viewport.style.width=a.innerWidth+"px";this.viewport.style.height=a.innerHeight+"px";this.viewport.style.left=
a.scrollX+"px";this.viewport.style.top=a.scrollY+"px";var f=c.documentElement.clientWidth;this.orientation=f>c.documentElement.clientHeight?"landscape":"portrait";var e="ios"==b.OS?"portrait"==this.orientation?screen.width:screen.height:screen.width;this.scale=screen.width>f?1:e/a.innerWidth;this.element.style.fontSize=this.options.fontSize/this.scale+"px"}},resize:function(){clearTimeout(this.resizeTimer);this.resizeTimer=setTimeout(this.updateViewport.bind(this),100)},updateSession:function(){!1!==
b.hasLocalStorage&&localStorage&&localStorage.setItem(this.options.appID,JSON.stringify(this.session))},clearSession:function(){this.session=v;this.updateSession()},getItem:function(a){try{if(!localStorage)throw Error("localStorage is not defined");return localStorage.getItem(a)}catch(c){b.hasLocalStorage=!1}},optOut:function(){this.session.optedout=!0;this.updateSession()},optIn:function(){this.session.optedout=!1;this.updateSession()},clearDisplayCount:function(){this.session.displayCount=0;this.updateSession()},
_preventDefault:function(a){a.preventDefault();a.stopPropagation()}};a.addToHomescreen=b})(window,document);$(document).bind("mobileinit",function(){$.mobile.ajaxEnabled=!1;$.autoInitializePage=!0});
function showFooterMessage(a){"undefined"!=a.status?"success"==a.status?($("prefooter > .container").html('<p><span class="circle-ok"><span class="glyphicon glyphicon-ok"></span></span>'+a.mess+"</p>"),$("prefooter > .container p").css("background","#128c44"),$("prefooter > .container p").css("color","#fff"),$("prefooter > .container p").css("padding","20px")):"alert"==a.status&&($("prefooter > .container").html('<p><span class="circle-alert"><span>!</span></span>'+a.mess+"</p>"),$("prefooter > .container p").css("background",
"#fcaa57"),$("prefooter > .container p").css("color","#fff"),$("prefooter > .container p").css("padding","20px")):($("prefooter > .container").html('<p style="">'+a.mess+"</p>"),$("prefooter > .container p").css("background",a.clr),$("prefooter > .container p").css("color",a.clrT),$("prefooter > .container p").css("padding","20px"));$("prefooter").show();$("prefooter").delay(a.anim_a).fadeOut(a.anim_b,function(){$("prefooter").hide();a.onFinish&&eval(a.onFinish)})}
$(document).ready(function(){$("prefooter").hide();$(".int_less_publish").change(function(){var a=$("form#int_lesson_form").serialize();$.ajax({url:"/ajax/interactive_lessons_ajax/save_publish/",dataType:"json",type:"POST",data:a,success:function(a){}})});$("a.template_id").click(function(a){a.preventDefault();a=$(this).attr("id").replace("template_","");$("div.ui-controlgroup-controls").find("a.active_template").removeClass("active_template");$(this).addClass("active_template");$("input#tmpl_id").val(a)});
var a=$("input#tmpl_id").val();""!==a&&$("#template_"+a).addClass("active_template");$(".add_question a").on("click",function(a){a.preventDefault();var e=$(".hidden.question_box:first").clone(!0,!0);a=$("input.subject_id").val();var b=$("input.module_id").val(),f=$("input.lesson_id").val();$("input.int_les_id").val();var g=$("input.int_assessment_id").val();$("#questions_wrap").append(e);e=parseInt($("#questions_wrap .question_box").last().index());$("#questions_wrap .question_box").last().find("input.question_text").attr("name",
"questions["+e+"][question_text]");$("#questions_wrap .question_box").last().find("input.question_id").attr("name","questions[question]["+e+"][question_id]");$("#questions_wrap .question_box").last().find("input.resource_id").attr("name","questions["+e+"][question_resource_id]");$("#questions_wrap .question_box").last().find("a.add_q_ressource").attr("href","/c1/index/question/"+e+"/"+a+"/"+b+"/"+f+"/"+g);$(".question_box").last().removeClass("hidden")});$(".add_option").on("click",function(a){a.preventDefault();
var e=$(this).parent().parent().find("input.add_option_text");a=e.val();$(e).val("");e=$(this).parent().parent().parent().find(".q_options_list").children().length;if(10>=e){var b=$(this).parent().parent().parent().find(".hidden.q_option").clone();$.each(b.find("select"),function(a,b){var c=$(this);a=c.attr("id");a++;c.attr("id",a);c.slider();c.slider("refresh");c.parent().find(".ui-slider").last().remove()});var f=$(this).parent().parent().parent().find(".q_options_list");$(f).append(b);$(this).parent().parent().parent().find(".q_options_list .q_option:last input.option_text").val(a);
a=parseInt($(this).parent().parent().parent().parent(".question_box").index());$(this).parent().parent().parent().find(".q_options_list .q_option:last input.option_text").attr("name","questions["+a+"][answers]["+(parseInt(e)-1)+"][answer_text]");$(this).parent().parent().parent().find(".q_options_list .q_option:last select.answer").attr("name","questions["+a+"][answers]["+(parseInt(e)-1)+"][answer_true]");$(this).parent().parent().parent().find(".q_options_list .q_option:last").removeClass("hidden")}});
$(document).on("click",".delete_option",function(a){a.preventDefault();$(this).parent().parent(".q_option").remove()});$("a.add_q_ressource").click(function(a){a.preventDefault();a=$("form#int_assessment_form").serialize();var e=$(this).attr("href");$.ajax({url:"/ajax/int_assessment_ajax/save_temp_data/",dataType:"json",type:"POST",data:a,success:function(a){a.success&&(window.location.href=e)}})});$(".colorbox").colorbox({photo:!0,maxWidth:"100%",maxHeight:"100%"});"student"==user_type?intervalRes=
setInterval(function(){checkRunningLesson()},3E3):"teacher"==user_type?(intervalRes=setInterval(function(){checkRunningLessonForTeacher()},5E3),setInterval(function(){checkOnlineStudents()},5E3)):-1!=window.location.href.indexOf("/e5_teacher")&&-1!=window.location.href.indexOf("/running")&&setInterval(function(){checkOnlineStudents()},5E3);$(".add_option_text").keypress(function(a){if(13==a.which)return a=$(this).parent().parent().parent().find(".add_option"),$(a).click(),!1});$.each($("textarea[data-autoresize]"),
function(){var a=this.offsetHeight-this.clientHeight;$(this).on("keyup input",function(){$(this).css("height","auto").css("height",this.scrollHeight+a);0==$(this).val().length&&$(this).css({height:"62px"})}).removeAttr("data-autoresize")});$("textarea").each(function(){$(this).outerHeight()}).on("keyup",function(){var a=this.scrollHeight,e=$(this).outerHeight();a+2>e&&$(this).scrollTop(0).css({height:a+2+"px"})});$(".keywords").each(function(){var a=this,e=$(a),b=$("> input",a),f=b.val();ke=f.slice(1,
-1);var f=ke.split(","),g=function(f,e){if(f){if(!e){var g=b.val(),g=g.split(",");g.push(f);g=g.join();g=g.toString();g=g.replace(/[\])}[{(]/g,"");b.val(g)}$(".input-container",a).before('<div class="keyword"><span>'+f+'</span><a class="remove"></a></div>');$(".list").html("")}};b.css({display:"none"});e.append('<div class="input-container"><input value="" type="text"><div><div class="list"></div>');f.length&&$.each(f,function(a,b){g(b,!0)});e.on("keyup",".input-container input",function(){var a=
$(this).val(),b=e.data("to");b&&clearTimeout(b);b=!1;a&&(b=setTimeout(function(){$.ajax({url:"/c2/suggestKeywords",data:{q:a},dataType:"json",success:function(a){var b="";$.each(a,function(a,c){b+="<li>"+c+"</li>"});$(".list").html("<ul>"+b+"</ul>")}})},200),e.data("to",b))}).on("keydown",".input-container input",function(a){var b=$(this).val();13==a.keyCode&&b&&($(this).val(""),g(b))}).on("click",".list li",function(){var b=$(this).text();b&&($(".input-container input",a).val(""),g(b))}).on("click",
".keyword .remove",function(){var a=b.val(),a=a.split(","),a=a.toString(),a=a.replace(/[\])}[{(]/g,""),a=a.split(","),c=$(this).parent().index()-2;a.splice(c,1);b.val(a);$(this).parent().remove();$(".list").html("")});$(document).click(function(a){var b=$(".input-container input").val();""!=b&&(g(b),$(".input-container input").val(""));void 0===$(a.target).closest("li")[0]&&$(".list").html("")})});$(".keystudents").each(function(){var a=this,e=$(a),b=$("> input#keystudents",a),f=$("> input#keystudents_a",
a),g=f.val(),h=b.val();kest=g.slice(1,-1);kest1=h.slice(1,-1);var g=kest.split(","),h=kest1.split(","),k=function(e,g,h){if(e){if(!h){h=f.val();var k=b.val(),k=k+g+",";f.val(h+e+",");b.val(k)}$(".input-container",a).before('<div class="keystudent"><span>'+e+'</span><a class="remove"></a></div>');$(".list").html("")}};f.css({display:"none"});e.append('<div class="input-container"><input value="" type="text"><div><div class="list"></div>');g.length&&$.each(g,function(a,b){k(b,a,!0)});e.on("keyup",".input-container input",
function(){var a=$(this).val(),b=e.data("to");b&&clearTimeout(b);b=!1;a&&(b=setTimeout(function(){$.ajax({url:"/f2c_teacher/suggestKeystudents",data:{q:a},dataType:"json",success:function(a){var b="";$.each(a,function(a,c){b+='<li rel="'+a+'">'+c+"</li>"});$(".list").html("<ul>"+b+"</ul>");updateSlideHeight(".step.s3")}})},200),e.data("to",b))}).on("keydown",".input-container input",function(a){var b=$(this).val(),c=$(this).attr("rel");13==a.keyCode&&b&&($(this).val(""),k(b,c))}).on("click",".list li",
function(){var b=$(this).text(),f=$(this).attr("rel");b&&($(".input-container input",a).val(""),k(b,f))}).on("click",".keystudent .remove",function(){var a=f.val(),a=a.split(","),a=a.toString(),a=a.replace(/[\])}[{(]/g,""),a=a.split(","),b=$(this).parent().index()-2;a.splice(b,1);f.val(a);$(this).parent().remove();$(".list").html("")});$(document).click(function(a){var b=$(".input-container input").val();""!=b&&(k(b),$(".input-container input").val(""));void 0===$(a.target).closest("li")[0]&&$(".list").html("")})});
$("select").each(function(){$(this).hasClass("customize")||($(this).addClass("customize"),$(this).after('<span class="select"><span class="v">'+$("option:selected",this).text()+'</span><span class="a"></span></span>'),$(this).appendTo($(this).next()))});$("span.select select").on("change",function(){$(this).closest(".select").find(".v").text($("option:selected",this).text())});initPublishButton("#publish_btn","publish","PUBLISHED","PUBLISH")});$(window).load(function(){bg_fix()});$(window).resize(function(){bg_fix()});
function initPublishButton(a,c,e,b){$(a).each(function(){$("input[name="+c+"]").size()&&"1"==$("input[name="+c+"]").val()&&$(this).addClass("active").text(e);$(this).off("click");$(this).on("click",function(){0==disablepublishandsave&&$("input[name="+c+"]").size()&&("1"==$("input[name="+c+"]").val()?($("input[name="+c+"]").val("0"),$(this).removeClass("active").text(b)):($("input[name="+c+"]").val("1"),$(this).addClass("active").text(e)))})})}
function bg_fix(){$(".blue_gradient_bg").height()-parseInt($(".blue_gradient_bg").css("margin-top"))-$("footer").height()-parseInt($("footer").css("border-top-width"))<$(window).height()&&$(".blue_gradient_bg").css("min-height",parseInt($(window).height()-$("footer").height()-parseInt($("footer").css("border-top-width"))-parseInt($(".blue_gradient_bg").css("margin-top")))+"px");$(".red_gradient_bg").height()<$(window).height()&&$(".red_gradient_bg").css("min-height",parseInt($(window).height()-42-
$(".footer_menu").height())+"px");$(".rred_gradient_bg").height()<$(window).height()&&$(".rred_gradient_bg").css("min-height",parseInt($(window).height())+"px");$(".ui-header>.ui-btn-right").css("left",parseInt($(".ui-header").width()/2-$(".ui-header>.ui-btn-right").width()/2)+"px");768<$(window).width()?$(".left_menu_pic").css("height",$(".pic_e5").height()+"px"):$(".left_menu_pic").css("height","auto")}
function getPathnameParts(){var a=window.location.pathname;"/"==a.substr(0,1)&&(a=a.substr(1));return a.split("/")}
function checkRunningLesson(){set_logout();$.ajax({url:"/ajax/running_lesson/index/"+user_id,dataType:"json",success:function(a){if(void 0!==a.subject_id&&void 0!==a.module_id&&void 0!==a.lesson_id&&void 0!==a.secret)if(-1==window.location.href.indexOf("/running")){var c=function(){var b=((new Date).getTime()-e)/1E3;5>b?$("#dialog_title").html('Taking you to interactive lesson: <br /><span style="color:#004400;text-shadow:none;font-weight:bold;font-size:58px;font-style: italics;">'+a.lesson_title+
"</span><br /> with "+a.teacher_first_name+" "+a.teacher_last_name+" in "+Math.floor(5-b)+" seconds..."):(clearInterval(intervalRes),window.location.href="/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/")};clearInterval(intervalRes);$("#staticheader").css("background-color","#009900");$(".gray_top_field").css("background-color","#004400");$("#dialog_title").html("title");$("#dialog").show();var e=(new Date).getTime();c();intervalRes=setInterval(function(){c()},800)}else-1==
window.location.href.indexOf("/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/")&&(window.location.href="/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/");else-1!=window.location.href.indexOf("/running")&&void 0!==a.free_preview&&(window.location.href="/e5_student/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1")},error:function(a){}})}
function checkRunningLessonForTeacher(){set_logout();$.ajax({url:"/ajax/running_lesson_t/index/"+user_id,dataType:"json",success:function(a){var c=a.running_page-1;if(void 0!==a.subject_id&&void 0!==a.module_id&&void 0!==a.lesson_id&&void 0!==a.running_page&&-1==window.location.href.indexOf("/running")){var e=function(){var f=((new Date).getTime()-b)/1E3;5>f?$("#dialog_title").html('Returning you to your open interactive lesson: <br /><span style="color:#004400;text-shadow:none;font-weight:bold;font-size:58px;font-style: italics;">'+
a.lesson_title+"</span><br /> in "+Math.floor(5-f)+" seconds..."):(clearInterval(intervalRes),window.location.href="/e5_teacher/index/"+a.subject_id+"/"+a.module_id+"/"+a.lesson_id+"/1/running#/"+c)};clearInterval(intervalRes);$("#staticheader").css("background-color","#009900");$(".gray_top_field").css("background-color","#004400");$("#dialog_title").html("title");$("#dialog").show();var b=(new Date).getTime();e();intervalRes=setInterval(function(){e()},800)}}})}
function checkOnlineStudents(){var a=getPathnameParts()[4];$.ajax({url:"/ajax/online_students/index/"+a,dataType:"json",success:function(a){$("#studentlist .student.online1").removeClass("online1").addClass("online0");for(index in a)$("#studentlist #student_"+a[index]).removeClass("online0").addClass("online1")}});var c=new Date,a=c.getHours();10>a&&(a="0"+a);c=c.getMinutes();10>c&&(c="0"+c);$("#student_list #clock").html(a+":"+c)}
function change_res(a){1==a?($("#all_resources").addClass("hidden"),$("#my_resources").removeClass("hidden"),$("#all_resources_button").removeClass("hidden"),$("#my_resources_button").addClass("hidden")):($("#my_resources").addClass("hidden"),$("#all_resources").removeClass("hidden"),$("#all_resources_button").addClass("hidden"),$("#my_resources_button").removeClass("hidden"))}
function loadTinymce(){tinymce.init({selector:"textarea.mce-toolbar-grp",theme:"modern",mode:"exact",plugins:"pagebreak table save charmap media contextmenu paste directionality noneditable visualchars nonbreaking spellchecker template",toolbar:" bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link | table |",menu:{},setup:function(a){a.on("init",function(){this.getDoc().body.style.fontSize="14px";this.getDoc().body.style.letterSpacing="0.8px";this.getDoc().body.style.lineHeight=
"24px"});a.on("change",function(){tinymce.triggerSave()});a.on("submit",function(c){a.getElement().value=a.getContent()})},contextmenu:"cut copy paste",menubar:!0,statusbar:!1,toolbar_item_size:"normal"})}
function loadTinymceStudent(){tinymce.init({selector:"textarea.mce-toolbar-grp",theme:"modern",readonly:1,mode:"exact",plugins:"",toolbar:"|",menu:{},setup:function(a){a.on("init",function(){this.getDoc().body.style.fontSize="14px";this.getDoc().body.style.letterSpacing="0.8px";this.getDoc().body.style.lineHeight="24px"});a.on("change",function(){tinymce.triggerSave()});a.on("submit",function(c){a.getElement().value=a.getContent()})},contextmenu:"cut copy paste",menubar:!0,statusbar:!1,toolbar_item_size:"normal"})}
function loadTinymceSlider(){tinymce.init({selector:"textarea.mce-toolbar-grp",theme:"modern",mode:"exact",plugins:"pagebreak table save charmap media contextmenu paste directionality noneditable visualchars nonbreaking spellchecker template",toolbar:" bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link | table |",menu:{},setup:function(a){a.on("init",function(){this.getDoc().body.style.fontSize="14px";this.getDoc().body.style.letterSpacing="0.8px";
this.getDoc().body.style.lineHeight="24px";updateSlideHeight(".step.s1")});a.on("change",function(){tinymce.triggerSave()})},contextmenu:"cut copy paste",menubar:!0,statusbar:!1,toolbar_item_size:"normal"})}
function validate(){var a=[];$("input, select, textarea").each(function(c,e){var b=$(this);if($(b).hasClass("required"))if(""==b.val().trim()||void 0===b.val()){b.css({border:"1px dashed red"});var f=b.attr("data-validation-required-message");b.prev("span").attr("id","scrolled");b.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"});$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300);b.prev("span").removeAttr("scrolled");a[c]=1}else void 0!==
b.attr("minlength")&&b.val().length<b.attr("minlength")&&(b.css({border:"1px dashed red"}),b.prev("span").attr("id","scrolled"),f="This must be at least "+b.attr("minlength")+" characters long",b.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"}),$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300),b.prev("span").removeAttr("scrolled"),a[c]=1);b.on("focus",function(){b.prev("span.tip2").fadeOut("3333");b.css({"border-color":"#c8c8c8",
"border-width":"1px","border-style":"solid"})})});0===a.length&&($("input:text, textarea").each(function(){$(this).val(this.value)}),$(".hidden_submit").click())}
function validate_slider(a){var c=[];1==a&&$("input, select").each(function(a,b){var f=$(this);if($(f).hasClass("required"))if(""==f.val().trim()||void 0===f.val()){f.css({border:"1px dashed red"});var g=f.attr("data-validation-required-message");f.prev("span").attr("id","scrolled");f.prev("span").html("").removeClass("tip2").addClass("tip2").append(g).css({display:"block"});f.prev("span").removeAttr("scrolled");c[a]=1}else void 0!==f.attr("minlength")&&f.val().length<f.attr("minlength")&&(f.css({border:"1px dashed red"}),
f.prev("span").attr("id","scrolled"),g="This must be at least "+f.attr("minlength")+" characters long",f.prev("span").html("").removeClass("tip2").addClass("tip2").append(g).css({display:"block"}),f.prev("span").removeAttr("scrolled"),c[a]=1);f.on("focus",function(){f.prev("span.tip2").fadeOut("3333");f.css({"border-color":"#c8c8c8","border-width":"1px","border-style":"solid"})})});if(0===c.length)return $("input:text, textarea").each(function(){$(this).val(this.value)}),c=[],0;c=[];return 1}
function validate_as_draft(a){var c=[],e=$("#assignment_title");if(1==a){if(""==e.val().trim()||void 0===e.val())e.css({border:"1px dashed red"}),a=e.attr("data-validation-required-message"),e.prev("span").attr("id","scrolled"),e.prev("span").html("").removeClass("tip2").addClass("tip2").append(a).css({display:"block"}),e.prev("span").removeAttr("scrolled"),c[0]=1;e.on("focus",function(){e.prev("span.tip2").fadeOut("3333");e.css({"border-color":"#c8c8c8","border-width":"1px","border-style":"solid"})})}if(0===
c.length)return c=[],0;c=[];return 1}
function validate_to_publish(a){var c=1;a=$(".pdatepicker").datepicker("getDate").getTime();864E5>$(".datepicker").datepicker("getDate").getTime()-a&&(opdate=$("#publish_date"),oddate=$("#deadline_date"),oddate.css({border:"1px dashed #fcaa57"}),a=oddate.attr("data-validation-required-message"),oddate.prev("span").attr("id","scrolled"),oddate.prev("span").html("").removeClass("tip3").addClass("tip3").append(a).css({display:"block"}),oddate.prev("span").removeAttr("scrolled"),c=1);"offline"!=$("#grade_type").val()&&
(0<$("#grade_categories_holder tr").length?($(".add_cat #mark").removeClass("required"),$(".add_cat #catg").removeClass("required")):($(".add_cat #catg").addClass("required"),$(".add_cat #mark").addClass("required")));$("input, select").each(function(a,b){var f=$(this);if($(f).hasClass("required"))if(""==f.val().trim()||void 0===f.val()){f.css({border:"1px dashed red"});var g=f.attr("data-validation-required-message");f.prev("span").attr("id","scrolled");f.prev("span").html("").removeClass("tip2").addClass("tip2").append(g).css({display:"block"});
f.prev("span").removeAttr("scrolled");c=0}else void 0!==f.attr("minlength")&&f.val().length<f.attr("minlength")&&(f.css({border:"1px dashed red"}),f.prev("span").attr("id","scrolled"),g="This must be at least "+f.attr("minlength")+" characters long",f.prev("span").html("").removeClass("tip2").addClass("tip2").append(g).css({display:"block"}),f.prev("span").removeAttr("scrolled"),c=0);f.on("focus",function(){f.prev("span.tip2").fadeOut("3333");f.prev("span.tip3").fadeOut("3333");f.css({"border-color":"#c8c8c8",
"border-width":"1px","border-style":"solid"})})});1>$(".classes:checked").length&&($(".table4").css({border:"1px dashed red"}),a="You must choose at least one class!",$(".table4").prev("span").attr("id","scrolled"),$(".table4").prev("span").html("").removeClass("tip2").addClass("tip2").append(a).css({display:"block"}),$(".table4").prev("span").removeAttr("scrolled"),c=0,$(".classes").on("click",function(){$(".table4").prev("span.tip2").fadeOut("3333");$(".table4").css({"border-color":"#c8c8c8","border-width":"1px",
"border-style":"solid"})}));"offline"!=$("#grade_type").val()&&($("#catg").removeClass("required"),$("#mark").removeClass("required"));return c}
function validate_resource(){var a=[];$("input, select, textarea").each(function(c,e){var b=$(this);if($(b).hasClass("required"))if(""==b.val().trim()||void 0===b.val()){b.css({border:"1px dashed red"});var f=b.attr("data-validation-required-message");b.prev("span").attr("id","scrolled");b.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"});$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300);b.prev("span").removeAttr("scrolled");
a[c]=1}else void 0!==b.attr("minlength")&&b.val().length<b.attr("minlength")&&(b.css({border:"1px dashed red"}),b.prev("span").attr("id","scrolled"),f="This must be at least "+b.attr("minlength")+" characters long",b.prev("span").html("").removeClass("tip2").addClass("tip2").append(f).css({display:"block"}),$("html, body").animate({scrollTop:$("#scrolled").stop().offset().top-500},300),b.prev("span").removeAttr("scrolled"),a[c]=1);b.on("focus",function(){b.prev("span.tip2").fadeOut("3333");b.css({"border-color":"#c8c8c8",
"border-width":"1px","border-style":"solid"})})});0===a.length&&($(".red_btn").fadeOut(100),$("#saveform").submit())}
$(function(){$(document).on("click",".up_down",function(a){a=$(this).next(".collapsed");var c=this;if($(a).hasClass("hidden"))return!1;$(a).is(":visible")?($(this).next(".collapsed").slideUp(400),$(this).css({"background-position":"0 1px"}),$.session.set($(this).next().attr("id"),"none")):($(this).next(".collapsed").slideDown(400,function(){theOffset=$(c).offset();$("body,html").animate({scrollTop:theOffset.top-120},300)}),$(this).css({"background-position":"0 -36px"}),$.session.set($(this).next().attr("id"),
"block"))});$(document).on("click",".acc_title",function(a){a=$(this).next().next(".collapsed");var c=this;if($(a).hasClass("hidden"))return!1;$(a).is(":visible")?($(this).next().next(".collapsed").slideUp(400),$(this).next(".up_down").css({"background-position":"0 1px"}),$.session.set($(this).next().next().attr("id"),"none")):($(this).next().next(".collapsed").slideDown(400,function(){theOffset=$(c).offset();$("body,html").animate({scrollTop:theOffset.top-120},300)}),$(this).next(".up_down").css({"background-position":"0 -36px"}),
$.session.set($(this).next().next().attr("id"),"block"))});$(".up_down_homework").click(function(){var a=$(this).next(".collapsed"),c=this;$(a).is(":visible")?($(this).next(".collapsed").slideUp(400),$(this).css({"background-position":"0 1px"})):($(this).next(".collapsed").slideDown(400,function(){theOffset=$(c).offset();$("body,html").animate({scrollTop:theOffset.top-120},300)}),$(this).css({"background-position":"0 -30px"}))});$(".assignment").show()});
var timer=0,timer1=0,set_timer=!1,logout_sec=10,activity=72E5;function set_logout(){0==set_timer&&(set_timer=!0,timer=setInterval("auto_logout()",activity),$(".dismiss-logout").on("click",function(){clearInterval(timer1);reset_logout()}))}function reset_logout(){0!=timer&&(clearInterval(timer),timer=setInterval("auto_logout()",activity),logout_sec=10,$("#dialog_logout .logout_sec").text(logout_sec))}
function auto_logout(){$("#dialog_logout").modal("show");timer1=setInterval("auto_logout2()",1E3)}function auto_logout2(){logout_sec--;$("#dialog_logout .logout_sec").text(logout_sec);1>logout_sec&&(window.location.href="/logout/")}
(function(a){a.session={_id:null,_cookieCache:void 0,_init:function(){window.name||(window.name=Math.random());this._id=window.name;this._initCache();var a=(new RegExp(this._generatePrefix()+"=([^;]+);")).exec(document.cookie);if(a&&document.location.protocol!==a[1]){this._clearSession();for(var e in this._cookieCache)try{window.sessionStorage.setItem(e,this._cookieCache[e])}catch(b){}}document.cookie=this._generatePrefix()+"="+document.location.protocol+";path=/;expires="+(new Date((new Date).getTime()+
12E4)).toUTCString()},_generatePrefix:function(){return"__session:"+this._id+":"},_initCache:function(){var a=document.cookie.split(";");this._cookieCache={};for(var e in a){var b=a[e].split("=");(new RegExp(this._generatePrefix()+".+")).test(b[0])&&b[1]&&(this._cookieCache[b[0].split(":",3)[2]]=b[1])}},_setFallback:function(a,e,b){var f=this._generatePrefix()+a+"="+e+"; path=/";b&&(f+="; expires="+(new Date(Date.now()+12E4)).toUTCString());document.cookie=f;this._cookieCache[a]=e;return this},_getFallback:function(a){this._cookieCache||
this._initCache();return this._cookieCache[a]},_clearFallback:function(){for(var a in this._cookieCache)document.cookie=this._generatePrefix()+a+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;";this._cookieCache={}},_deleteFallback:function(a){document.cookie=this._generatePrefix()+a+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;";delete this._cookieCache[a]},get:function(a){return window.sessionStorage.getItem(a)||this._getFallback(a)},set:function(a,e,b){try{window.sessionStorage.setItem(a,
e)}catch(f){}this._setFallback(a,e,b||!1);return this},"delete":function(a){return this.remove(a)},remove:function(a){try{window.sessionStorage.removeItem(a)}catch(e){}this._deleteFallback(a);return this},_clearSession:function(){try{window.sessionStorage.clear()}catch(a){for(var c in window.sessionStorage)window.sessionStorage.removeItem(c)}},clear:function(){this._clearSession();this._clearFallback();return this}};a.session._init()})(jQuery);
(function(a,c){"object"==typeof exports?module.exports=c():"function"==typeof define&&define.amd?define(c):a.Spinner=c()})(this,function(){function a(a,b){var c,f=document.createElement(a||"div");for(c in b)f[c]=b[c];return f}function c(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function e(a,b,c,f){var e=["opacity",b,~~(100*a),c,f].join("-");c=.01+c/f*100;f=Math.max(1-(1-a)/b*(100-c),a);var g=p.substring(0,p.indexOf("Animation")).toLowerCase();return r[e]||(x.insertRule("@"+
(g&&"-"+g+"-"||"")+"keyframes "+e+"{0%{opacity:"+f+"}"+c+"%{opacity:"+a+"}"+(c+.01)+"%{opacity:1}"+(c+b)%100+"%{opacity:"+a+"}100%{opacity:"+f+"}}",x.cssRules.length),r[e]=1),e}function b(a,b){var c,f,e=a.style;b=b.charAt(0).toUpperCase()+b.slice(1);for(f=0;n.length>f;f++)if(c=n[f]+b,void 0!==e[c])return c;return void 0!==e[b]?b:void 0}function f(a,c){for(var f in c)a.style[b(a,f)||f]=c[f];return a}function g(a){for(var b=1;arguments.length>b;b++){var c=arguments[b],f;for(f in c)void 0===a[f]&&(a[f]=
c[f])}return a}function h(a,b){return"string"==typeof a?a:a[b%a.length]}function k(a){this.opts=g(a||{},k.defaults,v)}function m(){function b(c,f){return a("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',f)}x.addRule(".spin-vml","behavior:url(#default#VML)");k.prototype.lines=function(a,e){function g(){return f(b("group",{coordsize:n+" "+n,coordorigin:-m+" "+-m}),{width:n,height:n})}function k(a,p,n){c(r,c(f(g(),{rotation:360/e.lines*a+"deg",left:~~p}),c(f(b("roundrect",{arcsize:e.corners}),
{width:m,height:e.width,left:e.radius,top:-e.width>>1,filter:n}),b("fill",{color:h(e.color,a),opacity:e.opacity}),b("stroke",{opacity:0}))))}var p,m=e.length+e.width,n=2*m;p=2*-(e.width+e.length)+"px";var r=f(g(),{position:"absolute",top:p,left:p});if(e.shadow)for(p=1;e.lines>=p;p++)k(p,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(p=1;e.lines>=p;p++)k(p);return c(a,r)};k.prototype.opacity=function(a,b,c,f){a=a.firstChild;f=f.shadow&&f.lines||0;a&&a.childNodes.length>
b+f&&(a=a.childNodes[b+f],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=c))}}var p,n=["webkit","Moz","ms","O"],r={},x=function(){var b=a("style",{type:"text/css"});return c(document.getElementsByTagName("head")[0],b),b.sheet||b.styleSheet}(),v={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2E9,className:"spinner",top:"50%",left:"50%",position:"absolute"};k.defaults={};g(k.prototype,{spin:function(b){this.stop();var c=
this,e=c.opts,g=c.el=f(a(0,{className:e.className}),{position:e.position,width:0,zIndex:e.zIndex});if(e.radius+e.length+e.width,f(g,{left:e.left,top:e.top}),b&&b.insertBefore(g,b.firstChild||null),g.setAttribute("role","progressbar"),c.lines(g,c.opts),!p){var h,k=0,m=(e.lines-1)*(1-e.direction)/2,n=e.fps,r=n/e.speed,v=(1-e.opacity)/(r*e.trail/100),x=r/e.lines;(function U(){k++;for(var a=0;e.lines>a;a++)h=Math.max(1-(k+(e.lines-a)*x)%r*v,e.opacity),c.opacity(g,a*e.direction+m,h,e);c.timeout=c.el&&
setTimeout(U,~~(1E3/n))})()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(b,g){function k(b,c){return f(a(),{position:"absolute",width:g.length+g.width+"px",height:g.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/g.lines*n+g.rotate)+"deg) translate("+g.radius+"px,0)",borderRadius:(g.corners*g.width>>1)+"px"})}for(var m,n=0,r=(g.lines-1)*(1-g.direction)/
2;g.lines>n;n++)m=f(a(),{position:"absolute",top:1+~(g.width/2)+"px",transform:g.hwaccel?"translate3d(0,0,0)":"",opacity:g.opacity,animation:p&&e(g.opacity,g.trail,r+n*g.direction,g.lines)+" "+1/g.speed+"s linear infinite"}),g.shadow&&c(m,f(k("#000","0 0 4px #000"),{top:"2px"})),c(b,c(m,k(h(g.color,n),"0 0 1px rgba(0,0,0,.1)")));return b},opacity:function(a,b,c){a.childNodes.length>b&&(a.childNodes[b].style.opacity=c)}});var H=f(a("group"),{behavior:"url(#default#VML)"});return!b(H,"transform")&&
H.adj?m():p=b(H,"animation"),k});
(function(a,c){"object"==typeof exports?module.exports=c(require("spin.js")):"function"==typeof define&&define.amd?define(["spin"],c):a.Ladda=c(a.Spinner)})(this,function(a){function c(c){if(void 0===c)return console.warn("Ladda button target must be defined."),void 0;c.querySelector(".ladda-label")||(c.innerHTML='<span class="ladda-label">'+c.innerHTML+"</span>");var e,h=c.querySelector(".ladda-spinner");h||(h=document.createElement("span"),h.className="ladda-spinner");c.appendChild(h);var k,m={start:function(){if(!e){var b,
m=c.offsetHeight;0===m&&(m=parseFloat(window.getComputedStyle(c).height));32<m&&(m*=.8);c.hasAttribute("data-spinner-size")&&(m=parseInt(c.getAttribute("data-spinner-size"),10));c.hasAttribute("data-spinner-color")&&(b=c.getAttribute("data-spinner-color"));m*=.2;e=new a({color:b||"#fff",lines:12,radius:m,length:.6*m,width:7>m?2:3,zIndex:"auto",top:"auto",left:"auto",className:""})}return c.setAttribute("disabled",""),c.setAttribute("data-loading",""),clearTimeout(k),e.spin(h),this.setProgress(0),
this},startAfter:function(a){return clearTimeout(k),k=setTimeout(function(){m.start()},a),this},stop:function(){return c.removeAttribute("disabled"),c.removeAttribute("data-loading"),clearTimeout(k),e&&(k=setTimeout(function(){e.stop()},1E3)),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(a){a=Math.max(Math.min(a,1),0);var b=c.querySelector(".ladda-progress");0===a&&b&&b.parentNode?b.parentNode.removeChild(b):(b||(b=document.createElement("div"),
b.className="ladda-progress",c.appendChild(b)),b.style.width=(a||0)*c.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),c.setAttribute("disabled",""),this},isLoading:function(){return c.hasAttribute("data-loading")},remove:function(){clearTimeout(k);c.removeAttribute("disabled","");c.removeAttribute("data-loading","");e&&(e.stop(),e=null);for(var a=0,h=b.length;h>a;a++)if(m===b[a]){b.splice(a,1);break}}};return b.push(m),m}function e(a){for(var b=
[],c=0;a.length>c;c++)b.push(a[c]);return b}var b=[];return{bind:function(a,b){b=b||{};var h=[];"string"==typeof a?h=e(document.querySelectorAll(a)):"object"==typeof a&&"string"==typeof a.nodeName&&(h=[a]);for(var k=0,m=h.length;m>k;k++)(function(){var a=h[k];if("function"==typeof a.addEventListener){var f=c(a),e=-1;a.addEventListener("click",function(){for(var c=!0,h,k=a;k.parentNode&&"FORM"!==k.tagName;)k=k.parentNode;h="FORM"===k.tagName?k:void 0;if(void 0!==h){for(var m=["input","textarea","select"],
k=[],u=0;m.length>u;u++)for(var t=h.getElementsByTagName(m[u]),G=0;t.length>G;G++)t[G].hasAttribute("required")&&k.push(t[G]);for(h=0;k.length>h;h++)""===k[h].value.replace(/^\s+|\s+$/g,"")&&(c=!1),"checkbox"!==k[h].type&&"radio"!==k[h].type||k[h].checked||(c=!1),"email"===k[h].type&&(c=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(k[h].value))}c&&(f.startAfter(1),"number"==typeof b.timeout&&(clearTimeout(e),e=setTimeout(f.stop,b.timeout)),"function"==typeof b.callback&&b.callback.apply(null,
[f]))},!1)}})()},create:c,stopAll:function(){for(var a=0,c=b.length;c>a;a++)b[a].stop()}}});
var qq=function(a){return{hide:function(){a.style.display="none";return this},attach:function(c,e){a.addEventListener?a.addEventListener(c,e,!1):a.attachEvent&&a.attachEvent("on"+c,e);return function(){qq(a).detach(c,e)}},detach:function(c,e){a.removeEventListener?a.removeEventListener(c,e,!1):a.attachEvent&&a.detachEvent("on"+c,e);return this},contains:function(c){return a===c?!0:a.contains?a.contains(c):!!(c.compareDocumentPosition(a)&8)},insertBefore:function(c){c.parentNode.insertBefore(a,c);
return this},remove:function(){a.parentNode.removeChild(a);return this},css:function(c){null!==c.opacity&&"string"!==typeof a.style.opacity&&"undefined"!==typeof a.filters&&(c.filter="alpha(opacity="+Math.round(100*c.opacity)+")");qq.extend(a.style,c);return this},hasClass:function(c){return RegExp("(^| )"+c+"( |$)").test(a.className)},addClass:function(c){qq(a).hasClass(c)||(a.className+=" "+c);return this},removeClass:function(c){a.className=a.className.replace(RegExp("(^| )"+c+"( |$)")," ").replace(/^\s+|\s+$/g,
"");return this},getByClass:function(c){var e,b=[];if(a.querySelectorAll)return a.querySelectorAll("."+c);e=a.getElementsByTagName("*");qq.each(e,function(a,e){qq(e).hasClass(c)&&b.push(e)});return b},children:function(){for(var c=[],e=a.firstChild;e;)1===e.nodeType&&c.push(e),e=e.nextSibling;return c},setText:function(c){a.innerText=c;a.textContent=c;return this},clearText:function(){return qq(a).setText("")}}};
qq.log=function(a,c){if(window.console)if(c&&"info"!==c)if(window.console[c])window.console[c](a);else window.console.log("<"+c+"> "+a);else window.console.log(a)};qq.isObject=function(a){return null!==a&&a&&"object"===typeof a&&a.constructor===Object};qq.isFunction=function(a){return"function"===typeof a};qq.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)};qq.trimStr=function(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")};
qq.isFileOrInput=function(a){if(window.File&&a instanceof File)return!0;if(window.HTMLInputElement){if(a instanceof HTMLInputElement&&a.type&&"file"===a.type.toLowerCase())return!0}else if(a.tagName&&"input"===a.tagName.toLowerCase()&&a.type&&"file"===a.type.toLowerCase())return!0;return!1};qq.isBlob=function(a){return window.Blob&&"[object Blob]"===Object.prototype.toString.call(a)};
qq.isXhrUploadSupported=function(){var a=document.createElement("input");a.type="file";return void 0!==a.multiple&&"undefined"!==typeof File&&"undefined"!==typeof FormData&&"undefined"!==typeof(new XMLHttpRequest).upload};qq.isFolderDropSupported=function(a){return a.items&&a.items[0].webkitGetAsEntry};qq.isFileChunkingSupported=function(){return!qq.android()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)};
qq.extend=function(a,c,e){qq.each(c,function(b,c){e&&qq.isObject(c)?(void 0===a[b]&&(a[b]={}),qq.extend(a[b],c,!0)):a[b]=c})};qq.indexOf=function(a,c,e){if(a.indexOf)return a.indexOf(c,e);e=e||0;var b=a.length;for(0>e&&(e+=b);e<b;e+=1)if(a.hasOwnProperty(e)&&a[e]===c)return e;return-1};qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"==a?c:c&3|8).toString(16)})};qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")};
qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")};qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")};qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")};qq.firefox=function(){return-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor};qq.windows=function(){return"Win32"===navigator.platform};qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")};
qq.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};qq.toElement=function(){var a=document.createElement("div");return function(c){a.innerHTML=c;c=a.firstChild;a.removeChild(c);return c}}();qq.each=function(a,c){var e,b;if(a)for(e in a)if(Object.prototype.hasOwnProperty.call(a,e)&&(b=c(e,a[e]),!1===b))break};
qq.obj2url=function(a,c,e){var b,f=[],g="&",h=function(a,b){var e=c?/\[\]$/.test(c)?c:c+"["+b+"]":b;"undefined"!==e&&"undefined"!==b&&f.push("object"===typeof a?qq.obj2url(a,e,!0):"[object Function]"===Object.prototype.toString.call(a)?encodeURIComponent(e)+"="+encodeURIComponent(a()):encodeURIComponent(e)+"="+encodeURIComponent(a))};if(!e&&c)g=/\?/.test(c)?/\?$/.test(c)?"":"&":"?",f.push(c),f.push(qq.obj2url(a));else if("[object Array]"===Object.prototype.toString.call(a)&&"undefined"!==typeof a)for(b=
-1,e=a.length;b<e;b+=1)h(a[b],b);else if("undefined"!==typeof a&&null!==a&&"object"===typeof a)for(b in a)a.hasOwnProperty(b)&&h(a[b],b);else f.push(encodeURIComponent(c)+"="+encodeURIComponent(a));return c?f.join(g):f.join(g).replace(/^&/,"").replace(/%20/g,"+")};qq.obj2FormData=function(a,c,e){c||(c=new FormData);qq.each(a,function(a,f){a=e?e+"["+a+"]":a;qq.isObject(f)?qq.obj2FormData(f,c,a):qq.isFunction(f)?c.append(a,f()):c.append(a,f)});return c};
qq.obj2Inputs=function(a,c){var e;c||(c=document.createElement("form"));qq.obj2FormData(a,{append:function(a,f){e=document.createElement("input");e.setAttribute("name",a);e.setAttribute("value",f);c.appendChild(e)}});return c};qq.setCookie=function(a,c,e){var b=new Date,f="";e&&(b.setTime(b.getTime()+864E5*e),f="; expires="+b.toGMTString());document.cookie=a+"="+c+f+"; path=/"};
qq.getCookie=function(a){a+="=";for(var c=document.cookie.split(";"),e,b=0;b<c.length;b++){for(e=c[b];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(a))return e.substring(a.length,e.length)}};qq.getCookieNames=function(a){var c=document.cookie.split(";"),e=[];qq.each(c,function(b,c){c=qq.trimStr(c);var g=c.indexOf("=");c.match(a)&&e.push(c.substr(0,g))});return e};qq.deleteCookie=function(a){qq.setCookie(a,"",-1)};
qq.areCookiesEnabled=function(){var a="qqCookieTest:"+1E5*Math.random();qq.setCookie(a,1);return qq.getCookie(a)?(qq.deleteCookie(a),!0):!1};qq.parseJson=function(a){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(a):eval("("+a+")")};qq.DisposeSupport=function(){var a=[];return{dispose:function(){var c;do(c=a.shift())&&c();while(c)},attach:function(){this.addDisposer(qq(arguments[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(c){a.push(c)}}};
qq.supportedFeatures=function(){var a,c,e,b,f,g;a=!0;try{c=document.createElement("input"),c.type="file",qq(c).hide(),c.disabled&&(a=!1)}catch(h){a=!1}e=(c=a&&qq.isXhrUploadSupported())&&qq.chrome()&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/);b=c&&qq.isFileChunkingSupported();f=c&&b&&qq.areCookiesEnabled();g=c&&qq.chrome()&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/);return{uploading:a,ajaxUploading:c,fileDrop:c,folderDrop:e,chunking:b,
resume:f,uploadCustomHeaders:c,uploadNonMultipart:c,itemSizeValidation:c,uploadViaPaste:g,progressBar:c,uploadCors:a&&(void 0!==window.postMessage||c),deleteFileCors:c}}();qq.Promise=function(){var a,c,e,b,f,g=0;return{then:function(f,k){0===g?(e=f,b=k):-1===g&&k?k(c):f&&f(a);return this},done:function(a){0===g?f=a:a();return this},success:function(b){g=1;a=b;e&&e(b);f&&f();return this},failure:function(a){g=-1;c=a;b&&b(a);f&&f();return this}}};
qq.UploadButton=function(a){function c(){var a=document.createElement("input");f.multiple&&a.setAttribute("multiple","multiple");f.acceptFiles&&a.setAttribute("accept",f.acceptFiles);a.setAttribute("type","file");a.setAttribute("name",f.name);qq(a).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0});f.element.appendChild(a);b.attach(a,"change",function(){f.onChange(a)});b.attach(a,"mouseover",function(){qq(f.element).addClass(f.hoverClass)});
b.attach(a,"mouseout",function(){qq(f.element).removeClass(f.hoverClass)});b.attach(a,"focus",function(){qq(f.element).addClass(f.focusClass)});b.attach(a,"blur",function(){qq(f.element).removeClass(f.focusClass)});window.attachEvent&&a.setAttribute("tabIndex","-1");return a}var e,b=new qq.DisposeSupport,f={element:null,multiple:!1,acceptFiles:null,name:"file",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(f,a);qq(f.element).css({position:"relative",
overflow:"hidden",direction:"ltr"});e=c();return{getInput:function(){return e},reset:function(){e.parentNode&&qq(e).remove();qq(f.element).removeClass(f.focusClass);e=c()}}};
qq.PasteSupport=function(a){var c;c={targetElement:null,callbacks:{log:function(){},pasteReceived:function(){}}};qq.extend(c,a);(function(){qq(c.targetElement).attach("paste",function(a){(a=a.clipboardData)&&qq.each(a.items,function(a,f){if(f.type&&0===f.type.indexOf("image/")){var e=f.getAsFile();c.callbacks.pasteReceived(e)}})})})();return{reset:function(){}}};
qq.FineUploaderBasic=function(a){this._options={debug:!1,button:null,multiple:!0,maxConnections:1,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},paramsInBody:!0,customHeaders:{},forceMultipart:!0,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0},callbacks:{onSubmit:function(){},onSubmitted:function(){},onComplete:function(){},onCancel:function(){},
onUpload:function(){},onUploadChunk:function(){},onResume:function(){},onProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidateBatch:function(){},onValidate:function(){},onSubmitDelete:function(){},onDelete:function(){},onDeleteComplete:function(){},onPasteReceived:function(){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",
emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",
buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,partSize:2E6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(a){33<a.length&&(a=a.slice(0,19)+"..."+a.slice(-14));return a},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:"kB MB GB TB PB EB".split(" ")},
deleteFile:{enabled:!1,endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1},blobs:{defaultName:"misc_data",paramNames:{name:"qqblobname"}},paste:{targetElement:null,defaultName:"pasted_image"}};qq.extend(this._options,a,!0);this._wrapCallbacks();this._disposeSupport=new qq.DisposeSupport;this._filesInProgress=[];this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._netUploaded=this._netUploadedOrQueued=0;this._paramsStore=
this._createParamsStore("request");this._deleteFileParamsStore=this._createParamsStore("deleteFile");this._endpointStore=this._createEndpointStore("request");this._deleteFileEndpointStore=this._createEndpointStore("deleteFile");this._handler=this._createUploadHandler();this._deleteHandler=this._createDeleteHandler();this._options.button&&(this._button=this._createUploadButton(this._options.button));this._options.paste.targetElement&&(this._pasteHandler=this._createPasteHandler());this._preventLeaveInProgress()};
qq.FineUploaderBasic.prototype={log:function(a,c){!this._options.debug||c&&"info"!==c?c&&"info"!==c&&qq.log("[FineUploader] "+a,c):qq.log("[FineUploader] "+a)},setParams:function(a,c){null==c?this._options.request.params=a:this._paramsStore.setParams(a,c)},setDeleteFileParams:function(a,c){null==c?this._options.deleteFile.params=a:this._deleteFileParamsStore.setParams(a,c)},setEndpoint:function(a,c){null==c?this._options.request.endpoint=a:this._endpointStore.setEndpoint(a,c)},getInProgress:function(){return this._filesInProgress.length},
getNetUploads:function(){return this._netUploaded},uploadStoredFiles:function(){for(var a;this._storedIds.length;)a=this._storedIds.shift(),this._filesInProgress.push(a),this._handler.upload(a)},clearStoredFiles:function(){this._storedIds=[]},retry:function(a){return this._onBeforeManualRetry(a)?(this._netUploadedOrQueued++,this._handler.retry(a),!0):!1},cancel:function(a){this._handler.cancel(a)},cancelAll:function(){var a=[],c=this;qq.extend(a,this._storedIds);qq.each(a,function(a,b){c.cancel(b)});
this._handler.cancelAll()},reset:function(){this.log("Resetting uploader...");this._handler.reset();this._filesInProgress=[];this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._button.reset();this._paramsStore.reset();this._endpointStore.reset();this._netUploaded=this._netUploadedOrQueued=0;this._pasteHandler&&this._pasteHandler.reset()},addFiles:function(a,c,e){var b=[],f,g;if(a){window.FileList&&a instanceof FileList||(a=[].concat(a));for(f=0;f<a.length;f+=
1)g=a[f],qq.isFileOrInput(g)?b.push(g):this.log(g+" is not a File or INPUT element!  Ignoring!","warn");this.log("Processing "+b.length+" files or inputs...");this._uploadFileOrBlobDataList(b,c,e)}},addBlobs:function(a,c,e){if(a){a=[].concat(a);var b=[],f=this;qq.each(a,function(a,c){qq.isBlob(c)&&!qq.isFileOrInput(c)?b.push({blob:c,name:f._options.blobs.defaultName}):qq.isObject(c)&&c.blob&&c.name?b.push(c):f.log("addBlobs: entry at index "+a+" is not a Blob or a BlobData object","error")});this._uploadFileOrBlobDataList(b,
c,e)}else this.log("undefined or non-array parameter passed into addBlobs","error")},getUuid:function(a){return this._handler.getUuid(a)},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(a){return this._handler.getSize(a)},getName:function(a){return this._handler.getName(a)},getFile:function(a){return this._handler.getFile(a)},deleteFile:function(a){this._onSubmitDelete(a)},setDeleteFileEndpoint:function(a,c){null==c?this._options.deleteFile.endpoint=
a:this._deleteFileEndpointStore.setEndpoint(a,c)},_createUploadButton:function(a){var c=this,e=new qq.UploadButton({element:a,multiple:this._options.multiple&&qq.supportedFeatures.ajaxUploading,acceptFiles:this._options.validation.acceptFiles,onChange:function(a){c._onInputChange(a)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});this._disposeSupport.addDisposer(function(){e.dispose()});return e},_createUploadHandler:function(){var a=this;return new qq.UploadHandler({debug:this._options.debug,
forceMultipart:this._options.request.forceMultipart,maxConnections:this._options.maxConnections,customHeaders:this._options.request.customHeaders,inputName:this._options.request.inputName,uuidParamName:this._options.request.uuidName,totalFileSizeParamName:this._options.request.totalFileSizeName,cors:this._options.cors,demoMode:this._options.demoMode,paramsInBody:this._options.request.paramsInBody,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,
blobs:this._options.blobs,log:function(c,e){a.log(c,e)},onProgress:function(c,e,b,f){a._onProgress(c,e,b,f);a._options.callbacks.onProgress(c,e,b,f)},onComplete:function(c,e,b,f){a._onComplete(c,e,b,f);a._options.callbacks.onComplete(c,e,b,f)},onCancel:function(c,e){a._onCancel(c,e);a._options.callbacks.onCancel(c,e)},onUpload:function(c,e){a._onUpload(c,e);a._options.callbacks.onUpload(c,e)},onUploadChunk:function(c,e,b){a._options.callbacks.onUploadChunk(c,e,b)},onResume:function(c,e,b){return a._options.callbacks.onResume(c,
e,b)},onAutoRetry:function(c,e,b,f){a._preventRetries[c]=b[a._options.retry.preventRetryResponseProperty];return a._shouldAutoRetry(c,e,b)?(a._maybeParseAndSendUploadError(c,e,b,f),a._options.callbacks.onAutoRetry(c,e,a._autoRetries[c]+1),a._onBeforeAutoRetry(c,e),a._retryTimeouts[c]=setTimeout(function(){a._onAutoRetry(c,e,b)},1E3*a._options.retry.autoAttemptDelay),!0):!1}})},_createDeleteHandler:function(){var a=this;return new qq.DeleteFileAjaxRequestor({maxConnections:this._options.maxConnections,
customHeaders:this._options.deleteFile.customHeaders,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:function(c,e){a.log(c,e)},onDelete:function(c){a._onDelete(c);a._options.callbacks.onDelete(c)},onDeleteComplete:function(c,e,b){a._onDeleteComplete(c,e,b);a._options.callbacks.onDeleteComplete(c,e,b)}})},_createPasteHandler:function(){var a=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,
callbacks:{log:function(c,e){a.log(c,e)},pasteReceived:function(c){var e=a._options.callbacks.onPasteReceived;(e=e(c))&&e.then?e.then(function(b){a._handlePasteSuccess(c,b)},function(b){a.log("Ignoring pasted image per paste received callback.  Reason = '"+b+"'")}):a._handlePasteSuccess(c)}}})},_handlePasteSuccess:function(a,c){var e=a.type.split("/")[1],b=c;null==b&&(b=this._options.paste.defaultName);this.addBlobs({name:b+("."+e),blob:a})},_preventLeaveInProgress:function(){var a=this;this._disposeSupport.attach(window,
"beforeunload",function(c){if(a._filesInProgress.length)return c=c||window.event,c.returnValue=a._options.messages.onLeave})},_onSubmit:function(a){this._netUploadedOrQueued++;this._options.autoUpload&&this._filesInProgress.push(a)},_onProgress:function(){},_onComplete:function(a,c,e,b){e.success?this._netUploaded++:this._netUploadedOrQueued--;this._removeFromFilesInProgress(a);this._maybeParseAndSendUploadError(a,c,e,b)},_onCancel:function(a){this._netUploadedOrQueued--;this._removeFromFilesInProgress(a);
clearTimeout(this._retryTimeouts[a]);a=qq.indexOf(this._storedIds,a);!this._options.autoUpload&&0<=a&&this._storedIds.splice(a,1)},_isDeletePossible:function(){return this._options.deleteFile.enabled&&(!this._options.cors.expected||qq.supportedFeatures.deleteFileCors)},_onSubmitDelete:function(a){if(this._isDeletePossible())!1!==this._options.callbacks.onSubmitDelete(a)&&this._deleteHandler.sendDelete(a,this.getUuid(a));else return this.log("Delete request ignored for ID "+a+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.",
"warn"),!1},_onDelete:function(){},_onDeleteComplete:function(a,c,e){var b=this._handler.getName(a);e?(this.log("Delete request for '"+b+"' has failed.","error"),this._options.callbacks.onError(a,b,"Delete request failed with response code "+c.status,c)):(this._netUploadedOrQueued--,this._netUploaded--,this.log("Delete request for '"+b+"' has succeeded."))},_removeFromFilesInProgress:function(a){a=qq.indexOf(this._filesInProgress,a);0<=a&&this._filesInProgress.splice(a,1)},_onUpload:function(){},
_onInputChange:function(a){qq.supportedFeatures.ajaxUploading?this.addFiles(a.files):this.addFiles(a);this._button.reset()},_onBeforeAutoRetry:function(a,c){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+c+"...")},_onAutoRetry:function(a,c){this.log("Retrying "+c+"...");this._autoRetries[a]++;this._handler.retry(a)},_shouldAutoRetry:function(a){return!this._preventRetries[a]&&this._options.retry.enableAuto?(void 0===this._autoRetries[a]&&(this._autoRetries[a]=
0),this._autoRetries[a]<this._options.retry.maxAutoAttempts):!1},_onBeforeManualRetry:function(a){var c=this._options.validation.itemLimit;if(this._preventRetries[a])return this.log("Retries are forbidden for id "+a,"warn"),!1;if(this._handler.isValid(a)){var e=this._handler.getName(a);if(!1===this._options.callbacks.onManualRetry(a,e))return!1;if(0<c&&this._netUploadedOrQueued+1>c)return this._itemError("retryFailTooManyItems",""),!1;this.log("Retrying upload for '"+e+"' (id: "+a+")...");this._filesInProgress.push(a);
return!0}this.log("'"+a+"' is not a valid file ID","error");return!1},_maybeParseAndSendUploadError:function(a,c,e,b){if(!e.success)if(b&&200!==b.status&&!e.error)this._options.callbacks.onError(a,c,"XHR returned response code "+b.status,b);else this._options.callbacks.onError(a,c,e.error?e.error:this._options.text.defaultResponseError,b)},_uploadFileOrBlobDataList:function(a,c,e){var b;if(this._isBatchValid(this._getValidationDescriptors(a)))if(0<a.length)for(b=0;b<a.length;b++)if(this._validateFileOrBlobData(a[b]))this._upload(a[b],
c,e);else{if(this._options.validation.stopOnFirstInvalidFile)break}else this._itemError("noFilesError","")},_upload:function(a,c,e){a=this._handler.add(a);var b=this._handler.getName(a);c&&this.setParams(c,a);e&&this.setEndpoint(e,a);!1!==this._options.callbacks.onSubmit(a,b)&&(this._onSubmit(a,b),this._options.callbacks.onSubmitted(a,b),this._options.autoUpload?this._handler.upload(a):this._storeForLater(a))},_storeForLater:function(a){this._storedIds.push(a)},_isBatchValid:function(a){var c;c=this._options.validation.itemLimit;
var e=this._netUploadedOrQueued+a.length;if(a=!1!==this._options.callbacks.onValidateBatch(a))0===c||e<=c?a=!0:(a=!1,c=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,e).replace(/\{itemLimit\}/g,c),this._batchError(c));return a},_validateFileOrBlobData:function(a){var c,e,b;c=this._getValidationDescriptor(a);e=c.name;b=c.size;return!1===this._options.callbacks.onValidate(c)?!1:qq.isFileOrInput(a)&&!this._isAllowedExtension(e)?(this._itemError("typeError",e),!1):0===b?(this._itemError("emptyError",
e),!1):b&&this._options.validation.sizeLimit&&b>this._options.validation.sizeLimit?(this._itemError("sizeError",e),!1):b&&b<this._options.validation.minSizeLimit?(this._itemError("minSizeError",e),!1):!0},_itemError:function(a,c){function e(a,c){b=b.replace(a,c)}var b=this._options.messages[a],f=[],g=[].concat(c),h=g[0],k;qq.each(this._options.validation.allowedExtensions,function(a,b){qq.isString(b)&&f.push(b)});k=f.join(", ").toLowerCase();e("{file}",this._options.formatFileName(h));e("{extensions}",
k);e("{sizeLimit}",this._formatSize(this._options.validation.sizeLimit));e("{minSizeLimit}",this._formatSize(this._options.validation.minSizeLimit));k=b.match(/(\{\w+\})/g);null!==k&&qq.each(k,function(a,b){e(b,g[a])});this._options.callbacks.onError(null,h,b);return b},_batchError:function(a){this._options.callbacks.onError(null,null,a)},_isAllowedExtension:function(a){var c=this._options.validation.allowedExtensions,e=!1;if(!c.length)return!0;qq.each(c,function(b,c){if(qq.isString(c)&&null!=a.match(RegExp("\\."+
c+"$","i")))return e=!0,!1});return e},_formatSize:function(a){var c=-1;do a/=1024,c++;while(99<a);return Math.max(a,.1).toFixed(1)+this._options.text.sizeSymbols[c]},_wrapCallbacks:function(){var a,c;a=this;c=function(b,c,e){try{return c.apply(a,e)}catch(h){a.log("Caught exception in '"+b+"' callback - "+h.message,"error")}};for(var e in this._options.callbacks)(function(){var b,f;b=e;f=a._options.callbacks[b];a._options.callbacks[b]=function(){return c(b,f,arguments)}})()},_parseFileOrBlobDataName:function(a){return qq.isFileOrInput(a)?
a.value?a.value.replace(/.*(\/|\\)/,""):null!==a.fileName&&void 0!==a.fileName?a.fileName:a.name:a.name},_parseFileOrBlobDataSize:function(a){var c;qq.isFileOrInput(a)?a.value||(c=null!==a.fileSize&&void 0!==a.fileSize?a.fileSize:a.size):c=a.blob.size;return c},_getValidationDescriptor:function(a){var c,e;e={};c=this._parseFileOrBlobDataName(a);a=this._parseFileOrBlobDataSize(a);e.name=c;void 0!==a&&(e.size=a);return e},_getValidationDescriptors:function(a){var c=this,e=[];qq.each(a,function(a,f){e.push(c._getValidationDescriptor(f))});
return e},_createParamsStore:function(a){var c={},e=this;return{setParams:function(a,f){var e={};qq.extend(e,a);c[f]=e},getParams:function(b){var f={};null!=b&&c[b]?qq.extend(f,c[b]):qq.extend(f,e._options[a].params);return f},remove:function(a){return delete c[a]},reset:function(){c={}}}},_createEndpointStore:function(a){var c={},e=this;return{setEndpoint:function(a,f){c[f]=a},getEndpoint:function(b){return null!=b&&c[b]?c[b]:e._options[a].endpoint},remove:function(a){return delete c[a]},reset:function(){c=
{}}}}};
qq.DragAndDrop=function(a){function c(a){var b,f,e=new qq.Promise;a.isFile?a.file(function(a){k.push(a);e.success()},function(b){g.callbacks.dropLog("Problem parsing '"+a.fullPath+"'.  FileError code "+b.code+".","error");e.failure()}):a.isDirectory&&(b=a.createReader(),b.readEntries(function(a){var b=a.length;for(f=0;f<a.length;f+=1)c(a[f]).done(function(){--b;0===b&&e.success()});a.length||e.success()},function(b){g.callbacks.dropLog("Problem parsing '"+a.fullPath+"'.  FileError code "+b.code+".",
"error");e.failure()}));return e}function e(a){var b,f,e=[],m=new qq.Promise;g.callbacks.processingDroppedFiles();h.dropDisabled(!0);if(1<a.files.length&&!g.allowMultipleItems)g.callbacks.processingDroppedFilesComplete([]),g.callbacks.dropError("tooManyFilesError",""),h.dropDisabled(!1),m.failure();else{k=[];if(qq.isFolderDropSupported(a))for(b=a.items,a=0;a<b.length;a+=1)(f=b[a].webkitGetAsEntry())&&(f.isFile?k.push(b[a].getAsFile()):e.push(c(f).done(function(){e.pop();0===e.length&&m.success()})));
else k=a.files;0===e.length&&m.success()}return m}function b(a){h=new qq.UploadDropZone({element:a,onEnter:function(b){qq(a).addClass(g.classes.dropActive);b.stopPropagation()},onLeaveNotDescendants:function(){qq(a).removeClass(g.classes.dropActive)},onDrop:function(b){g.hideDropZonesBeforeEnter&&qq(a).hide();qq(a).removeClass(g.classes.dropActive);e(b.dataTransfer).done(function(){var a=k;g.callbacks.dropLog("Grabbed "+a.length+" dropped files.");h.dropDisabled(!1);g.callbacks.processingDroppedFilesComplete(a)})}});
m.addDisposer(function(){h.dispose()});g.hideDropZonesBeforeEnter&&qq(a).hide()}function f(a){var b;qq.each(a.dataTransfer.types,function(a,c){if("Files"===c)return b=!0,!1});return b}var g,h,k=[],m=new qq.DisposeSupport;g={dropZoneElements:[],hideDropZonesBeforeEnter:!1,allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks};qq.extend(g,a,!0);(function(){var a=g.dropZoneElements;qq.each(a,function(a,c){b(c)});a.length&&(!qq.ie()||qq.ie10())&&m.attach(document,"dragenter",
function(b){!h.dropDisabled()&&f(b)&&qq.each(a,function(a,b){qq(b).css({display:"block"})})});m.attach(document,"dragleave",function(b){g.hideDropZonesBeforeEnter&&qq.FineUploader.prototype._leaving_document_out(b)&&qq.each(a,function(a,b){qq(b).hide()})});m.attach(document,"drop",function(b){g.hideDropZonesBeforeEnter&&qq.each(a,function(a,b){qq(b).hide()});b.preventDefault()})})();return{setupExtraDropzone:function(a){g.dropZoneElements.push(a);b(a)},removeDropzone:function(a){var b,c=g.dropZoneElements;
for(b in c)if(c[b]===a)return c.splice(b,1)},dispose:function(){m.dispose();h.dispose()}}};qq.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(){},dropError:function(a,c){qq.log("Drag & drop error code '"+a+" with these specifics: '"+c+"'","error")},dropLog:function(a,c){qq.log(a,c)}}};
qq.UploadDropZone=function(a){function c(){return qq.safari()||qq.firefox()&&qq.windows()}function e(a){if(qq.ie()&&!qq.ie10())return!1;var b=a.dataTransfer,c=qq.safari();a=qq.ie10()?!0:"none"!==b.effectAllowed;return b&&a&&(b.files||!c&&b.types.contains&&b.types.contains("Files"))}function b(a){void 0!==a&&(h=a);return h}var f,g,h,k,m=new qq.DisposeSupport;f={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}};qq.extend(f,a);g=f.element;
(function(){k||(c?m.attach(document,"dragover",function(a){a.preventDefault()}):m.attach(document,"dragover",function(a){a.dataTransfer&&(a.dataTransfer.dropEffect="none",a.preventDefault())}),k=!0)})();(function(){m.attach(g,"dragover",function(a){if(e(a)){var b=qq.ie()?null:a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect="move"===b||"linkMove"===b?"move":"copy";a.stopPropagation();a.preventDefault()}});m.attach(g,"dragenter",function(a){if(!b()&&e(a))f.onEnter(a)});m.attach(g,"dragleave",
function(a){if(e(a)){f.onLeave(a);var b=document.elementFromPoint(a.clientX,a.clientY);if(!qq(this).contains(b))f.onLeaveNotDescendants(a)}});m.attach(g,"drop",function(a){!b()&&e(a)&&(a.preventDefault(),f.onDrop(a))})})();return{dropDisabled:function(a){return b(a)},dispose:function(){m.dispose()}}};
qq.FineUploader=function(a){qq.FineUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,dragAndDrop:{extraDropzones:[],hideDropzones:!0,disableDefaultDropzone:!1},text:{uploadButton:"Upload a file",cancelButton:"Cancel",retryButton:"Retry",deleteButton:"Delete",failUpload:"Upload failed",dragZone:"Drop files here to upload",dropProcessing:"Processing dropped files...",formatProgress:"{percent}% of {total_size}",waitingForResponse:"Processing..."},template:'<div class="qq-uploader">'+
(this._options.dragAndDrop&&this._options.dragAndDrop.disableDefaultDropzone?"":'<div class="qq-upload-drop-area"><span>{dragZoneText}</span></div>')+(this._options.button?"":'<div class="qq-upload-button"><div>{uploadButtonText}</div></div>')+'<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>'+(this._options.listElement?"":'<ul class="qq-upload-list"></ul>')+"</div>",fileTemplate:'<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span><span class="qq-upload-file"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">{cancelButtonText}</a><a class="qq-upload-retry" href="#">{retryButtonText}</a><a class="qq-upload-delete" href="#">{deleteButtonText}</a><span class="qq-upload-status-text">{statusText}</span></li>',
classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",size:"qq-upload-size",cancel:"qq-upload-cancel",deleteButton:"qq-upload-delete",retry:"qq-upload-retry",statusText:"qq-upload-status-text",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,
failIcon:null,dropProcessing:"qq-drop-processing",dropProcessingSpinner:"qq-drop-processing-spinner"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}...",showButton:!1},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",
deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},showMessage:function(a){setTimeout(function(){window.alert(a)},0)},showConfirm:function(a,e,b){setTimeout(function(){window.confirm(a)?e():b&&b()},0)},showPrompt:function(a,e){var b=new qq.Promise,f=window.prompt(a,e);null!=f&&0<qq.trimStr(f).length?b.success(f):b.failure("Undefined or invalid user-supplied value.");return b}},!0);qq.extend(this._options,
a,!0);!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors?this._options.element.innerHTML="<div>"+this._options.messages.unsupportedBrowser+"</div>":(this._wrapCallbacks(),this._options.template=this._options.template.replace(/\{dragZoneText\}/g,this._options.text.dragZone),this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.text.uploadButton),this._options.template=this._options.template.replace(/\{dropProcessingText\}/g,
this._options.text.dropProcessing),this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.text.cancelButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{retryButtonText\}/g,this._options.text.retryButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{deleteButtonText\}/g,this._options.text.deleteButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{statusText\}/g,""),this._element=this._options.element,
this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button||(this._button=this._createUploadButton(this._find(this._element,"button"))),this._bindCancelAndRetryEvents(),this._dnd=this._setupDragAndDrop(),this._options.paste.targetElement&&this._options.paste.promptForName&&this._setupPastePrompt())};qq.extend(qq.FineUploader.prototype,qq.FineUploaderBasic.prototype);
qq.extend(qq.FineUploader.prototype,{clearStoredFiles:function(){qq.FineUploaderBasic.prototype.clearStoredFiles.apply(this,arguments);this._listElement.innerHTML=""},addExtraDropzone:function(a){this._dnd.setupExtraDropzone(a)},removeExtraDropzone:function(a){return this._dnd.removeDropzone(a)},getItemByFileId:function(a){for(var c=this._listElement.firstChild;c;){if(c.qqFileId==a)return c;c=c.nextSibling}},reset:function(){qq.FineUploaderBasic.prototype.reset.apply(this,arguments);this._element.innerHTML=
this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._options.button||(this._button=this._createUploadButton(this._find(this._element,"button")));this._bindCancelAndRetryEvents();this._dnd.dispose();this._dnd=this._setupDragAndDrop()},_removeFileItem:function(a){a=this.getItemByFileId(a);qq(a).remove()},_setupDragAndDrop:function(){var a=this,c=this._find(this._element,"dropProcessing"),e=this._options.dragAndDrop.extraDropzones,b;b=function(a){a.preventDefault()};
this._options.dragAndDrop.disableDefaultDropzone||e.push(this._find(this._options.element,"drop"));return new qq.DragAndDrop({dropZoneElements:e,hideDropZonesBeforeEnter:this._options.dragAndDrop.hideDropzones,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){var f=a._button.getInput();qq(c).css({display:"block"});qq(f).attach("click",b)},processingDroppedFilesComplete:function(f){var e=a._button.getInput();
qq(c).hide();qq(e).detach("click",b);f&&a.addFiles(f)},dropError:function(b,c){a._itemError(b,c)},dropLog:function(b,c){a.log(b,c)}}})},_leaving_document_out:function(a){return(qq.chrome()||qq.safari()&&qq.windows())&&0==a.clientX&&0==a.clientY||qq.firefox()&&!a.relatedTarget},_storeForLater:function(a){qq.FineUploaderBasic.prototype._storeForLater.apply(this,arguments);var c=this.getItemByFileId(a);qq(this._find(c,"spinner")).hide()},_find:function(a,c){var e=qq(a).getByClass(this._options.classes[c])[0];
if(!e)throw Error("element not found "+c);return e},_onSubmit:function(a,c){qq.FineUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(a,c)},_onProgress:function(a,c,e,b){qq.FineUploaderBasic.prototype._onProgress.apply(this,arguments);var f,g,h,k;f=this.getItemByFileId(a);g=this._find(f,"progressBar");h=Math.round(e/b*100);e===b?(k=this._find(f,"cancel"),qq(k).hide(),qq(g).hide(),qq(this._find(f,"statusText")).setText(this._options.text.waitingForResponse),this._displayFileSize(a)):
(this._displayFileSize(a,e,b),qq(g).css({display:"block"}));qq(g).css({width:h+"%"})},_onComplete:function(a,c,e,b){qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments);var f=this.getItemByFileId(a);qq(this._find(f,"statusText")).clearText();qq(f).removeClass(this._classes.retrying);qq(this._find(f,"progressBar")).hide();this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading||qq(this._find(f,"cancel")).hide();qq(this._find(f,"spinner")).hide();e.success?(this._isDeletePossible()&&
this._showDeleteLink(a),qq(f).addClass(this._classes.success),this._classes.successIcon&&(this._find(f,"finished").style.display="inline-block",qq(f).addClass(this._classes.successIcon))):(qq(f).addClass(this._classes.fail),this._classes.failIcon&&(this._find(f,"finished").style.display="inline-block",qq(f).addClass(this._classes.failIcon)),this._options.retry.showButton&&!this._preventRetries[a]&&qq(f).addClass(this._classes.retryable),this._controlFailureTextDisplay(f,e))},_onUpload:function(a,
c){qq.FineUploaderBasic.prototype._onUpload.apply(this,arguments);this._showSpinner(a)},_onCancel:function(a,c){qq.FineUploaderBasic.prototype._onCancel.apply(this,arguments);this._removeFileItem(a)},_onBeforeAutoRetry:function(a){var c,e,b,f,g;qq.FineUploaderBasic.prototype._onBeforeAutoRetry.apply(this,arguments);c=this.getItemByFileId(a);e=this._find(c,"progressBar");this._showCancelLink(c);e.style.width=0;qq(e).hide();this._options.retry.showAutoRetryNote&&(e=this._find(c,"statusText"),b=this._autoRetries[a]+
1,f=this._options.retry.maxAutoAttempts,g=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,b),g=g.replace(/\{maxAuto\}/g,f),qq(e).setText(g),1===b&&qq(c).addClass(this._classes.retrying))},_onBeforeManualRetry:function(a){var c=this.getItemByFileId(a);if(qq.FineUploaderBasic.prototype._onBeforeManualRetry.apply(this,arguments))return this._find(c,"progressBar").style.width=0,qq(c).removeClass(this._classes.fail),qq(this._find(c,"statusText")).clearText(),this._showSpinner(a),this._showCancelLink(c),
!0;qq(c).addClass(this._classes.retryable);return!1},_onSubmitDelete:function(a){if(this._isDeletePossible())!1!==this._options.callbacks.onSubmitDelete(a)&&(this._options.deleteFile.forceConfirm?this._showDeleteConfirm(a):this._sendDeleteRequest(a));else return this.log("Delete request ignored for file ID "+a+", delete feature is disabled.","warn"),!1},_onDeleteComplete:function(a,c,e){qq.FineUploaderBasic.prototype._onDeleteComplete.apply(this,arguments);var b=this.getItemByFileId(a),f=this._find(b,
"spinner"),b=this._find(b,"statusText");qq(f).hide();e?(qq(b).setText(this._options.deleteFile.deletingFailedText),this._showDeleteLink(a)):this._removeFileItem(a)},_sendDeleteRequest:function(a){var c=this.getItemByFileId(a),e=this._find(c,"deleteButton"),c=this._find(c,"statusText");qq(e).hide();this._showSpinner(a);qq(c).setText(this._options.deleteFile.deletingStatusText);this._deleteHandler.sendDelete(a,this.getUuid(a))},_showDeleteConfirm:function(a){var c=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,
this._handler.getName(a));this.getUuid(a);var e=this;this._options.showConfirm(c,function(){e._sendDeleteRequest(a)})},_addToList:function(a,c){var e=qq.toElement(this._options.fileTemplate);if(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading){var b=this._find(e,"cancel");qq(b).remove()}e.qqFileId=a;b=this._find(e,"file");qq(b).setText(this._options.formatFileName(c));qq(this._find(e,"size")).hide();this._options.multiple||(this._handler.cancelAll(),this._clearList());
this._listElement.appendChild(e);this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading&&this._displayFileSize(a)},_clearList:function(){this._listElement.innerHTML="";this.clearStoredFiles()},_displayFileSize:function(a,c,e){var b=this.getItemByFileId(a);a=this._formatSize(this.getSize(a));b=this._find(b,"size");void 0!==c&&void 0!==e&&(a=this._formatProgress(c,e));qq(b).css({display:"inline"});qq(b).setText(a)},_bindCancelAndRetryEvents:function(){var a=this;this._disposeSupport.attach(this._listElement,
"click",function(c){c=c||window.event;var e=c.target||c.srcElement;if(qq(e).hasClass(a._classes.cancel)||qq(e).hasClass(a._classes.retry)||qq(e).hasClass(a._classes.deleteButton)){qq.preventDefault(c);for(c=e.parentNode;void 0===c.qqFileId;)c=c.parentNode;qq(e).hasClass(a._classes.deleteButton)?a.deleteFile(c.qqFileId):qq(e).hasClass(a._classes.cancel)?a.cancel(c.qqFileId):(qq(c).removeClass(a._classes.retryable),a.retry(c.qqFileId))}})},_formatProgress:function(a,c){var e=this._options.text.formatProgress,
b=Math.round(a/c*100),e=e.replace("{percent}",b),b=this._formatSize(c);return e.replace("{total_size}",b)},_controlFailureTextDisplay:function(a,c){var e,b,f,g;e=this._options.failedUploadTextDisplay.mode;b=this._options.failedUploadTextDisplay.maxChars;f=this._options.failedUploadTextDisplay.responseProperty;"custom"===e?((e=c[f])?e.length>b&&(g=e.substring(0,b)+"..."):(e=this._options.text.failUpload,this.log("'"+f+"' is not a valid property on the server response.","warn")),qq(this._find(a,"statusText")).setText(g||
e),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(a,e)):"default"===e?qq(this._find(a,"statusText")).setText(this._options.text.failUpload):"none"!==e&&this.log("failedUploadTextDisplay.mode value of '"+e+"' is not valid","warn")},_showTooltip:function(a,c){a.title=c},_showSpinner:function(a){this._find(this.getItemByFileId(a),"spinner").style.display="inline-block"},_showCancelLink:function(a){if(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)a=
this._find(a,"cancel"),qq(a).css({display:"inline"})},_showDeleteLink:function(a){a=this._find(this.getItemByFileId(a),"deleteButton");qq(a).css({display:"inline"})},_itemError:function(a,c){this._options.showMessage(qq.FineUploaderBasic.prototype._itemError.apply(this,arguments))},_batchError:function(a){qq.FineUploaderBasic.prototype._batchError.apply(this,arguments);this._options.showMessage(a)},_setupPastePrompt:function(){var a=this;this._options.callbacks.onPasteReceived=function(){return a._options.showPrompt(a._options.paste.namePromptMessage,
a._options.paste.defaultName)}}});
qq.AjaxRequestor=function(a){function c(a){var b=qq.indexOf(m,a),c=n.maxConnections;delete p[a];m.splice(b,1);m.length>=c&&b<c&&(a=m[c-1],e(a))}function e(a){var c=new XMLHttpRequest,e=g(),m={},C;n.onSend(a);n.paramsStore.getParams&&(m=n.paramsStore.getParams(a));C=m;var u=n.endpointStore.getEndpoint(a),t=p[a].addToPath;void 0!==t&&(u+="/"+t);C=k&&C?qq.obj2url(C,u):u;p[a].xhr=c;c.onreadystatechange=b(a);c.open(e,C,!0);n.cors.expected&&n.cors.sendCredentials&&(c.withCredentials=!0);f(a);h("Sending "+
e+" request for "+a);!k&&m?c.send(qq.obj2url(m,"")):c.send()}function b(a){var b=p[a].xhr;return function(){if(4===b.readyState){var f=p[a].xhr,e=g(),k=!1;c(a);0<=qq.indexOf(n.successfulResponseCodes,f.status)||(k=!0,h(e+" request for "+a+" has failed - response code "+f.status,"error"));n.onComplete(a,f,k)}}}function f(a){var b=p[a].xhr;a=n.customHeaders;b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Cache-Control","no-cache");qq.each(a,function(a,c){b.setRequestHeader(a,
c)})}function g(){return n.demoMode?"GET":n.method}var h,k,m=[],p=[],n={method:"POST",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},successfulResponseCodes:[200],demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onSend:function(){},onComplete:function(){},onCancel:function(){}};qq.extend(n,a);h=n.log;k="GET"===g()||"DELETE"===g();return{send:function(a,b){p[a]={addToPath:b};m.push(a)<=n.maxConnections&&e(a)},cancel:function(a){var b=p[a].xhr,f=g();b?(b.onreadystatechange=
null,b.abort(),c(a),h("Cancelled "+f+" for "+a),n.onCancel(a),a=!0):a=!1;return a}}};
qq.DeleteFileAjaxRequestor=function(a){var c,e={endpointStore:{},maxConnections:3,customHeaders:{},paramsStore:{},demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onDelete:function(){},onDeleteComplete:function(){}};qq.extend(e,a);c=new qq.AjaxRequestor({method:"DELETE",endpointStore:e.endpointStore,paramsStore:e.paramsStore,maxConnections:e.maxConnections,customHeaders:e.customHeaders,successfulResponseCodes:[200,202,204],demoMode:e.demoMode,log:e.log,onSend:e.onDelete,onComplete:e.onDeleteComplete});
return{sendDelete:function(a,f){c.send(a,f);e.log("Submitted delete file request for "+a)}}};qq.WindowReceiveMessage=function(a){var c={};qq.extend({log:function(){}},a);return{receiveMessage:function(a,b){var f=function(a){b(a.data)};window.postMessage?c[a]=qq(window).attach("message",f):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(a){window.postMessage&&(a=c[a])&&a()}}};
qq.UploadHandler=function(a){var c=[],e,b,f,g;e={debug:!1,forceMultipart:!0,paramsInBody:!1,paramsStore:{},endpointStore:{},cors:{expected:!1,sendCredentials:!1},maxConnections:3,uuidParamName:"qquuid",totalFileSizeParamName:"qqtotalfilesize",chunking:{enabled:!1,partSize:2E6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},blobs:{paramNames:{name:"qqblobname"}},
log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onAutoRetry:function(){},onResume:function(){}};qq.extend(e,a);b=e.log;f=function(a){a=qq.indexOf(c,a);var b=e.maxConnections;0<=a&&(c.splice(a,1),c.length>=b&&a<b&&(a=c[b-1],g.upload(a)))};g=qq.supportedFeatures.ajaxUploading?new qq.UploadHandlerXhr(e,f,b):new qq.UploadHandlerForm(e,f,b);return{add:function(a){return g.add(a)},upload:function(a){if(c.push(a)<=e.maxConnections)return g.upload(a)},
retry:function(a){return 0<=qq.indexOf(c,a)?g.upload(a,!0):this.upload(a)},cancel:function(a){b("Cancelling "+a);e.paramsStore.remove(a);g.cancel(a);f(a)},cancelAll:function(){var a=this,b=[];qq.extend(b,c);qq.each(b,function(b,c){a.cancel(c)});c=[]},getName:function(a){return g.getName(a)},getSize:function(a){if(g.getSize)return g.getSize(a)},getFile:function(a){if(g.getFile)return g.getFile(a)},getQueue:function(){return c},reset:function(){b("Resetting upload handler");c=[];g.reset()},getUuid:function(a){return g.getUuid(a)},
isValid:function(a){return g.isValid(a)},getResumableFilesData:function(){return g.getResumableFilesData?g.getResumableFilesData():[]}}};
qq.UploadHandlerForm=function(a,c,e){function b(a){void 0!==r[a]&&(r[a](),delete r[a])}function f(a,c){var f=a.id;C[n[f]]=c;r[f]=qq(a).attach("load",function(){p[f]&&(v("Received iframe load event for CORS upload request (file id "+f+")"),x[f]=setTimeout(function(){var a="No valid message received from loaded iframe for file id "+f;v(a,"error");c({error:a})},1E3))});H.receiveMessage(f,function(a){v("Received the following window message: '"+a+"'");var c=qq.parseJson(a),e=c.uuid;e&&C[e]?(clearTimeout(x[f]),
delete x[f],b(f),a=C[e],delete C[e],H.stopReceivingMessages(f),a(c)):e||v("'"+a+"' does not contain a UUID - ignoring.")})}function g(a,b){m.cors.expected?f(a,b):r[a.id]=qq(a).attach("load",function(){v("Received response for "+a.id);if(a.parentNode){try{if(a.contentDocument&&a.contentDocument.body&&"false"==a.contentDocument.body.innerHTML)return}catch(c){v("Error when attempting to access iframe during handling of upload response ("+c+")","error")}b()}})}function h(a){var b=qq.toElement('<iframe src="javascript:false;" name="'+
a+'" />');b.setAttribute("id",a);b.style.display="none";document.body.appendChild(b);return b}function k(a,b){var c=m.paramsStore.getParams(a),f=qq.toElement('<form method="'+(m.demoMode?"GET":"POST")+'" enctype="multipart/form-data"></form>'),e=m.endpointStore.getEndpoint(a),g=e;c[m.uuidParamName]=n[a];m.paramsInBody?qq.obj2Inputs(c,f):g=qq.obj2url(c,e);f.setAttribute("action",g);f.setAttribute("target",b.name);f.style.display="none";document.body.appendChild(f);return f}var m=a,p=[],n=[],r={},x=
{},v=e,H=new qq.WindowReceiveMessage({log:v}),C={},u;return u={add:function(a){a.setAttribute("name",m.inputName);var b=p.push(a)-1;n[b]=qq.getUniqueId();a.parentNode&&qq(a).remove();return b},getName:function(a){if(u.isValid(a))return p[a].value.replace(/.*(\/|\\)/,"");v(a+" is not a valid item ID.","error")},isValid:function(a){return void 0!==p[a]},reset:function(){p=[];n=[];r={}},getUuid:function(a){return n[a]},cancel:function(a){m.onCancel(a,this.getName(a));delete p[a];delete n[a];delete r[a];
m.cors.expected&&(clearTimeout(x[a]),delete x[a],H.stopReceivingMessages(a));if(a=document.getElementById(a))a.setAttribute("src","java"+String.fromCharCode(115)+"cript:false;"),qq(a).remove()},upload:function(a){var f=p[a],e=u.getName(a),n=h(a),r;if(!f)throw Error("file with passed id was not added, or already uploaded or cancelled");m.onUpload(a,this.getName(a));r=k(a,n);r.appendChild(f);g(n,function(f){v("iframe loaded");if(!f){var g;try{var h=n.contentDocument||n.contentWindow.document,k=h.body.innerHTML;
v("converting iframe's innerHTML to JSON");v("innerHTML = "+k);k&&k.match(/^<pre/i)&&(k=h.body.firstChild.firstChild.nodeValue);g=qq.parseJson(k)}catch(p){v("Error when attempting to parse form upload response ("+p+")","error"),g={success:!1}}f=g}b(a);m.cors.expected||qq(n).remove();if(f.success||!m.onAutoRetry(a,e,f))m.onComplete(a,e,f),c(a)});v("Sending upload request for "+a);r.submit();qq(r).remove();return a}}};
qq.UploadHandlerXhr=function(a,c,e){function b(a,b,c){var f=z.getSize(a);a=z.getName(a);b[t.chunking.paramNames.partIndex]=c.part;b[t.chunking.paramNames.partByteOffset]=c.start;b[t.chunking.paramNames.chunkSize]=c.size;b[t.chunking.paramNames.totalParts]=c.count;b[t.totalFileSizeParamName]=f;y&&(b[t.chunking.paramNames.filename]=a)}function f(a,b){var c=t.chunking.partSize,f=z.getSize(a),e=q[a].file||q[a].blobData.blob,h=c*b,c=h+c>=f?f:h+c,f=g(a),k;e.slice?k=e.slice(h,c):e.mozSlice?k=e.mozSlice(h,
c):e.webkitSlice&&(k=e.webkitSlice(h,c));return{part:b,start:h,end:c,count:f,blob:k,size:c-h}}function g(a){a=z.getSize(a);return Math.ceil(a/t.chunking.partSize)}function h(a,b,c,f){var e=new FormData,g=t.demoMode?"GET":"POST",h=t.endpointStore.getEndpoint(f),k=h,m=z.getName(f),p=z.getSize(f),n=q[f].blobData;a[t.uuidParamName]=q[f].uuid;y&&(a[t.totalFileSizeParamName]=p,n&&(a[t.blobs.paramNames.name]=n.name));t.paramsInBody||(y||(a[t.inputName]=m),k=qq.obj2url(a,h));b.open(g,k,!0);t.cors.expected&&
t.cors.sendCredentials&&(b.withCredentials=!0);return y?(t.paramsInBody&&qq.obj2FormData(a,e),e.append(t.inputName,c),e):c}function k(a,b){var c=t.customHeaders,f=q[a].file||q[a].blobData.blob;b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Cache-Control","no-cache");y||(b.setRequestHeader("Content-Type","application/octet-stream"),b.setRequestHeader("X-Mime-Type",f.type));qq.each(c,function(a,c){b.setRequestHeader(a,c)})}function m(a,b,c){var f=z.getName(a),e=z.getSize(a);
q[a].attemptingResume=!1;t.onProgress(a,f,e,e);t.onComplete(a,f,b,c);delete q[a].xhr;G(a)}function p(a){var c=q[a].remainingChunkIdxs[0],e=f(a,c),g=q[a].xhr=new XMLHttpRequest,m=z.getSize(a),p=z.getName(a),n;void 0===q[a].loaded&&(q[a].loaded=0);A&&q[a].file&&v(a,e);g.onreadystatechange=x(a,g);g.upload.onprogress=function(b){if(b.lengthComputable){var e=b.loaded+q[a].loaded;b=b.total;var g=f(a,c);b-=g.size;var h=z.getSize(a),g=g.count,k=b-q[a].initialRequestOverhead;q[a].lastRequestOverhead=b;0===
c?(q[a].lastChunkIdxProgress=0,q[a].initialRequestOverhead=b,q[a].estTotalRequestsSize=h+g*b):q[a].lastChunkIdxProgress!==c&&(q[a].lastChunkIdxProgress=c,q[a].estTotalRequestsSize+=k);t.onProgress(a,p,e,q[a].estTotalRequestsSize)}};t.onUploadChunk(a,p,r(e));n=t.paramsStore.getParams(a);b(a,n,e);q[a].attemptingResume&&(n[t.resume.paramNames.resuming]=!0);n=h(n,g,e.blob,a);k(a,g);L("Sending chunked upload request for item "+a+": bytes "+(e.start+1)+"-"+e.end+" of "+m);g.send(n)}function n(a){L("Server has ordered chunking effort to be restarted on next attempt for item ID "+
a,"error");A&&(H(a),q[a].attemptingResume=!1);q[a].remainingChunkIdxs=[];delete q[a].loaded;delete q[a].estTotalRequestsSize;delete q[a].initialRequestOverhead}function r(a){return{partIndex:a.part,startByte:a.start+1,endByte:a.end,totalParts:a.count}}function x(a,b){return function(){if(4===b.readyState){var c;if(q[a]){L("xhr - server response received for "+a);L("responseText = "+b.responseText);try{c=qq.parseJson(b.responseText)}catch(e){L("Error when attempting to parse xhr response text ("+e+
")","error"),c={}}if(200!==b.status||!c.success||c.reset)if(c.reset&&n(a),q[a].attemptingResume&&c.reset)q[a].attemptingResume=!1,L("Server has declared that it cannot handle resume for item ID "+a+" - starting from the first chunk","error"),n(a),z.upload(a,!0);else{var g=z.getName(a);t.onAutoRetry(a,g,c,b)||m(a,c,b)}else if(R){var g=q[a].remainingChunkIdxs.shift(),h=f(a,g);q[a].attemptingResume=!1;var g=q[a],k=g.loaded,h=h.size;g.loaded=k+(h+(y?q[a].lastRequestOverhead:0));0<q[a].remainingChunkIdxs.length?
p(a):(A&&H(a),m(a,c,b))}else m(a,c,b)}}}}function v(a,b){var c=z.getUuid(a),f=q[a].loaded,e=q[a].initialRequestOverhead,g=q[a].estTotalRequestsSize,h=C(a);qq.setCookie(h,c+F+b.part+F+f+F+e+F+g,t.resume.cookiesExpireIn)}function H(a){q[a].file&&(a=C(a),qq.deleteCookie(a))}function C(a){var b=z.getName(a);a=z.getSize(a);var c=t.chunking.partSize,b="qqfilechunk"+F+encodeURIComponent(b)+F+a+F+c;void 0!==K&&(b+=F+K);return b}function u(a){var b=q[a].file||q[a].blobData.blob,c=z.getName(a),f,e;q[a].loaded=
0;f=q[a].xhr=new XMLHttpRequest;f.upload.onprogress=function(b){b.lengthComputable&&(q[a].loaded=b.loaded,t.onProgress(a,c,b.loaded,b.total))};f.onreadystatechange=x(a,f);e=t.paramsStore.getParams(a);b=h(e,f,b,a);k(a,f);L("Sending upload request for "+a);f.send(b)}var t=a,G=c,L=e,q=[],F="|",R=t.chunking.enabled&&qq.supportedFeatures.chunking,A=t.resume.enabled&&R&&qq.supportedFeatures.resume,K;K=null===t.resume.id||void 0===t.resume.id||qq.isFunction(t.resume.id)||qq.isObject(t.resume.id)?void 0:
t.resume.id;var y=t.forceMultipart||t.paramsInBody,z;return z={add:function(a){if(a instanceof File)a=q.push({file:a})-1;else if(qq.isBlob(a.blob))a=q.push({blobData:a})-1;else throw Error("Passed obj in not a File or BlobData (in qq.UploadHandlerXhr)");q[a].uuid=qq.getUniqueId();return a},getName:function(a){if(z.isValid(a)){var b=q[a].file;a=q[a].blobData;return b?null!==b.fileName&&void 0!==b.fileName?b.fileName:b.name:a.name}L(a+" is not a valid item ID.","error")},getSize:function(a){a=q[a].file||
q[a].blobData.blob;return qq.isFileOrInput(a)?null!=a.fileSize?a.fileSize:a.size:a.size},getFile:function(a){if(q[a])return q[a].file||q[a].blobData.blob},getLoaded:function(a){return q[a].loaded||0},isValid:function(a){return void 0!==q[a]},reset:function(){q=[]},getUuid:function(a){return q[a].uuid},upload:function(a,b){var c=this.getName(a);t.onUpload(a,c);if(R){var e=z.getName(a),c=0,h,k;if(!q[a].remainingChunkIdxs||0===q[a].remainingChunkIdxs.length){q[a].remainingChunkIdxs=[];if(A&&!b&&q[a].file){a:{h=
qq.getCookie(C(a));k=z.getName(a);var m,n,l;if(h){h=h.split(F);if(5===h.length){k=h[0];m=parseInt(h[1],10);n=parseInt(h[2],10);l=parseInt(h[3],10);h=parseInt(h[4],10);h={uuid:k,part:m,lastByteSent:n,initialRequestOverhead:l,estTotalRequestsSize:h};break a}L("Ignoring previously stored resume/chunk cookie for "+k+" - old cookie format","warn")}h=void 0}h&&(k=f(a,h.part),!1!==t.onResume(a,e,r(k))&&(c=h.part,q[a].uuid=h.uuid,q[a].loaded=h.lastByteSent,q[a].estTotalRequestsSize=h.estTotalRequestsSize,
q[a].initialRequestOverhead=h.initialRequestOverhead,q[a].attemptingResume=!0,L("Resuming "+e+" at partition index "+c)))}for(e=g(a)-1;e>=c;--e)q[a].remainingChunkIdxs.unshift(e)}p(a)}else u(a)},cancel:function(a){var b=q[a].xhr;t.onCancel(a,this.getName(a));b&&(b.onreadystatechange=null,b.abort());A&&H(a);delete q[a]},getResumableFilesData:function(){var a=[],b=[];return R&&A?(a=void 0===K?qq.getCookieNames(RegExp("^qqfilechunk\\"+F+".+\\"+F+"\\d+\\"+F+t.chunking.partSize+"=")):qq.getCookieNames(RegExp("^qqfilechunk\\"+
F+".+\\"+F+"\\d+\\"+F+t.chunking.partSize+"\\"+F+K+"=")),qq.each(a,function(a,c){var f=c.split(F),e=qq.getCookie(c).split(F);b.push({name:decodeURIComponent(f[1]),size:f[2],uuid:e[0],partIdx:e[1]})}),b):[]}}};
(function(a){var c,e,b,f,g,h,k,m,p,n;h=["uploaderType"];b=function(a){a&&(a=m(a),k(a),"basic"===g("uploaderType")?c(new qq.FineUploaderBasic(a)):c(new qq.FineUploader(a)));return e};f=function(a,b){var c=e.data("fineuploader");if(b)void 0===c&&(c={}),c[a]=b,e.data("fineuploader",c);else return void 0===c?null:c[a]};c=function(a){return f("uploader",a)};g=function(a,b){return f(a,b)};k=function(b){var c=b.callbacks={};b=new qq.FineUploaderBasic;a.each(b._options.callbacks,function(a){var b,f;b=/^on(\w+)/.exec(a)[1];
b=b.substring(0,1).toLowerCase()+b.substring(1);f=e;c[a]=function(){var a=Array.prototype.slice.call(arguments);return f.triggerHandler(b,a)}})};m=function(b,c){var f,k;f=void 0===c?"basic"!==b.uploaderType?{element:e[0]}:{}:c;a.each(b,function(b,c){0<=a.inArray(b,h)?g(b,c):c instanceof a?f[b]=c[0]:a.isPlainObject(c)?(f[b]={},m(c,f[b])):a.isArray(c)?(k=[],a.each(c,function(b,c){c instanceof a?a.merge(k,c):k.push(c)}),f[b]=k):f[b]=c});if(void 0===c)return f};p=function(b){return"string"===a.type(b)&&
!b.match(/^_/)&&void 0!==c()[b]};n=function(a){var b=[],f=Array.prototype.slice.call(arguments,1);m(f,b);return c()[a].apply(c(),b)};a.fn.fineUploader=function(f){var g=this,h=arguments,k=[];this.each(function(m,u){e=a(u);if(c()&&p(f)){if(k.push(n.apply(g,h)),1===g.length)return!1}else"object"!==typeof f&&f?a.error("Method "+f+" does not exist on jQuery.fineUploader"):b.apply(g,h)});return 1===k.length?k[0]:1<k.length?k:this}})(jQuery);
(function(a){function c(a){a||(a={});a.dropZoneElements=[k];a=f(a);b(a);e(new qq.DragAndDrop(a));return k}function e(a){var b,c=k.data(h);a?(void 0===c&&(c={}),c.dndInstance=a,k.data(h,c)):b=void 0===c?null:c.dndInstance;return b}function b(b){var c=b.callbacks={};new qq.FineUploaderBasic;a.each(new qq.DragAndDrop.callbacks,function(a){var b;b=k;c[a]=function(){var c=Array.prototype.slice.call(arguments);return b.triggerHandler(a,c)}})}function f(b,c){var e,g;e=void 0===c?{}:c;a.each(b,function(b,
c){c instanceof a?e[b]=c[0]:a.isPlainObject(c)?(e[b]={},f(c,e[b])):a.isArray(c)?(g=[],a.each(c,function(b,c){c instanceof a?a.merge(g,c):g.push(c)}),e[b]=g):e[b]=c});if(void 0===c)return e}function g(a){var b=[],c=Array.prototype.slice.call(arguments,1);f(c,b);return e()[a].apply(e(),b)}var h="fineUploaderDnd",k;a.fn.fineUploaderDnd=function(b){var f=this,h=arguments,r=[];this.each(function(x,v){k=a(v);if(e()&&"string"===a.type(b)&&"dispose"===b&&void 0!==e()[b]){if(r.push(g.apply(f,h)),1===f.length)return!1}else"object"!==
typeof b&&b?a.error("Method "+b+" does not exist in Fine Uploader's DnD module."):c.apply(f,h)});return 1===r.length?r[0]:1<r.length?r:this}})(jQuery);
(function(a){function c(a,c){(e(a,c)?f:b)(a,c)}var e,b,f;"classList"in document.documentElement?(e=function(a,b){return a.classList.contains(b)},b=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(e=function(a,b){return(new RegExp("(^|\\s+)"+b+"(\\s+|$)")).test(a.className)},b=function(a,b){e(a,b)||(a.className=a.className+" "+b)},f=function(a,b){a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," ")});var g={hasClass:e,addClass:b,removeClass:f,toggleClass:c,
has:e,add:b,remove:f,toggle:c};"function"===typeof define&&define.amd?define(g):a.classie=g})(window);
$(function(a){var c=document.querySelector("#input"),e=document.querySelector("#search-label");e.addEventListener("click",function(b){classie.has(c,"focus")?(classie.remove(c,"focus"),classie.remove(e,"active"),a("#input input").animate({width:"0px",left:"-20px"},function(){})):a("#input input").animate({left:0,width:"100%"},function(){classie.add(c,"focus");classie.add(e,"active")})});document.addEventListener("click",function(b){b=b.target.id;"search-terms"!=b&&"search-label-target"!=b&&classie.has(c,
"focus")&&(classie.remove(c,"focus"),classie.remove(e,"active"),a("#input input").animate({width:"0px",left:"-20px"},function(){}))})});$(document).ready(function(){$(".not_so_cool_input").focus(function(){$(this).css("border","2px solid #cb9897")});$(".not_so_cool_input").blur(function(){$(this).css("border","2px solid #ccc")});$(".not_so_cool_textarea").focus(function(){$(this).css("border","2px solid #cb9897")});$(".not_so_cool_textarea").blur(function(){$(this).css("border","2px solid #ccc")})});
if(!jQuery)throw Error("Bootstrap requires jQuery");
+function(a){a.fn.emulateTransitionEnd=function(c){var e=!1,b=this;a(this).one(a.support.transition.end,function(){e=!0});return setTimeout(function(){e||a(b).trigger(a.support.transition.end)},c),this};a(function(){var c=a.support,e;a:{e=document.createElement("bootstrap");var b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},f;for(f in b)if(void 0!==e.style[f]){e={end:b[f]};break a}e=void 0}c.transition=
e})}(window.jQuery);
+function(a){var c=function(b){a(b).on("click",'[data-dismiss="alert"]',this.close)};c.prototype.close=function(b){function c(){k.trigger("closed.bs.alert").remove()}var e=a(this),h=e.attr("data-target");h||(h=e.attr("href"),h=h&&h.replace(/.*(?=#[^\s]*$)/,""));var k=a(h);b&&b.preventDefault();k.length||(k=e.hasClass("alert")?e:e.parent());k.trigger(b=a.Event("close.bs.alert"));b.isDefaultPrevented()||(k.removeClass("in"),a.support.transition&&k.hasClass("fade")?k.one(a.support.transition.end,c).emulateTransitionEnd(150):
c())};var e=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var f=a(this),e=f.data("bs.alert");e||f.data("bs.alert",e=new c(this));"string"==typeof b&&e[b].call(f)})};a.fn.alert.Constructor=c;a.fn.alert.noConflict=function(){return a.fn.alert=e,this};a(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',c.prototype.close)}(window.jQuery);
+function(a){var c=function(b,f){this.$element=a(b);this.options=a.extend({},c.DEFAULTS,f)};c.DEFAULTS={loadingText:"loading..."};c.prototype.setState=function(a){var c=this.$element,e=c.is("input")?"val":"html",h=c.data();a+="Text";h.resetText||c.data("resetText",c[e]());c[e](h[a]||this.options[a]);setTimeout(function(){"loadingText"==a?c.addClass("disabled").attr("disabled","disabled"):c.removeClass("disabled").removeAttr("disabled")},0)};c.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons"]');
a.length&&"radio"===this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change").prop("type")&&a.find(".active").removeClass("active");this.$element.toggleClass("active")};var e=a.fn.button;a.fn.button=function(b){return this.each(function(){var f=a(this),e=f.data("bs.button"),h="object"==typeof b&&b;e||f.data("bs.button",e=new c(this,h));"toggle"==b?e.toggle():b&&e.setState(b)})};a.fn.button.Constructor=c;a.fn.button.noConflict=function(){return a.fn.button=e,this};
a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn"));c.button("toggle");b.preventDefault()})}(window.jQuery);
+function(a){var c=function(b,c){this.$element=a(b);this.$indicators=this.$element.find(".carousel-indicators");this.options=c;this.paused=this.sliding=this.interval=this.$active=this.$items=null;"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};c.DEFAULTS={interval:5E3,pause:"hover",wrap:!0};c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&
(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this};c.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)};c.prototype.to=function(b){var c=this,e=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid",function(){c.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(this.$items[b]))};c.prototype.pause=
function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};c.prototype.next=function(){return this.sliding?void 0:this.slide("next")};c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")};c.prototype.slide=function(b,c){var e=this.$element.find(".item.active"),h=c||e[b](),k=this.interval,m="next"==b?"left":"right",p=
"next"==b?"first":"last",n=this;if(!h.length){if(!this.options.wrap)return;h=this.$element.find(".item")[p]()}this.sliding=!0;k&&this.pause();p=a.Event("slide.bs.carousel",{relatedTarget:h[0],direction:m});if(!h.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(n.$indicators.children()[n.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(p),
p.isDefaultPrevented())return;h.addClass(b);h[0].offsetWidth;e.addClass(m);h.addClass(m);e.one(a.support.transition.end,function(){h.removeClass([b,m].join(" ")).addClass("active");e.removeClass(["active",m].join(" "));n.sliding=!1;setTimeout(function(){n.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(p),p.isDefaultPrevented())return;e.removeClass("active");h.addClass("active");this.sliding=!1;this.$element.trigger("slid")}return k&&this.cycle(),this}};var e=
a.fn.carousel;a.fn.carousel=function(b){return this.each(function(){var e=a(this),g=e.data("bs.carousel"),h=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b),k="string"==typeof b?b:h.slide;g||e.data("bs.carousel",g=new c(this,h));"number"==typeof b?g.to(b):k?g[k]():h.interval&&g.pause().cycle()})};a.fn.carousel.Constructor=c;a.fn.carousel.noConflict=function(){return a.fn.carousel=e,this};a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,e=a(this),
h=a(e.attr("data-target")||(c=e.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""));c=a.extend({},h.data(),e.data());var k=e.attr("data-slide-to");k&&(c.interval=!1);h.carousel(c);(k=e.attr("data-slide-to"))&&h.data("bs.carousel").to(k);b.preventDefault()});a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(window.jQuery);
+function(a){var c=function(b,e){this.$element=a(b);this.options=a.extend({},c.DEFAULTS,e);this.transitioning=null;this.options.parent&&(this.$parent=a(this.options.parent));this.options.toggle&&this.toggle()};c.DEFAULTS={toggle:!0};c.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};c.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){if((b=this.$parent&&
this.$parent.find("> .panel > .in"))&&b.length){var c=b.data("bs.collapse");if(c&&c.transitioning)return;b.collapse("hide");c||b.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0);this.transitioning=1;b=function(){this.$element.removeClass("collapsing").addClass("in")[e]("auto");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return b.call(this);c=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,
a.proxy(b,this)).emulateTransitionEnd(350)[e](this.$element[0][c])}}};c.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){b=this.dimension();this.$element[b](this.$element[b]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var c=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};
return a.support.transition?(this.$element[b](0).one(a.support.transition.end,a.proxy(c,this)).emulateTransitionEnd(350),void 0):c.call(this)}}};c.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var e=a.fn.collapse;a.fn.collapse=function(b){return this.each(function(){var e=a(this),g=e.data("bs.collapse"),h=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);g||e.data("bs.collapse",g=new c(this,h));"string"==typeof b&&g[b]()})};a.fn.collapse.Constructor=c;a.fn.collapse.noConflict=
function(){return a.fn.collapse=e,this};a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,e=a(this);b=e.attr("data-target")||b.preventDefault()||(c=e.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");c=a(b);var h=(b=c.data("bs.collapse"))?"toggle":e.data(),k=e.attr("data-parent"),m=k&&a(k);b&&b.transitioning||(m&&m.find('[data-toggle=collapse][data-parent="'+k+'"]').not(e).addClass("collapsed"),e[c.hasClass("in")?"addClass":"removeClass"]("collapsed"));c.collapse(h)})}(window.jQuery);
+function(a){function c(){a(b).remove();a(f).each(function(b){var c=e(a(this));c.hasClass("open")&&(c.trigger(b=a.Event("hide.bs.dropdown")),b.isDefaultPrevented()||c.removeClass("open").trigger("hidden.bs.dropdown"))})}function e(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));return(c=c&&a(c))&&c.length?c:b.parent()}var b=".dropdown-backdrop",f="[data-toggle=dropdown]",g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.prototype.toggle=
function(b){var f=a(this);if(!f.is(".disabled, :disabled")){var g=e(f),h=g.hasClass("open");if(c(),!h){if("ontouchstart"in document.documentElement&&!g.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",c),g.trigger(b=a.Event("show.bs.dropdown")),b.isDefaultPrevented())return;g.toggleClass("open").trigger("shown.bs.dropdown");f.focus()}return!1}};g.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var c=a(this);if(b.preventDefault(),b.stopPropagation(),
!c.is(".disabled, :disabled")){var g=e(c),h=g.hasClass("open");if(!h||h&&27==b.keyCode)return 27==b.which&&g.find(f).focus(),c.click();c=a("[role=menu] li:not(.divider):visible a",g);c.length&&(g=c.index(c.filter(":focus")),38==b.keyCode&&0<g&&g--,40==b.keyCode&&g<c.length-1&&g++,~g||(g=0),c.eq(g).focus())}}};var h=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),e=c.data("dropdown");e||c.data("dropdown",e=new g(this));"string"==typeof b&&e[b].call(c)})};a.fn.dropdown.Constructor=
g;a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this};a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f+", [role=menu]",g.prototype.keydown)}(window.jQuery);
+function(a){var c=function(b,c){this.options=c;this.$element=a(b);this.$backdrop=this.isShown=null;this.options.remote&&this.$element.load(this.options.remote)};c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};c.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)};c.prototype.show=function(b){var c=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e);this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',
a.proxy(this.hide,this)),this.backdrop(function(){var e=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body);c.$element.show();e&&c.$element[0].offsetWidth;c.$element.addClass("in").attr("aria-hidden",!1);c.enforceFocus();var g=a.Event("shown.bs.modal",{relatedTarget:b});e?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(g)}).emulateTransitionEnd(300):c.$element.focus().trigger(g)}))};c.prototype.hide=
function(b){b&&b.preventDefault();b=a.Event("hide.bs.modal");this.$element.trigger(b);this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())};c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",
a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))};c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")};c.prototype.hideModal=function(){var a=this;this.$element.hide();this.backdrop(function(){a.removeBackdrop();a.$element.trigger("hidden.bs.modal")})};c.prototype.removeBackdrop=
function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};c.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),
e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),b)e?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var e=a.fn.modal;a.fn.modal=function(b,e){return this.each(function(){var g=a(this),h=g.data("bs.modal"),k=a.extend({},c.DEFAULTS,g.data(),"object"==typeof b&&
b);h||g.data("bs.modal",h=new c(this,k));"string"==typeof b?h[b](e):k.show&&h.show(e)})};a.fn.modal.Constructor=c;a.fn.modal.noConflict=function(){return a.fn.modal=e,this};a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),e=c.attr("href"),h=a(c.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),e=h.data("modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},h.data(),c.data());b.preventDefault();h.modal(e,this).one("hide",function(){c.is(":visible")&&c.focus()})});
a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(window.jQuery);
+function(a){var c=function(a,c){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",a,c)};c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};c.prototype.init=function(b,c,e){this.enabled=!0;this.type=b;this.$element=a(c);this.options=this.getOptions(e);b=this.options.trigger.split(" ");
for(c=b.length;c--;)if(e=b[c],"click"==e)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=e){var h="hover"==e?"mouseleave":"blur";this.$element.on(("hover"==e?"mouseenter":"focus")+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};c.prototype.getDefaults=
function(){return c.DEFAULTS};c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b};c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,e){c[a]!=e&&(b[a]=e)}),b};c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()};c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),
void 0):c.hide()};c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled&&(this.$element.trigger(b),!b.isDefaultPrevented())){var c=this.tip();this.setContent();this.options.animation&&c.addClass("fade");var b="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,h=e.test(b);h&&(b=b.replace(e,"")||"top");c.detach().css({top:0,left:0,display:"block"}).addClass(b);this.options.container?
c.appendTo(this.options.container):c.insertAfter(this.$element);var e=this.getPosition(),k=c[0].offsetWidth,m=c[0].offsetHeight;if(h){var p=this.$element.parent(),h=b,n=document.documentElement.scrollTop||document.body.scrollTop,r="body"==this.options.container?window.innerWidth:p.outerWidth(),x="body"==this.options.container?window.innerHeight:p.outerHeight(),p="body"==this.options.container?0:p.offset().left,b="bottom"==b&&e.top+e.height+m-n>x?"top":"top"==b&&0>e.top-n-m?"bottom":"right"==b&&e.right+
k>r?"left":"left"==b&&e.left-k<p?"right":b;c.removeClass(h).addClass(b)}c=this.getCalculatedOffset(b,e,k,m);this.applyPlacement(c,b);this.$element.trigger("shown.bs."+this.type)}};c.prototype.applyPlacement=function(a,c){var e,h=this.tip(),k=h[0].offsetWidth,m=h[0].offsetHeight,p=parseInt(h.css("margin-top"),10),n=parseInt(h.css("margin-left"),10);isNaN(p)&&(p=0);isNaN(n)&&(n=0);a.top+=p;a.left+=n;h.offset(a).addClass("in");p=h[0].offsetWidth;n=h[0].offsetHeight;("top"==c&&n!=m&&(e=!0,a.top=a.top+
m-n),/bottom|top/.test(c))?(m=0,0>a.left&&(m=-2*a.left,a.left=0,h.offset(a),p=h[0].offsetWidth),this.replaceArrow(m-k+p,p,"left")):this.replaceArrow(n-m,n,"top");e&&h.offset(a)};c.prototype.replaceArrow=function(a,c,e){this.arrow().css(e,a?50*(1-a/c)+"%":"")};c.prototype.setContent=function(){var a=this.tip(),c=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](c);a.removeClass("fade in top bottom left right")};c.prototype.hide=function(){function b(){"in"!=c.hoverState&&e.detach()}
var c=this,e=this.tip(),h=a.Event("hide.bs."+this.type);return this.$element.trigger(h),h.isDefaultPrevented()?void 0:(e.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?e.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.$element.trigger("hidden.bs."+this.type),this)};c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};c.prototype.hasContent=
function(){return this.getTitle()};c.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())};c.prototype.getCalculatedOffset=function(a,c,e,h){return"bottom"==a?{top:c.top+c.height,left:c.left+c.width/2-e/2}:"top"==a?{top:c.top-h,left:c.left+c.width/2-e/2}:"left"==a?{top:c.top+c.height/2-h/2,left:c.left-e}:{top:c.top+c.height/2-h/2,left:c.left+
c.width}};c.prototype.getTitle=function(){var a=this.$element,c=this.options;return a.attr("data-original-title")||("function"==typeof c.title?c.title.call(a[0]):c.title)};c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)};c.prototype.enable=function(){this.enabled=
!0};c.prototype.disable=function(){this.enabled=!1};c.prototype.toggleEnabled=function(){this.enabled=!this.enabled};c.prototype.toggle=function(b){b=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;b.tip().hasClass("in")?b.leave(b):b.enter(b)};c.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var e=a.fn.tooltip;a.fn.tooltip=function(b){return this.each(function(){var e=a(this),g=e.data("bs.tooltip"),h="object"==
typeof b&&b;g||e.data("bs.tooltip",g=new c(this,h));"string"==typeof b&&g[b]()})};a.fn.tooltip.Constructor=c;a.fn.tooltip.noConflict=function(){return a.fn.tooltip=e,this}}(window.jQuery);
+function(a){var c=function(a,c){this.init("popover",a,c)};if(!a.fn.tooltip)throw Error("Popover requires tooltip.js");c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);c.prototype.constructor=c;c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.setContent=
function(){var a=this.tip(),c=this.getTitle(),e=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](c);a.find(".popover-content")[this.options.html?"html":"text"](e);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};c.prototype.hasContent=function(){return this.getTitle()||this.getContent()};c.prototype.getContent=function(){var a=this.$element,c=this.options;return a.attr("data-content")||("function"==typeof c.content?
c.content.call(a[0]):c.content)};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var e=a.fn.popover;a.fn.popover=function(b){return this.each(function(){var e=a(this),g=e.data("bs.popover"),h="object"==typeof b&&b;g||e.data("bs.popover",g=new c(this,h));"string"==typeof b&&g[b]()})};a.fn.popover.Constructor=c;a.fn.popover.noConflict=function(){return a.fn.popover=e,
this}}(window.jQuery);
+function(a){function c(b,e){var g,h=a.proxy(this.process,this);this.$element=a(b).is("body")?a(window):a(b);this.$body=a("body");this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",h);this.options=a.extend({},c.DEFAULTS,e);this.selector=(this.options.target||(g=a(b).attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.offsets=a([]);this.targets=a([]);this.activeTarget=null;this.refresh();this.process()}c.DEFAULTS={offset:10};c.prototype.refresh=function(){var b=
this.$element[0]==window?"offset":"position";this.offsets=a([]);this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var e=a(this),e=e.data("target")||e.attr("href"),h=/^#\w/.test(e)&&a(e);return h&&h.length&&[[h[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]);c.targets.push(this[1])})};c.prototype.process=function(){var a,c=this.$scrollElement.scrollTop()+
this.options.offset,e=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),h=this.offsets,k=this.targets,m=this.activeTarget;if(c>=e)return m!=(a=k.last()[0])&&this.activate(a);for(a=h.length;a--;)m!=k[a]&&c>=h[a]&&(!h[a+1]||c<=h[a+1])&&this.activate(k[a])};c.prototype.activate=function(b){this.activeTarget=b;a(this.selector).parents(".active").removeClass("active");b=a(this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]').parents("li").addClass("active");
b.parent(".dropdown-menu").length&&(b=b.closest("li.dropdown").addClass("active"));b.trigger("activate")};var e=a.fn.scrollspy;a.fn.scrollspy=function(b){return this.each(function(){var e=a(this),g=e.data("bs.scrollspy"),h="object"==typeof b&&b;g||e.data("bs.scrollspy",g=new c(this,h));"string"==typeof b&&g[b]()})};a.fn.scrollspy.Constructor=c;a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=e,this};a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery);
+function(a){var c=function(b){this.element=a(b)};c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),e=b.attr("data-target");if(e||(e=b.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var h=c.find(".active:last a")[0],k=a.Event("show.bs.tab",{relatedTarget:h});(b.trigger(k),k.isDefaultPrevented())||(e=a(e),this.activate(b.parent("li"),c),this.activate(e,e.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:h})}))}};
c.prototype.activate=function(b,c,e){function h(){k.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");b.addClass("active");m?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active");e&&e()}var k=c.find("> .active"),m=e&&a.support.transition&&k.hasClass("fade");m?k.one(a.support.transition.end,h).emulateTransitionEnd(150):h();k.removeClass("in")};var e=a.fn.tab;a.fn.tab=function(b){return this.each(function(){var e=
a(this),g=e.data("bs.tab");g||e.data("bs.tab",g=new c(this));"string"==typeof b&&g[b]()})};a.fn.tab.Constructor=c;a.fn.tab.noConflict=function(){return a.fn.tab=e,this};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault();a(this).tab("show")})}(window.jQuery);
+function(a){var c=function(b,e){this.options=a.extend({},c.DEFAULTS,e);this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this));this.$element=a(b);this.affixed=this.unpin=null;this.checkPosition()};c.RESET="affix affix-top affix-bottom";c.DEFAULTS={offset:0};c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)};c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=
a(document).height(),e=this.$window.scrollTop(),g=this.$element.offset(),h=this.options.offset,k=h.top,m=h.bottom;"object"!=typeof h&&(m=k=h);"function"==typeof k&&(k=h.top());"function"==typeof m&&(m=h.bottom());b=null!=this.unpin&&e+this.unpin<=g.top?!1:null!=m&&g.top+this.$element.height()>=b-m?"bottom":null!=k&&k>=e?"top":!1;this.affixed!==b&&(this.unpin&&this.$element.css("top",""),this.affixed=b,this.unpin="bottom"==b?g.top-e:null,this.$element.removeClass(c.RESET).addClass("affix"+(b?"-"+b:
"")),"bottom"==b&&this.$element.offset({top:document.body.offsetHeight-m-this.$element.height()}))}};var e=a.fn.affix;a.fn.affix=function(b){return this.each(function(){var e=a(this),g=e.data("bs.affix"),h="object"==typeof b&&b;g||e.data("bs.affix",g=new c(this,h));"string"==typeof b&&g[b]()})};a.fn.affix.Constructor=c;a.fn.affix.noConflict=function(){return a.fn.affix=e,this};a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{};c.offsetBottom&&
(c.offset.bottom=c.offsetBottom);c.offsetTop&&(c.offset.top=c.offsetTop);b.affix(c)})})}(window.jQuery);
(function(a,c,e){function b(b,e,f){b=c.createElement(b);return e&&(b.id=E+e),f&&(b.style.cssText=f),a(b)}function f(){return e.innerHeight?e.innerHeight:a(e).height()}function g(a){var b=A.length;a=(I+a)%b;return 0>a?b+a:a}function h(a,b){return Math.round((/%/.test(a)?("x"===b?K.width():f())/100:1)*parseInt(a,10))}function k(a,b){return a.retinaUrl&&1<e.devicePixelRatio?b.replace(a.photoRegex,a.retinaSuffix):b}function m(a){"contains"in u[0]&&!u[0].contains(a.target)&&(a.stopPropagation(),u.focus())}
function p(){var b,c=a.data(J,P);null==c?(l=a.extend({},ia),console&&console.log&&console.log("Error: cboxElement missing settings object")):l=a.extend({},c);for(b in l)a.isFunction(l[b])&&"on"!==b.slice(0,2)&&(l[b]=l[b].call(J));l.rel=l.rel||J.rel||a(J).data("rel")||"nofollow";l.href=l.href||a(J).attr("href");l.title=l.title||J.title;"string"==typeof l.href&&(l.href=a.trim(l.href))}function n(b,e){a(c).trigger(b);M.triggerHandler(b);a.isFunction(e)&&e.call(J)}function r(e){Z||(J=e,p(),A=a(J),I=0,
"nofollow"!==l.rel&&(A=a("."+W).filter(function(){var b,c=a.data(this,P);return c&&(b=a(this).data("rel")||c.rel||this.rel),b===l.rel}),I=A.index(J),-1===I&&(A=A.add(J),I=A.length-1)),C.css({opacity:parseFloat(l.opacity),cursor:l.overlayClose?"pointer":"auto",visibility:"visible"}).show(),ja&&u.add(C).removeClass(ja),l.className&&u.add(C).addClass(l.className),ja=l.className,l.closeButton?ba.html(l.close).appendTo(G):ba.appendTo("<div/>"),Q||(Q=aa=!0,u.css({visibility:"hidden",display:"block"}),y=
b(B,"LoadedContent","width:0; height:0; overflow:hidden"),G.css({width:"",height:""}).append(y),N=L.height()+R.height()+G.outerHeight(!0)-G.height(),O=q.width()+F.width()+G.outerWidth(!0)-G.width(),S=y.outerHeight(!0),T=y.outerWidth(!0),l.w=h(l.initialWidth,"x"),l.h=h(l.initialHeight,"y"),y.css({width:"",height:l.h}),D.position(),n(qa,l.onOpen),ha.add(fa).hide(),u.focus(),l.trapFocus&&c.addEventListener&&(c.addEventListener("focus",m,!0),M.one(ka,function(){c.removeEventListener("focus",m,!0)})),
l.returnFocus&&M.one(ka,function(){a(J).focus()})),H())}function x(){!u&&c.body&&(la=!1,K=a(e),u=b(B).attr({id:P,"class":!1===a.support.opacity?E+"IE":"",role:"dialog",tabindex:"-1"}).hide(),C=b(B,"Overlay").hide(),U=a([b(B,"LoadingOverlay")[0],b(B,"LoadingGraphic")[0]]),t=b(B,"Wrapper"),G=b(B,"Content").append(fa=b(B,"Title"),ga=b(B,"Current"),Y=a('<button type="button"/>').attr({id:E+"Previous"}),X=a('<button type="button"/>').attr({id:E+"Next"}),V=b("button","Slideshow"),U),ba=a('<button type="button"/>').attr({id:E+
"Close"}),t.append(b(B).append(b(B,"TopLeft"),L=b(B,"TopCenter"),b(B,"TopRight")),b(B,!1,"clear:left").append(q=b(B,"MiddleLeft"),G,F=b(B,"MiddleRight")),b(B,!1,"clear:left").append(b(B,"BottomLeft"),R=b(B,"BottomCenter"),b(B,"BottomRight"))).find("div div").css({"float":"left"}),z=b(B,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),ha=X.add(Y).add(ga).add(V),a(c.body).append(C,u.append(t,z)))}function v(){function b(a){1<a.which||a.shiftKey||a.altKey||a.metaKey||
a.ctrlKey||(a.preventDefault(),r(this))}return u?(la||(la=!0,X.click(function(){D.next()}),Y.click(function(){D.prev()}),ba.click(function(){D.close()}),C.click(function(){l.overlayClose&&D.close()}),a(c).bind("keydown."+E,function(a){var b=a.keyCode;Q&&l.escKey&&27===b&&(a.preventDefault(),D.close());Q&&l.arrowKey&&A[1]&&!a.altKey&&(37===b?(a.preventDefault(),Y.click()):39===b&&(a.preventDefault(),X.click()))}),a.isFunction(a.fn.on)?a(c).on("click."+E,"."+W,b):a("."+W).live("click."+E,b)),!0):!1}
function H(){var f,g,m,q=D.prep,r=++ma;aa=!0;w=!1;J=A[I];p();n(ca);n(da,l.onLoad);l.h=l.height?h(l.height,"y")-S-N:l.innerHeight&&h(l.innerHeight,"y");l.w=l.width?h(l.width,"x")-T-O:l.innerWidth&&h(l.innerWidth,"x");l.mw=l.w;l.mh=l.h;l.maxWidth&&(l.mw=h(l.maxWidth,"x")-T-O,l.mw=l.w&&l.w<l.mw?l.w:l.mw);l.maxHeight&&(l.mh=h(l.maxHeight,"y")-S-N,l.mh=l.h&&l.h<l.mh?l.h:l.mh);f=l.href;oa=setTimeout(function(){U.show()},100);l.inline?(m=b(B).hide().insertBefore(a(f)[0]),M.one(ca,function(){m.replaceWith(y.children())}),
q(a(f))):l.iframe?q(" "):l.html?q(l.html):l.photo||l.photoRegex.test(f)?(f=k(l,f),w=c.createElement("img"),a(w).addClass(E+"Photo").bind("error",function(){l.title=!1;q(b(B,"Error").html(l.imgError))}).one("load",function(){var b;r===ma&&(a.each(["alt","longdesc","aria-describedby"],function(b,c){var e=a(J).attr(c)||a(J).attr("data-"+c);e&&w.setAttribute(c,e)}),l.retinaImage&&1<e.devicePixelRatio&&(w.height/=e.devicePixelRatio,w.width/=e.devicePixelRatio),l.scalePhotos&&(g=function(){w.height-=w.height*
b;w.width-=w.width*b},l.mw&&w.width>l.mw&&(b=(w.width-l.mw)/w.width,g()),l.mh&&w.height>l.mh&&(b=(w.height-l.mh)/w.height,g())),l.h&&(w.style.marginTop=Math.max(l.mh-w.height,0)/2+"px"),A[1]&&(l.loop||A[I+1])&&(w.style.cursor="pointer",w.onclick=function(){D.next()}),w.style.width=w.width+"px",w.style.height=w.height+"px",setTimeout(function(){q(w)},1))}),setTimeout(function(){w.src=f},1)):f&&z.load(f,l.data,function(c,e){r===ma&&q("error"===e?b(B,"Error").html(l.xhrError):a(this).contents())})}var C,
u,t,G,L,q,F,R,A,K,y,z,U,fa,ga,V,X,Y,ba,ha,l,N,O,S,T,J,I,w,Q,aa,Z,oa,D,ja,la,ia={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,
loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1},P="colorbox",E="cbox",
W=E+"Element",qa=E+"_open",da=E+"_load",ea=E+"_complete",na=E+"_cleanup",ka=E+"_closed",ca=E+"_purge",M=a("<a/>"),B="div",ma=0,pa={},ra=function(){function a(){clearTimeout(h)}function b(){(l.loop||A[I+1])&&(a(),h=setTimeout(D.next,l.slideshowSpeed))}function c(){V.html(l.slideshowStop).unbind(m).one(m,e);M.bind(ea,b).bind(da,a);u.removeClass(k+"off").addClass(k+"on")}function e(){a();M.unbind(ea,b).unbind(da,a);V.html(l.slideshowStart).unbind(m).one(m,function(){D.next();c()});u.removeClass(k+"on").addClass(k+
"off")}function f(){g=!1;V.hide();a();M.unbind(ea,b).unbind(da,a);u.removeClass(k+"off "+k+"on")}var g,h,k=E+"Slideshow_",m="click."+E;return function(){g?l.slideshow||(M.unbind(na,f),f()):l.slideshow&&A[1]&&(g=!0,M.one(na,f),l.slideshowAuto?c():e(),V.show())}}();a.colorbox||(a(x),D=a.fn[P]=a[P]=function(b,c){var e=this;if(b=b||{},x(),v()){if(a.isFunction(e))e=a("<a/>"),b.open=!0;else if(!e[0])return e;c&&(b.onComplete=c);e.each(function(){a.data(this,P,a.extend({},a.data(this,P)||ia,b))}).addClass(W);
(a.isFunction(b.open)&&b.open.call(e)||b.open)&&r(e[0])}return e},D.position=function(b,c){function e(){L[0].style.width=R[0].style.width=G[0].style.width=parseInt(u[0].style.width,10)-O+"px";G[0].style.height=q[0].style.height=F[0].style.height=parseInt(u[0].style.height,10)-N+"px"}var g,k,m,p=0,n=0,r=u.offset();if(K.unbind("resize."+E),u.css({top:-9E4,left:-9E4}),k=K.scrollTop(),m=K.scrollLeft(),l.fixed?(r.top-=k,r.left-=m,u.css({position:"fixed"})):(p=k,n=m,u.css({position:"absolute"})),n+=!1!==
l.right?Math.max(K.width()-l.w-T-O-h(l.right,"x"),0):!1!==l.left?h(l.left,"x"):Math.round(Math.max(K.width()-l.w-T-O,0)/2),p+=!1!==l.bottom?Math.max(f()-l.h-S-N-h(l.bottom,"y"),0):!1!==l.top?h(l.top,"y"):Math.round(Math.max(f()-l.h-S-N,0)/2),u.css({top:r.top,left:r.left,visibility:"visible"}),t[0].style.width=t[0].style.height="9999px",g={width:l.w+T+O,height:l.h+S+N,top:p,left:n},b){var v=0;a.each(g,function(a){return g[a]!==pa[a]?(v=b,void 0):void 0});b=v}pa=g;b||u.css(g);u.dequeue().animate(g,
{duration:b||0,complete:function(){e();aa=!1;t[0].style.width=l.w+T+O+"px";t[0].style.height=l.h+S+N+"px";l.reposition&&setTimeout(function(){K.bind("resize."+E,D.position)},1);c&&c()},step:e})},D.resize=function(a){var b;Q&&(a=a||{},a.width&&(l.w=h(a.width,"x")-T-O),a.innerWidth&&(l.w=h(a.innerWidth,"x")),y.css({width:l.w}),a.height&&(l.h=h(a.height,"y")-S-N),a.innerHeight&&(l.h=h(a.innerHeight,"y")),a.innerHeight||a.height||(b=y.scrollTop(),y.css({height:"auto"}),l.h=y.height()),y.css({height:l.h}),
b&&y.scrollTop(b),D.position("none"===l.transition?0:l.speed))},D.prep=function(e){if(Q){var f,h="none"===l.transition?0:l.speed;y.empty().remove();y=b(B,"LoadedContent").append(e);y.hide().appendTo(z.show()).css({width:(l.w=l.w||y.width(),l.w=l.mw&&l.mw<l.w?l.mw:l.w,l.w),overflow:l.scrolling?"auto":"hidden"}).css({height:(l.h=l.h||y.height(),l.h=l.mh&&l.mh<l.h?l.mh:l.h,l.h)}).prependTo(G);z.hide();a(w).css({"float":"none"});f=function(){function e(){!1===a.support.opacity&&u[0].style.removeAttribute("filter")}
var f,m,p=A.length;Q&&(m=function(){clearTimeout(oa);U.hide();n(ea,l.onComplete)},fa.html(l.title).add(y).show(),1<p?("string"==typeof l.current&&ga.html(l.current.replace("{current}",I+1).replace("{total}",p)).show(),X[l.loop||p-1>I?"show":"hide"]().html(l.next),Y[l.loop||I?"show":"hide"]().html(l.previous),ra(),l.preloading&&a.each([g(-1),g(1)],function(){var b,e,f=A[this],g=a.data(f,P);g&&g.href?(b=g.href,a.isFunction(b)&&(b=b.call(f))):b=a(f).attr("href");b&&(g.photo||g.photoRegex.test(b))&&(b=
k(g,b),e=c.createElement("img"),e.src=b)})):ha.hide(),l.iframe?(f=b("iframe")[0],"frameBorder"in f&&(f.frameBorder=0),"allowTransparency"in f&&(f.allowTransparency="true"),l.scrolling||(f.scrolling="no"),a(f).attr({src:l.href,name:(new Date).getTime(),"class":E+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",m).appendTo(y),M.one(ca,function(){f.src="//about:blank"}),l.fastIframe&&a(f).trigger("load")):m(),"fade"===l.transition?u.fadeTo(h,1,e):e())};"fade"===
l.transition?u.fadeTo(h,0,function(){D.position(0,f)}):D.position(h,f)}},D.next=function(){!aa&&A[1]&&(l.loop||A[I+1])&&(I=g(1),r(A[I]))},D.prev=function(){!aa&&A[1]&&(l.loop||I)&&(I=g(-1),r(A[I]))},D.close=function(){Q&&!Z&&(Z=!0,Q=!1,n(na,l.onCleanup),K.unbind("."+E),C.fadeTo(l.fadeOut||0,0),u.stop().fadeTo(l.fadeOut||0,0,function(){u.add(C).css({opacity:1,cursor:"auto"}).hide();n(ca);y.empty().remove();setTimeout(function(){Z=!1;n(ka,l.onClosed)},1)}))},D.remove=function(){u&&(u.stop(),a.colorbox.close(),
u.stop().remove(),C.remove(),Z=!1,u=null,a("."+W).removeData(P).removeClass(W),a(c).unbind("click."+E))},D.element=function(){return a(J)},D.settings=ia)})(jQuery,document,window);
!function(a){function c(a,b){if(!(1<a.originalEvent.touches.length)){a.preventDefault();var c=a.originalEvent.changedTouches[0],e=document.createEvent("MouseEvents");e.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(e)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,f=b._mouseInit,g=b._mouseDestroy;b._touchStart=function(a){!e&&this._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,this._touchMoved=
!1,c(a,"mouseover"),c(a,"mousemove"),c(a,"mousedown"))};b._touchMove=function(a){e&&(this._touchMoved=!0,c(a,"mousemove"))};b._touchEnd=function(a){e&&(c(a,"mouseup"),c(a,"mouseout"),this._touchMoved||c(a,"click"),e=!1)};b._mouseInit=function(){this.element.bind({touchstart:a.proxy(this,"_touchStart"),touchmove:a.proxy(this,"_touchMove"),touchend:a.proxy(this,"_touchEnd")});f.call(this)};b._mouseDestroy=function(){this.element.unbind({touchstart:a.proxy(this,"_touchStart"),touchmove:a.proxy(this,
"_touchMove"),touchend:a.proxy(this,"_touchEnd")});g.call(this)}}}(jQuery);
(function(a){function c(a,b,c){return a>b&&a<b+c}a.widget("mjs.nestedSortable",a.extend({},a.ui.sortable.prototype,{options:{doNotClear:!1,expandOnHover:700,isAllowed:function(a,b,c){return!0},isTree:!1,listType:"ol",maxLevels:0,protectRoot:!1,rootID:null,rtl:!1,startCollapsed:!1,tabSize:20,branchClass:"mjs-nestedSortable-branch",collapsedClass:"mjs-nestedSortable-collapsed",disableNestingClass:"mjs-nestedSortable-no-nesting",errorClass:"mjs-nestedSortable-error",expandedClass:"mjs-nestedSortable-expanded",
hoveringClass:"mjs-nestedSortable-hovering",leafClass:"mjs-nestedSortable-leaf",disabledClass:"mjs-nestedSortable-disabled"},_create:function(){this.element.data("ui-sortable",this.element.data("mjs-nestedSortable"));if(!this.element.is(this.options.listType))throw Error("nestedSortable: Please check that the listType option is set to your actual list type");this.options.isTree&&this.options.expandOnHover&&(this.options.tolerance="intersect");a.ui.sortable.prototype._create.apply(this,arguments);
if(this.options.isTree){var c=this;a(this.items).each(function(){var a=this.item;a.children(c.options.listType).length?(a.addClass(c.options.branchClass),a.hasClass(c.options.collapsedClass)||a.hasClass(c.options.expandedClass)||(c.options.startCollapsed?a.addClass(c.options.collapsedClass):a.addClass(c.options.expandedClass))):a.addClass(c.options.leafClass)})}},_destroy:function(){this.element.removeData("mjs-nestedSortable").removeData("ui-sortable");return a.ui.sortable.prototype._destroy.apply(this,
arguments)},_mouseDrag:function(c){var b,f,g,h,k=this.options,m=!1;this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-c.pageY<k.scrollSensitivity?this.scrollParent[0].scrollTop=m=this.scrollParent[0].scrollTop+k.scrollSpeed:c.pageY-this.overflowOffset.top<
k.scrollSensitivity&&(this.scrollParent[0].scrollTop=m=this.scrollParent[0].scrollTop-k.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-c.pageX<k.scrollSensitivity?this.scrollParent[0].scrollLeft=m=this.scrollParent[0].scrollLeft+k.scrollSpeed:c.pageX-this.overflowOffset.left<k.scrollSensitivity&&(this.scrollParent[0].scrollLeft=m=this.scrollParent[0].scrollLeft-k.scrollSpeed)):(c.pageY-a(document).scrollTop()<k.scrollSensitivity?m=a(document).scrollTop(a(document).scrollTop()-
k.scrollSpeed):a(window).height()-(c.pageY-a(document).scrollTop())<k.scrollSensitivity&&(m=a(document).scrollTop(a(document).scrollTop()+k.scrollSpeed)),c.pageX-a(document).scrollLeft()<k.scrollSensitivity?m=a(document).scrollLeft(a(document).scrollLeft()-k.scrollSpeed):a(window).width()-(c.pageX-a(document).scrollLeft())<k.scrollSensitivity&&(m=a(document).scrollLeft(a(document).scrollLeft()+k.scrollSpeed))),!1!==m&&a.ui.ddmanager&&!k.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c));this.positionAbs=
this._convertPositionTo("absolute");m=this.placeholder.offset().top;this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");this.hovering=this.hovering?this.hovering:null;this.mouseentered=this.mouseentered?this.mouseentered:!1;var p=this.placeholder[0].parentNode.parentNode&&a(this.placeholder[0].parentNode.parentNode).closest(".ui-sortable").length?a(this.placeholder[0].parentNode.parentNode):
null,n=this._getLevel(this.placeholder),r=this._getChildLevels(this.helper),x=document.createElement(k.listType);for(b=this.items.length-1;0<=b;b--)if(f=this.items[b],g=f.item[0],(h=this._intersectsWithPointer(f))&&f.instance===this.currentContainer){if(-1!==g.className.indexOf(k.disabledClass))if(2===h){var v=this.items[b+1];if(v&&-1!==v.item[0].className.indexOf(k.disabledClass))continue}else if(1===h&&(v=this.items[b-1])&&-1!==v.item[0].className.indexOf(k.disabledClass))continue;if(g!==this.currentItem[0]&&
this.placeholder[1===h?"next":"prev"]()[0]!==g&&!a.contains(this.placeholder[0],g)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],g):1)){this.mouseentered||(a(g).mouseenter(),this.mouseentered=!0);if(k.isTree&&a(g).hasClass(k.collapsedClass)&&k.expandOnHover&&!this.hovering){a(g).addClass(k.hoveringClass);var H=this;this.hovering=window.setTimeout(function(){a(g).removeClass(k.collapsedClass).addClass(k.expandedClass);H.refreshPositions();H._trigger("expand",c,H._uiHash())},k.expandOnHover)}this.direction=
1==h?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(f))a(g).mouseleave(),this.mouseentered=!1,a(g).removeClass(k.hoveringClass),this.hovering&&window.clearTimeout(this.hovering),this.hovering=null,!k.protectRoot||this.currentItem[0].parentNode==this.element[0]&&g.parentNode!=this.element[0]?k.protectRoot||this._rearrange(c,f):this.currentItem[0].parentNode!=this.element[0]&&g.parentNode==this.element[0]?(a(g).children(k.listType).length||(g.appendChild(x),k.isTree&&a(g).removeClass(k.leafClass).addClass(k.branchClass+
" "+k.expandedClass)),b="down"===this.direction?a(g).prev().children(k.listType):a(g).children(k.listType),void 0!==b[0]&&this._rearrange(c,null,b)):this._rearrange(c,f);else break;this._clearEmpty(g);this._trigger("change",c,this._uiHash());break}}b=this.placeholder[0].previousSibling?a(this.placeholder[0].previousSibling):null;if(null!=b)for(;"li"!=b[0].nodeName.toLowerCase()||-1!==b[0].className.indexOf(k.disabledClass)||b[0]==this.currentItem[0]||b[0]==this.helper[0];)if(b[0].previousSibling)b=
a(b[0].previousSibling);else{b=null;break}f=this.placeholder[0].nextSibling?a(this.placeholder[0].nextSibling):null;if(null!=f)for(;"li"!=f[0].nodeName.toLowerCase()||-1!==f[0].className.indexOf(k.disabledClass)||f[0]==this.currentItem[0]||f[0]==this.helper[0];)if(f[0].nextSibling)f=a(f[0].nextSibling);else{f=null;break}this.beyondMaxLevels=0;null==p||null!=f||k.protectRoot&&p[0].parentNode==this.element[0]||!(k.rtl&&this.positionAbs.left+this.helper.outerWidth()>p.offset().left+p.outerWidth()||!k.rtl&&
this.positionAbs.left<p.offset().left)?null==b||b.hasClass(k.disableNestingClass)||!(b.children(k.listType).length&&b.children(k.listType).is(":visible")||!b.children(k.listType).length)||k.protectRoot&&this.currentItem[0].parentNode==this.element[0]||!(k.rtl&&this.positionAbs.left+this.helper.outerWidth()<b.offset().left+b.outerWidth()-k.tabSize||!k.rtl&&this.positionAbs.left>b.offset().left+k.tabSize)?this._isAllowed(p,n,n+r):(this._isAllowed(b,n,n+r+1),b.children(k.listType).length||(b[0].appendChild(x),
k.isTree&&b.removeClass(k.leafClass).addClass(k.branchClass+" "+k.expandedClass)),m&&m<=b.offset().top?b.children(k.listType).prepend(this.placeholder):b.children(k.listType)[0].appendChild(this.placeholder[0]),this._trigger("change",c,this._uiHash())):(p.after(this.placeholder[0]),k.isTree&&1>p.children(k.listItem).children("li:visible:not(.ui-sortable-helper)").length&&p.removeClass(this.options.branchClass+" "+this.options.expandedClass).addClass(this.options.leafClass),this._clearEmpty(p[0]),
this._trigger("change",c,this._uiHash()));this._contactContainers(c);a.ui.ddmanager&&a.ui.ddmanager.drag(this,c);this._trigger("sort",c,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(c,b){this.beyondMaxLevels&&(this.placeholder.removeClass(this.options.errorClass),this.domPosition.prev?a(this.domPosition.prev).after(this.placeholder):a(this.domPosition.parent).prepend(this.placeholder),this._trigger("revert",c,this._uiHash()));a("."+this.options.hoveringClass).mouseleave().removeClass(this.options.hoveringClass);
this.mouseentered=!1;this.hovering&&window.clearTimeout(this.hovering);this.hovering=null;a.ui.sortable.prototype._mouseStop.apply(this,arguments);var f=a(this.domPosition.parent).parent().attr("id"),g=this.domPosition.prev?a(this.domPosition.prev).next().index():0;f==this._uiHash().item.parent().parent().attr("id")&&g==this._uiHash().item.index()||this._trigger("relocate",c,this._uiHash())},_intersectsWithSides:function(a){var b=this.options.isTree?.8:.5,f=c(this.positionAbs.top+this.offset.click.top,
a.top+a.height*b,a.height),b=c(this.positionAbs.top+this.offset.click.top,a.top-a.height*b,a.height);a=c(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var g=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return this.floating&&h?"right"==h&&a||"left"==h&&!a:g&&("down"==g&&f||"up"==g&&b)},_contactContainers:function(c){this.options.protectRoot&&this.currentItem[0].parentNode==this.element[0]||a.ui.sortable.prototype._contactContainers.apply(this,arguments)},
_clear:function(c,b){a.ui.sortable.prototype._clear.apply(this,arguments);for(var f=this.items.length-1;0<=f;f--)this._clearEmpty(this.items[f].item[0])},serialize:function(c){var b=a.extend({},this.options,c);c=this._getItemsAsjQuery(b&&b.connected);var f=[];a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/),e=(a(b.item||this).parent(b.listType).parent(b.items).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&f.push((b.key||
c[1])+"["+(b.key&&b.expression?c[1]:c[2])+"]="+(e?b.key&&b.expression?e[1]:e[2]:b.rootID))});!f.length&&b.key&&f.push(b.key+"=");return f.join("&")},toHierarchy:function(c){function b(c){var e=(a(c).attr(f.attribute||"id")||"").match(f.expression||/(.+)[-=_](.+)/);if(e){var g={id:e[2]};0<a(c).children(f.listType).children(f.items).length&&(g.children=[],a(c).children(f.listType).children(f.items).each(function(){var a=b(this);g.children.push(a)}));return g}}var f=a.extend({},this.options,c),g=[];
a(this.element).children(f.items).each(function(){var a=b(this);g.push(a)});return g},toArray:function(c){function b(c,e,k){var r=k+1,x;0<a(c).children(f.listType).children(f.items).length&&(e++,a(c).children(f.listType).children(f.items).each(function(){r=b(a(this),e,r)}),e--);x=a(c).attr(f.attribute||"id").match(f.expression||/(.+)[-=_](.+)/);c=e===g+1?f.rootID:a(c).parent(f.listType).parent(f.items).attr(f.attribute||"id").match(f.expression||/(.+)[-=_](.+)/)[2];x&&h.push({item_id:x[2],parent_id:c,
depth:e,left:k,right:r});return r+1}var f=a.extend({},this.options,c),g=f.startDepthCount||0,h=[],k=1;f.excludeRoot||(h.push({item_id:f.rootID,parent_id:null,depth:g,left:k,right:2*(a(f.items,this.element).length+1)}),k++);a(this.element).children(f.items).each(function(){k=b(this,g+1,k)});return h=h.sort(function(a,b){return a.left-b.left})},_clearEmpty:function(c){var b=this.options,f=a(c).children(b.listType);!f.length||f.children().length||b.doNotClear?b.isTree&&f.length&&f.children().length&&
f.is(":visible")?a(c).removeClass(b.leafClass).addClass(b.branchClass+" "+b.expandedClass):b.isTree&&f.length&&f.children().length&&!f.is(":visible")&&a(c).removeClass(b.leafClass).addClass(b.branchClass+" "+b.collapsedClass):(b.isTree&&a(c).removeClass(b.branchClass+" "+b.expandedClass).addClass(b.leafClass),f.remove())},_getLevel:function(a){var b=1;if(this.options.listType)for(a=a.closest(this.options.listType);a&&0<a.length&&!a.is(".ui-sortable");)b++,a=a.parent().closest(this.options.listType);
return b},_getChildLevels:function(c,b){var f=this,g=this.options,h=0;b=b||0;a(c).children(g.listType).children(g.items).each(function(a,c){h=Math.max(f._getChildLevels(c,b+1),h)});return b?h+1:h},_isAllowed:function(a,b,c){b=this.options;var g=this.placeholder.closest(".ui-sortable").nestedSortable("option","maxLevels");b.isAllowed(this.placeholder,a,this.currentItem)?g<c&&0!=g?(this.placeholder.addClass(b.errorClass),this.beyondMaxLevels=c-g):(this.placeholder.removeClass(b.errorClass),this.beyondMaxLevels=
0):(this.placeholder.addClass(b.errorClass),this.beyondMaxLevels=g<c&&0!=g?c-g:1)}}));a.mjs.nestedSortable.prototype.options=a.extend({},a.ui.sortable.prototype.options,a.mjs.nestedSortable.prototype.options)})(jQuery);
$().ready(function(){$("ol.sortable").nestedSortable({forcePlaceholderSize:!0,handle:"div.drag",helper:"clone",items:"li",opacity:.6,placeholder:"placeholder",revert:250,tabSize:25,tolerance:"pointer",maxLevels:2,protectRoot:!0,isTree:!0,expandOnHover:700,startCollapsed:!1,update:function(){sortRequest(sort_save=!0)}})});function doDel(){document.location=$("#popupDelBT").attr("delrel")}
function delRequest(a,c,e){$("#popupDelBT").attr("delrel",a);1==c?($("#popupDel > .modal-dialog > .modal-content > .modal-header > .modal-title").html("Delete Module?"),$("#popupDel > .modal-dialog > .modal-content > .modal-body").html('Please confirm you would like to delete this Module <span style="color:#e74c3c;text-decoration:underline;">'+e+"</span> ?")):($("#popupDel > .modal-dialog > .modal-content > .modal-header > .modal-title").html("Delete Lesson?"),$("#popupDel > .modal-dialog > .modal-content > .modal-body").html('Please confirm you would like to delete this Lesson <span style="color:#e74c3c;text-decoration:underline;">'+
e+"</span> ?"));$("#popupDel").modal("show")}function cancelPopup(){$("#popupDel").popup("close")}var resources_order="";
function sortRequest(a){var c=[],e=$("ol.menu").find("li");e.each(function(a){var f=[];if($(e[a]).hasClass("root_level")){var g=$(e[a]).find("li");g.each(function(c){f.push($(e[a]).attr("idn")+":"+$(g[c]).attr("idn"));link_title=$($(g[c]).find("span")[0]);var k=link_title.html().indexOf(":"),k=link_title.html().substring(k);link_title.html("Lesson "+(c+1)+" "+k)});0==g.length?(f.push($(e[a]).attr("idn")+":"),$($(e[a]).find("ol")[0]).hide()):$($(e[a]).find("ol")[0]).show();c.push(f)}});a&&$.post("/d2_teacher/saveorder/",
{data:JSON.stringify(c)},function(a,c){},"json")}function resizeWin(){$(".sub_level").each(function(a){icon=$($(this).find("div")[0]);label=$($(this).find("div")[1]);del=$($(this).find("div")[2]);dot=$($(this).find("div")[3]);label.width($(".sub_level").width()-(icon.width()+dot.width()+del.width()))})}function d(a,c){c=c||", ";$("#debuger").html($("#debuger").html()+c+a)}function dc(){$("#debuger").html("")}
$(function(){$(document).height();$(window).innerHeight();$(window).resize(function(){});sortRequest(!1)});
